(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{56:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),o=n.n(r);n(109);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,n,r,a=u(s);function s(){return c(this,s),a.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){return this.props.is_loading?o.a.createElement("div",{className:"loader text-center"},o.a.createElement("div",null,o.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),o.a.createElement("br",null),this.props.text?this.props.text:"Түр хүлээнэ үү...")):null}}])&&i(t.prototype,n),r&&i(t,r),s}(r.Component)},903:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),o=n.n(r),a=n(29);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,r,c=s(f);function f(){return i(this,f),c.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){return this.props.navlink_url?o.a.createElement(a.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},o.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?o.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},o.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):o.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},o.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&l(t.prototype,n),r&&l(t,r),f}(r.Component)},905:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(f,e);var t,n,a,u=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(s(t)),t.handleClose=t.handleClose.bind(s(t)),t.handleProceed=t.handleProceed.bind(s(t)),t}return t=f,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var n=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){n.setState({status:"closed"}),e&&e(),n.props.modalClose&&n.props.modalClose()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),a="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:n},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},o.a.createElement("div",{className:"modal-content animated",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},o.a.createElement("div",{className:"col-md-12 offset-md-12 float-right my-1"},o.a.createElement("button",{type:"button",className:"close mt-2 mr-2","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.handleClose()}},"×"))),o.a.createElement("div",{className:"d-flex justify-content-center"},"success"==this.props.model_type_icon?o.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"}):o.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"})),o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("h5",null,this.props.title)),o.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 text-justify"},this.props.text),o.a.createElement("div",{className:"modal-footer",style:{border:"none"}},o.a.createElement("button",{type:"button",onClick:function(){return e.handleClose()},className:"btn btn-primary waves-effect waves-light"},o.a.createElement("i",{className:"fa fa-times"}),this.props.actionNameBack?this.props.actionName:"  БУЦАХ"),o.a.createElement("button",{type:"button",onClick:this.handleProceed,className:"btn btn-outline-primary waves-effect waves-light"},o.a.createElement("i",{className:"fa fa-check-square-o"}),this.props.actionName?this.props.actionName:"  УСТГАХ"))))),o.a.createElement("div",{className:a}))}}])&&c(t.prototype,n),a&&c(t,a),f}(r.Component)},915:function(e,t,n){var r=n(53),o=n(929);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};r(o,a);e.exports=o.locals||{}},929:function(e,t,n){(t=n(54)(!1)).push([e.i,".base-layer-preview{\n    width: 8rem;\n    height: 4.5rem;\n    border-radius: 2px;\n}\n\n.base-layer-preview-empty{\n    width: 8rem;\n    height: 4.5rem;\n    border-radius: 2px;\n    color: #fff;\n    background-color: #ced4da;\n    text-align: center;\n    line-height: 4.5rem;\n}\n\n#map {\n     width: 100%;\n     height: 20rem;\n}\n",""]),e.exports=t},965:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Re}));var r=n(0),o=n.n(r),a=n(49),c=n(220);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={getAll:function(){var e=l({},Object(c.a)());return fetch("".concat(f,"/"),e).then(c.c)},getDetail:function(e){var t=l({},Object(c.a)());return fetch("".concat(f,"/").concat(e,"/detail/"),t).then(c.c)},create:function(e){var t=l(l({},Object(c.b)()),{},{body:JSON.stringify(e)});return fetch("".concat(f,"/үүсгэх/"),t).then(c.c)},remove:function(e){var t=l({},Object(c.b)());return fetch("".concat(f,"/").concat(e,"/устгах/"),t).then(c.c)},swap:function(e,t){var n=l(l({},Object(c.b)()),{},{body:JSON.stringify({swap_one:e,swap_two:t})});return fetch("".concat(f,"/swap/"),n).then(c.c)}},f="/back/api/суурь-давхарга";var p=n(29);n(915);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,r,a=d(c);function c(){return h(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.values,n=t.id,r=t.name,a=(t.order,t.url),c=(t.thumbnail_1x,t.thumbnail_2x),i=(t.sort_order,this.props),l=i.className,u=i.values,s=i.index;return o.a.createElement("div",{className:l},o.a.createElement("div",{className:"card shadow-sm",key:s,draggable:!0,onDrop:function(t){return e.props.onDrop(t,u,s)},onDragOver:function(t){return e.props.onDragOver(t,u,s)},onDrag:function(t){return e.props.onDrag(t,u,s)}},o.a.createElement("div",{className:"row no-gutters"},o.a.createElement("div",{className:"col-md-7"},o.a.createElement("div",{className:"card-body pb-0"},o.a.createElement("p",{className:"card-text mb-0"},o.a.createElement(p.c,{className:"",to:"/back/суурь-давхарга/".concat(n,"/дэлгэрэнгүй/")},o.a.createElement("strong",null,r))),o.a.createElement("p",{className:"card-text"},o.a.createElement("small",{className:"text-muted"},a)))),o.a.createElement("div",{className:"col-md-4"},o.a.createElement("img",{className:"card-img",src:c})))))}}])&&y(t.prototype,n),r&&y(t,r),c}(r.Component);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(c,e);var t,n,r,a=k(c);function c(){return E(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props.className;return o.a.createElement("div",{className:e},o.a.createElement("div",{className:"card shadow-sm text-center"},o.a.createElement("div",{className:"card-body"},o.a.createElement(p.c,{className:"btn gp-outline-primary btn-lg mt-3 mb-2 stretched-link",to:"/back/суурь-давхарга/үүсгэх/"},o.a.createElement("i",{className:"fa fa-plus"})," Суурь давхарга"))))}}])&&_(t.prototype,n),r&&_(t,r),c}(r.Component),R=n(56);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(c,e);var t,n,r,a=T(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={items:[],wms_list:[],is_loading:!1,firt_item:{},firt_item_idx:null},t.handleSwap=t.handleSwap.bind(U(t)),t.onDrag=t.onDrag.bind(U(t)),t.onDrop=t.onDrop.bind(U(t)),t.onDragOver=t.onDragOver.bind(U(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this;this.setState({is_loading:!0}),s.getAll().then((function(t){var n=t.items,r=t.wms_list;e.setState({items:n,wms_list:r,is_loading:!1})}))}},{key:"groupArray",value:function(e,t){return e.reduce((function(e,n,r){var o=~~(r/t);return e[o]||(e[o]=[]),e[o].push(n),e}),[])}},{key:"handleSwap",value:function(e,t){s.swap(e,t)}},{key:"onDrag",value:function(e,t,n){e.preventDefault(),this.setState({firt_item:t,firt_item_idx:n})}},{key:"onDragOver",value:function(e,t,n){e.preventDefault()}},{key:"onDrop",value:function(e,t,n){e.preventDefault();var r=this.state,o=r.items,a=r.firt_item,c=r.firt_item_idx,i=o;i[n]=a,i[c]=t,this.handleSwap(a.id,t.id),this.setState({items:i})}},{key:"render",value:function(){var e=this,t=this.state.is_loading,n=this.state.items.map((function(t,n){return o.a.createElement(w,{className:"col-sm-6",values:t,key:n,index:n,onDrag:e.onDrag,onDragOver:e.onDragOver,onDrop:e.onDrop})})).concat(o.a.createElement(P,{className:"col-sm-6",key:this.state.items.length})),r=this.groupArray(n,2);return o.a.createElement("div",{className:"container my-4"},o.a.createElement(R.a,{is_loading:t}),r.map((function(e,t){return o.a.createElement("div",{className:"row mb-4",key:t},e)})))}}])&&C(t.prototype,n),r&&C(t,r),c}(r.Component),A=n(20),z=n(33),B=Object(z.c)().shape({name:Object(z.d)().max(250,"250-с илүүгүй урттай оруулна уу!").required("оруулна уу!"),tilename:Object(z.d)().required("оруулна уу!"),url:Object(z.d)().max(500,"500-с илүүгүй урттай оруулна уу!").required("оруулна уу!")});function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(c,e);var t,n,r,a=Z(c);function c(){return Y(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.label,n=e.className,r=e.name,a=e.placeholder,c=e.is_invalid,i={};return this.props.handleChange&&(i.onBlur=this.props.handleChange),o.a.createElement("div",{className:"form-group "+(n||"")},o.a.createElement("label",{htmlFor:"id_".concat(r)},t),o.a.createElement(A.b,I({className:"form-control "+(c?"is-invalid":""),name:r,placeholder:a,id:"id_".concat(r),type:"text"},i)),o.a.createElement(A.a,{name:r,component:"div",className:"invalid-feedback"}))}}])&&q(t.prototype,n),r&&q(t,r),c}(r.Component),$=(n(218),n(895)),H=n(476),K=n(165),Q=n(124),ee=n(229);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(i,e);var t,n,a,c=ie(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={snapshot_timeout:null,snapshot:null,values:{name:"",url:"",tilename:"xyz"},wms_list:[]},t.map=null,t.handleSubmit=t.handleSubmit.bind(ue(t)),t.handleURLChangeXYZ=t.handleURLChangeXYZ.bind(ue(t)),t.handleURLChangeWMS=t.handleURLChangeWMS.bind(ue(t)),t.handleTileChange=t.handleTileChange.bind(ue(t)),t.scheduleSnapshot=t.scheduleSnapshot.bind(ue(t)),t.takeSnapshot=t.takeSnapshot.bind(ue(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.initMap()}),1e3),s.getAll().then((function(t){var n=t.wms_list;e.setState({wms_list:n})}))}},{key:"handleSubmit",value:function(e,t){var n=this,r=t.setStatus,o=t.setSubmitting,a=re(re({},e),{},{thumbnail:this.state.snapshot.match(/,(.*$)/)[1]});r("checking"),o(!0),s.create(a).then((function(e){e.success,setTimeout((function(){r("saved"),o(!1),n.props.history.push("/back/суурь-давхарга/")}),800)}))}},{key:"initMap",value:function(){this.tileImage=new Q.a({crossOrigin:"Anonymous",url:"http://mt1.google.com/vt/lyrs=s&hl=pl&x={x}&y={y}&z={z}"}),this.tileWMS=new ee.a({crossOrigin:"Anonymous",url:"",params:{FORMAT:"image/png"}}),this.tile=new K.a({source:this.tileImage}),this.map=new $.a({target:"map",layers:[this.tile],view:new H.a({projection:"EPSG:3857",center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})}),this.map.on("rendercomplete",this.scheduleSnapshot)}},{key:"takeSnapshot",value:function(){var e=256,t=144,n=document.createElement("canvas");n.width=e,n.height=t;var r=n.getContext("2d"),o=document.querySelector(".ol-layer canvas");r.drawImage(o,0,0,e,t,0,0,e,t),this.setState({snapshot:n.toDataURL()})}},{key:"scheduleSnapshot",value:function(){var e=this.state.snapshot_timeout;e&&clearTimeout(e),e=setTimeout(this.takeSnapshot,400),this.setState({snapshot_timeout:e})}},{key:"handleURLChangeWMS",value:function(e,t,n){var r=this.state.wms_list[e.target.value];r&&(this.tileWMS.updateParams({LAYERS:r.layers.join()}),this.tileWMS.setUrl(r.url),"wms"==n?(t("url",r.url),t("wms",e.target.value)):(t("url",r.cache_url),t("wmts",e.target.value)))}},{key:"handleURLChangeXYZ",value:function(e){var t=e.target.value;this.tileImage.setUrl(t)}},{key:"handleTileChange",value:function(e,t,n){n("tilename",t),"xyz"==t&&this.tile.setSource(this.tileImage),"wms"==t&&this.tile.setSource(this.tileWMS),"wmts"==t&&this.tile.setSource(this.tileWMS)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container my-4 shadow-lg p-3 mb-5 bg-white rounded"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 mb-4"},o.a.createElement("a",{href:"#",className:"btn gp-outline-primary",onClick:this.props.history.goBack},o.a.createElement("i",{className:"fa fa-angle-double-left"})," Буцах"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-4"},o.a.createElement(A.e,{enableReinitialize:!0,initialValues:this.state.values,validationSchema:B,onSubmit:this.handleSubmit},(function(t){var n=t.errors,a=t.status,c=(t.touched,t.isSubmitting),i=t.setFieldValue,l=t.handleBlur,u=t.values,s=(t.isValid,t.dirty),f=Object.keys(n).length>0;return o.a.createElement(A.d,null,o.a.createElement(G,{label:"Нэр:",name:"name",error:n.name,placeholder:"Нэр"}),o.a.createElement("div",{className:"form-check"},o.a.createElement("label",{className:"form-check-label"},o.a.createElement("input",{className:"form-check-input",type:"radio",name:"tilename",checked:"xyz"===u.tilename,onBlur:l,onChange:function(t){return e.handleTileChange(t,"xyz",i)}}),"XYZ tile image:")),o.a.createElement("div",{className:"form-check"},o.a.createElement("label",{className:"form-check-label"},o.a.createElement("input",{className:"form-check-input",type:"radio",name:"tilename",checked:"wms"===u.tilename,onBlur:l,onChange:function(t){return e.handleTileChange(t,"wms",i)}}),"WMS tile service:")),o.a.createElement("div",{className:"form-check"},o.a.createElement("label",{className:"form-check-label"},o.a.createElement("input",{className:"form-check-input",type:"radio",name:"tilename",checked:"wmts"===u.tilename,onBlur:l,onChange:function(t){return e.handleTileChange(t,"wmts",i)}}),"WMTS tile service:")),"xyz"==u.tilename&&o.a.createElement(G,{name:"url",error:n.url,placeholder:"tile image URL",handleChange:e.handleURLChangeXYZ}),"wms"==u.tilename&&o.a.createElement(r.Fragment,null,o.a.createElement(A.b,{name:"wms",as:"select",className:"form-control",onChange:function(t){return e.handleURLChangeWMS(t,i,"wms")}},o.a.createElement("option",{value:"",key:e.state.wms_list.length},"---------"),e.state.wms_list.map((function(e,t){return o.a.createElement("option",{key:t,value:t}," ",e.name," (",e.url,") ")}))),o.a.createElement(A.a,{name:"url",component:"div",className:"invalid-feedback"})),"wmts"==u.tilename&&o.a.createElement(r.Fragment,null,o.a.createElement(A.b,{name:"wmts",as:"select",className:"form-control",onChange:function(t){return e.handleURLChangeWMS(t,i,"wmts")}},o.a.createElement("option",{value:"",key:e.state.wms_list.length},"---------"),e.state.wms_list.map((function(e,t){return e.wms_or_wmts&&o.a.createElement("option",{key:t,value:t}," ",e.name," (",e.cache_url,") ")}))),o.a.createElement(A.a,{name:"url",component:"div",className:"invalid-feedback"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"id_thumbnail"}," Харагдах байдал "),o.a.createElement(A.b,{name:name,id:"id_thumbnail",type:"hidden"}),o.a.createElement("div",null,!e.state.snapshot&&o.a.createElement("div",{className:"base-layer-preview-empty"},o.a.createElement("i",{className:"fa fa-picture-o fa-lg"})),e.state.snapshot&&o.a.createElement("img",{className:"base-layer-preview",src:e.state.snapshot}))),o.a.createElement("div",null),o.a.createElement("div",{className:"span3"},f?o.a.createElement("p",null," "):"saved"==a&&!s&&o.a.createElement("p",null,"Амжилттай нэмэгдлээ"),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:c||f},c&&o.a.createElement("i",{className:"fa fa-spinner fa-spin"}),c&&o.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!c&&"Нэмэх"))))}))),o.a.createElement("div",{className:"col-md-8"},o.a.createElement("div",{id:"map"}))))}}])&&ae(t.prototype,n),a&&ae(t,a),i}(r.Component),pe=n(905),me=n(903);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(c,e);var t,n,r,a=ve(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={id:t.props.match.params.id,values:{},showModal:!1,modalTitle:null,modalText:null},t.handleDelete=t.handleDelete.bind(we(t)),t.modalTrue=t.modalTrue.bind(we(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this;s.getDetail(this.state.id).then((function(t){e.setState({values:t})}))}},{key:"modalClose",value:function(){this.setState({showModal:!1})}},{key:"handleDelete",value:function(){var e=this;s.remove(this.state.id).then((function(t){t.success,e.props.history.push("/back/суурь-давхарга/")})),this.modalClose()}},{key:"modalTrue",value:function(e){e.preventDefault(),this.setState({showModal:!0,modalTitle:"Та итгэлтэй байна уу? ",modalText:this.state.values.name})}},{key:"render",value:function(){var e=this,t=this.state.values,n=(t.id,t.name),r=t.url,a=t.thumbnail_1x,c=t.thumbnail_2x,i=this.state,l=i.showModal,u=i.modalText,s=i.modalTitle;return o.a.createElement("div",{className:"container my-4 shadow-lg p-3 mb-5 bg-white rounded"},l&&o.a.createElement(pe.a,{modalClose:function(){return e.modalClose()},modalAction:function(){return e.handleDelete()},text:u,title:s}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 mb-4"},o.a.createElement("strong",null,n)),o.a.createElement("div",{className:"col-md-12 mb-4"},o.a.createElement("small",{className:"text-muted"},r)),o.a.createElement("div",{className:"col-md-12 mb-4"},o.a.createElement("img",{src:a,srcSet:c+" 2x"})),o.a.createElement("div",{className:"col-md-12 mb-4"},o.a.createElement("a",{href:"#",onClick:this.modalTrue,className:"btn btn-danger"},"Устгах"))),o.a.createElement(me.a,ye({},this.props,{name:"Буцах"})))}}])&&be(t.prototype,n),r&&be(t,r),c}(r.Component);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ne(this,n)}}function Ne(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(i,e);var t,n,r,c=je(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c.call(this,e)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement(a.c,null,o.a.createElement(a.a,{exact:!0,path:"/back/суурь-давхарга/",component:W}),o.a.createElement(a.a,{path:"/back/суурь-давхарга/:id/дэлгэрэнгүй/",component:Ee}),o.a.createElement(a.a,{exact:!0,path:"/back/суурь-давхарга/үүсгэх/",component:fe}))}}])&&Se(t.prototype,n),r&&Se(t,r),i}(r.Component)}}]);