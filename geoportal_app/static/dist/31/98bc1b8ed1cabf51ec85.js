(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{147:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),o=n.n(a);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(f,e);var t,n,r,s=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).state={modal_status:t.props.modal_status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t}return t=f,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.modal_status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.modal_status!=e.modal_status&&(["initial","open"].includes(this.props.modal_status)&&this.handleOpen(),["closing","closed"].includes(this.props.modal_status)&&this.handleClose())}},{key:"handleOpen",value:function(){var e=this;this.setState({modal_status:"initial"}),setTimeout((function(){e.setState({modal_status:"open"})}),0)}},{key:"handleClose",value:function(e){var t=this;this.setState({modal_status:"closing"}),setTimeout((function(){t.setState({modal_status:"closed"}),e?e():(t.setState({modal_status:"closed"}),t.props.modalClose&&t.props.modalClose())}),150)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.modal_status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),r="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:n},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},o.a.createElement("div",{className:"modal-content border-0 rounded-lg ".concat(this.props.modal_bg?this.props.modal_bg:"bg-light")},o.a.createElement("div",{className:"col-md-12 offset-md-12 float-right my-1"},o.a.createElement("button",{type:"button",className:"close mt-2 mr-2","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.handleClose()}},"×"))),o.a.createElement("div",{className:"d-flex justify-content-center"},this.props.modal_icon&&o.a.createElement("i",{className:"".concat(this.props.modal_icon," fa-3x my-3 animated bounceIn text-").concat(this.props.icon_color),"aria-hidden":"true"})),o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("h5",null,this.props.title&&this.props.title)),o.a.createElement("div",{className:"modal-body text-center text-wrap ml-2 mr-2 text-justify"},this.props.text&&this.props.text),this.props.has_button?o.a.createElement("div",{className:"modal-footer border-0"},o.a.createElement("button",{type:"button",onClick:function(){return e.handleClose()},className:"btn btn-primary waves-effect waves-light"},o.a.createElement("i",{className:"fa fa-times pr-1"}),this.props.actionNameBack?this.props.actionNameBack:"БУЦАХ"),o.a.createElement("button",{type:"button",onClick:this.handleProceed,className:"btn btn-outline-primary waves-effect waves-light"},o.a.createElement("i",{className:"fa fa-check-square-o pr-1"}),this.props.actionNameDelete?this.props.actionNameDelete:"УСТГАХ")):o.a.createElement("div",{className:"modal-body mt-3"})))),o.a.createElement("div",{className:r}))}}])&&c(t.prototype,n),r&&c(t,r),f}(a.Component)},541:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),o=n.n(a),r=n(28);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,e);var t,n,a,c=u(f);function f(){return i(this,f),c.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){return this.props.navlink_url?o.a.createElement(r.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},o.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?o.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},o.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):o.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},o.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&l(t.prototype,n),a&&l(t,a),f}(a.Component)},951:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(50),c=n(28);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,n,a,r=f(i);function i(){return l(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-header"},"Дата бааз сонгох"),o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"card-body"},o.a.createElement(c.c,{to:"/back/another-base/connection/mssql/",className:"col-md-5 ml-2 text-center",activeClassName:"text-white"},"MSSQL"))),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"card-body"},o.a.createElement(c.c,{to:"/back/another-base/connection/mongo/",className:"col-md-3 ml-2 text-center",activeClassName:"text-white gp-bg-primary"},"MongoDB"))))))}}])&&s(t.prototype,n),a&&s(t,a),i}(a.Component),h=n(19),b=n(33),y=n(222);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E="/back/another-database";var O={mssql_config:{get:function(e){var t=Object(y.a)();return fetch("".concat(E,"/mssql/get/").concat(e,"/"),t).then(y.c)},save:function(e){var t=_(_({},Object(y.b)()),{},{body:JSON.stringify(e)});return fetch("".concat(E,"/mssql/save/"),t).then(y.c)},getTableNames:function(e,t){var n=_(_({},Object(y.b)()),{},{body:JSON.stringify({connection_id:e,table_id:t})});return fetch("".concat(E,"/mssql/get-all-table-names/"),n).then(y.c)},getAttributes:function(e,t){var n=_(_({},Object(y.b)()),{},{body:JSON.stringify({table_name:e,id:t})});return fetch("".concat(E,"/mssql/get-attributes/"),n).then(y.c)},saveToDbTable:function(e,t,n,a,o){var r=_(_({},Object(y.b)()),{},{body:JSON.stringify({table_name:e,field_config:t,another_database_id:n,feature_code:a,table_id:o})});return fetch("".concat(E,"/mssql/save-to-ano-db-table/"),r).then(y.c)},insertToInspire:function(e,t,n,a){var o=_(_({},Object(y.b)()),{},{body:JSON.stringify({table_name:e,field_config:t,another_database_id:n,feature_code:a})});return fetch("".concat(E,"/mssql/insert-to-inspire/"),o).then(y.c)},tableRemove:function(e,t){var n=_({},Object(y.a)());return fetch("".concat(E,"/mongo/tables/remove/").concat(e,"/").concat(t,"/"),n).then(y.c)},getProperties:function(e){var t=_({},Object(y.a)());return fetch("".concat(E,"/mssql/get-properties/").concat(e,"/"),t).then(y.c)},getThemeFeatures:function(){var e=_({},Object(y.a)());return fetch("".concat(E,"/get-inspire-shatlal/"),e).then(y.c)},refreshData:function(e){var t=_({},Object(y.a)());return fetch("".concat(E,"/mssql/refresh-mssql-datas/").concat(e,"/"),t).then(y.c)}},mongo_config:{get:function(e){var t=Object(y.a)();return fetch("".concat(E,"/mongo/get/").concat(e,"/"),t).then(y.c)},save:function(e){var t=_(_({},Object(y.b)()),{},{body:JSON.stringify(e)});return fetch("".concat(E,"/mongo/save/"),t).then(y.c)},tableSave:function(e,t,n,a,o){var r=_(_({},Object(y.b)()),{},{body:JSON.stringify({tableId:t,field_names:n,table_name:a,feature_code:o})});return fetch("".concat(E,"/mongo/tables/").concat(e,"/save/"),r).then(y.c)},tableRemove:function(e,t){var n=_({},Object(y.a)());return fetch("".concat(E,"/mongo/tables/remove/").concat(e,"/").concat(t,"/"),n).then(y.c)},tableConfig:function(e,t){var n=_({},Object(y.a)());return fetch("".concat(E,"/mongo/tables/detail/").concat(e,"/").concat(t,"/"),n).then(y.c)},tables:function(e){var t=_({},Object(y.a)());return fetch("".concat(E,"/mongo/tables/").concat(e,"/"),t).then(y.c)},fieldNames:function(e,t){var n=_({},Object(y.a)());return fetch("".concat(E,"/mongo/fields/").concat(e,"/").concat(t,"/"),n).then(y.c)}},remove:function(e){var t=_({},Object(y.a)());return fetch("".concat(E,"/remove/").concat(e,"/"),t).then(y.c)},update:function(e){var t=_({},Object(y.a)());return fetch("".concat(E,"/update/").concat(e,"/"),t).then(y.c)},cronTabSave:function(e){var t=_(_({},Object(y.b)()),{},{body:JSON.stringify(e)});return fetch("".concat(E,"/crontab-save/"),t).then(y.c)},cronTabDetail:function(e){var t=_({},Object(y.a)());return fetch("".concat(E,"/detail/").concat(e,"/"),t).then(y.c)}};var k=n(541);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=b.c().shape({name:b.d().required("хоосон байна!"),definition:b.d(),msssql_server:b.d().required("хоосон байна!"),msssql_port:b.d().required("хоосон байна!"),msssql_username:b.d().required("хоосон байна!"),msssql_password:b.d().required("хоосон байна!"),msssql_database:b.d().required("хоосон байна!")}),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,n,r,c=x(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={is_editing:!1,initial_values:{id:e.match.params.id,name:"",definition:"",msssql_server:"",msssql_port:"",msssql_username:"",msssql_password:"",msssql_database:""},values:{}},t.handleEdit=t.handleEdit.bind(R(t)),t.handleSubmit=t.handleSubmit.bind(R(t)),t.getConfigs=t.getConfigs.bind(R(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getConfigs(e)}},{key:"getConfigs",value:function(e){var t=this;O.mssql_config.get(e).then((function(e){var n=e.values;t.setState({initial_values:n,values:n})}))}},{key:"handleEdit",value:function(e){e.preventDefault();var t=this.state.is_editing;this.setState({is_editing:!t})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,o=t.setValues;a("saving"),O.mssql_config.save(e).then((function(t){if(!t.success)return Promise.reject();a("save_success"),n.setState({values:e})})).catch((function(){o(n.state.values),a("save_error")})).finally((function(){n.setState({is_editing:!1})}))}},{key:"render",value:function(){var e=this.state,t=(e.is_editing,e.initial_values);return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-header"},"Mssql Connection Тохиргоо"),o.a.createElement("div",{className:"card-body"},o.a.createElement(h.e,{initialValues:t,initialStatus:"initial",enableReinitialize:!0,validationSchema:q,onSubmit:this.handleSubmit},(function(e){var t=e.errors,n=e.status,r=(e.touched,e.isSubmitting,e.setFieldValue,e.setStatus);return e.setValues,e.handleBlur,e.values,e.isValid,e.dirty,o.a.createElement(h.d,null,o.a.createElement("fieldset",null,o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6 text-wrap"},o.a.createElement("label",{htmlFor:"id_name"},"Нэр"),o.a.createElement(h.b,{name:"name",id:"id_name",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.name)),o.a.createElement("div",{className:"form-group col-md-6 text-wrap"},o.a.createElement("label",{htmlFor:"id_definition"},"Тайлбар"),o.a.createElement(h.b,{name:"definition",id:"id_definition",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.definition)),o.a.createElement("div",{className:"form-group col-md-6 text-wrap"},o.a.createElement("label",{htmlFor:"id_msssql_server"},"Server IP"),o.a.createElement(h.b,{name:"msssql_server",id:"id_msssql_server",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.msssql_server)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_msssql_port"},"Server PORT"),o.a.createElement(h.b,{name:"msssql_port",id:"id_msssql_port",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.msssql_port)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_msssql_username"},"Username"),o.a.createElement(h.b,{name:"msssql_username",type:"text",className:"form-control",id:"id_msssql_username"}),o.a.createElement("p",{className:"text-danger"},t.msssql_username)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_msssql_password"},"Password"),o.a.createElement(h.b,{name:"msssql_password",type:"text",className:"form-control",id:"id_msssql_password"}),o.a.createElement("p",{className:"text-danger"},t.msssql_password)),o.a.createElement("div",{className:"form-group col-md-12"},o.a.createElement("label",{htmlFor:"id_msssql_database"},"Database Name"),o.a.createElement(h.b,{name:"msssql_database",id:"id_msssql_database",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.msssql_database))),o.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:"saving"==n},"saving"==n&&o.a.createElement(a.Fragment,null,o.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"})," ","Түр хүлээнэ үү..."),"saving"!=n&&"Хадгалах")),"save_success"==n&&o.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},o.a.createElement("button",{type:"button",className:"close",onClick:function(){return r("initial")}},"×"),o.a.createElement("div",{className:"alert-icon icon-part-success"},o.a.createElement("i",{className:"icon-check"})),o.a.createElement("div",{className:"alert-message"},o.a.createElement("span",null,"Амжилттай хадгаллаа!"))),"save_error"==n&&o.a.createElement("div",{className:"alert alert-icon-warning alert-dismissible",role:"alert"},o.a.createElement("button",{type:"button",className:"close",onClick:function(){return r("initial")}},"×"),o.a.createElement("div",{className:"alert-icon icon-part-warning"},o.a.createElement("i",{className:"icon-check"})),o.a.createElement("div",{className:"alert-message"},o.a.createElement("span",null,"Хадгалахад алдаа гарлаа!"))))}))),o.a.createElement(k.a,S({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&w(t.prototype,n),r&&w(t,r),i}(a.Component);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return V(this,n)}}function V(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){var t=["text","multi-text","link","boolean"];return o.a.createElement("div",null,o.a.createElement("label",{htmlFor:""},e.column_name,": "),o.a.createElement("select",{name:"",id:"",className:"form-control",onChange:function(t){e.sendValue(e.column_name,t.target.value)},defaultValue:e.default_value},o.a.createElement("option",{value:""}," -- Property Сонгоно уу -- "),e.properties.map((function(e,n){return t.includes(e.value_type_id)&&o.a.createElement("option",{key:n,value:e.property_id},e.data_type_name,":  ",e.property_name)}))),o.a.createElement("br",null))},G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,n,a,r=D(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={table_name:e.selected_value,connection_id:e.connection_id,table_id:e.match.params.table_id,fields:[],properties:[],columns:{},feature_code:e.feature_code,ano_db_table:e.ano_db_table,default_values:{}},t.getAttributes=t.getAttributes.bind(L(t)),t.getProperties=t.getProperties.bind(L(t)),t.setProperties=t.setProperties.bind(L(t)),t.getValue=t.getValue.bind(L(t)),t.saveMatch=t.saveMatch.bind(L(t)),t}return t=c,(n=[{key:"getProperties",value:function(e,t){var n=this;O.mssql_config.getProperties(e).then((function(a){var o=a.success,r=a.properties;if(o)if(Object.keys(t).length>0){var c=n.parseString(t.field_config);n.setState({default_values:c,columns:c,feature_code:e,properties:r})}else n.setState({properties:r})}))}},{key:"componentDidUpdate",value:function(e){e.selected_value!=this.props.selected_value&&(this.setState({table_name:this.props.selected_value}),this.getAttributes(this.props.selected_value)),e.feature_code!=this.props.feature_code&&(this.setState({feature_code:this.props.feature_code}),this.props.feature_code&&this.getProperties(this.props.feature_code,this.props.ano_db_table)),e.ano_db_table!=this.props.ano_db_table&&(this.setState({ano_db_table:this.props.ano_db_table}),this.props.ano_db_table&&this.setProperties(this.props.ano_db_table))}},{key:"parseString",value:function(e){return e=e.replaceAll("'",'"'),JSON.parse(e)}},{key:"setProperties",value:function(e){var t=e.feature_code;this.getProperties(t,e)}},{key:"getAttributes",value:function(e){var t=this,n=this.state.connection_id;O.mssql_config.getAttributes(e,n).then((function(e){var n=e.success,a=e.fields;n&&t.setState({fields:a})}))}},{key:"getValue",value:function(e,t){var n=this.state.columns;""==t?delete n[e]:n[e]=t,this.setState({columns:n})}},{key:"saveMatch",value:function(){var e=this;this.props.setLoading(!0);var t,n=this.state,a=n.table_name,o=n.columns,r=n.connection_id,c=n.feature_code,i=n.table_id;i&&(t=i),i||(t=null),O.mssql_config.saveToDbTable(a,o,r,c,t).then((function(t){t.success&&(e.props.setLoading(!1),e.props.setModal(null,"","Амжилттай хадгаллаа","fa fa-check-circle","success",!1,null,(function(){return e.props.history.push("/back/another-base/connection/mssql/".concat(r,"/tables/"))})))})).catch((function(){e.props.setLoading(!1),e.props.setModal(null,"","Холболтонд алдаа гарсан байна","fa fa-check-circle","danger",!1,null,null)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.fields,a=t.properties,r=t.table_id,c=t.default_values,i=(t.columns,Object.keys(c));return o.a.createElement("div",null,n.map((function(t,n){return i.length>0?i.map((function(n,r){if(n==t)return o.a.createElement(J,{key:r,column_name:t,properties:a,sendValue:e.getValue,default_value:c[n]})})):o.a.createElement(J,{key:n,column_name:t,properties:a,sendValue:e.getValue})})),n.map((function(t,n){return i.length>0&&!i.includes(t)&&o.a.createElement(J,{key:n,column_name:t,properties:a,sendValue:e.getValue})})),n.length>0&&o.a.createElement("button",{type:"button",className:"btn gp-btn-primary",onClick:this.saveMatch},r?"Засах":"Хадгалах"))}}])&&B(t.prototype,n),a&&B(t,a),c}(a.Component);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){return o.a.createElement("div",{className:"form-group col-md-".concat(e.length)},o.a.createElement("label",{htmlFor:e.name},e.label),o.a.createElement("select",{name:"",id:e.name,className:"custom-select",disabled:e.disabled,onChange:function(t){"-1"!=t.target.value?e.sendValue(e.name,e.datas[t.target.value][e.property],t.target.value):e.sendValue(e.name,[])},value:e.value},o.a.createElement("option",{value:"-1"}," -- Сонгоно уу -- "),e.datas.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e.name)}))))},Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(c,e);var t,n,a,r=z(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={datas:[],packs:[],features:[],feature_code:"",ano_db_table:e.ano_db_table,theme_idx:"",pack_idx:"",feat_idx:"",table_id:e.match.params.table_id},t.getThemeFeatures=t.getThemeFeatures.bind(K(t)),t.getValue=t.getValue.bind(K(t)),t.setSelectValue=t.setSelectValue.bind(K(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.getThemeFeatures()}},{key:"getThemeFeatures",value:function(){var e=this;O.mssql_config.getThemeFeatures().then((function(t){var n=t.datas;e.setState({datas:n})}))}},{key:"getValue",value:function(e,t,n){this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t)),"feature_code"==e&&(this.setState({feat_idx:n}),this.props.sendFeatureCode(t)),"packs"==e&&this.setState({features:[],theme_idx:n}),"features"==e&&this.setState({pack_idx:n})}},{key:"componentDidUpdate",value:function(e){e.ano_db_table!=this.props.ano_db_table&&(this.setState({ano_db_table:this.props.ano_db_table}),Object.keys(this.props.ano_db_table).length>0&&this.setSelectValue(this.props.ano_db_table))}},{key:"setSelectValue",value:function(e){var t,n,a,o=this.state.datas;o.map((function(o,r){o.children.map((function(o,c){o.children.map((function(o,i){o.code==e.feature_code&&(t=r,n=c,a=i)}))}))})),this.setState({theme_idx:t,pack_idx:n,feat_idx:a,packs:o[t].children,features:o[t].children[n].children})}},{key:"render",value:function(){var e=this.state,t=e.datas,n=e.packs,a=e.features,r=(e.feature_code,e.theme_idx),c=e.pack_idx,i=e.feat_idx,l=e.table_id;return o.a.createElement("div",{className:"form-row"},o.a.createElement(X,{name:"packs",datas:t,sendValue:this.getValue,property:"children",length:"4",label:"Theme",value:r,disabled:!!l}),o.a.createElement(X,{name:"features",datas:n,sendValue:this.getValue,property:"children",length:"4",label:"Package",value:c,disabled:!!l}),o.a.createElement(X,{name:"feature_code",datas:a,sendValue:this.getValue,property:"code",length:"4",label:"Feature",value:i,disabled:!!l}))}}])&&U(t.prototype,n),a&&U(t,a),c}(a.Component),Z=n(57),$=n(147);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return re(this,n)}}function re(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?ce(e):t}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(c,e);var t,n,a,r=oe(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={id:e.match.params.id,table_id:e.match.params.table_id,table_names:[],selected_value:"",is_loading:!0,modal_status:"closed",feature_code:"",ano_db_table:{}},t.handleChange=t.handleChange.bind(ce(t)),t.getTableNames=t.getTableNames.bind(ce(t)),t.setLoading=t.setLoading.bind(ce(t)),t.setModal=t.setModal.bind(ce(t)),t.handleModalOpen=t.handleModalOpen.bind(ce(t)),t.getFeatureCode=t.getFeatureCode.bind(ce(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.id,n=e.table_id;this.getTableNames(t,n)}},{key:"getTableNames",value:function(e,t){var n,a=this;t&&(n=t),t||(n=-1),O.mssql_config.getTableNames(e,n).then((function(e){var t=e.success,n=e.table_names,o=e.ano_db_table;t&&(Object.keys(o).length>0?a.setState({selected_value:o.table_name,table_names:n,is_loading:!1,ano_db_table:o}):a.setState({table_names:n,is_loading:!1,ano_db_table:o}))})).catch((function(){alert("Холболтонд алдаа гарсан байна"),a.setState({is_loading:!1})}))}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({selected_value:t})}},{key:"setLoading",value:function(e){this.setState({is_loading:e})}},{key:"setModal",value:function(e,t,n,a,o,r,c,i){this.setState({modalAction:e,text:t,title:n,modal_icon:a,icon_color:o,has_button:r,actionNameDelete:c,modalClose:i}),this.handleModalOpen()}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"getFeatureCode",value:function(e){this.setState({feature_code:e})}},{key:"render",value:function(){var e=this.state,t=e.table_names,n=e.selected_value,a=e.id,r=e.is_loading,c=e.feature_code,i=e.ano_db_table,l=e.table_id;return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement(Z.a,{is_loading:r,text:"Уншиж байна"}),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-12"},o.a.createElement("label",{htmlFor:"table_name"},"Хүснэгтийн нэр"),o.a.createElement("select",{className:"custom-select",id:"table_name",onChange:this.handleChange,value:n,disabled:!!l},o.a.createElement("option",{value:""}," -- Хүснэгтийн нэр сонгоно уу -- "),t.length>0&&t.map((function(e,t){return o.a.createElement("option",{key:t,value:e.table_name},e.table_name)})))),o.a.createElement("div",{className:"input-group col-md-12"},o.a.createElement(Y,te({},this.props,{ano_db_table:i,setLoading:this.setLoading,sendFeatureCode:this.getFeatureCode})))),o.a.createElement("hr",null),o.a.createElement(G,te({ano_db_table:i},this.props,{selected_value:n,connection_id:a,setLoading:this.setLoading,setModal:this.setModal,feature_code:c})),o.a.createElement($.a,{modal_status:this.state.modal_status,modalAction:this.state.modalAction,text:this.state.text,title:this.state.title,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,has_button:this.state.has_button,actionNameDelete:this.state.actionNameDelete,modalClose:this.state.modalClose}),o.a.createElement(k.a,te({},this.props,{name:"Буцах",navlink_url:"/back/another-base/connection/mssql/".concat(a,"/tables/")}))))}}])&&ne(t.prototype,n),a&&ne(t,a),c}(a.Component),se=n(895);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ye(e);if(t){var o=ye(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?be(e):t}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(c,e);var t,n,a,r=pe(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={id:e.match.params.id,"жагсаалтын_холбоос":"/back/another-database/mssql/tables/".concat(e.match.params.id,"/"),"талбарууд":[{field:"table_name",title:"Хүснэгтийн нэр"},{field:"feature_code",title:"Feature"},{field:"created_at",title:"Үүссэн"},{field:"updated_at",title:"Зассан"}],"нэмэлт_талбарууд":[{title:"Засах",text:"",icon:"fa fa-table text-success",action:function(e){return t.goLink(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}}],refresh:!0,modal_status:"closed",values:{}},t.handleRemove=t.handleRemove.bind(be(t)),t.goLink=t.goLink.bind(be(t)),t.handleModalOpen=t.handleModalOpen.bind(be(t)),t.handleRemoveAction=t.handleRemoveAction.bind(be(t)),t.modalChange=t.modalChange.bind(be(t)),t}return t=c,(n=[{key:"goLink",value:function(e){this.props.history.push("/back/another-base/connection/mssql/".concat(e.another_database_id,"/").concat(e.id,"/update/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state,n=t.values,a=t.id;O.mssql_config.tableRemove(a,n.id).then((function(t){t.success&&e.setState({refresh:!e.state.refresh})}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"handleRemoveAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-exclamation-triangle",null,"warning","Тохиргоог устгах",'Та "'.concat(e.table_name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),!0,"","",(function(e){return t.handleRemove(e)}),null)}},{key:"modalChange",value:function(e,t,n,a,o,r,c,i,l,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:o,has_button:r,actionNameBack:c,actionNameDelete:i,modalAction:l,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,a=e.хувьсах_талбарууд,r=e.нэмэлт_талбарууд,c=e.refresh,i=(e.values,e.modal_status,e.id);return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement(se.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":a,"нэмэлт_талбарууд":r,"нэмэх_товч":"/back/another-base/connection/mssql/".concat(i,"/create/"),refresh:c})))),o.a.createElement($.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,text:this.state.text,title:this.state.title,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}),o.a.createElement(k.a,fe({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&me(t.prototype,n),a&&me(t,a),c}(a.Component);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Se(e);if(t){var o=Se(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Ne(this,n)}}function Ne(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(i,e);var t,n,a,c=ke(i);function i(){return ge(this,i),c.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:"card-body"},o.a.createElement(r.c,null,o.a.createElement(r.a,{path:"/back/another-base/connection/mssql/:id/:table_id/update/",component:le}),o.a.createElement(r.a,{path:"/back/another-base/connection/mssql/:id/create/",component:le}),o.a.createElement(r.a,{path:"/back/another-base/connection/mssql/:id/tables/",component:ve}),o.a.createElement(r.a,{path:"/back/another-base/connection/mssql/:id",component:T}),o.a.createElement(r.a,{path:"/back/another-base/connection/mssql/",component:T})))}}])&&Ee(t.prototype,n),a&&Ee(t,a),i}(a.Component);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Fe(e);if(t){var o=Fe(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=b.c().shape({name:b.d().required("хоосон байна!"),definition:b.d(),mongo_engine:b.d().required("хоосон байна!"),mongo_client_host:b.d().required("хоосон байна!"),mongo_client_username:b.d(),mongo_client_password:b.d(),mongo_database:b.d().required("хоосон байна!"),mongo_port:b.d().required("хоосон байна!")}),Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(i,e);var t,n,r,c=Ce(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={is_editing:!1,initial_values:{id:e.match.params.id,name:"",definition:"",mongo_engine:"",mongo_client_host:"",mongo_client_username:"",mongo_client_password:"",mongo_database:"",mongo_port:""},values:{}},t.handleEdit=t.handleEdit.bind(Te(t)),t.handleSubmit=t.handleSubmit.bind(Te(t)),t.getConfigs=t.getConfigs.bind(Te(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getConfigs(e)}},{key:"getConfigs",value:function(e){var t=this;O.mongo_config.get(e).then((function(e){var n=e.values;t.setState({initial_values:n,values:n})}))}},{key:"handleEdit",value:function(e){e.preventDefault();var t=this.state.is_editing;this.setState({is_editing:!t})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,o=(t.setValues,t.setErrors);a("saving"),O.mongo_config.save(e).then((function(e){var t=e.success,n=e.errors;if(!t)return o(n),Promise.reject();a("save_success")})).catch((function(){a("save_error")})).finally((function(){n.setState({is_editing:!1})}))}},{key:"render",value:function(){var e=this.state,t=(e.is_editing,e.initial_values);return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-header"},"MongoDB Connection Тохиргоо"),o.a.createElement("div",{className:"card-body"},o.a.createElement(h.e,{initialValues:t,initialStatus:"initial",enableReinitialize:!0,validationSchema:Be,onSubmit:this.handleSubmit},(function(e){var t=e.errors,n=e.status,r=(e.touched,e.isSubmitting,e.setFieldValue,e.setStatus);return e.setValues,e.handleBlur,e.values,e.isValid,e.dirty,o.a.createElement(h.d,null,o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6 text-wrap"},o.a.createElement("label",{htmlFor:"id_name"},"Нэр"),o.a.createElement(h.b,{name:"name",id:"id_name",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.name)),o.a.createElement("div",{className:"form-group col-md-6 text-wrap"},o.a.createElement("label",{htmlFor:"id_definition"},"Тайлбар"),o.a.createElement(h.b,{name:"definition",id:"id_definition",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.definition)),o.a.createElement("div",{className:"form-group col-md-6 text-wrap"},o.a.createElement("label",{htmlFor:"id_mongo_engine"},"ENGINE"),o.a.createElement(h.b,{name:"mongo_engine",id:"id_mongo_engine",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.mongo_engine)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_mongo_client_host"},"Server HOST"),o.a.createElement(h.b,{name:"mongo_client_host",id:"id_mongo_client_host",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.mongo_client_host)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_mongo_client_username"},"Username"),o.a.createElement(h.b,{name:"mongo_client_username",type:"text",className:"form-control",id:"id_mongo_client_username"}),o.a.createElement("p",{className:"text-danger"},t.mongo_client_username)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_mongo_client_password"},"Password"),o.a.createElement(h.b,{name:"mongo_client_password",type:"text",className:"form-control",id:"id_mongo_client_password"}),o.a.createElement("p",{className:"text-danger"},t.mongo_client_password)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_mongo_database"},"Database Name"),o.a.createElement(h.b,{name:"mongo_database",id:"id_mongo_database",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.mongo_database)),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"id_mongo_port"},"Port"),o.a.createElement(h.b,{name:"mongo_port",id:"id_mongo_port",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.mongo_port))),o.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:"saving"==n},"saving"==n&&o.a.createElement(a.Fragment,null,o.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"})," ","Түр хүлээнэ үү..."),"saving"!=n&&"Хадгалах"),"save_success"==n&&o.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},o.a.createElement("button",{type:"button",className:"close",onClick:function(){return r("initial")}},"×"),o.a.createElement("div",{className:"alert-icon icon-part-success"},o.a.createElement("i",{className:"icon-check"})),o.a.createElement("div",{className:"alert-message"},o.a.createElement("span",null,"Амжилттай хадгаллаа!"))),"save_error"==n&&o.a.createElement("div",{className:"alert alert-icon-warning alert-dismissible",role:"alert"},o.a.createElement("button",{type:"button",className:"close",onClick:function(){return r("initial")}},"×"),o.a.createElement("div",{className:"alert-icon icon-part-warning"},o.a.createElement("i",{className:"icon-check"})),o.a.createElement("div",{className:"alert-message"},o.a.createElement("span",null,"Хадгалахад алдаа гарлаа!"))))}))),o.a.createElement(k.a,xe({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&Pe(t.prototype,n),r&&Pe(t,r),i}(a.Component);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Je(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Ge(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=He(e);if(t){var o=He(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Qe(this,n)}}function Qe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?ze(e):t}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ke=function(e){Ge(n,e);var t=Ue(n);function n(e){var a;return Le(this,n),(a=t.call(this,e)).state={},a}return Je(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.properties,r=t.data_key;return o.a.createElement("div",{className:"row mb-1 border-bottom pb-1"},o.a.createElement("div",{className:"col-2"},n.name_1),o.a.createElement("div",{className:"col-2"},n.name_2),o.a.createElement("div",{className:"col-4"},o.a.createElement("select",{value:n.real_name,className:"custom-select",id:"table_name",onChange:function(t){return e.props.handleSetField(r,t.target.value)}},o.a.createElement("option",null," -- Property Сонгоно уу -- "),a.map((function(e,t){return o.a.createElement("option",{key:t,value:e.property_id},e.data_type_name,": ",e.property_name)})))))}}]),n}(a.Component),We=function(e){Ge(n,e);var t=Ue(n);function n(e){var a;return Le(this,n),(a=t.call(this,e)).state={id:e.match.params.id,table_id:e.match.params.table_id,table_names:[],selected_value:"",feature_value:"",features:[],field_names:[],properties:[]},a.handleChange=a.handleChange.bind(ze(a)),a.getTableNames=a.getTableNames.bind(ze(a)),a.getProperties=a.getProperties.bind(ze(a)),a.handleSetField=a.handleSetField.bind(ze(a)),a.handleSave=a.handleSave.bind(ze(a)),a}return Je(n,[{key:"componentDidMount",value:function(){var e=this.state,t=e.id,n=e.table_id;n&&this.handleState(t,n),this.getTableNames(t)}},{key:"handleState",value:function(e,t){var n=this;O.mongo_config.tableConfig(e,t).then((function(e){var t=e.success,a=e.form_datas;t&&(n.setState({selected_value:a.table_name,feature_value:a.feature_code,field_names:a.field_config}),n.getProperties(a.feature_code))}))}},{key:"getTableNames",value:function(e){var t=this;O.mongo_config.tables(e).then((function(e){var n=e.success,a=e.table_names,o=e.features;n&&t.setState({table_names:a,features:o})}))}},{key:"getTableFields",value:function(e){var t=this,n=this.state.id;O.mongo_config.fieldNames(n,e).then((function(e){var n=e.success,a=e.field_names;n&&t.setState({field_names:a})}))}},{key:"handleChange",value:function(e,t){var n,a,o,r=t.target.value;this.setState((o=r,(a=e)in(n={})?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,n)),"selected_value"==e&&this.getTableFields(r),"feature_value"==e&&this.getProperties(r)}},{key:"handleSave",value:function(){var e=this,t=this.state,n=t.id,a=t.table_id,o=t.field_names,r=t.feature_value,c=t.selected_value;O.mongo_config.tableSave(n,a,o,c,r).then((function(t){t.success&&(alert("Амжилттай хадгаллаа."),e.props.history.push("/back/another-base/connection/mongo/".concat(n,"/list/")))}))}},{key:"getProperties",value:function(e){var t=this;O.mssql_config.getProperties(e).then((function(e){var n=e.success,a=e.properties;n&&t.setState({properties:a})}))}},{key:"handleSetField",value:function(e,t){var n=this.state.field_names;n[e].real_name=t,this.setState({field_names:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.table_names,a=t.selected_value,r=t.features,c=t.feature_value,i=t.field_names,l=t.properties,s=t.table_id,u=t.id;return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"form-row card-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"table_name"},"Хүснэгтийн нэр"),o.a.createElement("select",{className:"custom-select",id:"table_name",onChange:function(t){return e.handleChange("selected_value",t)},value:a,disabled:!!s},o.a.createElement("option",{value:""}," -- Хүснэгтийн нэр сонгоно уу -- "),n.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)}))),o.a.createElement("label",{htmlFor:"table_name mt-1"},"Feature нэр"),o.a.createElement("select",{className:"custom-select",id:"table_name",onChange:function(t){return e.handleChange("feature_value",t)},disabled:!!s,value:c},o.a.createElement("option",{value:""}," -- feature нэр сонгоно уу -- "),r.map((function(e,t){return o.a.createElement("option",{key:t,value:e.code},e.name)}))))),i&&c&&l&&i.length>0&&o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row mb-1 border-bottom pb-1"},o.a.createElement("div",{className:"col-2"},"Json obj нэр"),o.a.createElement("div",{className:"col-2"},"Json obj доторх Json obj нэр"),o.a.createElement("div",{className:"col-4"},"property сонгох")),i.map((function(t,n){return o.a.createElement(Ke,{data_key:n,properties:l,data:t,handleSetField:e.handleSetField})})),o.a.createElement("a",{className:"btn btn-primary text-white m-3",onClick:this.handleSave},"Хадгалах")),o.a.createElement(k.a,Ve({},this.props,{name:"Буцах",navlink_url:"/back/another-base/connection/mongo/".concat(u,"/list/")})))}}]),n}(a.Component);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ze(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=at(e);if(t){var o=at(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?nt(e):t}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(c,e);var t,n,a,r=et(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={id:e.match.params.id,"жагсаалтын_холбоос":"/back/another-database/mongo/tables/".concat(e.match.params.id,"/all/"),"талбарууд":[{field:"table_name",title:"Нэр"},{field:"feature_code",title:"Feature нэр"}],"нэмэлт_талбарууд":[{title:"Засах",text:"",icon:"fa fa-pencil-square-o text-success",action:function(e){return t.goLink(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}}],refresh:!0,modal_status:"closed",values:{}},t.handleRemove=t.handleRemove.bind(nt(t)),t.goLink=t.goLink.bind(nt(t)),t.handleModalOpen=t.handleModalOpen.bind(nt(t)),t.handleRemoveAction=t.handleRemoveAction.bind(nt(t)),t.modalChange=t.modalChange.bind(nt(t)),t}return t=c,(n=[{key:"set_active_color",value:function(e){var t="text-danger fa fa-times";return e&&(t="text-success fa fa-check"),t}},{key:"goLink",value:function(e){var t=this.state.id;this.props.history.push("/back/another-base/connection/mongo/".concat(t,"/insert/").concat(e.id,"/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state,n=t.values,a=t.id;O.mongo_config.tableRemove(a,n.id).then((function(t){t.success&&e.setState({refresh:!e.state.refresh})}))}},{key:"modalChange",value:function(e,t,n,a,o,r,c,i,l,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:o,has_button:r,actionNameBack:c,actionNameDelete:i,modalAction:l,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"handleRemoveAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-exclamation-triangle",null,"warning","Тохиргоог устгах",'Та "'.concat(e.table_name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),!0,"","",(function(e){return t.handleRemove(e)}),null)}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,a=e.хувьсах_талбарууд,r=e.нэмэлт_талбарууд,c=e.refresh,i=(e.values,e.modal_status,e.id);return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement(se.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":a,"нэмэлт_талбарууд":r,"нэмэх_товч":"/back/another-base/connection/mongo/".concat(i,"/insert/"),refresh:c})))),o.a.createElement($.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,text:this.state.text,title:this.state.title,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}),o.a.createElement(k.a,Ye({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&Ze(t.prototype,n),a&&Ze(t,a),c}(a.Component);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ft(e);if(t){var o=ft(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(i,e);var t,n,a,c=st(i);function i(){return ct(this,i),c.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:"card-body"},o.a.createElement(r.c,null,o.a.createElement(r.a,{path:"/back/another-base/connection/mongo/:id/list/",component:ot}),o.a.createElement(r.a,{path:"/back/another-base/connection/mongo/:id/insert/:table_id/",component:We}),o.a.createElement(r.a,{path:"/back/another-base/connection/mongo/:id/insert/",component:We}),o.a.createElement(r.a,{path:"/back/another-base/connection/mongo/:id",component:Me}),o.a.createElement(r.a,{path:"/back/another-base/connection/mongo/",component:Me})))}}])&&it(t.prototype,n),a&&it(t,a),i}(a.Component);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_t(e);if(t){var o=_t(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return yt(this,n)}}function yt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?vt(e):t}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(c,e);var t,n,a,r=bt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={"жагсаалтын_холбоос":"/back/another-database/all/","талбарууд":[{field:"name",title:"Нэр"},{field:"definition",title:"Тайлбар"},{field:"unique_id",title:"Таних талбар"},{field:"db_type",title:"Дата бааз төрөл"},{field:"database_updated_at",title:"Сүүлд шинэчилсэн"},{field:"created_at",title:"Үүссэн"},{field:"updated_at",title:"Зассан"}],"нэмэлт_талбарууд":[{title:"Засах",text:"",icon:"fa fa-table text-success",action:function(e){return t.tableGoLink(e)}},{title:"Засах",text:"",icon:"fa fa-pencil-square-o text-success",action:function(e){return t.goLink(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}},{title:"Бааз шинэчлэх",text:"",icon:"fa fa-car text-danger",action:function(e){return t.handleRefreshData(e)}},{title:"crontab",text:"",icon:"fa fa-circle text-danger",action:function(e){return t.crontabLink(e)}}],is_loading:!1,refresh:!0,modal_status:"closed",values:{}},t.handleRemove=t.handleRemove.bind(vt(t)),t.goLink=t.goLink.bind(vt(t)),t.tableGoLink=t.tableGoLink.bind(vt(t)),t.handleModalOpen=t.handleModalOpen.bind(vt(t)),t.handleRemoveAction=t.handleRemoveAction.bind(vt(t)),t.handleRefreshData=t.handleRefreshData.bind(vt(t)),t.crontabLink=t.crontabLink.bind(vt(t)),t.handleMssql=t.handleMssql.bind(vt(t)),t.handleMongo=t.handleMongo.bind(vt(t)),t.modalChange=t.modalChange.bind(vt(t)),t}return t=c,(n=[{key:"crontabLink",value:function(e){this.props.history.push("/back/another-base/connection/crontab/".concat(e.id,"/"))}},{key:"handleRefreshData",value:function(e){"MSSQL"==e.db_type?this.handleMssql(e):"MONGODB"==e.db_type&&this.handleMongo(e)}},{key:"handleMssql",value:function(e){var t=this;this.setState({is_loading:!0}),O.mssql_config.refreshData(e.id).then((function(e){e.success?(t.setState({is_loading:!1}),t.modalChange("fa fa-check-circle",null,"success","Амжилттай боллоо","",!1,"","",null,null)):(t.setState({is_loading:!1}),t.modalChange("fa fa-time-circle",null,"danger","Алдаа гарлаа","",!1,"","",null,null))}))}},{key:"handleMongo",value:function(e){var t=this;this.setState({is_loading:!0}),O.update(e.id).then((function(e){var n=e.success,a=e.all_count,o=e.success_count,r=e.prop_b_count;n?(t.setState({is_loading:!1}),t.modalChange("fa fa-check-circle",null,"success","Амжилттай","Нийт ".concat(a," мөр дата, insert хийгдэх мөр ").concat(r," эндээс амжилттай орсон нь ").concat(o),!1,"","",null,null)):(t.setState({is_loading:!1}),t.modalChange("fa fa-times-circle",null,"danger","Алдаа гарлаа","Мэдээлэл дутуу байна.",!1,"","",null,null))})).catch((function(){t.setState({is_loading:!1}),t.modalChange("fa fa-check-circle",null,"danger","Алдаа гарсан байна","",!1,"","",null,null)}))}},{key:"set_active_color",value:function(e){var t="text-danger fa fa-times";return e&&(t="text-success fa fa-check"),t}},{key:"tableGoLink",value:function(e){"MSSQL"==e.db_type?this.props.history.push("/back/another-base/connection/mssql/".concat(e.id,"/tables/")):"MONGODB"==e.db_type&&this.props.history.push("/back/another-base/connection/mongo/".concat(e.id,"/list/"))}},{key:"goLink",value:function(e){"MSSQL"==e.db_type?this.props.history.push("/back/another-base/connection/mssql/".concat(e.id,"/")):"MONGODB"==e.db_type&&this.props.history.push("/back/another-base/connection/mongo/".concat(e.id,"/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state.values;O.remove(t.id).then((function(t){t.success&&e.setState({refresh:!e.state.refresh},(function(){e.modalChange("fa fa-check-circle",null,"success","Амжилттай устгалаа","",!1,"","",null,null)}))}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"handleRemoveAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-exclamation-circle",null,"warning","Тохиргоог устгах",'Та "'.concat(e.name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),!0,"","",(function(e){return t.handleRemove(e)}),null)}},{key:"modalChange",value:function(e,t,n,a,o,r,c,i,l,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:o,has_button:r,actionNameBack:c,actionNameDelete:i,modalAction:l,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,a=e.хувьсах_талбарууд,r=e.нэмэлт_талбарууд,c=e.refresh,i=(e.values,e.modal_status,e.is_loading);return o.a.createElement("div",{className:"row"},o.a.createElement(Z.a,{is_loading:i,text:"Уншиж байна"}),o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement(se.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":a,"нэмэлт_талбарууд":r,"нэмэх_товч":"/back/another-base/connection/",refresh:c})))),o.a.createElement($.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,text:this.state.text,title:this.state.title,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}))}}])&&pt(t.prototype,n),a&&pt(t,a),c}(a.Component);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function kt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=xt(e);if(t){var o=xt(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return wt(this,n)}}function wt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?jt(e):t}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt=b.c().shape({minute:b.d().required("хоосон байна!"),hour:b.d().required("хоосон байна!"),day:b.d().required("хоосон байна!"),month:b.d().required("хоосон байна!"),day_week:b.d().required("хоосон байна!")}),Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(i,e);var t,n,r,c=St(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={is_editing:!1,initial_values:{id:e.match.params.id,minute:"",hour:"",day:"",month:"",day_week:"",crontab_is_active:!1},info:"",values:{}},t.handleEdit=t.handleEdit.bind(jt(t)),t.handleSubmit=t.handleSubmit.bind(jt(t)),t.getConfigs=t.getConfigs.bind(jt(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getConfigs(e)}},{key:"getConfigs",value:function(e){var t=this;O.cronTabDetail(e).then((function(e){var n=e.values;t.setState({initial_values:n,values:n})}))}},{key:"handleEdit",value:function(e){e.preventDefault();var t=this.state.is_editing;this.setState({is_editing:!t})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,o=(t.setValues,t.setErrors);a("saving"),O.cronTabSave(e).then((function(e){var t=e.success,r=e.errors,c=e.info;if(!t)return o(r),Promise.reject();a("save_success"),n.setState({info:c})})).catch((function(){a("save_error")})).finally((function(){n.setState({is_editing:!1})}))}},{key:"render",value:function(){var e=this.state,t=(e.is_editing,e.initial_values),n=e.info;return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-header"},"CronTab Тохиргоо"),o.a.createElement("div",{className:"card-body"},o.a.createElement(h.e,{initialValues:t,initialStatus:"initial",enableReinitialize:!0,validationSchema:Pt,onSubmit:this.handleSubmit},(function(e){var t=e.errors,r=e.status,c=(e.touched,e.isSubmitting,e.setFieldValue,e.setStatus);return e.setValues,e.handleBlur,e.values,e.isValid,e.dirty,o.a.createElement(h.d,null,o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-1 text-wrap"},o.a.createElement("label",{htmlFor:"id_minute"},"minute"),o.a.createElement(h.b,{name:"minute",id:"id_minute",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.minute)),o.a.createElement("div",{className:"form-group col-md-1 text-wrap"},o.a.createElement("label",{htmlFor:"id_hour"},"hour"),o.a.createElement(h.b,{name:"hour",id:"id_hour",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.hour)),o.a.createElement("div",{className:"form-group col-md-1"},o.a.createElement("label",{htmlFor:"id_day"},"day(month)"),o.a.createElement(h.b,{name:"day",id:"id_day",type:"text",className:"form-control"}),o.a.createElement("p",{className:"text-danger"},t.day)),o.a.createElement("div",{className:"form-group col-md-1"},o.a.createElement("label",{htmlFor:"id_month"},"month"),o.a.createElement(h.b,{name:"month",type:"text",className:"form-control",id:"id_month"}),o.a.createElement("p",{className:"text-danger"},t.month)),o.a.createElement("div",{className:"form-group col-md-1"},o.a.createElement("label",{htmlFor:"id_day_week"},"day(week)"),o.a.createElement(h.b,{name:"day_week",type:"text",className:"form-control",id:"id_day_week"}),o.a.createElement("p",{className:"text-danger"},t.day_week))),o.a.createElement("div",{className:"form-group col-md-1"},o.a.createElement("label",{htmlFor:"id_crontab_is_active"},"Идэвхжүүлэх"),o.a.createElement(h.b,{className:"ml-2",name:"crontab_is_active",id:"id_crontab_is_active",type:"checkbox"}),o.a.createElement("p",{className:"text-danger"},t.crontab_is_active)),o.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:"saving"==r},"saving"==r&&o.a.createElement(a.Fragment,null,o.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"})," ","Түр хүлээнэ үү..."),"saving"!=r&&"Хадгалах"),"save_success"==r&&o.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},o.a.createElement("button",{type:"button",className:"close",onClick:function(){return c("initial")}},"×"),o.a.createElement("div",{className:"alert-icon icon-part-success"},o.a.createElement("i",{className:"icon-check"})),o.a.createElement("div",{className:"alert-message"},o.a.createElement("span",null,"Амжилттай хадгаллаа!"))),"save_error"==r&&o.a.createElement("div",{className:"alert alert-icon-warning alert-dismissible",role:"alert"},o.a.createElement("button",{type:"button",className:"close",onClick:function(){return c("initial")}},"×"),o.a.createElement("div",{className:"alert-icon icon-part-warning"},o.a.createElement("i",{className:"icon-check"})),o.a.createElement("div",{className:"alert-message"},o.a.createElement("span",null,"Хадгалахад алдаа гарлаа!"))),n&&o.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},o.a.createElement("button",{type:"button",className:"close",onClick:function(){return c("initial")}},"×"),o.a.createElement("div",{className:"alert-icon icon-part-success"},o.a.createElement("i",{className:"icon-check"})),o.a.createElement("div",{className:"alert-message"},o.a.createElement("span",null,n))))}))),o.a.createElement(k.a,Ot({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&kt(t.prototype,n),r&&kt(t,r),i}(a.Component);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Mt(e);if(t){var o=Mt(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Bt(this,n)}}function Bt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(i,e);var t,n,a,c=Ft(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c.call(this,e)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:""},o.a.createElement(r.c,null,o.a.createElement(r.a,{path:"/back/another-base/connection/crontab/:id/",component:Rt}),o.a.createElement(r.a,{path:"/back/another-base/connection/mongo/",component:mt}),o.a.createElement(r.a,{path:"/back/another-base/connection/mssql/",component:we}),o.a.createElement(r.a,{path:"/back/another-base/connection/",component:p}),o.a.createElement(r.a,{exact:!0,path:"/back/another-base/",component:gt})))}}])&&qt(t.prototype,n),a&&qt(t,a),i}(a.Component);t.default=Dt}}]);