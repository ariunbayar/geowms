(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{164:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,o,c=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(m(t)),t.handleProceed=t.handleProceed.bind(m(t)),t.handleClose=t.handleClose.bind(m(t)),t}return t=u,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var n=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){n.setState({status:"closed"}),e&&e()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n,onClick:function(){return e.handleProceed()}},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},r.a.createElement("div",{className:"d-flex justify-content-center"},"danger"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"primary"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn gp-text-primary","aria-hidden":"true"}):"warning"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center my-1"},r.a.createElement("h6",{className:"text-dark"},this.props.title)),r.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 my-3 text-justify"},r.a.createElement("a",{className:"text-dark"},this.props.text))))),r.a.createElement("div",{className:o}))}}])&&i(t.prototype,n),o&&i(t,o),u}(a.Component)},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,o,c=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(m(t)),t.handleClose=t.handleClose.bind(m(t)),t.handleProceed=t.handleProceed.bind(m(t)),t}return t=u,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose())}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e){var t=this;this.setState({status:"closing"}),setTimeout((function(){t.setState({status:"closed"}),e?e():(t.setState({status:"closed"}),t.props.modalClose&&t.props.modalClose())}),150)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},r.a.createElement("div",{className:"col-md-12 offset-md-12 float-right my-1"},r.a.createElement("button",{type:"button",className:"close mt-2 mr-2","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.handleClose()}},"×"))),r.a.createElement("div",{className:"d-flex justify-content-center"},"success"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"warning"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,this.props.title)),r.a.createElement("div",{className:"modal-body text-center text-wrap ml-2 mr-2 text-justify"},this.props.text),r.a.createElement("div",{className:"modal-footer",style:{border:"none"}},r.a.createElement("button",{type:"button",onClick:function(){return e.handleClose()},className:"btn btn-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-times"}),this.props.actionNameBack?this.props.actionNameBack:"  БУЦАХ"),r.a.createElement("button",{type:"button",onClick:this.handleProceed,className:"btn btn-outline-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-check-square-o"}),this.props.actionNameDelete?this.props.actionNameDelete:"  УСТГАХ"))))),r.a.createElement("div",{className:o}))}}])&&i(t.prototype,n),o&&i(t,o),u}(a.Component)},892:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,o,c=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(m(t)),t.handleProceed=t.handleProceed.bind(m(t)),t.handleClose=t.handleClose.bind(m(t)),t}return t=u,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var n=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){n.setState({status:"closed"}),e&&e()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n,onClick:function(){return e.handleProceed()}},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},r.a.createElement("div",{className:"d-flex justify-content-center"},"danger"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"primary"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn gp-text-primary","aria-hidden":"true"}):"warning"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center my-1"},r.a.createElement("h6",{className:"text-dark"},this.props.title)),r.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 my-3 text-justify"},r.a.createElement("a",{className:"text-dark"},this.props.text))))),r.a.createElement("div",{className:o}))}}])&&i(t.prototype,n),o&&i(t,o),u}(a.Component)},893:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n.n(a),o=n(32);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,n,a,i=m(u);function u(){return l(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.props.navlink_url?r.a.createElement(o.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},r.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?r.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},r.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):r.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},r.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&s(t.prototype,n),a&&s(t,a),u}(a.Component)},896:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(19);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={createEmployee:function(e,t,n,r){var i=o(o({},Object(a.b)()),{},{body:JSON.stringify({user_detail:e,emp_role_id:t,roles:n,address:r})});return fetch("".concat(s,"/create/"),i).then(a.c)},getRole:function(e){var t=o({},Object(a.a)());return fetch("".concat("/gov/api/role","/").concat(e,"/detail/"),t).then(a.c)},getRoleList:function(){var e=o({},Object(a.a)());return fetch("".concat("/gov/api/role","/"),e).then(a.c)},getDetailEmployee:function(e){var t=o({},Object(a.a)());return fetch("".concat(s,"/").concat(e,"/detail/"),t).then(a.c)},deleteEmployee:function(e){var t=o({},Object(a.a)());return fetch("".concat(s,"/").concat(e,"/delete/"),t).then(a.c)},updateEmployee:function(e,t,n,r,i,l,c,m,u,p,d,f,h,_){var y=o(o({},Object(a.b)()),{},{body:JSON.stringify({username:e,first_name:t,last_name:n,position:r,email:i,gender:l,register:c,phone_number:m,is_admin:u,role_id:p,id:d,add_perm:f,remove_perm:h,address:_})});return fetch("".concat(s,"/").concat(d,"/update/"),y).then(a.c)},empTokenRefresh:function(e){var t=o({},Object(a.a)());return fetch("".concat(s,"/").concat(e,"/refresh-token/"),t).then(a.c)},sendMail:function(e){var t=o(o({},Object(a.b)()),{},{body:JSON.stringify({username:e})});return fetch("".concat(s,"/send-mail/"),t).then(a.c)},getGeom:function(e){var t=o(o({},Object(a.b)()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/get-geom/",t).then(a.c)},getAddresses:function(){var e=o({},Object(a.a)());return fetch("".concat(s,"/addresses/"),e).then(a.c)},formOptions:function(){var e=o({},Object(a.a)());return fetch("/api/aimag/",e).then(a.c)},getEmpInfo:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({is_erguul:t})});return fetch("/back/api/org/".concat(e,"/emp-info/"),n).then(a.c)},getErguulegFields:function(e){var t=o({},Object(a.a)());return fetch("/back/api/org/".concat(e,"/erguuleg-fields/"),t).then(a.c)},saveErguul:function(e,t,n,r,i){var l=o(o({},Object(a.b)()),{},{body:JSON.stringify({values:e,emp_id:t,point:n,photo:r,erguul_id:i})});return fetch("/back/api/org/save-erguul/",l).then(a.c)},getFieldTailbar:function(){var e=o({},Object(a.a)());return fetch("".concat(s,"/get-field-tailbar/"),e).then(a.c)},saveTailbar:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({values:e,id:t})});return fetch("".concat(s,"/save-field-tailbar/"),n).then(a.c)},getErguul:function(){var e=o({},Object(a.a)());return fetch("".concat(s,"/get-erguul/"),e).then(a.c)}},s="/gov/api/role/employee"},900:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(28),r=Object(a.c)().shape({username:Object(a.d)().max(150,"150-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),first_name:Object(a.d)().max(30,"30-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),last_name:Object(a.d)().max(150,"150-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),position:Object(a.d)().max(250,"250-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),email:Object(a.d)().email((function(e){e.value;return"Зөв e-mail хаяг оруулна уу."})).max(254,"254-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),gender:Object(a.d)().max(100,"100-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),register:Object(a.d)().matches(/[аАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОөӨпПрРсСтТуУүҮфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяЯ]{2}[0-9]{8}/,(function(e){var t=e.value;return"".concat(t," Регистер дугаараа зөв оруулна уу.")})).max(10,"10-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу.")})},944:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ze}));var a=n(0),r=n.n(a),o=n(50),i=n(894);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,a,o=m(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={refresh:!1,"жагсаалтын_холбоос":"/gov/api/role/employee/","нэмэх_товч":"/gov/perm/employee/add/",custom_query:{},"талбарууд":[{field:"user__first_name",title:"Нэр",has_action:!0},{field:"user__email",title:"Цахим шуудан"},{field:"position",title:"Албан тушаал"},{field:"role_name",title:"Role",is_sort:!0},{field:"is_admin",title:"Админ",has_action:!0,is_center:!0}],"хувьсах_талбарууд":[{field:"user__first_name",action:function(e){return t.go_link(e)}},{field:"user__email",text:""},{field:"position",text:""},{field:"is_admin",action:function(e){return t.set_icon(e)},action_type:!0,is_center:!0}]},t}return t=l,(n=[{key:"set_icon",value:function(e){return e?"fa fa-check-circle-o text-success fa-lg":"fa fa-times-circle-o text-danger fa-lg"}},{key:"go_link",value:function(e){this.props.history.push("/gov/perm/employee/".concat(e.id,"/detail/"))}},{key:"render",value:function(){var e=this.state,t=e.refresh,n=e.талбарууд,a=e.жагсаалтын_холбоос,o=e.хувьсах_талбарууд,l=e.custom_query,s=e.нэмэх_товч,c=e.нэмэлт_талбарууд;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(i.a,{refresh:t,color:"bg-dark","талбарууд":n,"жагсаалтын_холбоос":a,per_page:20,"уншиж_байх_үед_зурвас":"Хүсэлтүүд уншиж байна","хувьсах_талбарууд":o,"нэмэх_товч":s,custom_query:l,"нэмэлт_талбарууд":c}))))}}])&&s(t.prototype,n),a&&s(t,a),l}(a.Component),f=n(18),h=n(896),_=n(164),y=n(899),b=n(900),v=n(117),g=n(886),E=n(470),N=n(286),O=n(887),k=n(284),w=n(119),S=n(2),j=n(139),x=n(891),P=n(240),C=n(216),R=n(16),F=n(69),D=n(885);n(189);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return V(this,n)}}function V(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(i,e);var t,n,a,o=I(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={projection_data:"EPSG:4326",projection_display:"EPSG:3857",coordinate_clicked:[],features:[]},t.marker=t.initMarker(),t.loadMap=t.loadMap.bind(J(t)),t.handleMapClick=t.handleMapClick.bind(J(t)),t.setFeatures=t.setFeatures.bind(J(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(J(t)),t}return t=i,(n=[{key:"initMarker",value:function(){var e=new j.c({image:new x.a({anchor:[.5,86],anchorXUnits:"fraction",anchorYUnits:"pixels",scale:.4,src:"/static/assets/image/marker.png"})}),t=new F.a([0,0]),n=new v.a({geometry:t});return n.setStyle(e),{feature:n,point:t}}},{key:"componentDidMount",value:function(){this.loadMap(),0!==this.props.map_coordinate.length&&this.marker.point.setCoordinates(this.props.map_coordinate)}},{key:"componentDidUpdate",value:function(e,t){e.feature!==this.props.feature&&this.props.feature!=={}&&(this.setFeatures(this.props.feature),0!==Object.keys(this.props.point).length&&0==this.props.map_coordinate.length&&this.setMarker(this.props.point))}},{key:"removeFeatureFromSource",value:function(e){var t=this.vector_layer.getSource(),n=t.getFeatures();if(null!=n&&n.length>0)for(var a=0;a<n.length;a++)if(n[a].getProperties().id==e){t.removeFeature(n[a]);break}}},{key:"fromLonLatToMapCoord",value:function(e){return Object(S.d)(e)}},{key:"setMarker",value:function(e){var t=JSON.parse(e);if(t){var n=t.coordinates,a=this.fromLonLatToMapCoord(n);this.marker.point.setCoordinates(a),this.props.sendPointCoordinate([n[1],n[0]],a)}}},{key:"setFeatures",value:function(e){var t="aimag_sum";this.removeFeatureFromSource(t),(e=(new D.a).readFeatures(e,{dataProjection:this.state.projection_data,featureProjection:this.state.projection_display}))[0].setProperties({id:t}),this.vector_layer.getSource().addFeature(e[0]),this.map.getView().fit(e[0].getGeometry(),{padding:[100,100,100,100],duration:2e3})}},{key:"loadMap",value:function(){var e=new k.a({source:new N.a({features:[this.marker.feature]})});this.marker_layer=e;var t=new k.a({source:new N.a({}),style:new j.c({stroke:new P.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new C.a({color:"rgba(100, 255, 0, 0.3)"})})});this.vector_layer=t;var n=new g.a({layers:[new w.a({source:new O.a}),t,e],target:"map",view:new E.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});n.on("click",this.handleMapClick),this.map=n}},{key:"handleMapClick",value:function(e){var t=e.coordinate;this.marker.point.setCoordinates(t);var n=e.map.getView().getProjection(),a=Object(S.p)(e.coordinate,n,this.state.projection_data),r=Object(R.f)(a,"{y},{x}",6);this.props.sendPointCoordinate(r,t),this.setState({coordinate_clicked:r})}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",style:{height:"calc( 50vh - 85px - 15px)"},className:"".concat(this.props.class)})}}])&&M(t.prototype,n),a&&M(t,a),i}(a.Component),B=n(893);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=$(e);if(t){var r=$(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(l,e);var t,n,o,i=Q(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).perms=[],t.role=[],t.remove_perms=[],t.state={form_values:{username:"",last_name:"",first_name:"",position:"",email:"",gender:"Эрэгтэй",register:"",phone_number:"",is_admin:!1,choose_role:""},role_list:[],emp_role_id:null,roles:{},modal_alert_status:"closed",model_type_icon:"",title:"",prefix:"/gov/perm/employee/",is_inspire_role:!1,is_inspire_role_null:!0,aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",feature:{},description:"",point_coordinate:[],point:{},street:"",apartment:"",door_number:"",map_coordinate:[],is_marker:!0,is_address_map:!0},t.handleSubmit=t.handleSubmit.bind(Z(t)),t.modalClose=t.modalClose.bind(Z(t)),t.getRolesForOption=t.getRolesForOption.bind(Z(t)),t.getRole=t.getRole.bind(Z(t)),t.getValue=t.getValue.bind(Z(t)),t.getFeildValues=t.getFeildValues.bind(Z(t)),t.handleChange=t.handleChange.bind(Z(t)),t.getPoint=t.getPoint.bind(Z(t)),t.getGeomFromJson=t.getGeomFromJson.bind(Z(t)),t.getGeom=t.getGeom.bind(Z(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.getRolesForOption(),this.getFeildValues()}},{key:"getRolesForOption",value:function(){var e=this;h.a.getRoleList().then((function(t){var n=t.success,a=t.roles;n&&e.setState({role_list:a})}))}},{key:"getRole",value:function(e){var t=this;this.setState({emp_role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?h.a.getRole(e).then((function(e){var n=e.success,a=(e.role_name,e.role_id,e.role_description,e.roles);n&&t.setState({roles:a,is_inspire_role:!0})})):new Promise((function(e,n){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"getValue",value:function(e,t,n,a,r,o,i,l){var s=this;if(!e&&this.perms.length>0&&this.perms.map((function(e,r){e.feature_id==a&&e.property_id==n&&e.perm_kind==t&&s.perms.splice(r,1)})),e){var c={feature_id:a,property_id:n,perm_kind:t,gov_perm_ins_id:r,emp_role_ins_id:l||null};this.perms.push(c)}}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=t.setSubmitting,o=t.setErrors,i=this.state.emp_role_id,l=this.state,s={street:l.street,apartment:l.apartment,door_number:l.door_number,level_1:l.aimag_name,level_2:l.sum_name,level_3:l.horoo_name,point_coordinate:l.point_coordinate};h.a.createEmployee(e,i,this.perms,s).then((function(e){var t=e.success,i=e.errors,l=e.info;t?(a("saved"),n.setState({model_type_icon:"success",modal_alert_status:"open",title:l})):i&&o(i),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)}))}},{key:"modalClose",value:function(){this.props.history.push(this.state.prefix)}},{key:"getFeildValues",value:function(e,t,n){var a,r,o=this,i=Object();h.a.formOptions().then((function(l){var s=l.success,c=l.info;s&&(e&&(i.aimag_id=o.getGeomFromJson(e,c),a=c[i.aimag_id].geo_id,i.aimag_geo_id=a,i.aimag_name=e,r=c[i.aimag_id].children,i.sum=r),t&&(i.sum_id=o.getGeomFromJson(t,r),a=r[i.sum_id].geo_id,i.sum_geo_id=a,r=r[i.sum_id].children,i.horoo=r,i.sum_name=t),n&&(i.horoo_id=o.getGeomFromJson(n,r),a=r[i.horoo_id].geo_id,i.horoo_geo_id=a,i.horoo_name=n),o.getGeom(a),o.setState(X({aimag:c},i)))}))}},{key:"getGeom",value:function(e){var t=this;h.a.getGeom(e).then((function(n){var a=n.feature;a&&t.setState({feature:a,last_geo_id:e})}))}},{key:"getPoint",value:function(e,t){var n=e;"string"==typeof e&&(n=e.split(","));var a=[n[1],n[0]];this.setState({point_coordinate:a,map_coordinate:t})}},{key:"handleChange",value:function(e,t,n,a,r){var o,i=t+"_id",l=t+"_geo_id",s=t+"_name",c=e.target.value,m=Object();if("-1"!==c){var u=this.state[t][c];this.setState(Y({},n,u.children)),n&&(m[n]=u.children),o=u.geo_id,a.map((function(e,t){var n=e+"_geo_id",a=e+"_name";m[e+"_id"]=-1,m[n]="",m[a]=""})),m[l]=o,m[s]=u.name,this.getGeom(o)}else{if(a.length>0&&a.map((function(e,t){var n=e+"_id",a=e+"_geo_id",r=e+"_name";m[e]=[],m[n]=-1,m[a]="",m[r]=""})),"mongol"!==r){var p=r+"_id",d=this.state[p];o=this.state[r][d].geo_id}else o="au_496";m[l]=o,this.getGeom(o)}this.setState(X(Y({},i,c),m))}},{key:"getGeomFromJson",value:function(e,t){var n;return t.map((function(t,a){t.name==e&&(n=a)})),n}},{key:"render",value:function(){var e=this,t=this.state,n=t.form_values,o=t.roles,i=t.role_list,l=(t.emp_role_id,t.prefix),s=t.is_inspire_role,c=t.is_inspire_role_null,m=this.state,u=m.aimag,p=m.sum,d=m.horoo,h=m.aimag_id,v=m.sum_id,g=m.horoo_id,E=m.feature,N=m.street,O=m.apartment,k=m.door_number,w=m.point,S=m.is_address_map,j=this.props.org_roles;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(f.e,{enableReinitialize:!0,initialValues:n,validationSchema:b.a,onSubmit:this.handleSubmit},(function(t){var n=t.errors,l=t.isSubmitting;return Object.keys(n).length,r.a.createElement(f.d,{className:"col-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"username"},"Нэвтрэх нэр:"),r.a.createElement(f.b,{className:"form-control "+(n.username?"is-invalid":""),name:"username",id:"id_username",type:"text",placeholder:"Нэвтрэх нэр"}),r.a.createElement(f.a,{name:"username",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"first_name"},"Овог:"),r.a.createElement(f.b,{className:"form-control "+(n.first_name?"is-invalid":""),name:"first_name",id:"id_first_name",type:"text",placeholder:"Овог"}),r.a.createElement(f.a,{name:"first_name",component:"div",className:"text-danger"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"last_name"},"Нэр:"),r.a.createElement(f.b,{className:"form-control "+(n.last_name?"is-invalid":""),name:"last_name",id:"id_last_name",type:"text",placeholder:"Нэр"}),r.a.createElement(f.a,{name:"last_name",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"position"},"Албан тушаал:"),r.a.createElement(f.b,{className:"form-control "+(n.position?"is-invalid":""),name:"position",id:"id_position",type:"text",placeholder:"Албан тушаал"}),r.a.createElement(f.a,{name:"position",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"email"},"Цахим хаяг"),r.a.createElement(f.b,{className:"form-control "+(n.email?"is-invalid":""),name:"email",id:"id_email",type:"text",placeholder:"Цахим хаяг"}),r.a.createElement(f.a,{name:"email",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"gender"},"Хүйс:"),r.a.createElement(a.Fragment,null,r.a.createElement(f.b,Y({name:"gender",as:"select",className:"form-control"},"className","form-control "+(n.gender?"is-invalid":"")),r.a.createElement("option",null,"Эрэгтэй"),r.a.createElement("option",null,"Эмэгтэй")),r.a.createElement(f.a,{name:"gender",component:"div",className:"text-dange"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"register"},"Регистер:"),r.a.createElement(f.b,{className:"form-control "+(n.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(f.a,{name:"register",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"choose_role"},"Role: "),r.a.createElement("select",{className:"form-control "+(n.choose_role?"is-invalid":""),id:"choose_role",name:"choose_role",onChange:function(t){return e.getRole(t.target.value)}},r.a.createElement("option",{value:""},"--- Role сонгоно уу ---"),i.length>0&&i.map((function(e,t){return r.a.createElement("option",{key:t,value:e.role_id},e.role_name)}))),r.a.createElement(f.a,{name:"choose_role",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"phone_number"},"Утасны дугаар:"),r.a.createElement(f.b,{className:"form-control "+(n.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(f.a,{name:"phone_number",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"is_admin"},"Байгууллагын админ"),r.a.createElement(f.b,{className:"ml-2",name:"is_admin",id:"id_is_admin",type:"checkbox"}),r.a.createElement(f.a,{name:"is_admin",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("button",{className:"btn btn-primary btn-block mb-2",type:"button",onClick:function(){S&&e.state.last_geo_id&&e.getGeom(e.state.last_geo_id),e.setState({is_address_map:!S})}},S?"Гэрийн хаяг оруулах":"Role сонгох"))),r.a.createElement("div",null,S&&(s||c)?r.a.createElement(y.default,{action_type:"editable",is_employee:!0,getValue:e.getValue,dontDid:!0,org_roles:j,role:o,is_inspire_role_null:c,editable_is_check:e.perms}):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-row p-1"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"form-control "+(n.level_1?"is-invalid":""),"aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:h},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),u.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"form-control "+(n.level_2?"is-invalid":""),onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:v},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),p.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"form-control "+(n.level_3?"is-invalid":""),onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:g},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),d.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"street"},"Гудамж:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"street",className:"form-control "+(n.street?"is-invalid":""),onChange:function(t){return e.setState({street:t.target.value})},value:N,placeholder:"Гудамжны нэрийг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"гудамж")))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"apartment"},"Байр:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"apartment",className:"form-control "+(n.apartment?"is-invalid":""),onChange:function(t){return e.setState({apartment:t.target.value})},value:O,placeholder:"Байрны дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"байр")))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"door_number"},"Хаалганы дугаар:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"door_number",className:"form-control "+(n.door_number?"is-invalid":""),onChange:function(t){return e.setState({door_number:t.target.value})},value:k,placeholder:"Хаалганы дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"тоот"))))),r.a.createElement(q,{feature:E,sendPointCoordinate:e.getPoint,map_coordinate:e.state.map_coordinate,point:w,is_marker:e.state.is_address_map,class:n.point?"border border-danger":""}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary waves-effect waves-light m-1",disabled:l},l&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),l&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!l&&"Хадгалах"))))})))),r.a.createElement(_.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:this.state.title,model_type_icon:this.state.model_type_icon}),r.a.createElement(B.a,U({},this.props,{name:"Буцах",navlink_url:l})))}}])&&H(t.prototype,n),o&&H(t,o),l}(a.Component),te=n(241),ne=n(134),ae=n(53);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=fe(e);if(t){var r=fe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(l,e);var t,n,o,i=ue(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).too=0,t.perms=[],t.role=[],t.remove_perms=[],t.emp_perms=[],t.state={form_values:{username:"",last_name:"",first_name:"",position:"",email:"",gender:"",register:"",phone_number:"",is_admin:!1},modal_status:"closed",is_loading:!0,roles:{},perms:{},role_id:"",old_role_id:null,is_inspire_role:!1,is_inspire_role_null:!1,prefix:"/gov/perm/employee/",id:t.props.match.params.id,role_list:[],modal_alert_status:"closed",timer:null,model_type_icon:"",title:"",is_address_map:!1,aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",feature:{},description:"",point_coordinate:[],point:{},street:"",apartment:"",door_number:"",map_coordinate:[],is_marker:!0},t.handleSubmit=t.handleSubmit.bind(de(t)),t.getRolesForOption=t.getRolesForOption.bind(de(t)),t.getDetail=t.getDetail.bind(de(t)),t.getRole=t.getRole.bind(de(t)),t.getValue=t.getValue.bind(de(t)),t.removeItemFromArray=t.removeItemFromArray.bind(de(t)),t.removeItemFromRemoveRoles=t.removeItemFromRemoveRoles.bind(de(t)),t.checkRoleAndPerm=t.checkRoleAndPerm.bind(de(t)),t.modalClose=t.modalClose.bind(de(t)),t.modalCloseTime=t.modalCloseTime.bind(de(t)),t.handleModalOpen=t.handleModalOpen.bind(de(t)),t.handleModalClose=t.handleModalClose.bind(de(t)),t.addNotif=t.addNotif.bind(de(t)),t.handleSendMail=t.handleSendMail.bind(de(t)),t.getFeildValues=t.getFeildValues.bind(de(t)),t.handleChange=t.handleChange.bind(de(t)),t.getPoint=t.getPoint.bind(de(t)),t.getGeomFromJson=t.getGeomFromJson.bind(de(t)),t.getGeom=t.getGeom.bind(de(t)),t.refreshMap=t.refreshMap.bind(de(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.perms=[],this.role=[],this.remove_perms=[],this.emp_perms=[],this.getDetail(),this.getFeildValues()}},{key:"getDetail",value:function(){var e=this,t=this.state.id;h.a.getDetailEmployee(t).then((function(t){var n=t.success,a=t.employee_detail,r=t.role_id,o=t.perms;n&&(e.getFeildValues(a.level_1,a.level_2,a.level_3),e.setState({perms:o,role_id:r,old_role_id:r,is_loading:!1,form_values:{username:a.username,last_name:a.last_name,first_name:a.first_name,position:a.position,email:a.email,gender:a.gender,register:a.register,phone_number:a.phone_number,is_admin:a.is_admin},point:a.point,street:a.street,apartment:a.apartment,door_number:a.door_number}),e.getRolesForOption())}))}},{key:"getRolesForOption",value:function(){var e=this;h.a.getRoleList().then((function(t){var n=t.success,a=t.roles;n&&(e.setState({role_list:a}),e.getRole(e.state.role_id))}))}},{key:"getRole",value:function(e){var t=this;this.perms=[],this.emp_perms=[],this.setState({role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?h.a.getRole(e).then((function(e){var n=e.success,a=e.roles;n&&(t.role=[],t.setState({roles:a,is_inspire_role:!0}))})):new Promise((function(e,n){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"getValue",value:function(e,t,n,a,r,o,i,l,s){if(e||null!=o||this.removeItemFromArray(this.role,a,n,t,l,s),!e&&this.perms.length>0&&this.removeItemFromArray(this.perms,a,n,t),e&&!o&&!s||e&&("role"==o||"perms"==o)){var c={feature_id:a,property_id:n,perm_kind:t,gov_perm_ins_id:r,emp_role_ins_id:l||null};"role"==o&&this.role.push(c),"perms"==o?this.emp_perms.push(c):this.perms.push(c)}s&&e&&null==o&&this.remove_perms.length>0&&this.removeItemFromRemoveRoles(l)}},{key:"removeItemFromArray",value:function(e,t,n,a,r,o){o?this.remove_perms.push(r):e.map((function(r,o){r.feature_id==t&&r.property_id==n&&r.perm_kind==a&&e.splice(o,1)}))}},{key:"removeItemFromRemoveRoles",value:function(e){var t=this;this.remove_perms.map((function(n,a){n==e&&t.remove_perms.splice(a,1)}))}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=t.setSubmitting,o=t.setErrors,i=e.username,l=e.first_name,s=e.last_name,c=e.position,m=e.email,u=e.gender,p=e.register,d=e.phone_number,f=e.is_admin,_=this.state,y=_.id,b=_.role_id,v=this.state,g={street:v.street,apartment:v.apartment,door_number:v.door_number,level_1:v.aimag_name,level_2:v.sum_name,level_3:v.horoo_name,point:v.point_coordinate};this.checkRoleAndPerm(),h.a.updateEmployee(i,l,s,c,m,u,p,d,f,b,y,this.perms,this.remove_perms,g).then((function(e){var t=e.success,i=e.info,l=e.errors;t?(a("saved"),n.setState({model_type_icon:"success",modal_alert_status:"open",title:i}),n.modalCloseTime(),n.props.getEmpRoles()):l&&o(l),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)}))}},{key:"checkRoleAndPerm",value:function(){var e=this;this.role.map((function(t,n){e.emp_perms.map((function(n,a){t.property_id==n.property_id&&t.feature_id==n.feature_id&&t.perm_kind==n.perm_kind&&(e.remove_perms.find((function(e){return e==n.gov_perm_ins_id}))||e.remove_perms.push(n.gov_perm_ins_id))}))}))}},{key:"modalClose",value:function(){this.setState({handleSaveIsLoad:!1}),this.props.history.push(this.state.prefix),this.setState({modal_alert_status:"closed"}),clearTimeout(this.state.timer)}},{key:"modalCloseTime",value:function(){var e=this;setTimeout((function(){e.setState({handleSaveIsLoad:!1}),e.props.history.push(e.state.prefix),e.setState({modal_alert_status:"closed"})}),2e3)}},{key:"handleModalOpen",value:function(){this.setState({modal_status:"open"})}},{key:"handleModalClose",value:function(){this.setState({modal_status:"closed"})}},{key:"addNotif",value:function(e,t,n){var a=this;this.too++,this.setState({show:!0,style:e,msg:t,icon:n});var r=setInterval((function(){a.too--,a.setState({show:!0}),clearInterval(r)}),2e3)}},{key:"handleSendMail",value:function(){var e=this;this.setState({modal_status:"closed"}),this.setState({is_loading:!0});var t=this.state.form_values.username;h.a.sendMail(t).then((function(t){var n=t.success,a=t.info;n&&(e.setState({is_loading:!1}),e.addNotif("success",a,"check"))}))}},{key:"getFeildValues",value:function(e,t,n){var a,r,o=this,i=Object();h.a.formOptions().then((function(l){var s=l.success,c=l.info;s&&(e&&(i.aimag_id=o.getGeomFromJson(e,c),a=c[i.aimag_id].geo_id,i.aimag_geo_id=a,i.aimag_name=e,r=c[i.aimag_id].children,i.sum=r),t&&(i.sum_id=o.getGeomFromJson(t,r),a=r[i.sum_id].geo_id,i.sum_geo_id=a,r=r[i.sum_id].children,i.horoo=r,i.sum_name=t),n&&(i.horoo_id=o.getGeomFromJson(n,r),a=r[i.horoo_id].geo_id,i.horoo_geo_id=a,i.horoo_name=n),o.getGeom(a),o.setState(le({aimag:c},i)))}))}},{key:"getGeom",value:function(e){var t=this;h.a.getGeom(e).then((function(n){var a=n.feature;a&&t.setState({feature:a,last_geo_id:e})}))}},{key:"getPoint",value:function(e,t){var n=e;"string"==typeof e&&(n=e.split(","));var a=[n[1],n[0]];this.setState({point_coordinate:a,map_coordinate:t})}},{key:"handleChange",value:function(e,t,n,a,r){var o,i=t+"_id",l=t+"_geo_id",s=t+"_name",c=e.target.value,m=Object();if("-1"!==c){var u=this.state[t][c];this.setState(se({},n,u.children)),n&&(m[n]=u.children),o=u.geo_id,a.map((function(e,t){var n=e+"_geo_id",a=e+"_name";m[e+"_id"]=-1,m[n]="",m[a]=""})),m[l]=o,m[s]=u.name,this.getGeom(o)}else{if(a.length>0&&a.map((function(e,t){var n=e+"_id",a=e+"_geo_id",r=e+"_name";m[e]=[],m[n]=-1,m[a]="",m[r]=""})),"mongol"!==r){var p=r+"_id",d=this.state[p];o=this.state[r][d].geo_id}else o="au_496";m[l]=o,this.getGeom(o)}this.setState(le(se({},i,c),m))}},{key:"getGeomFromJson",value:function(e,t){var n;return t.map((function(t,a){t.name==e&&(n=a)})),n}},{key:"refreshMap",value:function(){var e=this.state,t=e.last_geo_id,n=e.is_address_map,a=e.is_marker,r=e.point,o=Object();o.is_address_map=!n,n&&t&&(o.is_marker=!a,o.point=r,this.getGeom(t)),this.setState(le({},o))}},{key:"render",value:function(){var e=this,t=this.state,n=t.form_values,o=t.roles,i=t.role_list,l=t.prefix,s=t.is_inspire_role,c=t.is_inspire_role_null,m=t.perms,u=t.old_role_id,p=t.role_id,d=(t.id,t.is_address_map),h=this.state,v=h.aimag,g=h.sum,E=h.horoo,N=h.aimag_id,O=h.sum_id,k=h.horoo_id,w=h.feature,S=h.street,j=h.apartment,x=h.door_number,P=h.point,C=this.props.org_roles;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(f.e,{enableReinitialize:!0,initialValues:n,validationSchema:b.a,onSubmit:this.handleSubmit},(function(t){var l=t.errors,h=t.isSubmitting;return Object.keys(l).length,r.a.createElement(f.d,{className:"col-12"},r.a.createElement(ae.a,{is_loading:e.state.is_loading}),r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"username"},"Нэвтрэх нэр:"),r.a.createElement(f.b,{className:"form-control "+(l.username?"is-invalid":""),name:"username",id:"id_username",type:"text",placeholder:"Нэвтрэх нэр"}),r.a.createElement(f.a,{name:"username",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"first_name"},"Овог:"),r.a.createElement(f.b,{className:"form-control "+(l.first_name?"is-invalid":""),name:"first_name",id:"id_first_name",type:"text",placeholder:"Овог"}),r.a.createElement(f.a,{name:"first_name",component:"div",className:"text-danger"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"last_name"},"Нэр:"),r.a.createElement(f.b,{className:"form-control "+(l.last_name?"is-invalid":""),name:"last_name",id:"id_last_name",type:"text",placeholder:"Нэр"}),r.a.createElement(f.a,{name:"last_name",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"position"},"Албан тушаал:"),r.a.createElement(f.b,{className:"form-control "+(l.position?"is-invalid":""),name:"position",id:"id_position",type:"text",placeholder:"Албан тушаал"}),r.a.createElement(f.a,{name:"position",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"email"},"Цахим хаяг"),r.a.createElement(f.b,{className:"form-control "+(l.email?"is-invalid":""),name:"email",id:"id_email",type:"text",placeholder:"Цахим хаяг"}),r.a.createElement(f.a,{name:"email",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"gender"},"Хүйс:"),r.a.createElement(a.Fragment,null,r.a.createElement(f.b,se({name:"gender",as:"select",className:"form-control"},"className","form-control "+(l.gender?"is-invalid":"")),r.a.createElement("option",null,"Эрэгтэй"),r.a.createElement("option",null,"Эмэгтэй")),r.a.createElement(f.a,{name:"gender",component:"div",className:"text-dange"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"register"},"Регистер:"),r.a.createElement(f.b,{className:"form-control "+(l.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(f.a,{name:"register",component:"div",className:"text-danger"})),e.props.employee.is_admin&&r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"choose_role"},"Role: "),r.a.createElement("select",{className:"form-control",id:"choose_role",name:"choose_role",value:e.state.role_id,onChange:function(t){return e.getRole(t.target.value)}},r.a.createElement("option",{value:""},"--- Role сонгоно уу ---"),i.length>0&&i.map((function(e,t){return r.a.createElement("option",{key:t,value:e.role_id},e.role_name)}))))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"phone_number"},"Утасны дугаар:"),r.a.createElement(f.b,{className:"form-control "+(l.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(f.a,{name:"phone_number",component:"div",className:"text-danger"}))),e.props.employee.is_admin&&r.a.createElement("div",{className:"form-group col-md-3 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"is_admin"},"Байгууллагын админ"),r.a.createElement(f.b,{className:"ml-2",name:"is_admin",id:"id_is_admin",type:"checkbox"}),r.a.createElement(f.a,{name:"is_admin",component:"div",className:"text-danger"})),e.props.employee.username==n.username||e.props.employee.is_admin?r.a.createElement("div",{className:"col-md-3 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"btn gp-btn-primary btn-sm","aria-hidden":"true",onClick:e.handleModalOpen}," Нууц үг солих имэйл илгээх")):null),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("button",{className:"btn btn-primary btn-block mb-2",type:"button",onClick:function(){return e.refreshMap()}},d?"Гэрийн хаяг оруулах":"Role сонгох")),r.a.createElement("div",null,d&&(s||c)?r.a.createElement(y.default,{action_type:"editable",is_employee:!0,getValue:e.getValue,dontDid:!0,org_roles:C,role:o,is_inspire_role_null:c,editable_is_check:e.perms,emp_perms:u==p?m:null}):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-row p-1"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"form-control "+(l.level_1?"is-invalid":""),"aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:N},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),v.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"form-control "+(l.level_2?"is-invalid":""),onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:O},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),g.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"form-control "+(l.level_3?"is-invalid":""),onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:k},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),E.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"street"},"Гудамж:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"street",className:"form-control "+(l.street?"is-invalid":""),onChange:function(t){return e.setState({street:t.target.value})},value:S,placeholder:"Гудамжны нэрийг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"гудамж")))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"apartment"},"Байр:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"apartment",className:"form-control "+(l.apartment?"is-invalid":""),onChange:function(t){return e.setState({apartment:t.target.value})},value:j,placeholder:"Байрны дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"байр")))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"door_number"},"Хаалганы дугаар:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"door_number",className:"form-control "+(l.door_number?"is-invalid":""),onChange:function(t){return e.setState({door_number:t.target.value})},value:x,placeholder:"Хаалганы дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"тоот"))))),r.a.createElement(q,{feature:w,sendPointCoordinate:e.getPoint,map_coordinate:e.state.map_coordinate,point:P,is_marker:e.state.is_marker,class:l.point?"border border-danger":""}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary waves-effect waves-light m-1",disabled:h},h&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),h&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!h&&"Хадгалах"))))})))),r.a.createElement(te.a,{title:"Та нууц үг солих имэйл илгээхдээ итгэлтэй байна уу?",model_type_icon:"warning",status:this.state.modal_status,modalClose:this.handleModalClose,modalAction:function(){return e.handleSendMail()},actionNameDelete:"Илгээх"}),r.a.createElement(_.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:this.state.title,model_type_icon:this.state.model_type_icon}),r.a.createElement(ne.a,{show:this.state.show,too:this.too,style:this.state.style,msg:this.state.msg,icon:this.state.icon}),r.a.createElement(B.a,oe({},this.props,{name:"Буцах",navlink_url:l})))}}])&&ce(t.prototype,n),o&&ce(t,o),l}(a.Component);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ne(e);if(t){var r=Ne(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(l,e);var t,n,o,i=ve(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={modal_status_confirm:"closed"},t.handleButtonClick=t.handleButtonClick.bind(Ee(t)),t.modalClose=t.modalClose.bind(Ee(t)),t}return t=l,(n=[{key:"handleButtonClick",value:function(){var e=this;this.setState({modal_status_confirm:"open"},(function(){e.setState({modal_status_confirm:"initial"})}))}},{key:"modalClose",value:function(){this.setState({modal_status_confirm:"closed"})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("span",{onClick:this.handleButtonClick,className:"btn btn-primary waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa-refresh"})," Токен шинэчлэх"),r.a.createElement(te.a,{text:"Токенийг шинэчилсэнээр уг URL-ээр одоо ашиглаж байгаа газрууд ажиллахгүй болохыг анхаарна уу!",title:"Токен шинэчлэх",model_type_icon:"warning",actionNameDelete:"Шинэчлэх",status:this.state.modal_status_confirm,modalAction:this.props.onClick,modalClose:this.modalClose}),r.a.createElement(_.a,{status:"success"==this.props.status?"open":"closed",title:this.props.status_info,model_type_icon:"success"}),r.a.createElement(_.a,{status:"fail"==this.props.status?"open":"closed",title:this.props.status_info,model_type_icon:"danger"}))}}])&&ye(t.prototype,n),o&&ye(t,o),l}(a.Component),ke=n(32);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Se(e){return r.a.createElement(ke.c,we({},e,{className:"btn btn-primary waves-effect waves-light m-1"}),r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Засах")}var je=n(892);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Te(e);if(t){var r=Te(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(l,e);var t,n,o,i=Re(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={modal_status_confirm:"closed"},t.handleButtonClick=t.handleButtonClick.bind(De(t)),t.modalClose=t.modalClose.bind(De(t)),t}return t=l,(n=[{key:"handleButtonClick",value:function(){var e=this;this.setState({modal_status_confirm:"open"},(function(){e.setState({modal_status_confirm:"initial"})}))}},{key:"modalClose",value:function(){this.setState({modal_status_confirm:"closed"})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("span",{onClick:this.handleButtonClick,className:"btn btn-danger waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa fa-trash-o"})," Устгах"),r.a.createElement(te.a,{text:'Та "'.concat(this.props.employee_name,'" нэртэй албан хаагчийг устгахдаа итгэлтэй байна уу?'),title:"Албан хаагчийг устгах",model_type_icon:"warning",actionName:"Устгах",status:this.state.modal_status_confirm,modalAction:this.props.onClick,modalClose:this.modalClose}),r.a.createElement(je.a,{status:"success"==this.props.status?"open":"closed",title:"Албан хаагчийг амжилттай устгалаа!",model_type_icon:"success",modalAction:this.props.onSuccess}),r.a.createElement(je.a,{status:"fail"==this.props.status?"open":"closed",title:"Устгахад алдаа гарлаа!",model_type_icon:"danger"}))}}])&&Pe(t.prototype,n),o&&Pe(t,o),l}(a.Component);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Le(e);if(t){var r=Le(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?Be(e):t}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(i,e);var t,n,a,o=Ae(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={employee:{id:"",username:"",first_name:"",last_name:"",email:"",gender:"",register:"",phone_number:"",position:"",is_admin:!1,is_super:!1},prefix:"/gov/perm/employee/",role_id:t.props.match.params.id,perms:{},role_name:"",roles:{},is_inspire_role:!1,is_inspire_role_null:!1,status_token_refresh:"initial",status_delete:"initial"},t.getDetail=t.getDetail.bind(Be(t)),t.getRole=t.getRole.bind(Be(t)),t.handleTokenRefresh=t.handleTokenRefresh.bind(Be(t)),t.handleDelete=t.handleDelete.bind(Be(t)),t.handleDeleteSuccess=t.handleDeleteSuccess.bind(Be(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"getDetail",value:function(){var e=this,t=this.state.role_id;h.a.getDetailEmployee(t).then((function(t){var n=t.employee_detail,a=t.perms,r=t.role_name,o=t.role_id;t.success&&e.setState({employee:n,perms:a,role_name:r}),e.getRole(o)}))}},{key:"getRole",value:function(e){var t=this;this.setState({role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?h.a.getRole(e).then((function(e){var n=e.success,a=e.roles;n&&t.setState({roles:a,is_inspire_role:!0,is_inspire_role_null:!1})})):new Promise((function(e,n){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"handleTokenRefresh",value:function(){var e=this;this.setState({status_token_refresh:"loading"}),h.a.empTokenRefresh(this.state.employee.id).then((function(t){var n=t.success,a=t.info;n&&e.getDetail(),e.setState({status_token_refresh:n?"success":"fail",info_token_refresh:a})}))}},{key:"handleDelete",value:function(){var e=this;this.setState({status_delete:"loading"});var t=this.state.employee.id;h.a.deleteEmployee(t).then((function(t){var n=t.success;e.setState({status_delete:n?"success":"fail"})}))}},{key:"handleDeleteSuccess",value:function(){this.props.history.push("".concat(this.state.prefix))}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.state,n=t.prefix,a=t.roles,o=t.is_inspire_role,i=t.is_inspire_role_null,l=t.perms,s=t.role_name,c=this.state.employee,m=c.username,u=c.last_name,p=c.first_name,d=c.position,f=c.email,h=c.gender,_=c.register,b=c.phone_number,v=c.is_admin,g=c.is_active,E=c.token,N=c.created_at,O=c.updated_at,k=c.level_1,w=c.level_2,S=c.level_3,j=c.street,x=c.apartment,P=c.door_number,C=this.state,R=C.status_token_refresh,F=C.status_delete,D=C.info_token_refresh,T=this.props.org_roles;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 p-0 text-right"},this.props.employee.is_admin||this.props.employee.username==m?r.a.createElement(Oe,{onClick:this.handleTokenRefresh,status:R,status_info:D}):null,this.props.employee.is_admin||this.props.employee.username==m?r.a.createElement(Se,{to:"".concat(n).concat(e,"/edit/")}):null,this.props.employee.is_admin&&r.a.createElement(Me,{status:F,onClick:this.handleDelete,employee_name:p,onSuccess:this.handleDeleteSuccess}))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Нэвтрэх нэр:"),r.a.createElement("dd",{className:"col-md-9"},m),r.a.createElement("dt",{className:"col-md-3"},"Овог, нэр:"),r.a.createElement("dd",{className:"col-md-9"},u,", ",p),r.a.createElement("dt",{className:"col-md-3"},"Албан тушаал:"),r.a.createElement("dd",{className:"col-md-9"},d),r.a.createElement("dt",{className:"col-md-3"},"Токен:"),r.a.createElement("dd",{className:"col-md-9"},E)),r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Бүртгэсэн:"),r.a.createElement("dd",{className:"col-md-9"},N),r.a.createElement("dt",{className:"col-md-3"},"Зассан:"),r.a.createElement("dd",{className:"col-md-9"},O))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Мэйл хаяг:"),r.a.createElement("dd",{className:"col-md-9"},f),r.a.createElement("dt",{className:"col-md-3"},"Хүйс:"),r.a.createElement("dd",{className:"col-md-9"},h),r.a.createElement("dt",{className:"col-md-3"},"Регистр:"),r.a.createElement("dd",{className:"col-md-9"},_),r.a.createElement("dt",{className:"col-md-3"},"Утасны дугаар:"),r.a.createElement("dd",{className:"col-md-9"},b),r.a.createElement("dt",{className:"col-md-3"},"Эрх:"),r.a.createElement("dd",{className:"col-md-9"},s)),k&&r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Гэрийн хаяг:"),r.a.createElement("dd",{className:"col-md-9"},k+", "+w+", "+S+", "+j+" гудамж "+x+" байр, "+P+" тоот")),v&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-check-circle-o fa-lg","aria-hidden":"true"})," Байгууллагын админ"),!g&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-times-circle text-danger fa-lg","aria-hidden":"true"})," Нэвтрэх эрхгүй")))),r.a.createElement("div",null,o||i?r.a.createElement(y.default,{action_type:"viewable",is_employee:!0,dontDid:!0,org_roles:i?T:a,emp_perms:l,is_inspire_role_null:i}):null)),r.a.createElement(B.a,Ie({},this.props,{name:"Буцах",navlink_url:n})))}}])&&Ve(t.prototype,n),a&&Ve(t,a),i}(a.Component);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ye(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=We(e);if(t){var r=We(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Qe(this,n)}}function Qe(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(l,e);var t,n,a,i=Ke(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.org_roles,n=e.getEmpRoles,a=e.employee,i=this.props.employee,l=i.is_admin;return i.username,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/",component:function(e){return r.a.createElement(d,Xe({},e,{employee:a}))}}),r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/:id/edit/",component:function(e){return r.a.createElement(he,Xe({},e,{org_roles:t,getEmpRoles:n,employee:a}))}}),l&&r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/add/",component:function(e){return r.a.createElement(ee,Xe({},e,{org_roles:t,employee:a}))}}),r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/:id/detail/",component:function(e){return r.a.createElement(Ue,Xe({},e,{org_roles:t,employee:a}))}}))}}])&&Ye(t.prototype,n),a&&Ye(t,a),l}(a.Component)}}]);