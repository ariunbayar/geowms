(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1066:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var a=n(0),r=n.n(a),o=n(977),c=n(579),i=n(982),l=n(119),s=n(75),u=n(1067),f=n(1068),m=n(979);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j(e);if(t){var r=j(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(E,t);var n,d,_,v=S(E);function E(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),(t=v.call(this,e)).over_dec=[],t.state={id:e.match.params.id,table_id:e.match.params.table_id,table_name:"",themes:[],packages:[],features:[],feature_name:"",theme_name:"",package_name:"",selected_packages:[],selected_features:[],selected_dt_list:[],data_type_list:[],id_list:[],message:"Property сонгоогүй байна.",is_loading:!1,modal_status:"closed",ano_table_names:[],ano_table_fields:[],table_field_name:"",matched_feilds:[],check_data_type:!1,check_error:[],pk_field_name:"",pk_start_index:"",pk_field_type:"",pk_field_count:"",pk_field_max_range:"",checked_choices:[],checked_datas:[],check_ids:[],data_list:[{id:1,name:"Дата хооронд",eng_name:"between",keys:[1,2]},{id:2,name:"Эхлэх эхний утгаар",eng_name:"since one of data",keys:[1]},{id:3,name:"Төгсөх сүүлийн утгаар",eng_name:"until one of data",keys:[2]},{id:4,name:"Оруулах өгөгдлийн тоо хэмжээгээр",eng_name:"limit",keys:[3]}],choice_datas:[{name:"Дата-ны эхлэх утга",eng_name:"pk_start_index",value:"",key:1},{name:"Дата-ны эцсийн утга",eng_name:"pk_field_max_range",key:2,value:""},{name:"Оруулах өгөгдлийн тоо хэмжээ",eng_name:"pk_field_count",key:3,value:""}]},t.handleChange=t.handleChange.bind(N(t)),t.getInspireTree=t.getInspireTree.bind(N(t)),t.getFeatProperties=t.getFeatProperties.bind(N(t)),t.handleSetField=t.handleSetField.bind(N(t)),t.handleSave=t.handleSave.bind(N(t)),t.getArray=t.getArray.bind(N(t)),t.getTableFields=t.getTableFields.bind(N(t)),t.handleModalOpen=t.handleModalOpen.bind(N(t)),t.modalChange=t.modalChange.bind(N(t)),t.setSelectedField=t.setSelectedField.bind(N(t)),t.dataTypeValidation=t.dataTypeValidation.bind(N(t)),t.getFilterType=t.getFilterType.bind(N(t)),t.setSelectedOptions=t.setSelectedOptions.bind(N(t)),t}return n=E,(d=[{key:"componentDidMount",value:function(){var e=this.state.id;this.getInspireTree(e)}},{key:"handleGetDetial",value:function(e,t){var n=this,a=this.state,r=a.table_id,c=a.id,i=a.choice_datas,l=a.check_ids,s=a.data_list,u=a.checked_datas;this.setState({is_loading:!0}),o.a.pg_config.tableDetail(c,r,!0).then((function(a){var r=a.success,o=a.form_datas;r&&(o.selected_packages=n.getArray(e,o.theme_name),o.selected_features=n.getArray(t,o.package_name),o.matched_feilds=o.id_list,o.pk_field_name=o.pk_field_name,o.pk_field_type=o.pk_field_type,o.pk_start_index&&o.pk_field_max_range&&l.push(s[0].id),o.pk_start_index&&(i[0].value=o.pk_start_index,l.push(s[1].id),u.push(i[0])),o.pk_field_max_range&&(i[1].value=o.pk_field_max_range,l.push(s[2].id),u.push(i[1])),o.pk_field_count&&(i[2].value=o.pk_field_count,l.push(s[3].id),u.push(i[2])),n.setState(g(g({},o),{},{is_loading:!1,checked_datas:u,check_ids:l})))}))}},{key:"getInspireTree",value:function(e){var t=this,n=this.state.table_id;Promise.all([o.a.pg_config.getAnotherPgDetail(e),o.a.pg_config.getInspireTree(e)]).then((function(e){var a=b(e,2),r=a[0].table_names,o=a[1],c=o.themes,i=o.packages,l=o.features;t.setState({themes:c,packages:i,features:l,ano_table_names:r}),n&&t.handleGetDetial(i,l)}))}},{key:"getTableFields",value:function(e){var t=this,n=this.state,a=n.id;n.matched_feilds,o.a.pg_config.fieldNames(a,e).then((function(e){var n=e.fields,a=n.findIndex((function(e){return"geom"==e.data_type.slice(0,4)}));if(-1!=a)var r=n[a].column_name;n&&t.setState({ano_table_fields:n,geo_data_field:r})}))}},{key:"getArray",value:function(e,t){return h(e).filter((function(e){return e.parent==t}))}},{key:"handleChange",value:function(e,t){var n=this.state,a=n.packages,r=n.features,o=n.choice_datas,c="",i={},l=[];if("pk_field_name"==e)i.pk_field_name=t.column_name,i.pk_field_type=t.data_type;else if("choice_datas"==e){var s=o.findIndex((function(e){return e.eng_name==t.target.id}));-1!=s&&(o[s].value=t.target.value)}else c=t.code,"theme"==e?(i.theme_name=c,l=this.getArray(a,c),i.selected_packages=l,i.feature_name="",i.matched_feilds=[],i.selected_features=[]):"package"==e?c?(i.package_name=c,l=this.getArray(r,c),i.selected_features=l,i.feature_name="",i.matched_feilds=[]):(i.feature_name="",i.selected_features=[]):i.feature_name=c,c||(i.feature_name="");this.setState(g({},i))}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,a=(n.theme_name,n.feature_name),r=n.packages,o=n.features,c=n.table_name;t.feature_name!=a&&(a?this.getFeatProperties(a):this.setState({feature_name:a,matched_feilds:[]})),t.packages!=r&&this.setState({packages:r}),t.features!=o&&this.setState({features:o}),t.table_name!=c&&this.getTableFields(c)}},{key:"getFeatProperties",value:function(e){var t=this;this.setState({is_loading:!0}),o.a.pg_config.getProperties(e).then((function(e){var n=e.data_type_list;n&&n.length>0&&t.setState({data_type_list:n,is_loading:!1})}))}},{key:"handleSave",value:function(){var e=this,t=this.state,n=t.id,a=t.table_id,r=t.table_name,c=t.matched_feilds,i=t.feature_name,l=t.geo_data_field,s=t.pk_field_name,u=t.pk_field_type,f=t.choice_datas;this.setState({is_loading:!0});var m={pk_field_name:s,pk_start_index:f[0].value,pk_field_type:u,pk_field_count:f[2].value,pk_field_max_range:f[1].value},d={table_field:l,property_id:"geo_datas",data_type:"geom"},p=c.concat(d);o.a.pg_config.tableSave(n,a,p,i,r,!0,m).then((function(t){var a=t.success,r=t.info;e.setState({is_loading:!1}),a?e.modalChange("fa fa-check-circle","success",r,!1,(function(){return e.props.history.push("/back/another-base/connection/pg/".concat(n,"/list/"))})):e.modalChange("fa fa-exclamation-circle","warning",r,!1,null)}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,n,a,r){var o=this;this.setState({modal_icon:e,icon_color:t,title:n,has_button:a,modalClose:r},(function(){return o.handleModalOpen()}))}},{key:"handleSetField",value:function(e,t,n){var a=this.state,r=a.data_type_list,o=(a.table_fields,a.matched_feilds),c=n.target.value,i=n.target.selectedIndex,l=n.target.childNodes[i],s=l.getAttribute("name"),u=l.getAttribute("id");this.dataTypeValidation(t,e,u);var f={table_field:c,table_data_type:s,property_id:r[e].properties[t].property_id},m=[];if(c)if(o.length>0){var d=o.findIndex((function(n){return n.property_id==r[e].properties[t].property_id}));-1!=d?(o[d].table_field=c,m=o):m=o.concat(f)}else m=o.concat(f);else{var p,_=h(o),v=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(_.entries());try{for(v.s();!(p=v.n()).done;){var g=b(p.value,2),E=g[0];g[1].property_id==r[e].properties[t].property_id&&_.splice(E,1)}}catch(e){v.e(e)}finally{v.f()}m=_}this.setState({matched_feilds:m})}},{key:"setSelectedField",value:function(e){var t=this.state.matched_feilds,n="";if(Object.keys(t).length>0){var a=t.findIndex((function(t){return t.property_id==e.property_id}));-1!=a&&(n=t[a].table_field)}return n}},{key:"dataTypeValidation",value:function(e,t,n){var a=this.state,r=a.data_type_list,o=a.ano_table_fields,c=a.check_error,i=!1,l=r[t].properties[e].property_id,s=h(c),u=s.indexOf(l);if(n){var f=r[t].properties[e].value_type_id,m=o[parseInt(n)].data_type.slice(0,4);f!=m?(i=!0,"text"==m&&"char"==f||"date"==m&&"time"==f||"nume"==m&&"inte"==f||"inte"==m&&"char"==f?i=!1:u&&-1==u&&s.push(l)):i=!1}else i=!1;r[t].properties[e].form_state=i,i||u>-1&&(s=s.filter((function(e){return e!=l}))),this.setState(g(g({},r),{},{check_error:s}))}},{key:"setSelectedOptions",value:function(e,t){var n=this.state,a=n.choice_datas,r=n.data_list,o=n.checked_datas,c="";o=[],e.forEach((function(e){c=function(t){return t.id==e};var t=r.findIndex(c);r[t].keys.forEach((function(e){if(c=function(t){return t.key==e},(t=o.findIndex(c))<0){var t=a.findIndex(c);o.push(a[t])}}))})),this.setState({checked_datas:o,check_ids:e})}},{key:"getFilterType",value:function(){var t=this,n=this.state,a=n.data_list,o=n.check_ids,c={modal_status:"open",text:function(){return r.a.createElement(f.a,{data_list:a,setSelectedOptions:t.setSelectedOptions,check_ids:o})}};e.MODAL(c)}},{key:"render",value:function(){var e=this,t=this.state,n=t.table_id,o=t.id,f=t.themes,d=t.theme_name,h=t.package_name,b=t.feature_name,y=t.selected_features,_=t.selected_packages,v=t.data_type_list,g=t.table_name,E=t.is_loading,k=t.ano_table_names,O=t.ano_table_fields,S=t.matched_feilds,w=t.geo_data_field,N=t.check_error,j=t.checked_datas,x=t.pk_field_name;return r.a.createElement("div",{className:"card p-2"},r.a.createElement(l.a,{is_loading:E,text:"Уншиж байна"}),r.a.createElement("div",{className:"form-row p-4 mx-1"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"ano_table_name"},"Хүснэгтүүд"),r.a.createElement("select",{name:"table_name",id:"ano_table_name_id",className:"form-control col-md-6",value:g,disabled:!!n,onChange:function(t){e.setState({table_name:t.target.value})}},r.a.createElement("option",{value:""}),k.map((function(e,t){return r.a.createElement("option",{key:t,value:e.table_name},e.table_name)}))))),r.a.createElement("div",{className:"form-row col-md-12 p-4 mx-1"},r.a.createElement(i.a,{state_name:"theme",label:"Theme",option_name:"name",option_key:"code",data_list:f,default_value:d,className:"col-md-4",default_text:"theme-ийн нэр сонгоно уу",handleSelectField:this.handleChange}),r.a.createElement(i.a,{state_name:"package",label:"package",option_name:"name",option_key:"code",data_list:_,default_value:h,className:"col-md-4",default_text:"package-ийн нэр сонгоно уу",handleSelectField:this.handleChange}),r.a.createElement(i.a,{state_name:"feature",label:"feature",data_list:y,option_name:"name",option_key:"code",default_value:b,className:"col-md-4",default_text:"feature-ийн нэр сонгоно уу",handleSelectField:this.handleChange})),b&&r.a.createElement("div",{className:"col-md-12 px-3 mt-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"}),r.a.createElement("div",{className:"col-md-9 px-0"},r.a.createElement("div",{className:"row d-flex mr-3"},r.a.createElement("span",{className:"col-md-6 m-1 border rounded mr-auto",name:"inspire_property"},"Геометр талбар")," ",r.a.createElement("span",{className:"col-md-5 m-1 border rounded form-control"+(w?"":" is-invalid border-danger"),name:"inspire_property",title:w?"":"Геометр талбаргүй хүснэгт байна !!!"},w)),j&&j.length>0?r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"row d-flex mr-3"},r.a.createElement("span",{className:"col-md-6 m-1 border rounded mr-auto",name:"inspire_property"},"Давтагдашгүй талбар")," ",r.a.createElement(i.a,{state_name:"pk_field_name",data_list:O,option_name:"data_type",option_key:"column_name",option_text:"column_name",default_value:x,className:"d-flex col-md-5 m-1 p-0 align-items-middle",handleSelectField:this.handleChange})),j.map((function(t,n){return r.a.createElement("div",{className:"row d-flex mr-3",key:n},r.a.createElement("span",{className:"col-md-6 m-1 border rounded mr-auto",name:"inspire_property"},t.name)," ",r.a.createElement("input",{name:"choice_datas",type:"text",id:t.eng_name,value:t.value,className:"form-control col-md-5 m-1",onChange:function(t){e.handleChange("choice_datas",t)}}))}))):null,r.a.createElement("div",{className:"row d-flex mr-4 justify-content-center"},r.a.createElement("a",{className:"text-primary",onClick:this.getFilterType},r.a.createElement(m.a,{icon:"fa fa-plus-circle mx-1 text-primary mt-2"}),"шүүлтүүр нэмэх")))),r.a.createElement("hr",null),v&&v.length>0?v.map((function(t,n){return r.a.createElement(a.Fragment,{key:n},r.a.createElement("div",{className:"form-row mr-3"},r.a.createElement("div",{className:"form-group col-md-3 align-self-center text-center px-2 "},r.a.createElement("b",{className:"text-wrap"},t.data_type_name),r.a.createElement("br",null),r.a.createElement("small",{className:"text-center"},"(",t.data_type_definition,")")),r.a.createElement("div",{className:"form-group col-md-9"},t.properties&&t.properties.length>0?t.properties.map((function(t,a){return r.a.createElement(u.a,{key:a,data_key:n,prop_key:a,property_data:t,ano_table_fields:O,handleSetField:e.handleSetField,dataTypeValidation:e.dataTypeValidation,setSelectedField:e.setSelectedField(t)})})):null)),r.a.createElement("hr",null))})):null),r.a.createElement("div",{className:"form-row col-md-12 p-4 m-1"},r.a.createElement("button",{type:"button",className:"btn gp-btn-primary",onClick:this.handleSave,disabled:!g||S.length<0||N.length>0||!w},n?"Засах":"Хадгалах"),r.a.createElement(s.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,has_button:this.state.has_button,modalClose:this.state.modalClose})),r.a.createElement(c.a,p({},this.props,{name:"Буцах",navlink_url:"/back/another-base/connection/pg/".concat(o,"/list/")})))}}])&&k(n.prototype,d),_&&k(n,_),E}(a.Component)}).call(this,n(47))},1067:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,n,a,o=l(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={},t}return t=s,(n=[{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this,t=this.props,n=t.property_data,a=t.setSelectedField,o=t.ano_table_fields,c=t.data_key,i=t.prop_key;return r.a.createElement("div",{className:" row d-flex justify-content-between"},r.a.createElement("span",{className:"col-md-6 m-1 border rounded",name:"inspire_property"},n.property_name,r.a.createElement("br",null),r.a.createElement("small",null,n.value_type_name?"(".concat(n.value_type_name,")"):"")),r.a.createElement("select",{name:"table_field_name",id:"table_field_id",className:"form-control col-md-5 m-1 ".concat(n.form_state?"border-danger":""),value:a,onChange:function(t){return e.props.handleSetField(c,i,t)},title:n.form_state&&"Өгөгдлийн төрөл таарахгүй байна !!!"},r.a.createElement("option",{value:""}),o&&Object.keys(o).length>0&&o.map((function(e,t){return r.a.createElement("option",{key:t,value:e.column_name,name:e.data_type,id:t},e.column_name)}))))}}])&&c(t.prototype,n),a&&c(t,a),s}(a.Component)},1068:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,n,a,o=l(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={check_ids:[]},t.handleCheckData=t.handleCheckData.bind(u(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this.props.check_ids;this.setState({check_ids:e})}},{key:"handleCheckData",value:function(e){var t=this.state.check_ids,n=parseInt(e.target.value);e.target.checked?t.push(n):t=t.filter((function(e){return e!=n})),this.props.setSelectedOptions(t,e),this.setState({check_ids:t})}},{key:"render",value:function(){var e=this,t=this.props.data_list,n=this.state.check_ids;return r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("label",{className:"text-center col-md-12"},"шүүлтүүрийн төрлүүдийг сонгоно уу !!!"),r.a.createElement("div",{className:"mx-2"},t.map((function(t,a){return r.a.createElement("div",{key:a,className:"icheck-primary  col-md-12 d-flex justify-content-between"},r.a.createElement("input",{name:t.name,id:t.id,type:"checkbox",onChange:function(t){e.handleCheckData(t)},checked:n.indexOf(t.id)>-1,value:t.id}),r.a.createElement("label",{className:"mx-4 px-3",htmlFor:t.id},t.name," (",t.eng_name,")"))}))))}}])&&c(t.prototype,n),a&&c(t,a),s}(a.Component)},579:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n.n(a),o=n(31);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,e);var t,n,a,c=u(f);function f(){return i(this,f),c.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){return this.props.navlink_url?r.a.createElement(o.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},r.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?r.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},r.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):r.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},r.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&l(t.prototype,n),a&&l(t,a),f}(a.Component)},941:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n(31),i=n(579);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h(e);if(t){var r=h(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(l,e);var t,n,a,o=d(l);function l(){return u(this,l),o.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Дата бааз сонгох"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card-body"},r.a.createElement(c.c,{to:"/back/another-base/connection/mssql/",className:"col-md-5 ml-2 text-center",activeClassName:"text-white"},"MSSQL"))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card-body"},r.a.createElement(c.c,{to:"/back/another-base/connection/mongo/",className:"col-md-3 ml-2 text-center",activeClassName:"text-white gp-bg-primary"},"MongoDB"))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card-body"},r.a.createElement(c.c,{to:"/back/db-export/connection/".concat(!1,"/pg/"),className:"col-md-3 ml-2 text-center",activeClassName:"text-white gp-bg-primary"},"PgDb"))))),r.a.createElement(i.a,s({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&f(t.prototype,n),a&&f(t,a),l}(a.Component),y=n(22),_=n(36),v=n(977);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j(e);if(t){var r=j(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=_.c().shape({name:_.d().required("хоосон байна!"),definition:_.d(),msssql_server:_.d().required("хоосон байна!"),msssql_port:_.d().required("хоосон байна!"),msssql_username:_.d().required("хоосон байна!"),msssql_password:_.d().required("хоосон байна!"),msssql_database:_.d().required("хоосон байна!")}),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(l,e);var t,n,o,c=S(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={is_editing:!1,initial_values:{id:e.match.params.id,name:"",definition:"",msssql_server:"",msssql_port:"",msssql_username:"",msssql_password:"",msssql_database:""},values:{}},t.handleEdit=t.handleEdit.bind(N(t)),t.handleSubmit=t.handleSubmit.bind(N(t)),t.getConfigs=t.getConfigs.bind(N(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getConfigs(e)}},{key:"getConfigs",value:function(e){var t=this;v.a.mssql_config.get(e).then((function(e){var n=e.values;t.setState({initial_values:n,values:n})}))}},{key:"handleEdit",value:function(e){e.preventDefault();var t=this.state.is_editing;this.setState({is_editing:!t})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=t.setValues;a("saving"),v.a.mssql_config.save(e).then((function(t){if(!t.success)return Promise.reject();a("save_success"),n.setState({values:e})})).catch((function(){r(n.state.values),a("save_error")})).finally((function(){n.setState({is_editing:!1})}))}},{key:"render",value:function(){var e=this.state,t=(e.is_editing,e.initial_values);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Mssql Connection Тохиргоо"),r.a.createElement("div",{className:"card-body"},r.a.createElement(y.e,{initialValues:t,initialStatus:"initial",enableReinitialize:!0,validationSchema:x,onSubmit:this.handleSubmit},(function(e){var t=e.errors,n=e.status,o=(e.touched,e.isSubmitting,e.setFieldValue,e.setStatus);return e.setValues,e.handleBlur,e.values,e.isValid,e.dirty,r.a.createElement(y.d,null,r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6 text-wrap"},r.a.createElement("label",{htmlFor:"id_name"},"Нэр"),r.a.createElement(y.b,{name:"name",id:"id_name",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.name)),r.a.createElement("div",{className:"form-group col-md-6 text-wrap"},r.a.createElement("label",{htmlFor:"id_definition"},"Тайлбар"),r.a.createElement(y.b,{name:"definition",id:"id_definition",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.definition)),r.a.createElement("div",{className:"form-group col-md-6 text-wrap"},r.a.createElement("label",{htmlFor:"id_msssql_server"},"Server IP"),r.a.createElement(y.b,{name:"msssql_server",id:"id_msssql_server",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.msssql_server)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_msssql_port"},"Server PORT"),r.a.createElement(y.b,{name:"msssql_port",id:"id_msssql_port",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.msssql_port)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_msssql_username"},"Username"),r.a.createElement(y.b,{name:"msssql_username",type:"text",className:"form-control",id:"id_msssql_username"}),r.a.createElement("p",{className:"text-danger"},t.msssql_username)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_msssql_password"},"Password"),r.a.createElement(y.b,{name:"msssql_password",type:"text",className:"form-control",id:"id_msssql_password"}),r.a.createElement("p",{className:"text-danger"},t.msssql_password)),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"id_msssql_database"},"Database Name"),r.a.createElement(y.b,{name:"msssql_database",id:"id_msssql_database",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.msssql_database))),r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:"saving"==n},"saving"==n&&r.a.createElement(a.Fragment,null,r.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"})," ","Түр хүлээнэ үү..."),"saving"!=n&&"Хадгалах")),"save_success"==n&&r.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return o("initial")}},"×"),r.a.createElement("div",{className:"alert-icon icon-part-success"},r.a.createElement("i",{className:"icon-check"})),r.a.createElement("div",{className:"alert-message"},r.a.createElement("span",null,"Амжилттай хадгаллаа!"))),"save_error"==n&&r.a.createElement("div",{className:"alert alert-icon-warning alert-dismissible",role:"alert"},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return o("initial")}},"×"),r.a.createElement("div",{className:"alert-icon icon-part-warning"},r.a.createElement("i",{className:"icon-check"})),r.a.createElement("div",{className:"alert-message"},r.a.createElement("span",null,"Хадгалахад алдаа гарлаа!"))))}))),r.a.createElement(i.a,E({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&k(t.prototype,n),o&&k(t,o),l}(a.Component);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){var t=[],n=!1;e.properties.map((function(e){t.length>0&&(n=!1,t.map((function(t){t==e.data_type_id&&(n=!0)}))),0==n&&(t=t.concat(e.data_type_id))}));var a=[];return t.map((function(e){a.push({data_type_name:"",data_type_id:e,children:[]})})),e.properties.map((function(e){a.map((function(t,n){t.data_type_id==e.data_type_id&&(t.data_type_name=e.data_type_name,t.children.push({property_name:e.property_name,property_id:e.property_id}))}))})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:""},e.column_name,": "),r.a.createElement("select",{name:"",id:"",className:"form-control",onChange:function(t){e.sendValue(e.column_name,t.target.value)},defaultValue:e.default_value},r.a.createElement("option",{value:""}," -- Property Сонгоно уу -- "),a.map((function(e,t){return r.a.createElement("optgroup",{key:t,label:e.data_type_name},e.children.map((function(e,t){return r.a.createElement("option",{key:t,value:e.property_id},e.property_name)})))}))),r.a.createElement("br",null))},V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(c,e);var t,n,a,o=T(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={table_name:e.selected_value,connection_id:e.connection_id,table_id:e.match.params.table_id,fields:[],properties:[],columns:{},feature_code:e.feature_code,ano_db_table:e.ano_db_table,default_values:{}},t.getAttributes=t.getAttributes.bind(F(t)),t.getProperties=t.getProperties.bind(F(t)),t.setProperties=t.setProperties.bind(F(t)),t.getValue=t.getValue.bind(F(t)),t.saveMatch=t.saveMatch.bind(F(t)),t}return t=c,(n=[{key:"getProperties",value:function(e,t){var n=this;v.a.mssql_config.getProperties(e).then((function(a){var r=a.success,o=a.properties;if(r)if(Object.keys(t).length>0){var c=n.parseString(t.field_config);n.setState({default_values:c,columns:c,feature_code:e,properties:o})}else n.setState({properties:o})}))}},{key:"componentDidUpdate",value:function(e){e.selected_value!=this.props.selected_value&&(this.setState({table_name:this.props.selected_value}),this.getAttributes(this.props.selected_value)),e.feature_code!=this.props.feature_code&&(this.setState({feature_code:this.props.feature_code}),this.props.feature_code&&this.getProperties(this.props.feature_code,this.props.ano_db_table)),e.ano_db_table!=this.props.ano_db_table&&(this.setState({ano_db_table:this.props.ano_db_table}),this.props.ano_db_table&&this.setProperties(this.props.ano_db_table))}},{key:"parseString",value:function(e){return e=e.replaceAll("'",'"'),JSON.parse(e)}},{key:"setProperties",value:function(e){var t=e.feature_code;this.getProperties(t,e)}},{key:"getAttributes",value:function(e){var t=this,n=this.state.connection_id;v.a.mssql_config.getAttributes(e,n).then((function(e){var n=e.success,a=e.fields;n&&t.setState({fields:a})}))}},{key:"getValue",value:function(e,t){var n=this.state.columns;""==t?delete n[e]:n[e]=t,this.setState({columns:n})}},{key:"saveMatch",value:function(){var e=this;this.props.setLoading(!0);var t,n=this.state,a=n.table_name,r=n.columns,o=n.connection_id,c=n.feature_code,i=n.table_id;i&&(t=i),i||(t=null),v.a.mssql_config.saveToDbTable(a,r,o,c,t).then((function(t){t.success&&(e.props.setLoading(!1),e.props.setModal(null,"","Амжилттай хадгаллаа","fa fa-check-circle","success",!1,null,(function(){return e.props.history.push("/back/another-base/connection/mssql/".concat(o,"/tables/"))})))})).catch((function(){e.props.setLoading(!1),e.props.setModal(null,"","Холболтонд алдаа гарсан байна","fa fa-check-circle","danger",!1,null,null)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.fields,a=t.properties,o=t.table_id,c=t.default_values,i=(t.columns,Object.keys(c));return r.a.createElement("div",null,n.map((function(t,n){return i.length>0?i.map((function(n,o){if(n==t)return r.a.createElement(M,{key:o,column_name:t,properties:a,sendValue:e.getValue,default_value:c[n]})})):r.a.createElement(M,{key:n,column_name:t,properties:a,sendValue:e.getValue})})),n.map((function(t,n){return i.length>0&&!i.includes(t)&&r.a.createElement(M,{key:n,column_name:t,properties:a,sendValue:e.getValue})})),n.length>0&&r.a.createElement("button",{type:"button",className:"btn gp-btn-primary",onClick:this.saveMatch},o?"Засах":"Хадгалах"))}}])&&C(t.prototype,n),a&&C(t,a),c}(a.Component);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function J(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=$(e);if(t){var r=$(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){return r.a.createElement("div",{className:"form-group col-md-".concat(e.length)},r.a.createElement("label",{htmlFor:e.name},e.label),r.a.createElement("select",{name:"",id:e.name,className:"custom-select",disabled:e.disabled,onChange:function(t){"-1"!=t.target.value?e.sendValue(e.name,e.datas[t.target.value][e.property],t.target.value):e.sendValue(e.name,[])},value:e.value},r.a.createElement("option",{value:"-1"}," -- Сонгоно уу -- "),e.datas.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)}))))},K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(c,e);var t,n,a,o=U(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={datas:[],packs:[],features:[],feature_code:"",ano_db_table:e.ano_db_table,theme_idx:"",pack_idx:"",feat_idx:"",table_id:e.match.params.table_id,id:e.match.params.id},t.getValue=t.getValue.bind(z(t)),t.setSelectValue=t.setSelectValue.bind(z(t)),t.setOptions=t.setOptions.bind(z(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.state,t=e.id,n=e.table_id;this.setOptions(t,n)}},{key:"setOptions",value:function(e,t){var n=this;Promise.all([v.a.mssql_config.getThemeFeatures(),v.a.mssql_config.getTableNames(e,t)]).then((function(e){var t=I(e,2),a=t[0].datas,r=t[1],o=(r.success,r.ano_db_table);n.setState({datas:a,ano_db_table:o}),n.setSelectValue(o)}))}},{key:"getValue",value:function(e,t,n){this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t)),"feature_code"==e&&(this.setState({feat_idx:n}),this.props.sendFeatureCode(t)),"packs"==e&&this.setState({features:[],theme_idx:n}),"features"==e&&this.setState({pack_idx:n})}},{key:"setSelectValue",value:function(e){var t,n,a,r=this.state.datas;r.map((function(r,o){r.children.map((function(r,c){r.children.map((function(r,i){r.code==e.feature_code&&(t=o,n=c,a=i)}))}))})),this.setState({theme_idx:t,pack_idx:n,feat_idx:a,packs:r[t]?r[t].children:[],features:r[t]?r[t].children[n].children:[]})}},{key:"render",value:function(){var e=this.state,t=e.datas,n=e.packs,a=e.features,o=(e.feature_code,e.theme_idx),c=e.pack_idx,i=e.feat_idx,l=e.table_id;return r.a.createElement("div",{className:"form-row"},r.a.createElement(H,{name:"packs",datas:t,sendValue:this.getValue,property:"children",length:"4",label:"Theme",value:o,disabled:!!l}),r.a.createElement(H,{name:"features",datas:n,sendValue:this.getValue,property:"children",length:"4",label:"Package",value:c,disabled:!!l}),r.a.createElement(H,{name:"feature_code",datas:a,sendValue:this.getValue,property:"code",length:"4",label:"Feature",value:i,disabled:!!l}))}}])&&J(t.prototype,n),a&&J(t,a),c}(a.Component),W=n(119),X=n(75);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=oe(e);if(t){var r=oe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ae(this,n)}}function ae(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(c,e);var t,n,a,o=ne(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={id:e.match.params.id,table_id:e.match.params.table_id,table_names:[],selected_value:"",is_loading:!0,modal_status:"closed",feature_code:"",ano_db_table:{}},t.handleChange=t.handleChange.bind(re(t)),t.getTableNames=t.getTableNames.bind(re(t)),t.setLoading=t.setLoading.bind(re(t)),t.setModal=t.setModal.bind(re(t)),t.handleModalOpen=t.handleModalOpen.bind(re(t)),t.getFeatureCode=t.getFeatureCode.bind(re(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.id,n=e.table_id;this.getTableNames(t,n)}},{key:"getTableNames",value:function(e,t){var n,a=this;t&&(n=t),t||(n=-1),v.a.mssql_config.getTableNames(e,n).then((function(e){var t=e.success,n=e.table_names,r=e.ano_db_table;t&&(Object.keys(r).length>0?a.setState({selected_value:r.table_name,table_names:n,is_loading:!1,ano_db_table:r}):a.setState({table_names:n,is_loading:!1,ano_db_table:r}))})).catch((function(){alert("Холболтонд алдаа гарсан байна"),a.setState({is_loading:!1})}))}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({selected_value:t})}},{key:"setLoading",value:function(e){this.setState({is_loading:e})}},{key:"setModal",value:function(e,t,n,a,r,o,c,i){this.setState({modalAction:e,text:t,title:n,modal_icon:a,icon_color:r,has_button:o,actionNameDelete:c,modalClose:i}),this.handleModalOpen()}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"getFeatureCode",value:function(e){this.setState({feature_code:e})}},{key:"render",value:function(){var e=this.state,t=e.table_names,n=e.selected_value,a=e.id,o=e.is_loading,c=e.feature_code,l=e.ano_db_table,s=e.table_id;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(W.a,{is_loading:o,text:"Уншиж байна"}),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"table_name"},"Хүснэгтийн нэр"),r.a.createElement("select",{className:"custom-select",id:"table_name",onChange:this.handleChange,value:n,disabled:!!s},r.a.createElement("option",{value:""}," -- Хүснэгтийн нэр сонгоно уу -- "),t.length>0&&t.map((function(e,t){return r.a.createElement("option",{key:t,value:e.table_name},e.table_name)})))),r.a.createElement("div",{className:"input-group col-md-12"},r.a.createElement(K,Z({},this.props,{setLoading:this.setLoading,sendFeatureCode:this.getFeatureCode})))),r.a.createElement("hr",null),r.a.createElement(V,Z({ano_db_table:l},this.props,{selected_value:n,connection_id:a,setLoading:this.setLoading,setModal:this.setModal,feature_code:c})),r.a.createElement(X.a,{modal_status:this.state.modal_status,modalAction:this.state.modalAction,text:this.state.text,title:this.state.title,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,has_button:this.state.has_button,actionNameDelete:this.state.actionNameDelete,modalClose:this.state.modalClose}),r.a.createElement(i.a,Z({},this.props,{name:"Буцах",navlink_url:"/back/another-base/connection/mssql/".concat(a,"/tables/")}))))}}])&&ee(t.prototype,n),a&&ee(t,a),c}(a.Component),ie=n(975);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=he(e);if(t){var r=he(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return de(this,n)}}function de(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?pe(e):t}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(c,e);var t,n,a,o=me(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={id:e.match.params.id,"жагсаалтын_холбоос":"/back/another-database/mssql/tables/".concat(e.match.params.id,"/"),"талбарууд":[{field:"table_name",title:"Хүснэгтийн нэр"},{field:"feature_code",title:"Feature"},{field:"created_at",title:"Үүссэн"},{field:"updated_at",title:"Зассан"}],"нэмэлт_талбарууд":[{title:"Засах",text:"",icon:"fa fa-table text-success",action:function(e){return t.goLink(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}}],refresh:!0,modal_status:"closed",values:{}},t.handleRemove=t.handleRemove.bind(pe(t)),t.goLink=t.goLink.bind(pe(t)),t.handleModalOpen=t.handleModalOpen.bind(pe(t)),t.handleRemoveAction=t.handleRemoveAction.bind(pe(t)),t.modalChange=t.modalChange.bind(pe(t)),t}return t=c,(n=[{key:"goLink",value:function(e){this.props.history.push("/back/another-base/connection/mssql/".concat(e.another_database_id,"/").concat(e.id,"/update/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state,n=t.values,a=t.id;v.a.mssql_config.tableRemove(a,n.id).then((function(t){t.success&&e.setState({refresh:!e.state.refresh})}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"handleRemoveAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-exclamation-triangle",null,"warning","Тохиргоог устгах",'Та "'.concat(e.table_name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),!0,"","",(function(e){return t.handleRemove(e)}),null)}},{key:"modalChange",value:function(e,t,n,a,r,o,c,i,l,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:r,has_button:o,actionNameBack:c,actionNameDelete:i,modalAction:l,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,a=e.хувьсах_талбарууд,o=e.нэмэлт_талбарууд,c=e.refresh,l=(e.values,e.modal_status,e.id);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(ie.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":a,"нэмэлт_талбарууд":o,"нэмэх_товч":"/back/another-base/connection/mssql/".concat(l,"/create/"),refresh:c})))),r.a.createElement(X.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,text:this.state.text,title:this.state.title,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}),r.a.createElement(i.a,se({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&ue(t.prototype,n),a&&ue(t,a),c}(a.Component);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Oe(e);if(t){var r=Oe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ke(this,n)}}function ke(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(i,e);var t,n,a,c=Ee(i);function i(){return _e(this,i),c.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card-body"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/back/another-base/connection/mssql/:id/:table_id/update/",component:ce}),r.a.createElement(o.b,{path:"/back/another-base/connection/mssql/:id/create/",component:ce}),r.a.createElement(o.b,{path:"/back/another-base/connection/mssql/:id/tables/",component:be}),r.a.createElement(o.b,{path:"/back/another-base/connection/mssql/:id",component:P}),r.a.createElement(o.b,{path:"/back/another-base/connection/mssql/",component:P})))}}])&&ve(t.prototype,n),a&&ve(t,a),i}(a.Component);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function je(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=De(e);if(t){var r=De(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=_.c().shape({name:_.d().required("хоосон байна!"),definition:_.d(),mongo_engine:_.d().required("хоосон байна!"),mongo_client_host:_.d().required("хоосон байна!"),mongo_client_username:_.d(),mongo_client_password:_.d(),mongo_database:_.d().required("хоосон байна!"),mongo_port:_.d().required("хоосон байна!")}),qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(l,e);var t,n,o,c=Pe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={is_editing:!1,initial_values:{id:e.match.params.id,name:"",definition:"",mongo_engine:"",mongo_client_host:"",mongo_client_username:"",mongo_client_password:"",mongo_database:"",mongo_port:""},values:{}},t.handleEdit=t.handleEdit.bind(Ce(t)),t.handleSubmit=t.handleSubmit.bind(Ce(t)),t.getConfigs=t.getConfigs.bind(Ce(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getConfigs(e)}},{key:"getConfigs",value:function(e){var t=this;v.a.mongo_config.get(e).then((function(e){var n=e.values;t.setState({initial_values:n,values:n})}))}},{key:"handleEdit",value:function(e){e.preventDefault();var t=this.state.is_editing;this.setState({is_editing:!t})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=(t.setValues,t.setErrors);a("saving"),v.a.mongo_config.save(e).then((function(e){var t=e.success,n=e.errors;if(!t)return r(n),Promise.reject();a("save_success")})).catch((function(){a("save_error")})).finally((function(){n.setState({is_editing:!1})}))}},{key:"render",value:function(){var e=this.state,t=(e.is_editing,e.initial_values);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"MongoDB Connection Тохиргоо"),r.a.createElement("div",{className:"card-body"},r.a.createElement(y.e,{initialValues:t,initialStatus:"initial",enableReinitialize:!0,validationSchema:Te,onSubmit:this.handleSubmit},(function(e){var t=e.errors,n=e.status,o=(e.touched,e.isSubmitting,e.setFieldValue,e.setStatus);return e.setValues,e.handleBlur,e.values,e.isValid,e.dirty,r.a.createElement(y.d,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6 text-wrap"},r.a.createElement("label",{htmlFor:"id_name"},"Нэр"),r.a.createElement(y.b,{name:"name",id:"id_name",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.name)),r.a.createElement("div",{className:"form-group col-md-6 text-wrap"},r.a.createElement("label",{htmlFor:"id_definition"},"Тайлбар"),r.a.createElement(y.b,{name:"definition",id:"id_definition",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.definition)),r.a.createElement("div",{className:"form-group col-md-6 text-wrap"},r.a.createElement("label",{htmlFor:"id_mongo_engine"},"ENGINE"),r.a.createElement(y.b,{name:"mongo_engine",id:"id_mongo_engine",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.mongo_engine)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_mongo_client_host"},"Server HOST"),r.a.createElement(y.b,{name:"mongo_client_host",id:"id_mongo_client_host",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.mongo_client_host)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_mongo_client_username"},"Username"),r.a.createElement(y.b,{name:"mongo_client_username",type:"text",className:"form-control",id:"id_mongo_client_username"}),r.a.createElement("p",{className:"text-danger"},t.mongo_client_username)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_mongo_client_password"},"Password"),r.a.createElement(y.b,{name:"mongo_client_password",type:"text",className:"form-control",id:"id_mongo_client_password"}),r.a.createElement("p",{className:"text-danger"},t.mongo_client_password)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_mongo_database"},"Database Name"),r.a.createElement(y.b,{name:"mongo_database",id:"id_mongo_database",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.mongo_database)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_mongo_port"},"Port"),r.a.createElement(y.b,{name:"mongo_port",id:"id_mongo_port",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.mongo_port))),r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:"saving"==n},"saving"==n&&r.a.createElement(a.Fragment,null,r.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"})," ","Түр хүлээнэ үү..."),"saving"!=n&&"Хадгалах"),"save_success"==n&&r.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return o("initial")}},"×"),r.a.createElement("div",{className:"alert-icon icon-part-success"},r.a.createElement("i",{className:"icon-check"})),r.a.createElement("div",{className:"alert-message"},r.a.createElement("span",null,"Амжилттай хадгаллаа!"))),"save_error"==n&&r.a.createElement("div",{className:"alert alert-icon-warning alert-dismissible",role:"alert"},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return o("initial")}},"×"),r.a.createElement("div",{className:"alert-icon icon-part-warning"},r.a.createElement("i",{className:"icon-check"})),r.a.createElement("div",{className:"alert-message"},r.a.createElement("span",null,"Хадгалахад алдаа гарлаа!"))))}))),r.a.createElement(i.a,Ne({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&je(t.prototype,n),o&&je(t,o),l}(a.Component);function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Le(e,t,n){return t&&Ve(e.prototype,t),n&&Ve(e,n),e}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Qe(e);if(t){var r=Qe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ge(this,n)}}function Ge(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?Ue(e):t}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){Ie(n,e);var t=Je(n);function n(e){var a;return Me(this,n),(a=t.call(this,e)).state={},a}return Le(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.properties,o=t.data_key,c=[],i=!1;a.map((function(e){c.length>0&&(i=!1,c.map((function(t){t==e.data_type_id&&(i=!0)}))),0==i&&(c=c.concat(e.data_type_id))}));var l=[];return c.map((function(e){l.push({data_type_name:"",data_type_id:e,children:[]})})),a.map((function(e){l.map((function(t,n){t.data_type_id==e.data_type_id&&(t.data_type_name=e.data_type_name,t.children.push({property_name:e.property_name,property_id:e.property_id}))}))})),r.a.createElement("div",{className:"row mb-1 border-bottom pb-1"},r.a.createElement("div",{className:"col-2"},n.name_1),r.a.createElement("div",{className:"col-2"},n.name_2),r.a.createElement("div",{className:"col-4"},r.a.createElement("select",{value:n.real_name,className:"custom-select",id:"table_name",onChange:function(t){return e.props.handleSetField(o,t.target.value)}},r.a.createElement("option",null," -- Property Сонгоно уу -- "),l.map((function(e,t){return r.a.createElement("optgroup",{key:t,label:e.data_type_name},e.children.map((function(e,t){return r.a.createElement("option",{key:t,value:e.property_id},e.property_name)})))})))))}}]),n}(a.Component),$e=function(e){Ie(n,e);var t=Je(n);function n(e){var a;return Me(this,n),(a=t.call(this,e)).state={id:e.match.params.id,table_id:e.match.params.table_id,table_names:[],selected_value:"",feature_value:"",features:[],field_names:[],properties:[]},a.handleChange=a.handleChange.bind(Ue(a)),a.getTableNames=a.getTableNames.bind(Ue(a)),a.getProperties=a.getProperties.bind(Ue(a)),a.handleSetField=a.handleSetField.bind(Ue(a)),a.handleSave=a.handleSave.bind(Ue(a)),a}return Le(n,[{key:"componentDidMount",value:function(){var e=this.state,t=e.id,n=e.table_id;n&&this.handleState(t,n),this.getTableNames(t)}},{key:"handleState",value:function(e,t){var n=this;v.a.mongo_config.tableConfig(e,t).then((function(e){var t=e.success,a=e.form_datas;t&&(n.setState({selected_value:a.table_name,feature_value:a.feature_code,field_names:a.field_config}),n.getProperties(a.feature_code))}))}},{key:"getTableNames",value:function(e){var t=this;v.a.mongo_config.tables(e).then((function(e){var n=e.success,a=e.table_names,r=e.features;n&&t.setState({table_names:a,features:r})}))}},{key:"getTableFields",value:function(e){var t=this,n=this.state.id;v.a.mongo_config.fieldNames(n,e).then((function(e){var n=e.success,a=e.field_names;n&&t.setState({field_names:a})}))}},{key:"handleChange",value:function(e,t){var n,a,r,o=t.target.value;this.setState((r=o,(a=e)in(n={})?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n)),"selected_value"==e&&this.getTableFields(o),"feature_value"==e&&this.getProperties(o)}},{key:"handleSave",value:function(){var e=this,t=this.state,n=t.id,a=t.table_id,r=t.field_names,o=t.feature_value,c=t.selected_value;v.a.mongo_config.tableSave(n,a,r,c,o).then((function(t){t.success&&(alert("Амжилттай хадгаллаа."),e.props.history.push("/back/another-base/connection/mongo/".concat(n,"/list/")))}))}},{key:"getProperties",value:function(e){var t=this;v.a.mssql_config.getProperties(e).then((function(e){var n=e.success,a=e.properties;n&&t.setState({properties:a})}))}},{key:"handleSetField",value:function(e,t){var n=this.state.field_names;n[e].real_name=t,this.setState({field_names:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.table_names,a=t.selected_value,o=t.features,c=t.feature_value,l=t.field_names,s=t.properties,u=t.table_id,f=t.id;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"form-row card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"table_name"},"Хүснэгтийн нэр"),r.a.createElement("select",{className:"custom-select",id:"table_name",onChange:function(t){return e.handleChange("selected_value",t)},value:a,disabled:!!u},r.a.createElement("option",{value:""}," -- Хүснэгтийн нэр сонгоно уу -- "),n.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("label",{htmlFor:"table_name mt-1"},"Feature нэр"),r.a.createElement("select",{className:"custom-select",id:"table_name",onChange:function(t){return e.handleChange("feature_value",t)},disabled:!!u,value:c},r.a.createElement("option",{value:""}," -- feature нэр сонгоно уу -- "),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e.code},e.name)}))))),l&&c&&s&&l.length>0&&r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row mb-1 border-bottom pb-1"},r.a.createElement("div",{className:"col-2"},"Json obj нэр"),r.a.createElement("div",{className:"col-2"},"Json obj доторх Json obj нэр"),r.a.createElement("div",{className:"col-4"},"property сонгох")),l.map((function(t,n){return r.a.createElement(ze,{data_key:n,properties:s,data:t,handleSetField:e.handleSetField})})),r.a.createElement("a",{className:"btn btn-primary text-white m-3",onClick:this.handleSave},"Хадгалах")),r.a.createElement(i.a,Fe({},this.props,{name:"Буцах",navlink_url:"/back/another-base/connection/mongo/".concat(f,"/list/")})))}}]),n}(a.Component);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function We(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=tt(e);if(t){var r=tt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?et(e):t}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(c,e);var t,n,a,o=Ye(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={id:e.match.params.id,"жагсаалтын_холбоос":"/back/another-database/mongo/tables/".concat(e.match.params.id,"/all/"),"талбарууд":[{field:"table_name",title:"Нэр"},{field:"feature_code",title:"Feature нэр"}],"нэмэлт_талбарууд":[{title:"Засах",text:"",icon:"fa fa-pencil-square-o text-success",action:function(e){return t.goLink(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}}],refresh:!0,modal_status:"closed",values:{}},t.handleRemove=t.handleRemove.bind(et(t)),t.goLink=t.goLink.bind(et(t)),t.handleModalOpen=t.handleModalOpen.bind(et(t)),t.handleRemoveAction=t.handleRemoveAction.bind(et(t)),t.modalChange=t.modalChange.bind(et(t)),t}return t=c,(n=[{key:"set_active_color",value:function(e){var t="text-danger fa fa-times";return e&&(t="text-success fa fa-check"),t}},{key:"goLink",value:function(e){var t=this.state.id;this.props.history.push("/back/another-base/connection/mongo/".concat(t,"/insert/").concat(e.id,"/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state,n=t.values,a=t.id;v.a.mongo_config.tableRemove(a,n.id).then((function(t){t.success&&e.setState({refresh:!e.state.refresh})}))}},{key:"modalChange",value:function(e,t,n,a,r,o,c,i,l,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:r,has_button:o,actionNameBack:c,actionNameDelete:i,modalAction:l,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"handleRemoveAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-exclamation-triangle",null,"warning","Тохиргоог устгах",'Та "'.concat(e.table_name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),!0,"","",(function(e){return t.handleRemove(e)}),null)}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,a=e.хувьсах_талбарууд,o=e.нэмэлт_талбарууд,c=e.refresh,l=(e.values,e.modal_status,e.id);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(ie.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":a,"нэмэлт_талбарууд":o,"нэмэх_товч":"/back/another-base/connection/mongo/".concat(l,"/insert/"),refresh:c})))),r.a.createElement(X.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,text:this.state.text,title:this.state.title,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}),r.a.createElement(i.a,Ke({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&We(t.prototype,n),a&&We(t,a),c}(a.Component);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=st(e);if(t){var r=st(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return lt(this,n)}}function lt(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(i,e);var t,n,a,c=it(i);function i(){return rt(this,i),c.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card-body"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/back/another-base/connection/mongo/:id/list/",component:nt}),r.a.createElement(o.b,{path:"/back/another-base/connection/mongo/:id/insert/:table_id/",component:$e}),r.a.createElement(o.b,{path:"/back/another-base/connection/mongo/:id/insert/",component:$e}),r.a.createElement(o.b,{path:"/back/another-base/connection/mongo/:id",component:qe}),r.a.createElement(o.b,{path:"/back/another-base/connection/mongo/",component:qe})))}}])&&ot(t.prototype,n),a&&ot(t,a),i}(a.Component);function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=yt(e);if(t){var r=yt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ht(this,n)}}function ht(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(c,e);var t,n,a,o=pt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={"жагсаалтын_холбоос":"/back/another-database/".concat(!1,"/all/"),"талбарууд":[{field:"name",title:"Нэр"},{field:"definition",title:"Тайлбар"},{field:"unique_id",title:"Таних талбар"},{field:"db_type",title:"Дата бааз төрөл"},{field:"database_updated_at",title:"Сүүлд шинэчилсэн"},{field:"created_at",title:"Үүссэн"},{field:"updated_at",title:"Зассан"}],"нэмэлт_талбарууд":[{title:"import",text:"",icon:"fa fa-table text-success",action:function(e){return t.tableGoLink(e)}},{title:"Засах",text:"",icon:"fa fa-pencil-square-o text-success",action:function(e){return t.goLink(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}},{title:"Бааз шинэчлэх",text:"",icon:"fa fa-car text-danger",action:function(e){return t.handleRefreshData(e)}},{title:"crontab",text:"",icon:"fa fa-circle text-danger",action:function(e){return t.crontabLink(e)}}],is_loading:!1,refresh:!0,modal_status:"closed",values:{}},t.handleRemove=t.handleRemove.bind(bt(t)),t.goLink=t.goLink.bind(bt(t)),t.tableGoLink=t.tableGoLink.bind(bt(t)),t.handleModalOpen=t.handleModalOpen.bind(bt(t)),t.handleRemoveAction=t.handleRemoveAction.bind(bt(t)),t.handleRefreshData=t.handleRefreshData.bind(bt(t)),t.crontabLink=t.crontabLink.bind(bt(t)),t.handleMssql=t.handleMssql.bind(bt(t)),t.handleMongo=t.handleMongo.bind(bt(t)),t.modalChange=t.modalChange.bind(bt(t)),t.handlePGRefreshData=t.handlePGRefreshData.bind(bt(t)),t.refreshView=t.refreshView.bind(bt(t)),t}return t=c,(n=[{key:"crontabLink",value:function(e){this.props.history.push("/back/another-base/connection/crontab/".concat(e.id,"/"))}},{key:"handleRefreshData",value:function(e){"MSSQL"==e.db_type?this.handleMssql(e):"MONGODB"==e.db_type?this.handleMongo(e):"PgDB"==e.db_type&&this.handlePGRefreshData(e)}},{key:"handlePGRefreshData",value:function(e){var t=this;this.setState({is_loading:!0}),v.a.pg_config.refreshData(e.id).then((function(n){var a=n.success,r=n.table_info;if(a){t.setState({is_loading:!1});var o=r.join("\n");t.modalChange("fa fa-check-circle",null,"success","Амжилттай","".concat(o),!1,"","",null,(function(){return t.refreshView(e)}))}}))}},{key:"refreshView",value:function(e){v.a.pg_config.refreshView(e.id).then((function(e){e.success}))}},{key:"handleMssql",value:function(e){var t=this;this.setState({is_loading:!0}),v.a.mssql_config.refreshData(e.id).then((function(e){e.success?(t.setState({is_loading:!1}),t.modalChange("fa fa-check-circle",null,"success","Амжилттай боллоо","",!1,"","",null,null)):(t.setState({is_loading:!1}),t.modalChange("fa fa-time-circle",null,"danger","Алдаа гарлаа","",!1,"","",null,null))}))}},{key:"handleMongo",value:function(e){var t=this;this.setState({is_loading:!0}),v.a.update(e.id).then((function(e){var n=e.success,a=e.all_count,r=e.success_count,o=e.prop_b_count;n?(t.setState({is_loading:!1}),t.modalChange("fa fa-check-circle",null,"success","Амжилттай","Нийт ".concat(a," мөр дата, insert хийгдэх мөр ").concat(o," эндээс амжилттай орсон нь ").concat(r),!1,"","",null,null)):(t.setState({is_loading:!1}),t.modalChange("fa fa-times-circle",null,"danger","Алдаа гарлаа","Мэдээлэл дутуу байна.",!1,"","",null,null))})).catch((function(){t.setState({is_loading:!1}),t.modalChange("fa fa-check-circle",null,"danger","Алдаа гарсан байна","",!1,"","",null,null)}))}},{key:"set_active_color",value:function(e){var t="text-danger fa fa-times";return e&&(t="text-success fa fa-check"),t}},{key:"tableGoLink",value:function(e){"MSSQL"==e.db_type?this.props.history.push("/back/another-base/connection/mssql/".concat(e.id,"/tables/")):"MONGODB"==e.db_type?this.props.history.push("/back/another-base/connection/mongo/".concat(e.id,"/list/")):"PgDB"==e.db_type&&this.props.history.push("/back/another-base/connection/pg/".concat(e.id,"/list/"))}},{key:"goLink",value:function(e){"MSSQL"==e.db_type?this.props.history.push("/back/another-base/connection/mssql/".concat(e.id,"/")):"MONGODB"==e.db_type?this.props.history.push("/back/another-base/connection/mongo/".concat(e.id,"/")):"PgDB"==e.db_type&&this.props.history.push("/back/db-export/connection/pg/".concat(e.id,"/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state.values;v.a.remove(t.id,t.unique_id).then((function(t){t.success&&e.setState({refresh:!e.state.refresh},(function(){e.modalChange("fa fa-check-circle",null,"success","Амжилттай устгалаа","",!1,"","",null,null)}))}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"handleRemoveAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-exclamation-circle",null,"warning","Тохиргоог устгах",'Та "'.concat(e.name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),!0,"","",(function(e){return t.handleRemove(e)}),null)}},{key:"modalChange",value:function(e,t,n,a,r,o,c,i,l,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:r,has_button:o,actionNameBack:c,actionNameDelete:i,modalAction:l,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,a=e.хувьсах_талбарууд,o=e.нэмэлт_талбарууд,c=e.refresh,i=(e.values,e.modal_status,e.is_loading);return r.a.createElement("div",{className:"row"},r.a.createElement(W.a,{is_loading:i,text:"Уншиж байна"}),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(ie.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":a,"нэмэлт_талбарууд":o,"нэмэх_товч":"/back/another-base/connection/",refresh:c})))),r.a.createElement(X.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,text:this.state.text,title:this.state.title,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}))}}])&&mt(t.prototype,n),a&&mt(t,a),c}(a.Component);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Et(e,t,n,a,r,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function kt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=jt(e);if(t){var r=jt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return wt(this,n)}}function wt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?Nt(e):t}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(s,e);var t,n,a,o,c,l=St(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).state={id:e.match.params.id,"жагсаалтын_холбоос":"/back/another-database/pg/tables/".concat(e.match.params.id,"/all/"),"талбарууд":[{field:"feature_code",title:"Feature-ийн нэр"},{field:"table_name",title:"Хүснэгтийн нэр"},{field:"table_unique_id",title:"Таних тэмдэг"},{field:"created_at",title:"Үүссэн"},{field:"updated_at",title:"Зассан"}],"нэмэлт_талбарууд":[{title:"Import",text:"",icon:"fa fa-car text-danger",action:function(e){return t.handleExportAction(e)}},{title:"Засах",text:"",icon:"fa fa-pencil-square-o text-success",action:function(e){return t.goLink(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}}],refresh:!0,modal_status:"closed",values:{}},t.handleRemove=t.handleRemove.bind(Nt(t)),t.goLink=t.goLink.bind(Nt(t)),t.handleModalOpen=t.handleModalOpen.bind(Nt(t)),t.handleRemoveAction=t.handleRemoveAction.bind(Nt(t)),t.modalChange=t.modalChange.bind(Nt(t)),t.refreshTable=t.refreshTable.bind(Nt(t)),t.refreshView=t.refreshView.bind(Nt(t)),t}return t=s,(n=[{key:"goLink",value:function(e){this.props.history.push("/back/another-base/connection/pg/".concat(e.another_database_id,"/").concat(e.id,"/update/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state,n=t.values,a=t.id;v.a.pg_config.removeTable(a,n.id,!1).then((function(t){t.success&&e.setState({refresh:!e.state.refresh})}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"handleRemoveAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-exclamation-triangle",null,"warning","Тохиргоог устгах",'Та "'.concat(e.table_name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),!0,"","",(function(e){return t.handleRemove(e)}),null)}},{key:"handleExportAction",value:function(e){var t=this;this.setState({values:e}),this.modalChange("fa fa-check-circle",null,"success","Export",'Та "'.concat(e.table_name,'" нэртэй хүснэгтийг "insert" хийхдээ итгэлтэй байна уу?'),!0,"","Тийм",(function(e){return t.refreshTable(e)}),null)}},{key:"modalChange",value:function(e,t,n,a,r,o,c,i,l,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:r,has_button:o,actionNameBack:c,actionNameDelete:i,modalAction:l,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"refreshView",value:function(e){var t=this.state.id;v.a.pg_config.refreshView(t,e.id).then((function(e){e.success}))}},{key:"refreshTable",value:(o=regeneratorRuntime.mark((function e(){var t,n,a,r,o,c,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.values,a=t.id,e.next=3,v.a.pg_config.insertSingleData(a,n.id);case 3:r=e.sent,o=r.success,c=r.table_info,o&&(this.setState({is_loading:!1}),this.modalChange("fa fa-check-circle",null,"success","Амжилттай","".concat(c),!1,"","",null,(function(){return i.refreshView(n)})));case 7:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=o.apply(e,t);function c(e){Et(r,n,a,c,i,"next",e)}function i(e){Et(r,n,a,c,i,"throw",e)}c(void 0)}))},function(){return c.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,a=e.хувьсах_талбарууд,o=e.нэмэлт_талбарууд,c=e.refresh,l=(e.values,e.modal_status,e.id);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(ie.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":a,"нэмэлт_талбарууд":o,"нэмэх_товч":"/back/another-base/connection/pg/".concat(l,"/create/"),refresh:c})))),r.a.createElement(X.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,text:this.state.text,title:this.state.title,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}),r.a.createElement(i.a,gt({},this.props,{name:"Буцах",navlink_url:"/back/another-base/"})))}}])&&kt(t.prototype,n),a&&kt(t,a),s}(a.Component),Pt=n(1066);function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=At(e);if(t){var r=At(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ft(this,n)}}function Ft(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(i,e);var t,n,a,c=qt(i);function i(){return Ct(this,i),c.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card-body"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/back/another-base/connection/pg/:id/list/",component:xt}),r.a.createElement(o.b,{path:"/back/another-base/connection/pg/:id/create/",component:Pt.a}),r.a.createElement(o.b,{path:"/back/another-base/connection/pg/:id/:table_id/update/",component:Pt.a})))}}])&&Dt(t.prototype,n),a&&Dt(t,a),i}(a.Component);function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function It(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Qt(e);if(t){var r=Qt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Gt(this,n)}}function Gt(e,t){return!t||"object"!==Vt(t)&&"function"!=typeof t?Ut(e):t}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zt=_.c().shape({minute:_.d().required("хоосон байна!"),hour:_.d().required("хоосон байна!"),day:_.d().required("хоосон байна!"),month:_.d().required("хоосон байна!"),day_week:_.d().required("хоосон байна!")}),$t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(l,e);var t,n,o,c=Jt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={is_editing:!1,initial_values:{id:e.match.params.id,minute:"",hour:"",day:"",month:"",day_week:"",crontab_is_active:!1,is_export:!1},info:"",values:{}},t.handleEdit=t.handleEdit.bind(Ut(t)),t.handleSubmit=t.handleSubmit.bind(Ut(t)),t.getConfigs=t.getConfigs.bind(Ut(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getConfigs(e)}},{key:"getConfigs",value:function(e){var t=this;v.a.cronTabDetail(e).then((function(e){var n=e.values;t.setState({initial_values:n,values:n})}))}},{key:"handleEdit",value:function(e){e.preventDefault();var t=this.state.is_editing;this.setState({is_editing:!t})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=(t.setValues,t.setErrors);a("saving"),v.a.cronTabSave(e).then((function(e){var t=e.success,o=e.errors,c=e.info;if(!t)return r(o),Promise.reject();a("save_success"),n.setState({info:c})})).catch((function(){a("save_error")})).finally((function(){n.setState({is_editing:!1})}))}},{key:"render",value:function(){var e=this.state,t=(e.is_editing,e.initial_values),n=e.info,o="/back/another-base/";return t.is_export&&(o="/back/db-export/"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"CronTab Тохиргоо"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"Минут")," скриптийг гүйцэтгэх минуттай тохирч байгаа бөгөөд утга нь 0-ээс 59 хооронд хэлбэлздэг"),r.a.createElement("li",null,r.a.createElement("b",null,"Цаг")," яг цаг, 24 цагийн форматыг зохицуулдаг бөгөөд утга нь 0-ээс 23 хооронд хэлбэлздэг бөгөөд 0 нь шөнийн 12:00 байна."),r.a.createElement("li",null,r.a.createElement("b",null,"Өдөр")," гэдэг нь тухайн сарын өдрийг хэлнэ, жишээлбэл та 15 хоног тутамд гүйхийг хүсвэл 15-ыг зааж өгч болно"),r.a.createElement("li",null,r.a.createElement("b",null,"Сар")," гэдэг нь тухайн жилийн аль сар гэдгийг өгнө"),r.a.createElement("li",null,r.a.createElement("b",null,"Гараг")," гэдэг нь долоо хоногийн өдөр гэсэн үг бөгөөд энэ нь тоон (0-ээс 7, энд 0 ба 7 нь ням гараг байдаг) эсвэл англи хэл дээрх өдрийн эхний 3 үсэг байж болно: mon, tue, wed, thu, fri, sat, sun.")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"(*)")," Тухайн нэг цаг өдрийг товлохгүй гэж үзвэл"),r.a.createElement("li",null,r.a.createElement("b",null,"(1, 2, 3 ...)")," Бусад үед тоо ашиглах.")),r.a.createElement("div",{className:"card-body"},r.a.createElement(y.e,{initialValues:t,initialStatus:"initial",enableReinitialize:!0,validationSchema:zt,onSubmit:this.handleSubmit},(function(e){var t=e.errors,o=e.status,c=(e.touched,e.isSubmitting,e.setFieldValue,e.setStatus);return e.setValues,e.handleBlur,e.values,e.isValid,e.dirty,r.a.createElement(y.d,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-1 text-wrap"},r.a.createElement("label",{htmlFor:"id_minute"},"Минут"),r.a.createElement(y.b,{name:"minute",id:"id_minute",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.minute)),r.a.createElement("div",{className:"form-group col-md-1 text-wrap"},r.a.createElement("label",{htmlFor:"id_hour"},"Цаг"),r.a.createElement(y.b,{name:"hour",id:"id_hour",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.hour)),r.a.createElement("div",{className:"form-group col-md-1"},r.a.createElement("label",{htmlFor:"id_day"},"Өдөр"),r.a.createElement(y.b,{name:"day",id:"id_day",type:"text",className:"form-control"}),r.a.createElement("p",{className:"text-danger"},t.day)),r.a.createElement("div",{className:"form-group col-md-1"},r.a.createElement("label",{htmlFor:"id_month"},"Сар"),r.a.createElement(y.b,{name:"month",type:"text",className:"form-control",id:"id_month"}),r.a.createElement("p",{className:"text-danger"},t.month)),r.a.createElement("div",{className:"form-group col-md-1"},r.a.createElement("label",{htmlFor:"id_day_week"},"Гараг"),r.a.createElement(y.b,{name:"day_week",type:"text",className:"form-control",id:"id_day_week"}),r.a.createElement("p",{className:"text-danger"},t.day_week))),r.a.createElement("div",{className:"form-group col-md-1"},r.a.createElement("label",{htmlFor:"id_crontab_is_active"},"Идэвхжүүлэх"),r.a.createElement(y.b,{className:"ml-2",name:"crontab_is_active",id:"id_crontab_is_active",type:"checkbox"}),r.a.createElement("p",{className:"text-danger"},t.crontab_is_active)),r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:"saving"==o},"saving"==o&&r.a.createElement(a.Fragment,null,r.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"})," ","Түр хүлээнэ үү..."),"saving"!=o&&"Хадгалах"),"save_success"==o&&r.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return c("initial")}},"×"),r.a.createElement("div",{className:"alert-icon icon-part-success"},r.a.createElement("i",{className:"icon-check"})),r.a.createElement("div",{className:"alert-message"},r.a.createElement("span",null,"Амжилттай хадгаллаа!"))),"save_error"==o&&r.a.createElement("div",{className:"alert alert-icon-warning alert-dismissible",role:"alert"},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return c("initial")}},"×"),r.a.createElement("div",{className:"alert-icon icon-part-warning"},r.a.createElement("i",{className:"icon-check"})),r.a.createElement("div",{className:"alert-message"},r.a.createElement("span",null,"Хадгалахад алдаа гарлаа!"))),n&&r.a.createElement("div",{className:"alert alert-icon-success alert-dismissible",role:"alert"},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return c("initial")}},"×"),r.a.createElement("div",{className:"alert-icon icon-part-success"},r.a.createElement("i",{className:"icon-check"})),r.a.createElement("div",{className:"alert-message"},r.a.createElement("span",null,n))))}))),r.a.createElement(i.a,Lt({},this.props,{name:"Буцах",navlink_url:o})))}}])&&It(t.prototype,n),o&&It(t,o),l}(a.Component);function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Zt(e);if(t){var r=Zt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Yt(this,n)}}function Yt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var en=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(i,e);var t,n,a,c=Xt(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c.call(this,e)}return t=i,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/back/another-base/connection/crontab/:id/",component:$t}),r.a.createElement(o.b,{path:"/back/another-base/connection/mongo/",component:ut}),r.a.createElement(o.b,{path:"/back/another-base/connection/mssql/",component:Se}),r.a.createElement(o.b,{path:"/back/another-base/connection/pg/",component:Mt}),r.a.createElement(o.b,{exact:!0,path:"/back/another-base/connection/",component:b}),r.a.createElement(o.b,{exact:!0,path:"/back/another-base/",component:_t})))}}])&&Kt(t.prototype,n),a&&Kt(t,a),i}(a.Component);t.default=en},977:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(228);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i="/back/another-database";var l={mssql_config:{get:function(e){var t=Object(a.a)();return fetch("".concat(i,"/mssql/get/").concat(e,"/"),t).then(a.c)},save:function(e){var t=o(o({},Object(a.b)()),{},{body:JSON.stringify(e)});return fetch("".concat(i,"/mssql/save/"),t).then(a.c)},getTableNames:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({connection_id:e,table_id:t})});return fetch("".concat(i,"/mssql/get-all-table-names/"),n).then(a.c)},getAttributes:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({table_name:e,id:t})});return fetch("".concat(i,"/mssql/get-attributes/"),n).then(a.c)},saveToDbTable:function(e,t,n,r,c){var l=o(o({},Object(a.b)()),{},{body:JSON.stringify({table_name:e,field_config:t,another_database_id:n,feature_code:r,table_id:c})});return fetch("".concat(i,"/mssql/save-to-ano-db-table/"),l).then(a.c)},insertToInspire:function(e,t,n,r){var c=o(o({},Object(a.b)()),{},{body:JSON.stringify({table_name:e,field_config:t,another_database_id:n,feature_code:r})});return fetch("".concat(i,"/mssql/insert-to-inspire/"),c).then(a.c)},tableRemove:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/mongo/tables/remove/").concat(e,"/").concat(t,"/"),n).then(a.c)},getProperties:function(e){var t=o({},Object(a.a)());return fetch("".concat(i,"/mssql/get-properties/").concat(e,"/"),t).then(a.c)},getThemeFeatures:function(){var e=o({},Object(a.a)());return fetch("".concat(i,"/get-inspire-shatlal/"),e).then(a.c)},refreshData:function(e){var t=o({},Object(a.a)());return fetch("".concat(i,"/mssql/refresh-mssql-datas/").concat(e,"/"),t).then(a.c)}},mongo_config:{get:function(e){var t=Object(a.a)();return fetch("".concat(i,"/mongo/get/").concat(e,"/"),t).then(a.c)},save:function(e){var t=o(o({},Object(a.b)()),{},{body:JSON.stringify(e)});return fetch("".concat(i,"/mongo/save/"),t).then(a.c)},tableSave:function(e,t,n,r,c){var l=o(o({},Object(a.b)()),{},{body:JSON.stringify({tableId:t,field_names:n,table_name:r,feature_code:c})});return fetch("".concat(i,"/mongo/tables/").concat(e,"/save/"),l).then(a.c)},tableRemove:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/mongo/tables/remove/").concat(e,"/").concat(t,"/"),n).then(a.c)},tableConfig:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/mongo/tables/detail/").concat(e,"/").concat(t,"/"),n).then(a.c)},tables:function(e){var t=o({},Object(a.a)());return fetch("".concat(i,"/mongo/tables/").concat(e,"/"),t).then(a.c)},fieldNames:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/mongo/fields/").concat(e,"/").concat(t,"/"),n).then(a.c)}},pg_config:{fieldNames:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({table_name:t})});return fetch("".concat(i,"/pg/").concat(e,"/get_table_fields/"),n).then(a.c)},getAnotherPgDetail:function(e){var t=Object(a.a)();return fetch("".concat(i,"/pg/").concat(e,"/get-another-tables/"),t).then(a.c)},get:function(e){var t=Object(a.a)();return fetch("".concat(i,"/pg/get/").concat(e,"/"),t).then(a.c)},save:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({values:e,out_type:t})});return fetch("".concat(i,"/pg/db-config-save/"),n).then(a.c)},getInspireTree:function(e){var t=o({},Object(a.a)());return fetch("".concat(i,"/pg/get-all-view-names/"),t).then(a.c)},getProperties:function(e){var t=o(o({},Object(a.b)()),{},{body:JSON.stringify({feature_id:e})});return fetch("".concat(i,"/pg/get-fields/"),t).then(a.c)},tableSave:function(e,t,n,r,c,l,s){var u=o(o({},Object(a.b)()),{},{body:JSON.stringify({id:e,table_id:t,id_list:n,feature_name:r,table_name:c,is_insert:l,pk_field_config:s})});return fetch("".concat(i,"/pg/save-table/"),u).then(a.c)},tableDetail:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/pg/").concat(e,"/").concat(t,"/table-detail/"),n).then(a.c)},refreshTableData:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/pg/").concat(e,"/refresh-table-data/"),n).then(a.c)},removeTable:function(e,t,n){var r=o(o({},Object(a.b)()),{},{body:JSON.stringify({is_insert:n})});return fetch("".concat(i,"/pg/").concat(e,"/").concat(t,"/remove-table/"),r).then(a.c)},refreshOneTable:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/pg/").concat(e,"/").concat(t,"/refresh-one-table/"),n).then(a.c)},refreshData:function(e){var t=o({},Object(a.a)());return fetch("".concat(i,"/pg/").concat(e,"/refresh-all-connection/"),t).then(a.c)},insertSingleData:function(e,t){var n=o({},Object(a.a)());return fetch("".concat(i,"/pg/").concat(e,"/").concat(t,"/insert-single-table/"),n).then(a.c)},refreshView:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({id:e,table_id:t})});return fetch("".concat(i,"/pg/refresh-view/"),n).then(a.c)}},remove:function(e,t){var n=o(o({},Object(a.b)()),{},{body:JSON.stringify({state:t})});return fetch("".concat(i,"/remove/").concat(e,"/"),n).then(a.c)},update:function(e){var t=o({},Object(a.a)());return fetch("".concat(i,"/update/").concat(e,"/"),t).then(a.c)},cronTabSave:function(e){var t=o(o({},Object(a.b)()),{},{body:JSON.stringify(e)});return fetch("".concat(i,"/crontab-save/"),t).then(a.c)},cronTabDetail:function(e){var t=o({},Object(a.a)());return fetch("".concat(i,"/detail/").concat(e,"/"),t).then(a.c)}}},982:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,n,a,o=l(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={selected_value:""},t.dataSelection=t.dataSelection.bind(u(t)),t}return t=s,(n=[{key:"dataSelection",value:function(e){var t=this,n=e.target.value,a=this.props,r=a.data_list,o=a.state_name,c=a.name_key,i=a.opt_key,l=a.option_key;r.map((function(a,r){c?a[i].map((function(a,r){n==a[l]&&t.props.handleSelectField(o,a,e)})):n==a[l]&&t.props.handleSelectField(o,a,e)})),this.setState({selected_value:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.default_value,a=t.label,o=t.errors,c=t.state_name,i=t.default_text,l=t.option_key,s=t.option_name,u=t.opt_key,f=t.name_key,m=t.className,p=t.data_list,h=t.option_text,b=t.disabled,y=t.option_name_2,_=t.display_mode,v=this.state,g=a||"";return r.a.createElement("div",{className:"form-group ".concat(m||"col-md-4")},r.a.createElement("label",{id:g},g),r.a.createElement("select",{value:v.selected_value?v.selected_value:n,className:"custom-select  ".concat(!n&&"border-danger"),onChange:function(t){return e.dataSelection(t)},disabled:b},r.a.createElement("option",{value:""},"---",i||""," ---"),f?p.map((function(e,t){return r.a.createElement("optgroup",{key:t,label:e[f],value:n},d(e[u],l,s,y,h,_))})):d(p,l,s,y,h,_)),o&&o.map((function(e){return e.field_name===c&&e.errors.map((function(e,t){return r.a.createElement("div",{key:t,className:"form-group-row"},r.a.createElement("small",{className:"text-danger"},e))}))})))}}])&&c(t.prototype,n),a&&c(t,a),s}(a.Component);function d(e,t,n,a,o,c){var i=n;return o&&(i=o),e&&e.length>0&&e.map((function(e,o){return r.a.createElement("option",{key:o,name:e[n],value:e[t]},c?e[i]+"   (   "+e[a]+"   )   ":e[i])}))}}}]);