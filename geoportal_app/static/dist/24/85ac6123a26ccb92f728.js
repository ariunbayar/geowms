(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{542:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),a=n.n(r),o=n(28);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,r,l=s(f);function f(){return i(this,f),l.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){return this.props.navlink_url?a.a.createElement(o.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},a.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?a.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},a.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):a.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},a.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&c(t.prototype,n),r&&c(t,r),f}(r.Component)},897:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(36);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={createEmployee:function(e,t,n,a){var l=o(o({},Object(r.b)()),{},{body:JSON.stringify({user_detail:e,emp_role_id:t,roles:n,address:a})});return fetch("".concat(c,"/create/"),l).then(r.c)},getRole:function(e){var t=o({},Object(r.a)());return fetch("".concat("/gov/api/role","/").concat(e,"/detail/"),t).then(r.c)},getRoleList:function(){var e=o({},Object(r.a)());return fetch("".concat("/gov/api/role","/"),e).then(r.c)},getDetailEmployee:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/detail/"),t).then(r.c)},deleteEmployee:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/delete/"),t).then(r.c)},updateEmployee:function(e,t,n,a,l,i){var u=o(o({},Object(r.b)()),{},{body:JSON.stringify({user_detail:e,role_id:t,id:n,add_perm:a,remove_perm:l,address:i})});return fetch("".concat(c,"/").concat(n,"/update/"),u).then(r.c)},empTokenRefresh:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/refresh-token/"),t).then(r.c)},sendMail:function(e){var t=o(o({},Object(r.b)()),{},{body:JSON.stringify({username:e})});return fetch("".concat(c,"/send-mail/"),t).then(r.c)},getGeom:function(e){var t=o(o({},Object(r.b)()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/get-geom/",t).then(r.c)},getAddresses:function(e,t){var n=o(o({},Object(r.b)()),{},{body:JSON.stringify({choose:e,value:t})});return fetch("".concat(c,"/addresses/"),n).then(r.c)},formOptions:function(){var e=o({},Object(r.a)());return fetch("/api/aimag/",e).then(r.c)},getEmpInfo:function(e,t){var n=o(o({},Object(r.b)()),{},{body:JSON.stringify({is_erguul:t})});return fetch("/back/api/org/".concat(e,"/emp-info/"),n).then(r.c)},getErguulegFields:function(e){var t=o({},Object(r.a)());return fetch("/back/api/org/".concat(e,"/erguuleg-fields/"),t).then(r.c)},getWherePos:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/get-erguul-info/"),t).then(r.c)},saveErguul:function(e,t,n,a,l){var i=o(o({},Object(r.b)()),{},{body:JSON.stringify({values:e,emp_id:t,point:n,photo:a,erguul_id:l})});return fetch("/back/api/org/save-erguul/",i).then(r.c)},getFieldTailbar:function(){var e=o({},Object(r.a)());return fetch("".concat(c,"/get-field-tailbar/"),e).then(r.c)},saveTailbar:function(e,t){var n=o(o({},Object(r.b)()),{},{body:JSON.stringify({values:e,id:t})});return fetch("".concat(c,"/save-field-tailbar/"),n).then(r.c)},getErguul:function(){var e=o({},Object(r.a)());return fetch("".concat(c,"/get-erguul/"),e).then(r.c)},getSelectValue:function(){var e=o({},Object(r.a)());return fetch("/back/api/org/get-select-values/",e).then(r.c)},getAllOrg:function(){var e=o({},Object(r.a)());return fetch("/back/api/org/get-all-org/",e).then(r.c)}},c="/gov/api/role/employee"},945:function(e,t,n){var r=n(53),a=n(946);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};r(a,o);e.exports=a.locals||{}},946:function(e,t,n){(t=n(54)(!1)).push([e.i,".org-list-scroll {\n    overflow-y: scroll;\n    max-height: 45vh;\n    /* opacity: 0; */\n}\n\n.org-list-scroll::-webkit-scrollbar-track {\n    background: #f8f9fa;\n}\n\n/* Handle */\n.org-list-scroll::-webkit-scrollbar-thumb {\n    background: #f8f9fa;\n    border-radius: 10px;\n}\n\n/* Handle on hover */\n.org-list-scroll::-webkit-scrollbar-thumb:hover {\n    background: #034ea2;\n}\n.org-list-scroll:hover::-webkit-scrollbar-thumb {\n    background: #A9A9A9;\n    border-radius: 10px;\n    transition: 0.4s;\n}\n",""]),e.exports=t},960:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ct}));var r=n(0),a=n.n(r),o=n(50),l=n(887),i=n(473),c=n(107),u=n(421),s=n(543),f=n(420),p=n(137),m=n(2),d=n(142),h=n(240),g=n(217),y=n(469),v=n(892),b=n(16),_=n(87),E=n(534),O=n(535),w=n(472),k=n(470),S=n(7),j=n.n(S),P=n(79);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var a=D(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){R(n,e);var t=L(n);function n(e){var r;return x(this,n),(r=t.call(this,e)).input_data={},r.state={input_value:""},r}return F(n,[{key:"componentDidUpdate",value:function(e,t){e.value!==this.props.value&&this.setState({input_value:this.props.value})}},{key:"handleOnChange",value:function(e){var t=this.props,n=t.idx,r=(t.ix,t.field,t.length,t.origin_name);this.setState({input_value:e}),this.props.getValues(e,n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.idx,r=(t.ix,t.field),o=t.length,l=t.choices,i=t.value,c=t.disabled,u=t.type,s=t.is_detail,f=this.state.input_value;return a.a.createElement("div",{className:"form-group animated slideInLeft"},a.a.createElement("dt",null,r),s?a.a.createElement("dd",null,i):"date"==u&&null==l?a.a.createElement("input",{type:u,maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)}}):o>1900&&null==l?a.a.createElement("textarea",{className:"form-control",rows:"3",onChange:function(t){return e.handleOnChange(t.target.value)},maxLength:o,disabled:c,placeholder:i,value:f}):o<1900&&null==l?a.a.createElement("input",{type:"text",maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)},placeholder:r+" оруулна уу"}):null!==l?a.a.createElement("select",{className:"form-control",disabled:c,onChange:function(t){return e.handleOnChange(t.target.value)},value:f},a.a.createElement("option",{key:n,value:""},"--- Сонгоно уу ---"),l.map((function(e,t){return a.a.createElement("option",{key:t,value:e[0]},e[1])}))):null)}}]),n}(r.Component),G=function(e){R(n,e);var t=L(n);function n(e){var r;return x(this,n),(r=t.call(this,e)).state={values:{}},r.getValues=r.getValues.bind(B(r)),r}return F(n,[{key:"getValues",value:function(e,t,n){var r=this.state.values;r[n]=e,this.setState({values:r})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.fields,r=t.is_detail,o=t.title,l=t.button_name,i=this.state.values;return a.a.createElement("div",null,a.a.createElement("div",{className:"row text-center"},a.a.createElement("div",{className:"col-md-10"},a.a.createElement("h6",null,o)),a.a.createElement("div",{className:"col-md-2"},a.a.createElement("button",{type:"button",className:"close"},a.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.props.handleClose()}},"×")))),a.a.createElement("div",{className:"overflow-auto",style:{maxHeight:"calc( 50vh - 70px - 15px)"}},n.map((function(t,n){return a.a.createElement(V,{key:n,is_detail:r,field:t.name,length:t.length,disabled:t.disabled,idx:n,origin_name:t.origin_name,getValues:e.getValues,value:t.value,choices:t.choices,type:t.type})}))),r?a.a.createElement("div",{className:"pb-2"}):a.a.createElement("div",{className:"pb-2"},a.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return e.props.saveErguulPlace(i)}},l)))}}]),n}(r.Component),M=function(e){R(n,e);var t=L(n);function n(e){var r;x(this,n);var a=e||{};(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!1;return r.element.className="col-md-3 card",r.element.style.display="none",r.element.style.height="auto",r.renderComponent=r.renderComponent.bind(B(r)),r.toggleControl=r.toggleControl.bind(B(r)),r}return F(n,[{key:"toggleControl",value:function(e){this.element.style.display=e?"block":"none"}},{key:"renderComponent",value:function(e){var t=this;e.handleClose=function(){t.toggleControl(!1)},this.is_component_initialized||(j.a.render(a.a.createElement(G,e),this.element),this.is_component_initialized=!0),j.a.hydrate(a.a.createElement(G,e),this.element)}},{key:"showForm",value:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.toggleControl(e),this.renderComponent({fields:t,title:n,is_detail:o,saveErguulPlace:r,button_name:a})}}]),n}(P.a),I=(n(220),n(897));function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(S,e);var t,n,r,o=U(S);function S(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(t=o.call(this,e)).state={projection_data:"EPSG:4326",projection_display:"EPSG:3857"},t.controls={form:new M},t.loadMap=t.loadMap.bind(q(t)),t.readFeatures=t.readFeatures.bind(q(t)),t.readFeature=t.readFeature.bind(q(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(q(t)),t.translateStart=t.translateStart.bind(q(t)),t.translateEnd=t.translateEnd.bind(q(t)),t.selectedFeature=t.selectedFeature.bind(q(t)),t.getEmpInfo=t.getEmpInfo.bind(q(t)),t.changedFeatureSetColor=t.changedFeatureSetColor.bind(q(t)),t.makeLineString=t.makeLineString.bind(q(t)),t.sendErguuleg=t.sendErguuleg.bind(q(t)),t.downloadImage=t.downloadImage.bind(q(t)),t}return t=S,(n=[{key:"componentDidMount",value:function(){this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){e.features!==this.props.features&&(this.vector_layer.getSource().clear(),this.readFeatures(this.props.features)),e.feature!==this.props.feature&&this.props.feature!=={}&&this.readFeature(this.props.feature)}},{key:"loadMap",value:function(){var e=this,t=new f.a({source:new u.a({}),style:new d.c({stroke:new h.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new g.a({color:"rgba(100, 255, 0, 0.3)"})})});this.vector_layer=t;var n=new E.a;n.on("select",(function(t){return e.selectedFeature(t)})),this.select=n;var r=new O.a({features:n.getFeatures()});r.on("translatestart",(function(t){return e.translateStart(t)})),r.on("translateend",(function(t){return e.translateEnd(t)})),this.translate=r;var a=new l.a({interactions:Object(w.a)().extend([n,r]),layers:[new p.a({source:new s.a}),t],target:"map",view:new i.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971}),controls:[]});a.addControl(this.controls.form),this.map=a}},{key:"makeFields",value:function(e,t){var n=Array();return Object.keys(e).map((function(r,a){t.map((function(t,a){if(r==t.origin_name){var o=Object();o.name=t.name,o.origin_name=r,o.value=e[r]?e[r]:"",o.disabled=t.disabled,o.choices=null,o.length=t.length,"level_1"==r&&(o.value=e.level_1+", "+e.level_2+", "+e.level_3+", "+e.street+" гудамж "+e.apartment+" байр, "+e.door_number+" тоот"),n.push(o)}}))})),n}},{key:"getEmpInfo",value:function(e,t){var n=this;t||(t=!1),I.a.getEmpInfo(e,t).then((function(e){var t=e.success,r=e.info,a=e.title;if(t){var o=n.makeFields(r,[{origin_name:"org_name",name:"Байгууллагын нэр",disabled:!0,length:100},{origin_name:"phone_number",name:"Утасны дугаар",disabled:!0,length:100},{origin_name:"level_1",name:"Гэрийн хаяг",disabled:!0,length:2e3},{origin_name:"last_name",name:"Овог",disabled:!0,length:100},{origin_name:"first_name",name:"Нэр",disabled:!0,length:100},{origin_name:"date_start",name:"Эхлэх огноо",disabled:!0,length:100},{origin_name:"date_end",name:"Дуусах огноо",disabled:!0,length:100},{origin_name:"part_time",name:"Ээлж",disabled:!0,length:100},{origin_name:"erguul_address",name:"Эргүүлийн хаяг",disabled:!0,length:100}]);n.controls.form.showForm(!0,o,a,void 0,"",!0)}}))}},{key:"featureWithTextStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red",n=new d.c({image:new y.a({radius:5,fill:new g.a({color:t})}),text:new v.a({text:e,font:"30px Calibri,sans-serif",stroke:new h.a({color:"white",width:3}),offsetY:-18})});return n}},{key:"changedFeatureSetColor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"green",n=this.vector_layer.getSource();n.getFeatures().map((function(n,r){if(n.getProperties().is_changed){var a=e.getFullName(n),o=e.featureWithTextStyle(a,t);n.setStyle(o)}}))}},{key:"getFullName",value:function(e){var t=e.getProperties().first_name;return e.getProperties().last_name.charAt(0).toUpperCase()+". "+(t.charAt(0).toUpperCase()+t.slice(1))}},{key:"selectedFeature",value:function(e){this.translate.setActive(!0);var t=e.selected[0];if(t)if("Point"==t.getGeometry().getType()&&this.props.is_admin){var n=t.getProperties(),r=n.id;this.id=r,n.is_cloned&&this.translate.setActive(!1),this.getEmpInfo(r,n.is_erguul)}else this.select.getFeatures().clear();else this.changedFeatureSetColor()}},{key:"translateStart",value:function(e){var t=0,n=this.vector_layer.getSource(),r=e.features.getArray()[0],a=r.getProperties().id,o=n.getFeatures();if(null!=o&&o.length>0)for(var l=0;l<o.length;l++)if(o[l].getProperties().id==a&&t<2)t++;else if(2==t)break;if(t<2){var i=r.clone(),c=this.getFullName(i),u=this.featureWithTextStyle(c);i.setStyle(u),i.setProperties({is_cloned:!0}),n.addFeature(i)}r.setProperties({is_changed:!0})}},{key:"translateEnd",value:function(e){var t=this,n=e.features.getArray()[0],r=n.getGeometry().getCoordinates();this.end_coordinates=r;var a=n.getProperties().id;this.removeFeatureFromSource(a);var o=this.map.getView().getProjection(),l=Object(m.p)(r,o,this.state.projection_data),i=Object(b.f)(l,"{y},{x}",6);this.changedFeatureSetColor(),I.a.getErguulegFields(a).then((function(e){var r=e.success,a=e.info,o=e.erguul_id;t.makeLineString([n],"one");var l="Хадгалах";o&&(l="Засах"),t.controls.form.showForm(r,a,"Эргүүлд гарах байршил",(function(e){return t.sendErguuleg(e,t.id,i,o)}),l)}))}},{key:"fromLonLatToMapCoord",value:function(e){return Object(m.d)([e[0],e[1]])}},{key:"makeLineString",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.vector_layer.getSource(),a=r.getFeatures();if(null!=a&&a.length>0&&e.length>0)for(var o=function(){var o=a[l],i=o.getProperties(),u=i.id,s=void 0;s="one"==n?i.is_cloned:i.is_erguul,u&&s&&e.map((function(e,a){var l,i;i="one"==n?(l=e.getProperties()).is_changed:(l=e.properties).is_cloned;var s=l.id;if(s==u&&i){var f;"one"==n?f=e.getGeometry().getCoordinates():(f=e.geometry.coordinates,f=t.fromLonLatToMapCoord(f));var p=o.getGeometry().getCoordinates(),m=new _.a([f,p]),d=new c.a(m);d.setProperties({id:s});var h=d.getGeometry().getExtent();t.extent=h,t.props.is_admin||t.map.getView().fit(h,{padding:[200,200,200,200]}),r.addFeature(d)}}))},l=0;l<a.length;l++)o()}},{key:"downloadImage",value:function(e,t,n,r){var a,o=this,l=this.map;this.props.setLoading(!0),l.once("rendercomplete",(function(){var i=document.createElement("canvas"),c=l.getSize();i.width=c[0],i.height=c[1];var u=i.getContext("2d");Array.prototype.forEach.call(document.querySelectorAll(".ol-layer canvas"),(function(e){if(e.width>0){var t=e.parentNode.style.opacity;u.globalAlpha=""===t?1:Number(t);var n=e.style.transform.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number);CanvasRenderingContext2D.prototype.setTransform.apply(u,n),u.drawImage(e,0,0)}})),navigator.msSaveBlob?navigator.msSaveBlob(i.msToBlob(),"map.png"):a=i.toDataURL(),o.props.saveErguulPlace(e,t,n,a,r)}))}},{key:"sendErguuleg",value:function(e,t,n,r){var a=this.extent;this.map.getView().fit(a,{padding:[200,200,200,200]}),this.downloadImage(e,t,n,r)}},{key:"removeFeatureFromSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.vector_layer.getSource(),r=n.getFeatures();if(null!=r&&r.length>0)for(var a=0;a<r.length;a++){var o=r[a].getProperties(),l=o.id,i=void 0,c=r[a].getGeometry().getType();if(l==e&&("only_aimag"==t&&c.includes("Polygon")?i=r[a]:t||"LineString"!=c||(i=r[a])),i){n.removeFeature(i);break}}}},{key:"readFeature",value:function(e){var t="aimag_sum";this.removeFeatureFromSource(t,"only_aimag");var n=this.vector_layer.getSource(),r=(new k.a).readFeatures(e,{dataProjection:this.state.projection_data,featureProjection:this.state.projection_display})[0];n.addFeature(r),r.setProperties({id:t}),this.map.getView().fit(r.getGeometry(),{padding:[50,50,50,50],minResolution:1})}},{key:"readFeatures",value:function(e){var t=this,n=this.vector_layer.getSource();e.features.length>0&&(e.features.map((function(e,r){if(e!=={}){var a=(new k.a).readFeatures(e,{dataProjection:t.state.projection_data,featureProjection:t.state.projection_display})[0],o=a.getProperties(),l=t.getFullName(a),i=t.featureWithTextStyle(l);o.is_erguul&&(t.props.is_admin||(t.start_coordinate=a.getGeometry().getCoordinates()),i=t.featureWithTextStyle(l,"green")),t.props.is_admin||o.is_erguul||(t.end_coordinates=a.getGeometry().getCoordinates()),a.setStyle(i),n.addFeature(a)}})),this.makeLineString(e.features))}},{key:"render",value:function(){return a.a.createElement("div",{id:"map",style:{height:"calc( 90vh - 85px - 15px)"}})}}])&&W(t.prototype,n),r&&W(t,r),S}(r.Component),K=n(57);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var a=le(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){te(n,e);var t=re(n);function n(e){var r;return X(this,n),(r=t.call(this,e)).input_data={},r.state={input_value:""},r}return ee(n,[{key:"componentDidMount",value:function(){this.props.value&&this.setState({input_value:this.props.value})}},{key:"handleOnChange",value:function(e){var t=this.props,n=t.idx,r=(t.ix,t.field,t.length,t.origin_name);this.setState({input_value:e}),this.props.getValues(e,n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.idx,r=(t.ix,t.field),o=t.length,l=t.choices,i=t.value,c=t.disabled,u=t.type,s=t.is_detail,f=this.state.input_value;return a.a.createElement("div",{className:"form-group animated slideInLeft"},a.a.createElement("dt",null,r),s?a.a.createElement("dd",null,i):"date"==u&&null==l?a.a.createElement("input",{type:u,maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)}}):o>1900&&null==l?a.a.createElement("textarea",{className:"form-control",rows:"3",onChange:function(t){return e.handleOnChange(t.target.value)},maxLength:o,disabled:c,placeholder:r+" оруулна уу",value:f}):o<1900&&null==l?a.a.createElement("input",{type:"text",maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)},placeholder:r+" оруулна уу"}):null!==l?a.a.createElement("select",{className:"form-control",disabled:c,onChange:function(t){return e.handleOnChange(t.target.value)},value:f},a.a.createElement("option",{key:n,value:""},"--- Сонгоно уу ---"),l.map((function(e,t){return a.a.createElement("option",{key:t,value:e[0]},e[1])}))):null)}}]),n}(r.Component),ce=function(e){te(n,e);var t=re(n);function n(e){var r;return X(this,n),(r=t.call(this,e)).state={fields:[],id:"",values:{}},r.getField=r.getField.bind(oe(r)),r.getValues=r.getValues.bind(oe(r)),r}return ee(n,[{key:"componentDidMount",value:function(){this.getField()}},{key:"getField",value:function(){var e=this;I.a.getFieldTailbar().then((function(t){var n=t.success,r=t.fields,a=t.id;n&&e.setState({fields:r,id:a})}))}},{key:"getValues",value:function(e,t,n){var r=this.state.values;r[n]=e,this.setState({values:r})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fields,r=t.values,o=t.id,l=this.props.is_empty;return a.a.createElement("div",null,a.a.createElement("h5",{className:"text-center"},"Эргүүлд гарсан мэдээлэл"),n.map((function(t,n){return a.a.createElement(ie,{key:n,field:t.name,length:t.length,disabled:!!l||t.disabled,idx:n,origin_name:t.origin_name,getValues:e.getValues,value:t.value,choices:t.choices,type:t.type})})),a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-primary btn-block",disabled:l,onClick:function(){return e.props.saveErguulTailbar(r,o)}},o?"Засах":"Хадгалах")))}}]),n}(r.Component),ue=n(896);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(l,e);var t,n,r,o=me(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={refresh:!1,"талбарууд":[{field:"fullname",title:"Хэрэглэгчийн овог, нэр",has_action:!0},{field:"part_time",title:"Ээлж",has_action:!0},{field:"state",title:"Төлөв",has_action:!0},{field:"date_start",title:"Эхлэх огноо"},{field:"date_end",title:"Дуусах огноо"}],"жагсаалтын_холбоос":"/gov/api/role/employee/erguul-list/","хувьсах_талбарууд":[{field:"fullname",action:function(e){return t.goLink(e)}},{field:"part_time",action:t.getPartTime,action_type:!0},{field:"state",action:t.getState,action_type:!0}]},t.goLink=t.goLink.bind(he(t)),t}return t=l,(n=[{key:"goLink",value:function(e){this.props.history.push("/gov/perm/erguuleg/".concat(e.id,"/details/"))}},{key:"getState",value:function(e){return{"Гараагүй":"text-danger","Гарсан":"text-success","Гарч байгаа":"text-warning"}[e]}},{key:"getPartTime",value:function(e){return{"Үдээс хойш":"text-dark","Үдээс өмнө":"text-warning"}[e]}},{key:"render",value:function(){var e=this.state,t=e.refresh,n=e.талбарууд,r=e.жагсаалтын_холбоос,o=e.хувьсах_талбарууд;return a.a.createElement("div",null,a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-lg-12"},a.a.createElement(ue.a,{refresh:t,color:"bg-dark","талбарууд":n,"жагсаалтын_холбоос":r,per_page:100,"уншиж_байх_үед_зурвас":"Уншиж байна","хоосон_байх_үед_зурвас":"Хоосон байна","хувьсах_талбарууд":o}))))}}])&&fe(t.prototype,n),r&&fe(t,r),l}(r.Component);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);if(t){var a=ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(l,e);var t,n,r,o=Ee(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={points:[],feature:{},is_loading:!0,is_empty:!1,infos:[],is_open:!1},t.getAddresses=t.getAddresses.bind(we(t)),t.saveErguulTailbar=t.saveErguulTailbar.bind(we(t)),t.handleOpen=t.handleOpen.bind(we(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.getAddresses()}},{key:"getAddresses",value:function(){var e=this;I.a.getErguul().then((function(t){var n=t.success,r=t.points;if(n){var a=!1;(r.length>0||r.features.length<2)&&(a=!0),e.setState({points:r,is_empty:a,is_loading:!1})}}))}},{key:"saveErguulTailbar",value:function(e,t){var n=this;this.setState({is_loading:!0}),I.a.saveTailbar(e,t).then((function(e){e.success;var t=e.info;alert(t),n.setState({is_loading:!1})})).catch((function(e){alert("Алдаа гарсан байна"),n.setState({is_loading:!1})}))}},{key:"handleOpen",value:function(){this.setState({is_open:!this.state.is_open})}},{key:"render",value:function(){var e=this,t=this.state,n=t.points,r=t.is_loading,o=t.is_empty,l=t.infos,i=t.is_open;return this.props.employee.is_admin,a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement(K.a,{is_loading:r}),a.a.createElement("button",{className:"btn gp-outline-primary",onClick:this.handleOpen},i?"Эргүүлд гарсан мэдээлэл":"Эргүүлд гарсан ажилчдын мэдээлэл"),a.a.createElement("br",null),a.a.createElement("br",null),i?a.a.createElement(ye,this.props):a.a.createElement("div",null,a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-4"},a.a.createElement(ce,{is_empty:o,infos:l,saveErguulTailbar:function(){return e.saveErguulTailbar.apply(e,arguments)}})),a.a.createElement("div",{className:"col-8"},a.a.createElement($,{features:n,is_admin:!1}))))))}}])&&be(t.prototype,n),r&&be(t,r),l}(r.Component);n(945);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Le(e);if(t){var a=Le(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(l,e);var t,n,r,o=Fe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",firstOrder_geom:"",org_list:[],levels:[]},t.handleChange=t.handleChange.bind(Te(t)),t.getGeom=t.getGeom.bind(Te(t)),t.getFieldValues=t.getFieldValues.bind(Te(t)),t.getAllOrg=t.getAllOrg.bind(Te(t)),t.handleChoose=t.handleChoose.bind(Te(t)),t}return t=l,(n=[{key:"getGeom",value:function(e){var t=this;I.a.getGeom(e).then((function(e){var n=e.feature;n&&t.props.sendFeature(n)}))}},{key:"getFieldValues",value:function(){var e=this;I.a.formOptions().then((function(t){var n=t.success,r=t.info,a=t.firstOrder_geom;n&&e.setState({aimag:r,firstOrder_geom:a})}))}},{key:"componentDidMount",value:function(){this.getFieldValues(),this.getAllOrg()}},{key:"handleChange",value:function(e,t,n,r,a){var o,l=t+"_id",i=t+"_geo_id",c=t+"_name",u=e.target.value,s=Object();if("-1"!==u){var f=this.state[t][u];this.setState(Ne({},n,f.children)),n&&(s[n]=f.children),o=f.geo_id,r.map((function(e,t){var n=e+"_geo_id",r=e+"_name";s[e+"_id"]=-1,s[n]="",s[r]=""})),s[i]=o,s[c]=f.name,this.getGeom(o)}else{if(r.length>0&&r.map((function(e,t){var n=e+"_id",r=e+"_geo_id",a=e+"_name";s[e]=[],s[n]=-1,s[r]="",s[a]=""})),"mongol"!==a){var p=a+"_id",m=this.state[p];o=this.state[a][m].geo_id}else o=this.state.firstOrder_geom;s[i]=o,this.getGeom(o)}this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(Ne({},l,u),s))}},{key:"getAllOrg",value:function(){var e=this;I.a.getAllOrg().then((function(t){var n=t.success,r=t.org_list,a=t.levels;n&&e.setState({org_list:r,levels:a})}))}},{key:"handleChoose",value:function(e,t){this.props.handleChoose(e,t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.aimag,r=t.sum,o=t.horoo,l=t.aimag_id,i=t.sum_id,c=t.horoo_id,u=t.org_list,s=t.levels;return a.a.createElement("div",{className:"form-row"},a.a.createElement("div",{className:"form-group col-3"},a.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),a.a.createElement("select",{id:"aimag",className:"form-control","aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:l},a.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),n.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.name)})))),a.a.createElement("div",{className:"form-group col-3"},a.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),a.a.createElement("select",{id:"sum",className:"form-control",onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:i},a.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),r.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.name)})))),a.a.createElement("div",{className:"form-group col-3"},a.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),a.a.createElement("select",{id:"horoo",className:"form-control",onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:c},a.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),o.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.name)})))),a.a.createElement("div",{className:"form-group col-3 text-right mt-4"},a.a.createElement("div",{className:"dropdown"},a.a.createElement("button",{className:"btn btn-outline-primary btn-sm waves-effect waves-light m-1 dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Байгууллага/Түвшин"),a.a.createElement("div",{className:"dropdown-menu dropdown-menu-right org-list-scroll","aria-labelledby":"dropdownMenuButton"},s.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"dropdown-divider"}),a.a.createElement("button",{className:"dropdown-item py-1",value:"all",onClick:function(t){return e.handleChoose("all",t.target.value)}},"Бүх байгууллага"),a.a.createElement("div",{className:"dropdown-divider"}),a.a.createElement("button",{className:"dropdown-item py-1",value:"this_org",onClick:function(t){return e.handleChoose("this_org",t.target.value)}},"Энэ байгууллага"),s.map((function(t,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"dropdown-divider"}),a.a.createElement("button",{key:n,className:"dropdown-item py-1",value:t,onClick:function(t){return e.handleChoose("level",t.target.value)}},"Түвшин-",t),a.a.createElement("ul",{className:"mb-1"},u.map((function(n,r){return n.level==t&&a.a.createElement("button",{key:r,className:"dropdown-item py-1 pl-0",value:n.id,onClick:function(t){return e.handleChoose("org",t.target.value)}},n.name)}))))})))))))}}])&&xe(t.prototype,n),r&&xe(t,r),l}(r.Component);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Je(e);if(t){var a=Je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(l,e);var t,n,r,o=Ge(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={points:[],feature:{},is_loading:!0,is_empty:!1,choose:"this_org",value:""},t.getAddresses=t.getAddresses.bind(Ie(t)),t.getFeature=t.getFeature.bind(Ie(t)),t.saveErguulPlace=t.saveErguulPlace.bind(Ie(t)),t.saveErguulTailbar=t.saveErguulTailbar.bind(Ie(t)),t.setLoading=t.setLoading.bind(Ie(t)),t.handleChoose=t.handleChoose.bind(Ie(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.getAddresses(this.state.choose,this.state.value)}},{key:"getAddresses",value:function(e,t){var n=this;I.a.getAddresses(e,t).then((function(e){var t=e.success,r=e.points;if(t){var a=!1;r.features.length<2&&(a=!0),n.setState({points:r,is_loading:!1,is_empty:a})}}))}},{key:"getFeature",value:function(e){this.setState({feature:e})}},{key:"getPoint",value:function(e){var t=e;return"string"==typeof e&&(t=e.split(",")),[t[1],t[0]]}},{key:"setLoading",value:function(e){this.setState({is_loading:e})}},{key:"saveErguulPlace",value:function(e,t,n,r,a){var o=this,l=this.getPoint(n);I.a.saveErguul(e,t,l,r,a).then((function(e){var t=e.success,n=e.info;t&&(alert(n),o.setLoading(!1))})).catch((function(e){alert("Алдаа гарсан байна"),o.setLoading(!1)}))}},{key:"saveErguulTailbar",value:function(e){var t=this;this.setLoading(!0),I.a.saveTailbar(e).then((function(e){e.success;var n=e.info;alert(n),t.setLoading(!1)})).catch((function(e){alert("Алдаа гарсан байна"),t.setLoading(!1)}))}},{key:"handleChoose",value:function(e,t){this.getAddresses(e,t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.points,r=t.feature,o=t.is_loading,l=(t.is_empty,this.props.employee.is_admin);return a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement(K.a,{is_loading:o}),a.a.createElement("div",{className:"col-12"},a.a.createElement(Ae,{sendFeature:this.getFeature,handleChoose:this.handleChoose}),a.a.createElement($,{features:n,feature:r,saveErguulPlace:function(){return e.saveErguulPlace.apply(e,arguments)},is_admin:l,setLoading:this.setLoading}))))}}])&&De(t.prototype,n),r&&De(t,r),l}(r.Component),ze=n(542);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xe(e);if(t){var a=Xe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ke(this,n)}}function Ke(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?Qe(e):t}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(l,e);var t,n,r,o=$e(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={id:t.props.match.params.id,indicate:""},t.getPos=t.getPos.bind(Qe(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.getPos()}},{key:"getPos",value:function(){var e=this,t=this.state.id;I.a.getWherePos(t).then((function(t){var n=t.success,r=t.first_name,a=t.last_name,o=t.local_lvl1,l=t.local_lvl2,i=t.local_lvl3,c=t.local_street,u=t.local_apart,s=t.local_dn,f=t.erguul_level3,p=t.erguul_street,m=t.erguul_apart,d=t.date_start,h=t.date_end,g=t.status,y=t.desc;n&&e.setState({first_name:r,last_name:a,local_lvl1:o,local_lvl2:l,local_lvl3:i,local_street:c,local_apart:u,local_dn:s,erguul_level3:f,erguul_street:p,erguul_apart:m,date_start:d,date_end:h,status:g,desc:y}),"Гарсан"==g?e.setState({indicate:"text-success"}):"Гараагүй"==g?e.setState({indicate:"text-danger"}):"Гарч байгаа"==g&&e.setState({indicate:"text-warning"})}))}},{key:"render",value:function(){var e=this.state,t=e.first_name,n=e.last_name,r=e.local_lvl1,o=e.local_lvl2,l=e.local_lvl3,i=e.local_street,c=e.local_apart,u=e.local_dn,s=e.erguul_level3,f=e.erguul_street,p=e.erguul_apart,m=e.date_start,d=e.date_end,h=e.status,g=e.desc,y=e.indicate;return a.a.createElement("div",{className:"card pl-5"},a.a.createElement("div",{className:"row mt-4 "},a.a.createElement(ze.a,He({},this.props,{name:"Буцах",navlink_url:"/gov/perm/erguuleg/"})),a.a.createElement("div",{className:"col-4 "},a.a.createElement("div",{className:"row"},a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Овог, нэр:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},n,", ",t),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Эхэлсэн хугацаа:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},m),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Дууссан хугацаа:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},d),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Төлөв:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 ".concat(y)},h))),a.a.createElement("div",{className:"col-4"},a.a.createElement("div",{className:"row"},a.a.createElement("h5",{className:"col-sm-12 col-xl-12 "},"Эргүүл хийсэн газар:"),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хороо/баг:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},s),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Гудамж:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},f),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"}," Байр:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},p))),a.a.createElement("div",{className:"col-4"},a.a.createElement("div",{className:"row"},a.a.createElement("h5",{className:"col-sm-12 col-xl-12 "},"Гэрийн хаяг:"),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хот/Аймаг:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},r),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"}," Дүүрэг/Сум:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},o),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хороо/баг:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},l),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Гудамж:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},i),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Байр:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},c),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хаалганы дугаар:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},u)))),a.a.createElement("div",{className:"row pb-5 pr-5"},a.a.createElement("div",{className:"col-12"},a.a.createElement("div",null,a.a.createElement("b",null,"Эргүүлд гарсан тайлбар:")),a.a.createElement("div",null,a.a.createElement("a",{className:"ml-4 text-justify"},g)))))}}])&&qe(t.prototype,n),r&&qe(t,r),l}(r.Component);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=it(e);if(t){var a=it(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(i,e);var t,n,r,l=ot(i);function i(){return nt(this,i),l.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.employee;return a.a.createElement(o.c,null,a.a.createElement(o.a,{path:"/gov/perm/addresses/",component:function(t){return a.a.createElement(We,tt({},t,{employee:e}))}}),a.a.createElement(o.a,{exact:!0,path:"/gov/perm/erguuleg/",component:function(t){return a.a.createElement(Se,tt({},t,{employee:e}))}}),a.a.createElement(o.a,{exact:!0,path:"/gov/perm/erguuleg/:id/details/",component:function(t){return a.a.createElement(Ze,tt({},t,{employee:e}))}}))}}])&&rt(t.prototype,n),r&&rt(t,r),i}(r.Component)}}]);