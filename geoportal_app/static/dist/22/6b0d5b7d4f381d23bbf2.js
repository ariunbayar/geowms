(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{54:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),l=a.n(n);a(109);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m(e);if(t){var l=m(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,a,n,o=s(u);function u(){return r(this,u),o.apply(this,arguments)}return t=u,(a=[{key:"render",value:function(){return this.props.is_loading?l.a.createElement("div",{className:"loader text-center"},l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),l.a.createElement("br",null),this.props.text?this.props.text:"Түр хүлээнэ үү...")):null}}])&&c(t.prototype,a),n&&c(t,n),u}(n.Component)},896:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),l=a.n(n);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m(e);if(t){var l=m(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return s(this,a)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(m,e);var t,a,o,s=i(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=s.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t}return t=m,(a=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var a=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){a.setState({status:"closed"}),e&&e()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,a="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:a,onClick:function(){return e.handleProceed()}},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},l.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},l.a.createElement("div",{className:"d-flex justify-content-center"},"danger"==this.props.model_type_icon?l.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"primary"==this.props.model_type_icon?l.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn gp-text-primary","aria-hidden":"true"}):"warning"==this.props.model_type_icon?l.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):l.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),l.a.createElement("div",{className:"d-flex justify-content-center my-1"},l.a.createElement("h6",{className:"text-dark"},this.props.title)),l.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 my-3 text-justify"},l.a.createElement("a",{className:"text-dark"},this.props.text))))),l.a.createElement("div",{className:o}))}}])&&r(t.prototype,a),o&&r(t,o),m}(n.Component)},917:function(e,t,a){var n=a(55),l=a(930);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};n(l,o);e.exports=l.locals||{}},930:function(e,t,a){(t=a(56)(!1)).push([e.i,".bundle-view-scroll {\n    overflow-y: scroll;\n    height: calc(95vh - 36px);\n}\n\n.bundle-view-right-scroll {\n    overflow-y: scroll;\n    height: calc(95vh - 36px);\n}",""]),e.exports=t},969:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ne}));var n=a(0),l=a.n(n),o=a(49),r=a(221);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={getall:function(){var e=i({},Object(r.a)());return fetch("".concat(m,"/all/"),e).then(r.c)},getPropertyFields:function(e){var t=i({},Object(r.b)());return fetch("".concat(m,"/property-fields/").concat(e,"/"),t).then(r.c)},setPropertyFields:function(e,t,a,n){var l=i(i({},Object(r.b)()),{},{body:JSON.stringify({fid:e,fields:t,tid:a,values:n})});return fetch("".concat(m,"/property-fields/save/"),l).then(r.c)},getStyleData:function(e){var t=i(i({},Object(r.b)()),{},{body:JSON.stringify({geom_type:e})});return fetch("".concat(m,"/style-data/"),t).then(r.c)},checkStyleName:function(e){var t=i(i({},Object(r.b)()),{},{body:JSON.stringify({style_name:e})});return fetch("".concat(m,"/check-style-name/"),t).then(r.c)}},m="/back/dedsan-butests";var p=a(896),f=(a(917),a(219),a(889)),d=a(166),_=a(546),y=a(230),h=a(289),v=a(475),g=a(888),b=a(541),E=a(216),w=a(241),N=a(336),k=a(141),S=a(287);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=D(e);if(t){var l=D(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return j(this,a)}}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(r,e);var t,a,n,o=C(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,e)).state={geojson:[],dataProjection:"EPSG:4326",featureProjection:"EPSG:3857",style_state:e.style_state,style_color:e.style_color,style_size:e.style_size,fill_color:e.fill_color,style_name:e.style_name,view_name:e.view_name?e.view_name:"geoserver_desing_view",url:e.url,defualt_url:e.defualt_url,geom_type:e.geom_type,dashed_line_gap:e.dashed_line_gap,dashed_line_length:e.dashed_line_length,color_opacity:e.color_opacity,wellknownname:e.wellknownname,is_loading:!1},t.loadMapData=t.loadMapData.bind(R(t)),t.loadMap=t.loadMap.bind(R(t)),t}return t=r,(a=[{key:"componentDidMount",value:function(){this.loadMap(),this.loadMapData()}},{key:"componentDidUpdate",value:function(e,t){e.geom_type!=this.props.geom_type&&this.setState({geom_type:this.props.geom_type})}},{key:"loadMap",value:function(){var e=new f.a({layers:[new d.a({source:new _.a})],target:"map",view:new v.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});this.map=e}},{key:"loadMapData",value:function(){var e=this,t=this.state,a=t.style_state,n=t.style_color,l=t.style_size,o=t.fill_color,r=t.style_name,c=(t.view_name,t.url),i=t.defualt_url,s=t.geom_type,m=t.dashed_line_gap,p=t.dashed_line_length,f=t.color_opacity,_=t.wellknownname,v=t.dataProjection,O=t.featureProjection;if(_){var x=(0).points,P=(0).radius,C=(0).angle,j=(0).rotation,R=(0).radius2;"square"==_?(x=4,P=10,C=Math.PI/4):"triangle"==_?(x=3,P=10,j=Math.PI/4,C=0):"star"==_?(x=5,P=10,R=4,C=0):"x"==_&&(x=4,P=10,R=0,C=0);var D=new b.a({fill:new E.a({color:o}),stroke:new w.a({color:n,width:l,lineDash:p?[m,p]:""}),points:x,radius:P,radius2:R,rotation:j,angle:C})}else D=new N.a({radius:5,fill:new E.a({color:o}),stroke:new w.a({color:n,width:l})});var F={MultiPolygon:new k.c({stroke:new w.a({color:n,width:l,lineDash:p?[m,p]:""}),fill:new E.a({color:o,opacity:f})}),Polygon:new k.c({stroke:new w.a({color:n,width:l,lineDash:p?[m,p]:""}),fill:new E.a({color:o,opacity:f})}),Point:new k.c({image:D}),LineString:new k.c({stroke:new w.a({color:n,width:l,lineDash:p?[m,p]:""}),fill:new E.a({color:o,opacity:f})}),MultiLineString:new k.c({stroke:new w.a({color:n,width:l,lineDash:p?[m,p]:""}),fill:new E.a({color:o,opacity:f})}),MultiPoint:new k.c({image:D})};if("update_style"==a){var z=[];z=r?{FORMAT:"image/png",styles:r}:{FORMAT:"image/png",cql_filter:"field_type like '".concat(s,"'")};var T={tile:new d.a({source:new y.a({projection:O,url:c||i,params:z})})};this.map.addLayer(T.tile)}"create_style"==a&&(this.setState({is_loading:!0}),u.getStyleData(s).then((function(t){var a=t.data;if(a){var n=new g.a({dataProjection:v,featureProjection:O}).readFeatures(a),l=new h.a({features:n}),o=new S.a({source:l,style:function(e){return F[e.getGeometry().getType()]}});e.map.addLayer(o),e.map.getView().fit(l.getExtent(),{padding:[200,200,200,200]}),e.setState({is_loading:!1})}})))}},{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12 m-1 h-100 w-100"},l.a.createElement("div",{id:"map",style:{height:"calc( 49vh - 34px - 7px)"}})),this.state.is_loading?l.a.createElement("span",{className:"text-center d-block text-sp",style:{position:"fixed",top:"60%",right:"20%"}}," ",l.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"})," ",l.a.createElement("br",null)," Түр хүлээнэ үү... "):null)}}])&&x(t.prototype,a),n&&x(t,n),r}(n.Component),z=a(54);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=J(e);if(t){var l=J(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return I(this,a)}}function I(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(r,e);var t,a,n,o=A(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,e)).state={show:!1,id_list:[],save_is_load:!1,modal_alert_check:"closed",title:"",model_type_icon:"success",view_name:"",style_state:"create_style",style_color:"#800000",style_size:1,fill_color:"#C0C0C0",style_name:e.view_style_name,check_style:!1,style_names:e.style_names,url:e.url,defualt_url:e.defualt_url,geom_type:e.geom_type,wellknownname:"",wellknowshape:"",div_angle:"",color_opacity:.3,dashed_line_length:0,dashed_line_gap:0,style_title:"",style_abstract:"",check_style_name:"",is_loading:e.property_loading,zoom_stop:0,zoom_start:0,cache_type:"seed",number_of_cache:2,image_format:"png",tile_cache_check:!1},t.handleInput=t.handleInput.bind(L(t)),t.handleOnChange=t.handleOnChange.bind(L(t)),t.handleSave=t.handleSave.bind(L(t)),t.handleOnClick=t.handleOnClick.bind(L(t)),t}return t=r,(a=[{key:"handleOnClick",value:function(){var e=this,t=this.state,a=t.style_state,n=t.style_name;"create_style"==a?n?(this.setState({is_loading:!0}),u.checkStyleName(n).then((function(t){t.success?e.setState({is_loading:!1,check_style:!0}):e.setState({is_loading:!1,check_style_name:"Style-ийн нэр давхцаж байна"})}))):this.setState({check_style_name:"Style-ийн нэр хоосон байна"}):this.setState({check_style:!0})}},{key:"handleOnChange",value:function(e){var t,a,n;this.setState((t={},a=e.target.name,n=e.target.value,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))}},{key:"handleInput",value:function(e){var t=this.state.id_list,a=parseInt(e.target.value);e.target.checked?t.push(a):t=t.filter((function(e){return e!=a})),this.setState({id_list:t})}},{key:"handleSave",value:function(){var e=this,t=this.props.fid,a=this.props.tid,n=this.state,l=n.id_list,o=n.style_state,r=n.style_color,c=n.style_size,i=n.fill_color,s=n.style_name,m=n.geom_type,p=n.wellknownname,f=n.wellknowshape,d=n.div_angle,_=n.color_opacity,y=n.dashed_line_length,h=n.dashed_line_gap,v=n.style_title,g=n.style_abstract,b=n.zoom_stop,E=n.zoom_start,w=n.number_of_cache,N=n.image_format,k=n.cache_type,S={style_state:o,style_color:r,style_size:c,fill_color:i,style_name:s,geom_type:m,wellknownname:p,wellknowshape:f,div_angle:d,color_opacity:_,dashed_line_length:y,dashed_line_gap:h,style_title:v,style_abstract:g,tile_cache_check:n.tile_cache_check,cache_values:{zoom_stop:b,zoom_start:E,number_of_cache:w,cache_type:k,image_format:N}};this.setState({save_is_load:!0}),u.setPropertyFields(t,l,a,S).then((function(t){var a=t.success,n=t.info;a?(e.setState({save_is_load:!1,modal_alert_check:"open",title:n,model_type_icon:"success"}),e.props.getAll(),e.modalCloseTime()):(e.setState({save_is_load:!1,modal_alert_check:"open",title:n,model_type_icon:"danger"}),e.modalCloseTime())}))}},{key:"componentDidMount",value:function(){var e=this.props.id_list;this.setState({id_list:e})}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.style_color,l=a.style_size,o=a.fill_color,r=a.style_name,c=a.style_state,i=(a.view_name,a.dashed_line_gap),s=a.dashed_line_length,u=a.color_opacity,m=a.wellknownname,p=a.tile_cache_check;if(t.style_color==n&&t.style_size==l&&t.fill_color==o&&t.style_name==r&&t.dashed_line_gap==i&&t.dashed_line_length==s&&t.color_opacity==u&&t.wellknownname==m&&t.tile_cache_check==p||this.setState({check_style:!1,style_size:l,fill_color:o,style_color:n,style_name:r,color_opacity:u,wellknownname:m,dashed_line_gap:i,dashed_line_length:s,check_style_name:"",tile_cache_check:p}),t.style_state==c&&e.view_name==this.props.view_name||this.setState({check_style:!1,style_size:1,fill_color:"#C0C0C0",style_color:"#800000",color_opacity:.3,style_title:"",wellknownname:"",dashed_line_gap:0,style_abstract:"",style_name:this.props.view_style_name,check_style_name:""}),e.fields!==this.props.fields){var f=this.props.fields;this.setState({fields:f})}if(e.id_list!==this.props.id_list){var d=this.props.id_list;this.setState({id_list:d})}if(e.view_name!==this.props.view_name){var _=this.props.view_name;this.setState({view_name:_})}if(e.style_names!==this.props.style_names&&this.setState({style_names:this.props.style_names}),e.url!==this.props.url&&this.setState({url:this.props.url}),e.view_style_name!==this.props.view_style_name&&this.setState({style_name:this.props.view_style_name}),e.geom_type!==this.props.geom_type&&this.setState({geom_type:this.props.geom_type}),e.defualt_url!==this.props.defualt_url&&this.setState({defualt_url:this.props.defualt_url}),e.property_loading!==this.props.property_loading&&this.setState({is_loading:this.props.property_loading}),e.fid!==this.props.fid&&this.setState({tile_cache_check:!1}),e.cache_values!==this.props.cache_values&&this.props.cache_values)if(this.props.cache_values.length>0){var y=this.props.cache_values[0];this.setState({zoom_stop:y.zoom_stop,zoom_start:y.zoom_start,cache_type:y.cache_type,number_of_cache:y.number_of_cache,image_format:y.image_format})}else this.setState({zoom_stop:0,zoom_start:0,cache_type:"seed",number_of_cache:0,image_format:"png"})}},{key:"handleModalAlert",value:function(){this.setState({modal_alert_check:"closed"}),clearTimeout(this.state.timer)}},{key:"modalCloseTime",value:function(){var e=this;this.state.timer=setTimeout((function(){e.setState({modal_alert_check:"closed"})}),2e3)}},{key:"render",value:function(){var e=this,t=this.props,a=t.fields,n=t.fid,o=t.fname,r=this.state,c=r.style_color,i=r.style_size,s=r.style_state,u=r.check_style,m=r.fill_color,f=r.id_list,d=r.save_is_load,_=r.view_name,y=r.style_names,h=r.style_name,v=r.url,g=r.defualt_url,b=r.geom_type,E=r.wellknownname,w=r.wellknowshape,N=r.div_angle,k=r.color_opacity,S=r.dashed_line_length,O=r.dashed_line_gap,x=r.style_title,P=r.style_abstract,C=r.is_loading,j=r.zoom_stop,R=r.zoom_start,D=r.number_of_cache,T=r.tile_cache_check,M=r.image_format,q=r.cache_type;return l.a.createElement("div",{className:"card col-md-6 mb-1 bundle-view-right-scroll",style:{left:"10px"}},l.a.createElement("div",{className:"card-body"},n?l.a.createElement("div",null,b&&l.a.createElement("fieldset",null,l.a.createElement("div",{className:"form-row border m-1 p-1"},l.a.createElement("div",{className:"form-row col-md-12  text-center"},l.a.createElement("div",{className:"form-group col-md-12"},l.a.createElement("label",{htmlFor:"",className:"m-2"},l.a.createElement("h5",null,"tilecache тохируулах")),l.a.createElement("input",{type:"checkbox",checked:T,onChange:function(t){return e.setState({tile_cache_check:!T})}}))),T&&l.a.createElement("div",{className:"form-row col-md-12"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"",className:"m-2"},"Зургийн формат"),l.a.createElement("select",{className:"form-control form-control-sm",value:M,onChange:function(t){return e.setState({image_format:t.target.value})}},l.a.createElement("option",{value:"jpeg"},"jpeg"),l.a.createElement("option",{value:"png"},"png"))),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"",className:"m-2"},"Томруулах эхний утга"),l.a.createElement("input",{type:"number",name:"zoom_start",className:"form-control col-4"+(R>21?" is-invalid":""),value:R,onChange:function(t){return e.handleOnChange(t)}}),R>21&&l.a.createElement("label",{className:"text-danger"},"Томруулах эхний утга нь хамгийн ихдээ 21 байна")),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"",className:"m-2"},"Томруулах сүүлчийн утга"),l.a.createElement("input",{type:"number",name:"zoom_stop",className:"form-control col-4"+(j>21?" is-invalid":""),value:j,onChange:function(t){return e.handleOnChange(t)}}),j>21&&l.a.createElement("label",{className:"text-danger"},"Томруулах сүүлчийн утга нь хамгийн ихдээ 21 байна")),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Үйлдлийн төрөл"),l.a.createElement("select",{className:"form-control form-control-sm",value:q,onChange:function(t){return e.setState({cache_type:t.target.value})}},l.a.createElement("option",{value:"seed"},"seed"),l.a.createElement("option",{value:"reseed"},"reseed"),l.a.createElement("option",{value:"truncate"},"Truncate"))),l.a.createElement("div",{className:"form-group col-md-4 mr-2"},l.a.createElement("label",{htmlFor:"number_of_cache",className:"m-2"},"Хэрэглэх таскуудын тоо"),l.a.createElement("input",{type:"number",name:"number_of_cache",className:"form-control col-4"+(j>100?" is-invalid":""),value:D,onChange:function(t){return e.handleOnChange(t)}}),D>100&&l.a.createElement("label",{className:"text-danger"},"Хэрэглэх таскын тоо хамгийн ихдээ 100 байна")))),l.a.createElement("div",{className:"form-row border m-1 p-2 pl-2"},l.a.createElement("div",{className:"form-row col-md-12 text-center"},l.a.createElement("div",{className:"form-group col-md-12"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},l.a.createElement("h5",null,"давхаргын style тохируулах")))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-12"},l.a.createElement("label",{htmlFor:"state"},"Style-ийн төлөв"),l.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){return e.setState({style_state:t.target.value})},value:s},l.a.createElement("option",{value:"create_style"},"Style үүсгэх"),l.a.createElement("option",{value:"update_style"},"Үүссэн style-с сонгох")))),"create_style"==s?l.a.createElement("div",{className:"form-row col-md-12"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Style-ийн нэр"),l.a.createElement("input",{type:"text",name:"style_name",className:"form-control",value:h,onChange:function(t){return e.handleOnChange(t)}}),this.state.check_style_name&&l.a.createElement("label",{className:"text-danger"},this.state.check_style_name)),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Style-ийн гарчиг"),l.a.createElement("input",{type:"text",name:"style_title",className:"form-control",value:x,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Товч тайлбар"),l.a.createElement("input",{type:"text",name:"style_abstract",className:"form-control",value:P,onChange:function(t){return e.handleOnChange(t)}})),"Point"==b||"Polygon"==b||"MultiPoint"==b?l.a.createElement("div",{className:"form-row col-md-12"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Дүрсийн дүүргэлтийн өнгө"),l.a.createElement("input",{type:"color",name:"fill_color",className:"form-control col-4",value:m,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Хүрээний өнгө"),l.a.createElement("input",{type:"color",name:"style_color",className:"form-control col-4",value:c,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"id_geoserver_user"},"Хүрээний өргөн"),l.a.createElement("input",{name:"style_size",type:"number",className:"form-control col-4",id:"style_size",value:i,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Өнгөний уусгалт"),l.a.createElement("input",{type:"number",name:"color_opacity",className:"form-control col-4",value:k,onChange:function(t){return e.handleOnChange(t)}})),"Point"==b||"MultiPoint"==b?l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"state"},"Дүрсний сонголт"),l.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){return e.setState({wellknownname:t.target.value})}},l.a.createElement("option",{value:""},"-----------"),l.a.createElement("option",{value:"square"},"Дөрвөлжин"),l.a.createElement("option",{value:"triangle"},"Гурвалжин"),l.a.createElement("option",{value:"star"}," Од"),l.a.createElement("option",{value:"x"}," Хэрээс"))):""):l.a.createElement("div",{className:"form-row col-md-12"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Өргөн"),l.a.createElement("input",{type:"number",name:"style_size",className:"form-control col-4",value:i,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Өнгө"),l.a.createElement("input",{type:"color",name:"style_color",className:"form-control col-4",value:c,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Зураас хоорондох зай"),l.a.createElement("input",{type:"number",name:"dashed_line_gap",className:"form-control col-4",value:O,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Зураасын урт"),l.a.createElement("input",{type:"number",name:"dashed_line_length",className:"form-control col-4",value:S,onChange:function(t){return e.handleOnChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{htmlFor:"color",className:"m-2"},"Өнгөний уусгалт"),l.a.createElement("input",{type:"number",name:"color_opacity",className:"form-control col-4",value:k,onChange:function(t){return e.handleOnChange(t)}})))):l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",{htmlFor:"id_geoserver_user"},"Style-ийн нэр"),l.a.createElement("select",{className:"form-control form-control-sm",value:h||"",onChange:function(t){return e.setState({style_name:t.target.value})}},l.a.createElement("option",{value:h},h||""),y.map((function(e,t){return l.a.createElement("option",{value:e,key:t},e)})))),l.a.createElement("div",{className:"form-group col-md-12"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleOnClick},"Style-ийг шалгах")),u&&l.a.createElement("div",{className:"form-row col-md-12"},l.a.createElement("div",{className:"form-group col-md-12"},l.a.createElement(F,{style_state:s,style_color:c,style_size:i,fill_color:m,style_name:h,view_name:_,url:v,defualt_url:g,geom_type:b,wellknownname:E,wellknowshape:w,div_angle:N,color_opacity:k,dashed_line_length:S,dashed_line_gap:O}))))),l.a.createElement("table",{className:"table table-bordered m-1"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:4,className:"text-center"},l.a.createElement("h4",{className:"text-center"},o),_&&l.a.createElement("h4",{className:"text-center"},l.a.createElement("small",null,"View name: ",_)))),l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center",style:{width:"15%"}},"Data ",l.a.createElement("br",null),"type"),l.a.createElement("th",{className:"text-center",style:{width:"15%"}},"View"),l.a.createElement("th",{className:"text-center",style:{width:"70%"}},"Property")),a.map((function(t,a){return l.a.createElement(l.a.Fragment,null,t.data_types.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",{key:a},l.a.createElement("th",{rowSpan:t.data_type_configs.length+1,className:"text-wrap align-middle text-justify m-2"},l.a.createElement("span",{className:"text-center align-middle"},"(",t.data_type_name_eng,")"),l.a.createElement("br",null),l.a.createElement("span",{className:"text-center align-middle"},t.data_type_name),l.a.createElement("br",null),l.a.createElement("span",{className:"text-justify text-muted align-middle"},l.a.createElement("small",null,t.data_type_definition)))),t.data_type_configs.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",{key:a},l.a.createElement("th",null,l.a.createElement("div",{className:"icheck-primary"},l.a.createElement("input",{id:t.property_name,type:"checkbox",checked:f.indexOf(t.property_id)>-1,onChange:e.handleInput,value:t.property_id}),l.a.createElement("label",{htmlFor:t.property_name}))),l.a.createElement("th",null,l.a.createElement("label",{htmlFor:t.property_name,"data-toggle":"tooltip","data-placement":"right",title:t.property_definition},t.property_name,l.a.createElement("br",null),"(",t.value_types.map((function(e,t){return l.a.createElement("span",{key:t},e.value_type_name)})),")"))))})))})))})))),d?l.a.createElement("a",{className:"btn btn-block gp-btn-primary text-white"},"Уншиж байна"):l.a.createElement("a",{onClick:this.handleSave,className:"btn btn-block gp-btn-primary text-white"},"View үүсгэх")):l.a.createElement("div",null,l.a.createElement("h4",{className:"text-center"},"Property Хоосон байна")),l.a.createElement(p.a,{title:this.state.title,model_type_icon:this.state.model_type_icon,status:this.state.modal_alert_check,modalAction:function(){return e.handleModalAlert()}}),l.a.createElement(z.a,{is_loading:C})))}}])&&M(t.prototype,a),n&&M(t,n),r}(n.Component);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=W(e);if(t){var l=W(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return K(this,a)}}function K(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(r,e);var t,a,n,o=H(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,e)).state={list_all:[],fields:[],fid:null,tid:null,id_list:[],view_name:"",fname:null,prev_event:null,prev_theme_event:null,prev_package_event:null,check_package_event:null,style_names:[],url:"",defualt_url:"",view_style_name:"",geom_type:"",is_loading:!1,property_loading:!1,cache_values:[]},t.getAll=t.getAll.bind(Q(t)),t.getProperties=t.getProperties.bind(Q(t)),t.active_view=t.active_view.bind(Q(t)),t}return t=r,(a=[{key:"componentDidMount",value:function(){this.getAll()}},{key:"getAll",value:function(){var e=this;this.setState({is_loading:!0}),u.getall().then((function(t){var a=t.success,n=t.data,l=t.style_names,o=t.defualt_url;a&&e.setState({list_all:n,style_names:l,defualt_url:o,is_loading:!1})}))}},{key:"getProperties",value:function(e,t,a,n){var l=this;this.active_view(n),this.setState({fid:e,tid:t,fname:a,property_loading:!0}),u.getPropertyFields(e).then((function(e){var t=e.success,a=e.fields,n=e.id_list,o=e.view_name,r=e.url,c=e.style_name,i=e.geom_type,s=e.cache_values;t?l.setState({fields:a,id_list:n,view_name:o,url:r,view_style_name:c,geom_type:i,property_loading:!1,cache_values:s}):l.setState({property_loading:!1})}))}},{key:"componentDidUpdate",value:function(e,t){t.geom_type!==this.state.geom_type&&this.setState({geom_type:this.state.geom_type})}},{key:"active_view",value:function(e){this.setState({fields:[],id_list:[],view_name:""});var t=e.id,a=this.state.prev_event,n=this.state.prev_theme_event,l=this.state.prev_package_event,o=this.state.check_package_event,r=t.split("-").length;e.className="list-group-item collapsed active",1===r&&(e.querySelector("i").className="icon expand-icon fa fa-minus",null!==n&&(a.className="list-group-item collapsed",n.querySelector("i").className="icon expand-icon fa fa-plus"),this.setState({prev_theme_event:e})),2===r&&(n.className="list-group-item collapsed",null!==l?l.id.split("-")[0]===t.split("-")[0]?l.id===t?"icon expand-icon fa fa-minus ml-4"===e.querySelector("i").className?(a.className="list-group-item collapsed",e.querySelector("i").className="icon expand-icon fa fa-plus ml-4"):e.querySelector("i").className="icon expand-icon fa fa-minus ml-4":(e.querySelector("i").className="icon expand-icon fa fa-minus ml-4",a.className="list-group-item collapsed",l.querySelector("i").className="icon expand-icon fa fa-plus ml-4"):(e.querySelector("i").className="icon expand-icon fa fa-minus ml-4",null!==o&&(a.className="list-group-item collapsed",o.querySelector("i").className="icon expand-icon fa fa-plus ml-4"),this.setState({check_package_event:l})):e.querySelector("i").className="icon expand-icon fa fa-minus ml-4",this.setState({prev_package_event:e})),3===r&&(a.className="list-group-item collapsed"),this.setState({prev_event:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.list_all,n=(t.fid,t.tid,t.style_names),o=t.view_style_name,r=t.url,c=t.defualt_url,i=t.geom_type,s=t.is_loading,u=t.property_loading,m=t.cache_values;return l.a.createElement("div",{className:"row m-0"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"card bundle-view-scroll mb-0"},l.a.createElement("div",{className:"card-header text-uppercase"},"Theme"),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{id:"accordion1"},a.map((function(t,a){return l.a.createElement("ul",{className:"list-group",key:a},l.a.createElement("li",{className:"list-group-item collapsed",id:"".concat(a),"data-toggle":"collapse","data-target":"#collapse-theme".concat(a),"aria-expanded":"false","aria-controls":"collapse-theme".concat(a),onClick:function(t){return e.active_view(t.currentTarget)}},l.a.createElement("i",{className:"icon expand-icon fa fa-plus",id:"".concat(a)}),"  ",t.name),l.a.createElement("div",{id:"collapse-theme".concat(a),className:"collapse","data-parent":"#accordion1"},l.a.createElement("div",{id:"accordion10".concat(a)},t.package.map((function(n,o){return l.a.createElement("ul",{className:"list-group",key:o},l.a.createElement("li",{className:"list-group-item collapsed",id:"".concat(a,"-").concat(o),"data-toggle":"collapse","data-target":"#collapse-packages".concat(a).concat(o),"aria-expanded":"false","aria-controls":"collapse-packages".concat(a).concat(o),onClick:function(t){return e.active_view(t.currentTarget)}},l.a.createElement("i",{className:"icon expand-icon fa fa-plus ml-4",id:"".concat(a,"-").concat(o)}),"  ",n.name),l.a.createElement("div",{id:"collapse-packages".concat(a).concat(o),className:"collapse","data-parent":"#accordion10".concat(a)},l.a.createElement("div",{id:"accordion100".concat(o)},n.features.map((function(n,r){return l.a.createElement("ul",{className:"list-group",key:r},l.a.createElement("li",{className:"list-group-item",id:"".concat(a,"-").concat(o,"-").concat(r),onClick:function(a){return e.getProperties(n.id,t.id,n.name,a.currentTarget)}},l.a.createElement("i",{className:n.view?"fa fa-table text-success":"fa fa-table text-muted",style:{paddingLeft:"40px"}}),"  ",l.a.createElement("span",{className:"p-0",id:"".concat(a,"-").concat(o,"-").concat(r)}," ",n.name),n.view&&l.a.createElement("ul",{style:{paddingLeft:"90px"},id:"".concat(a,"-").concat(o,"-").concat(r)},l.a.createElement("li",{id:"features-".concat(a).concat(o).concat(r)},n.view.view_name))))})))))})))))}))))),l.a.createElement(z.a,{is_loading:s})),l.a.createElement(U,{getAll:this.getAll,fields:this.state.fields,fid:this.state.fid,fname:this.state.fname,tid:this.state.tid,id_list:this.state.id_list,view_name:this.state.view_name,style_names:n,url:r,defualt_url:c,view_style_name:o,geom_type:i,property_loading:u,cache_values:m}))}}])&&G(t.prototype,a),n&&G(t,n),r}(n.Component);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ae(e);if(t){var l=ae(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return te(this,a)}}function te(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(c,e);var t,a,n,r=ee(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r.call(this,e)}return t=c,(a=[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(o.c,null,l.a.createElement(o.a,{path:"/back/inspire-views/",component:X})))}}])&&Z(t.prototype,a),n&&Z(t,n),c}(n.Component)}}]);