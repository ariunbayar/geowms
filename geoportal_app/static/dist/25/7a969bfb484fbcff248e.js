(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{894:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),r=a.n(n);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m(e);if(t){var r=m(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return s(this,a)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(m,e);var t,a,o,s=c(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=s.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t}return t=m,(a=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var a=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){a.setState({status:"closed"}),e&&e(),a.props.modalClose&&a.props.modalClose()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,a="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:a},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content animated",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},r.a.createElement("div",{className:"col-md-12 offset-md-12 float-right my-1"},r.a.createElement("button",{type:"button",className:"close mt-2 mr-2","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.handleClose()}},"×"))),r.a.createElement("div",{className:"d-flex justify-content-center"},"success"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,this.props.title)),r.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 text-justify"},this.props.text),r.a.createElement("div",{className:"modal-footer",style:{border:"none"}},r.a.createElement("button",{type:"button",onClick:function(){return e.handleClose()},className:"btn btn-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-times"}),this.props.actionNameBack?this.props.actionName:"  БУЦАХ"),r.a.createElement("button",{type:"button",onClick:this.handleProceed,className:"btn btn-outline-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-check-square-o"}),this.props.actionName?this.props.actionName:"  УСТГАХ"))))),r.a.createElement("div",{className:o}))}}])&&l(t.prototype,a),o&&l(t,o),m}(n.Component)},918:function(e,t,a){var n=a(62),r=a(919);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},919:function(e,t,a){(t=a(63)(!1)).push([e.i,".fixed-height-b{\n    overflow-y: scroll;\n    height: calc(87vh - 60px);\n    padding-right: 5px;\n    padding-left: 5px;\n    background-color: ghostwhite;\n}\n\n.fixed-height-body{\n    background-color: rgb(247, 249, 250, 1);\n    background-color: white;\n    border-radius: 1px rgb(235, 242, 245, 1);\n    box-shadow: 0 2px 6px 0 rgba(218, 218, 253, 0.65), 0 2px 6px 0 rgba(206, 206, 238, 0.54);\n    border: none;\n    position: relative;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    min-width: 0;\n    word-wrap: break-word;\n    background-clip: border-box;\n    border: 1px solid rgba(0,0,0,.125);\n    border-radius: .25rem;\n}\n\n.fixed-left{\n    position: fixed;\n    height: calc(75vh - 88px);\n}\n.smaller{\n    font-size: 59%;\n    font-weight: 400;\n    text-align: center;\n    font-weight: bold;\n}\n.bc-white{\n    background-color: white;\n    padding-top: 0.76rem;\n    padding-right: 0.76rem;\n    padding-left: 0.76rem;\n    padding-bottom: 0.76rem;\n    margin-bottom: 25px;\n    box-shadow: 0 2px 6px 0 rgba(218, 218, 253, 0.65), 0 2px 6px 0 rgba(206, 206, 238, 0.54);\n}\n\n.role-card {\n    min-height: 100%;\n    margin-bottom: 25px;\n    background-color: rgb(247, 249, 250, 1);\n    border-radius: 1px rgb(235, 242, 245, 1);\n    /* box-shadow: 0 2px 6px 0 rgba(218, 218, 253, 0.65), 0 2px 6px 0 rgba(206, 206, 238, 0.54); */\n    border: none;\n    position: relative;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    min-width: 0;\n    word-wrap: break-word;\n    background-clip: border-box;\n    border: 1px solid rgba(0,0,0,.125);\n    border-radius: .25rem;\n    margin-bottom: 0;\n}\n\n.role-card-body {\n    -ms-flex: 1 1 auto;\n    flex: 1 1 auto;\n    min-height: 1px;\n    padding: 1.25rem;\n}\n\n.role-table-card {\n    min-height: 100%;\n    margin-bottom: 15px;\n    background-color: white;\n    border-radius: 1px rgb(235, 242, 245, 1);\n    border: none;\n    margin-top: -16px;\n    position: relative;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    min-width: 0;\n    word-wrap: break-word;\n    background-clip: border-box;\n    border: 1px solid rgba(0,0,0,.125);\n    border-radius: .25rem;\n}\n\n.role-table-card-body {\n    -ms-flex: 1 1 auto;\n    flex: 1 1 auto;\n    min-height: 1px;\n    padding: 1.25rem;\n}\n\n/* switch */\n\n.switch-tree-state{\n\n    width: 46px;\n    height: 18px;\n    background-color: #fff;\n    border-radius: 50px;\n    padding: 1px;\n    display: flex;\n    flex-wrap: wrap;\n    border: #adb5bd solid 1px;\n}\n.switch-tree-state:hover {\n    -webkit-box-shadow: 0px 0px 11px 0px rgba(0,123,255,1);\n-moz-box-shadow: 0px 0px 11px 0px rgba(0,123,255,1);\nbox-shadow: 0px 0px 11px 0px rgba(0,123,255,1);\n}\n.switch-tree-state:active {\n    -webkit-box-shadow: 0px 0px 11px 0px rgba(0,123,255,1);\n    -moz-box-shadow: 0px 0px 11px 0px rgba(0,123,255,1);\n    box-shadow: 0px 0px 11px 0px rgba(0,123,255,1);\n}\n.switch-all{\n    width: 14px;\n    height: 14px;\n    border-radius: 50px;\n    max-width: 33.333%;\n}\n\n.switch-one{\n    position: relative;\n    background-color: #28a745;\n    left: 0px;\n    animation: switch-one 0.7s 1;\n}\n@keyframes switch-one {\n    0% {left: 30px}\n}\n\n.switch-two{\n    position: relative;\n    background-color: #007bff;\n    border-radius: 50px;\n    animation: switch-two 1s 1;\n\n}\n@keyframes switch-two {\n    0% {background-color: white}\n}\n.switch-tree{\n    position: relative;\n    background-color: #dc3545;\n    right: 0px;\n    animation: switch-tree 0.7s 1;\n}\n@keyframes switch-tree {\n    0% {right: 30px;}\n}\n",""]),e.exports=t},941:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return yr}));var n=a(0),r=a.n(n),o=a(49),l=a(893),i=a(53);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f(e);if(t){var r=f(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d(this,a)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,a,n,o=m(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).initials={currentPage:1},t.state={level:e.match.params.level||1,"жагсаалтын_холбоос":"/back/api/org/level-".concat(e.match.params.level,"/org-list/"),"талбарууд":[{field:"name",title:"Байгууллага нэр",has_action:!0},{field:"num_employees",title:"Албан хаагчид"},{field:"num_systems",title:"Систем"}],"хувьсах_талбарууд":[{field:"name",text:"",action:function(e){return t.go_link(e)},action_type:!1}],"нэмэх_товч":"/back/байгууллага/түвшин/".concat(e.match.params.level,"/нэмэх/"),"уншиж_байх_үед_зурвас":"Уншиж байна",refresh:!0,values:{},is_loading:!1},t.go_link=t.go_link.bind(p(t)),t}return t=c,(a=[{key:"componentDidUpdate",value:function(e,t){if(this.props.match.params.level!==t.level){var a=this.props.match.params.level;this.setState({level:this.props.match.params.level,"жагсаалтын_холбоос":"/back/api/org/level-".concat(a,"/org-list/"),refresh:!this.state.refresh,"нэмэх_товч":"/back/байгууллага/түвшин/".concat(a,"/нэмэх/")})}}},{key:"go_link",value:function(e){var t=this.state.level;this.props.history.push("/back/байгууллага/түвшин/".concat(t,"/").concat(e.id,"/хэрэглэгч/"))}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,a=e.жагсаалтын_холбоос,n=e.хувьсах_талбарууд,o=e.refresh,c=e.нэмэх_товч,s=e.уншиж_байх_үед_зурвас,u=e.is_loading;return r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"page-container"},r.a.createElement(l.a,{"талбарууд":t,"жагсаалтын_холбоос":a,"хувьсах_талбарууд":n,refresh:o,"уншиж_байх_үед_зурвас":s,"нэмэх_товч":c})),r.a.createElement(i.a,{is_loading:u}))}}])&&s(t.prototype,a),n&&s(t,n),c}(n.Component),y=a(219);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g={getAll:function(e,t){var a=b(b({},Object(y.b)()),{},{body:JSON.stringify(t)});return fetch("".concat(E,"/level-").concat(e,"/"),a).then(y.c)},org_add:function(e,t){var a=b(b({},Object(y.b)()),{},{body:JSON.stringify(t)});return fetch("".concat(E,"/level-").concat(e,"/org-add/"),a).then(y.c)},org_remove:function(e,t){var a=b(b({},Object(y.b)()),{},{body:JSON.stringify({org_id:t})});return fetch("".concat(E,"/level-").concat(e,"/org-remove/"),a).then(y.c)},employeeAdd:function(e,t,a){var n=b(b({},Object(y.b)()),{},{body:JSON.stringify({payload:a})});return fetch("".concat(E,"/level-").concat(e,"/").concat(t,"/employee-add/"),n).then(y.c)},employeeRemove:function(e){var t=b({},Object(y.a)());return fetch("".concat(E,"/employee-remove-").concat(e,"/"),t).then(y.c)},employeeDetail:function(e){var t=b({},Object(y.a)());return fetch("".concat(E,"/employee-detail-").concat(e,"/"),t).then(y.c)},employeeUpdate:function(e,t,a){var n=b(b({},Object(y.b)()),{},{body:JSON.stringify({payload:a})});return fetch("".concat(E,"/level-").concat(t,"/employee-update-").concat(e,"/"),n).then(y.c)},empTokenRefresh:function(e){var t=b({},Object(y.a)());return fetch("".concat(E,"/employee-token-refresh-").concat(e,"/"),t).then(y.c)},sistemCount:function(e){var t=b({},Object(y.a)());return fetch("/back/api/систем/".concat(e,"/тоо/"),t).then(y.c)},orgList:function(e,t,a,n,r){var o=b(b({},Object(y.b)()),{},{body:JSON.stringify({page:e,perpage:t,query:a,org_level:n,sort_name:r})});return fetch("".concat(E,"/level-").concat(n,"/org-list/"),o).then(y.c)},orgAll:function(e,t){var a=b({},Object(y.a)());return fetch("/back/api/org/level-".concat(e,"/").concat(t,"/"),a).then(y.c)},getBaseLayers:function(){var e=Object(y.a)();return fetch("/суурь-давхарга/",e).then(y.c)},formOptions:function(e){var t=Object(y.a)();return fetch("/back/api/org/form-options/".concat(e,"/"),t).then(y.c)},getGeom:function(e){var t=b(b({},Object(y.b)()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/get-geom/",t).then(y.c)},getAddresses:function(e,t){var a=Object(y.a)();return fetch("".concat(E,"/").concat(e,"/").concat(t,"/addresses/"),a).then(y.c)},getEmpInfo:function(e,t){var a=b(b({},Object(y.b)()),{},{body:JSON.stringify({is_erguul:t})});return fetch("".concat(E,"/").concat(e,"/emp-info/"),a).then(y.c)},getErguulegFields:function(e){var t=Object(y.a)();return fetch("".concat(E,"/").concat(e,"/erguuleg-fields/"),t).then(y.c)},saveErguul:function(e,t,a,n,r){var o=b(b({},Object(y.b)()),{},{body:JSON.stringify({values:e,emp_id:t,point:a,photo:n,erguul_id:r})});return fetch("".concat(E,"/save-erguul/"),o).then(y.c)},getSelectValue:function(){var e=b({},Object(y.a)());return fetch("".concat(E,"/get-select-values/"),e).then(y.c)}},E="/back/api/org";var k=a(891),O=a(20),w=a(34),N=Object(w.c)().shape({org_name:Object(w.d)().max(150,"150-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),org_level:Object(w.d)().max(100,"100-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),org_role:Object(w.d)().max(100,"100-с илүүгүй урттай утга оруулна уу!")}),S=a(892);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function P(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=M(e);if(t){var r=M(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D(this,a)}}function D(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(c,e);var t,a,o,l=F(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={modal_alert_status:"closed",timer:null,roles:[],secondOrders:[],secondOrder_value:-1,thirthOrders:[],thirthOrder_value:-1,fourthOrders:[],fourthOrder_value:-1,geo_id:null,firstOrder_geom:"",disabled:!0,is_loading:!0,form_values:{org_level:1,org_name:"",org_role:"-1"}},t.handleSubmit=t.handleSubmit.bind(T(t)),t.handleGetAll=t.handleGetAll.bind(T(t)),t.modalClose=t.modalClose.bind(T(t)),t.formOptions=t.formOptions.bind(T(t)),t.handle2ndOrderChange=t.handle2ndOrderChange.bind(T(t)),t.handle3rdOrderChange=t.handle3rdOrderChange.bind(T(t)),t.handle4thOrderChange=t.handle4thOrderChange.bind(T(t)),t}return t=c,(a=[{key:"componentDidMount",value:function(){var e=this.props.match.params.level,t=this.props.match.params.id;this.handleGetAll(e,t)}},{key:"handleGetAll",value:function(e,t){var a=this;t?g.orgAll(e,t).then((function(t){var n=t.orgs;n&&(n.map((function(t){return a.setState({form_values:{org_level:e,org_name:t.name,org_role:t.org_role},geo_id:t.geo_id})})),a.formOptions())})):this.formOptions()}},{key:"formOptions",value:function(){var e=this;g.formOptions().then((function(t){var a=t.success,n=t.secondOrders,r=t.roles,o=t.firstOrder_geom;if(a){e.setState({secondOrders:n,roles:r,firstOrder_geom:o,is_loading:!1});var l=e.state.geo_id;if(l)for(var i="",c=0;c<l.length;c++)i+=l[c],4===c&&n.map((function(t){t.geo_id===i&&e.handle2ndOrderChange(t.geo_id)})),6===c&&e.state.thirthOrders.map((function(t){t.geo_id===i&&e.handle3rdOrderChange(t.geo_id)})),8===c&&e.state.fourthOrders.map((function(t){t.geo_id===i&&e.handle4thOrderChange(t.geo_id)}));else e.setState({geo_id:o});e.setState({disabled:!1})}}))}},{key:"handle2ndOrderChange",value:function(e){var t=this,a=this.state,n=a.firstOrder_geom,r=a.secondOrders;"-1"!==e?r.map((function(a){a.geo_id===e&&t.setState({thirthOrders:a.children,geo_id:a.geo_id})})):this.setState({thirthOrders:[],thirthOrder_value:"-1",geo_id:n}),this.setState({secondOrder_value:e,thirthOrder_value:"-1",fourthOrders:[],fourthOrder_value:"-1"})}},{key:"handle3rdOrderChange",value:function(e){var t=this,a=this.state.thirthOrders;"-1"===e?(this.setState({fourthOrders:[],fourthOrder_value:"-1"}),this.handle2ndOrderChange(this.state.secondOrder_value)):a.map((function(a){a.geo_id===e&&t.setState({fourthOrders:a.children,geo_id:a.geo_id})})),this.setState({thirthOrder_value:e,fourthOrder_value:"-1"})}},{key:"handle4thOrderChange",value:function(e){var t=this;"-1"!==e?this.state.fourthOrders.map((function(a){a.geo_id===e&&t.setState({geo_id:a.geo_id})})):this.handle3rdOrderChange(this.state.thirthOrder_value),this.setState({fourthOrder_value:e})}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.props.match.params.level,i=this.props.match.params.id,c=this.state.geo_id,s={org_name:e.org_name,id:i,org_level:e.org_level,role_id:e.org_role,geo_id:c};g.org_add(l,s).then((function(e){var t=e.success,l=e.errors;t?(a.setState({modal_alert_status:"open"}),a.props.refreshCount(),n("saved"),r(!1),a.modalCloseTime()):(o(l),r(!1))}))}},{key:"modalClose",value:function(){var e=this.props.match.params.level;this.props.history.push("/back/байгууллага/түвшин/".concat(e,"/"))}},{key:"modalCloseTime",value:function(){var e=this,t=this.props.match.params.level;this.state.timer=setTimeout((function(){e.props.history.push("/back/байгууллага/түвшин/".concat(t,"/"))}),2e3)}},{key:"render",value:function(){var e=this,t=this.state,a=t.form_values,o=t.roles,l=(t.disabled,this.props.match.params.id),c=this.props.match.params.level;return r.a.createElement("div",null,r.a.createElement(O.e,{enableReinitialize:!0,initialValues:a,validationSchema:N,onSubmit:this.handleSubmit},(function(t){var a=t.errors,c=t.isSubmitting;return Object.keys(a).length,r.a.createElement("div",null,r.a.createElement(O.d,{className:"col-4"},r.a.createElement(i.a,{is_loading:e.state.is_loading}),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"org_name"},"Байгууллагын нэр"),r.a.createElement("div",{className:"row"},r.a.createElement(O.b,{className:"form-control "+(a.org_name?"is-invalid":""),name:"org_name",id:"id_org_name",type:"text",placeholder:"Байгууллагын нэр"}),r.a.createElement(O.a,{name:"org_name",component:"div",className:"invalid-feedback"}))))),l&&r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",{htmlFor:"org_level"},"Түвшин"),r.a.createElement("div",{className:"row"},r.a.createElement(n.Fragment,null,r.a.createElement(O.b,x({name:"org_level",as:"select",className:"form-control"},"className","form-control "+(a.org_level?"is-invalid":"")),r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4")),r.a.createElement(O.a,{name:"org_level",component:"div",className:"invalid-feedback"}))))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",{htmlFor:"org_role"},"Байгууллагын эрх"),r.a.createElement("div",{className:"row"},r.a.createElement(n.Fragment,null,r.a.createElement(O.b,x({name:"org_role",as:"select",className:"form-control"},"className","form-control "+(a.org_role?"is-invalid":"")),r.a.createElement("option",{value:"-1"},"...."),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))),r.a.createElement(O.a,{name:"org_role",component:"div",className:"invalid-feedback"}))))),r.a.createElement("h5",{className:"mb-3"},"Байгууллагын хамрах хүрээ"),r.a.createElement("table",{className:"table col"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"pt-3"},"Аймаг/ Хот"),r.a.createElement("td",null,r.a.createElement("div",{className:"row"},r.a.createElement("select",{className:"form-control",value:e.state.secondOrder_value,onChange:function(t){return e.handle2ndOrderChange(t.target.value)}},r.a.createElement("option",{value:"-1"},"--- Улсын хэмжээнд ---"),e.state.secondOrders.map((function(e,t){return r.a.createElement("option",{key:t,value:e.geo_id},e.name)})))))),r.a.createElement("tr",null,r.a.createElement("th",{className:"pt-3"},"Сум/ Дүүрэг"),r.a.createElement("td",null,r.a.createElement("div",{className:"row"},r.a.createElement("select",{className:"form-control",value:e.state.thirthOrder_value,onChange:function(t){return e.handle3rdOrderChange(t.target.value)}},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгоно уу ---"),e.state.thirthOrders.map((function(e,t){return r.a.createElement("option",{key:t,value:e.geo_id},e.name)})))))),r.a.createElement("tr",null,r.a.createElement("th",{className:"pt-3"},"Баг/ Хороо"),r.a.createElement("td",null,r.a.createElement("div",{className:"row"},r.a.createElement("select",{className:"form-control",value:e.state.fourthOrder_value,onChange:function(t){return e.handle4thOrderChange(t.target.value)}},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгоно уу ---"),e.state.fourthOrders.map((function(e,t){return r.a.createElement("option",{key:t,value:e.geo_id},e.name)})))))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:c},c&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),c&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!c&&"Хадгалах"))))})),r.a.createElement(k.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:"Амжилттай хадгаллаа",model_type_icon:"success"}),r.a.createElement(S.a,j({},this.props,{name:"Буцах",navlink_url:"/back/байгууллага/түвшин/".concat(c,"/")})))}}])&&P(t.prototype,a),o&&P(t,o),c}(n.Component),G=a(28),L=(a(217),a(884)),V=a(163),z=a(283),J=a(535),U=a(469),I=a(883),B=a(139),q=a(236),W=a(214),H=a(282);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ee(e);if(t){var r=ee(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return K(this,a)}}function K(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(l,e);var t,a,n,o=X(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857",geom:e.geom},t.loadMapData=t.loadMapData.bind(Q(t)),t.loadMap=t.loadMap.bind(Q(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(Q(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){this.loadMap(),this.loadMapData()}},{key:"componentDidUpdate",value:function(e,t){e.geom!=this.props.geom&&this.loadMapData()}},{key:"loadMap",value:function(){var e=new H.a({source:new z.a({}),style:new B.c({stroke:new q.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new W.a({color:"rgba(100, 255, 0, 0.3)"})})});this.vector_layer=e;var t=new L.a({layers:[new V.a({source:new J.a}),e],target:"map",view:new U.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});this.map=t}},{key:"removeFeatureFromSource",value:function(e){var t=this.vector_layer.getSource(),a=t.getFeatures();if(null!=a&&a.length>0)for(var n=0;n<a.length;n++)if(a[n].getProperties().id==e){t.removeFeature(a[n]);break}}},{key:"loadMapData",value:function(){var e=this.state,t=e.dataProjection,a=e.featureProjection,n=this.props.geom,r="aimag_sum";this.removeFeatureFromSource(r);var o=(new I.a).readFeatures(n,{dataProjection:t,featureProjection:a});o[0].setProperties({id:r}),this.vector_layer.getSource().addFeature(o[0]),this.map.getView().fit(o[0].getGeometry(),{padding:[25,25,25,25]})}},{key:"render",value:function(){return r.a.createElement("div",{className:"🌍"},r.a.createElement("h5",null,"Хамрах хүрээ:"),r.a.createElement("br",null),r.a.createElement("div",{id:"map",style:{height:"calc( 50vh - 85px - 15px)"}}))}}])&&Y(t.prototype,a),n&&Y(t,n),l}(n.Component);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=se(e);if(t){var r=se(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ie(this,a)}}function ie(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?ce(e):t}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(c,e);var t,a,o,l=le(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={modal_alert_status:"closed",timer:null,roles:[],secondOrders:[],secondOrder_value:-1,thirthOrders:[],thirthOrder_value:-1,fourthOrders:[],fourthOrder_value:-1,geo_id:null,firstOrder_geom:"",disabled:!0,is_loading:!0,form_values:{org_level:1,org_name:"",org_role:"-1"}},t.handleSubmit=t.handleSubmit.bind(ce(t)),t.handleGetAll=t.handleGetAll.bind(ce(t)),t.modalClose=t.modalClose.bind(ce(t)),t.formOptions=t.formOptions.bind(ce(t)),t.handle2ndOrderChange=t.handle2ndOrderChange.bind(ce(t)),t.handle3rdOrderChange=t.handle3rdOrderChange.bind(ce(t)),t.handle4thOrderChange=t.handle4thOrderChange.bind(ce(t)),t}return t=c,(a=[{key:"componentDidMount",value:function(){var e=this.props.level,t=this.props.id;this.handleGetAll(e,t)}},{key:"handleGetAll",value:function(e,t){var a=this;t?g.orgAll(e,t).then((function(t){var n=t.orgs;n&&(n.map((function(t){return a.setState({form_values:{org_level:e,org_name:t.name,org_role:t.org_role},geo_id:t.geo_id})})),a.formOptions())})):this.formOptions()}},{key:"formOptions",value:function(){var e=this;g.formOptions().then((function(t){var a=t.success,n=t.secondOrders,r=t.roles,o=t.firstOrder_geom;if(a){e.setState({secondOrders:n,roles:r,firstOrder_geom:o,is_loading:!1});var l=e.state.geo_id;if(l)for(var i="",c=0;c<l.length;c++)i+=l[c],4===c&&n.map((function(t){t.geo_id===i&&e.handle2ndOrderChange(t.geo_id)})),6===c&&e.state.thirthOrders.map((function(t){t.geo_id===i&&e.handle3rdOrderChange(t.geo_id)})),8===c&&e.state.fourthOrders.map((function(t){t.geo_id===i&&e.handle4thOrderChange(t.geo_id)}));else e.setState({geo_id:o});e.setState({disabled:!1})}}))}},{key:"handle2ndOrderChange",value:function(e){var t=this,a=this.state,n=a.firstOrder_geom,r=a.secondOrders;"-1"!==e?r.map((function(a){a.geo_id===e&&t.setState({thirthOrders:a.children,geo_id:a.geo_id})})):this.setState({thirthOrders:[],thirthOrder_value:"-1",geo_id:n}),this.setState({secondOrder_value:e,thirthOrder_value:"-1",fourthOrders:[],fourthOrder_value:"-1"})}},{key:"handle3rdOrderChange",value:function(e){var t=this,a=this.state.thirthOrders;"-1"===e?(this.setState({fourthOrders:[],fourthOrder_value:"-1"}),this.handle2ndOrderChange(this.state.secondOrder_value)):a.map((function(a){a.geo_id===e&&t.setState({fourthOrders:a.children,geo_id:a.geo_id})})),this.setState({thirthOrder_value:e,fourthOrder_value:"-1"})}},{key:"handle4thOrderChange",value:function(e){var t=this;"-1"!==e?this.state.fourthOrders.map((function(a){a.geo_id===e&&t.setState({geo_id:a.geo_id})})):this.handle3rdOrderChange(this.state.thirthOrder_value),this.setState({fourthOrder_value:e})}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.props.level,i=this.props.id,c=this.state.geo_id,s={org_name:e.org_name,id:i,org_level:e.org_level,role_id:e.org_role,geo_id:c};g.org_add(l,s).then((function(t){var l=t.success,i=t.errors;l?(a.setState({modal_alert_status:"open",form_values:{org_level:e.org_level,org_name:e.org_name,org_role:e.org_role}}),n("saved"),r(!1),a.new_level=e.org_level,a.modalCloseTime(e.org_level)):(o(i),r(!1))}))}},{key:"modalClose",value:function(){this.props.FormClose(),this.props.PushHistory(this.new_level),clearTimeout(this.state.timer)}},{key:"modalCloseTime",value:function(e){var t=this;this.state.timer=setTimeout((function(){t.props.FormClose(),t.props.PushHistory(e)}),2e3)}},{key:"render",value:function(){var e=this,t=this.state,a=t.form_values,o=t.roles,l=(t.disabled,this.props.id);return this.props.level,r.a.createElement("div",null,r.a.createElement(O.e,{enableReinitialize:!0,initialValues:a,validationSchema:N,onSubmit:this.handleSubmit},(function(t){var a=t.errors,c=t.isSubmitting;return Object.keys(a).length,r.a.createElement("div",null,r.a.createElement(O.d,{className:"col-12"},r.a.createElement(i.a,{is_loading:e.state.is_loading}),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"org_name"},"Байгууллагын нэр"),r.a.createElement("div",{className:"row"},r.a.createElement(O.b,{className:"form-control "+(a.org_name?"is-invalid":""),name:"org_name",id:"id_org_name",type:"text",placeholder:"Байгууллагын нэр"}),r.a.createElement(O.a,{name:"org_name",component:"div",className:"invalid-feedback"}))))),l&&r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",{htmlFor:"org_level"},"Түвшин"),r.a.createElement("div",{className:"row"},r.a.createElement(n.Fragment,null,r.a.createElement(O.b,ne({name:"org_level",as:"select",className:"form-control"},"className","form-control "+(a.org_level?"is-invalid":"")),r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4")),r.a.createElement(O.a,{name:"org_level",component:"div",className:"invalid-feedback"}))))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",{htmlFor:"org_role"},"Байгууллагын эрх"),r.a.createElement("div",{className:"row"},r.a.createElement(n.Fragment,null,r.a.createElement(O.b,ne({name:"org_role",as:"select",className:"form-control"},"className","form-control "+(a.org_role?"is-invalid":"")),r.a.createElement("option",{value:"-1"},"...."),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))),r.a.createElement(O.a,{name:"org_role",component:"div",className:"invalid-feedback"}))))),r.a.createElement("h5",{className:"mb-3"},"Байгууллагын хамрах хүрээ"),r.a.createElement("table",{className:"table col"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"pt-3"},"Аймаг/ Хот"),r.a.createElement("td",null,r.a.createElement("div",{className:"row"},r.a.createElement("select",{className:"form-control",value:e.state.secondOrder_value,onChange:function(t){return e.handle2ndOrderChange(t.target.value)}},r.a.createElement("option",{value:"-1"},"--- Улсын хэмжээнд ---"),e.state.secondOrders.map((function(e,t){return r.a.createElement("option",{key:t,value:e.geo_id},e.name)})))))),r.a.createElement("tr",null,r.a.createElement("th",{className:"pt-3"},"Сум/ Дүүрэг"),r.a.createElement("td",null,r.a.createElement("div",{className:"row"},r.a.createElement("select",{className:"form-control",value:e.state.thirthOrder_value,onChange:function(t){return e.handle3rdOrderChange(t.target.value)}},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгоно уу ---"),e.state.thirthOrders.map((function(e,t){return r.a.createElement("option",{key:t,value:e.geo_id},e.name)})))))),r.a.createElement("tr",null,r.a.createElement("th",{className:"pt-3"},"Баг/ Хороо"),r.a.createElement("td",null,r.a.createElement("div",{className:"row"},r.a.createElement("select",{className:"form-control",value:e.state.fourthOrder_value,onChange:function(t){return e.handle4thOrderChange(t.target.value)}},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгоно уу ---"),e.state.fourthOrders.map((function(e,t){return r.a.createElement("option",{key:t,value:e.geo_id},e.name)})))))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",style:{float:"right"},disabled:c},"Хадгалах")),r.a.createElement(i.a,{is_loading:c})))})),r.a.createElement(k.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:"Амжилттай хадгаллаа",model_type_icon:"success"}))}}])&&re(t.prototype,a),o&&re(t,o),c}(n.Component),me=a(894);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=be(e);if(t){var r=be(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ye(this,a)}}function ye(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(l,e);var t,a,n,o=he(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={is_open:!1,modal_status:"closed",modal_alert_status:"closed",is_loading:!1},t.handleModalDeleteOpen=t.handleModalDeleteOpen.bind(ve(t)),t.handleModalDeleteClose=t.handleModalDeleteClose.bind(ve(t)),t.handleFormOpen=t.handleFormOpen.bind(ve(t)),t.handleUserDelete=t.handleUserDelete.bind(ve(t)),t.modalClose=t.modalClose.bind(ve(t)),t.modalAlertClose=t.modalAlertClose.bind(ve(t)),t.handleHistoryPush=t.handleHistoryPush.bind(ve(t)),t}return t=l,(a=[{key:"handleFormOpen",value:function(){this.setState({is_open:!this.state.is_open})}},{key:"handleUserDelete",value:function(){var e=this,t=this.props.match.params.level,a=this.props.match.params.id;g.org_remove(t,a).then((function(t){t.success?(e.setState({msg:"Амжилттай устгалаа",style:"success"}),e.setState({modal_alert_status:"open"}),e.setState({is_loading:!0})):(e.setState({msg:"Амжилтгүй боллоо",style:"danger"}),e.setState({modal_alert_status:"open"}),alert("Алдаа гарлаа!")),e.modalAlertClose()}))}},{key:"handleModalDeleteOpen",value:function(){this.setState({modal_status:"open"})}},{key:"handleModalDeleteClose",value:function(){this.setState({modal_status:"closed"})}},{key:"modalClose",value:function(){this.handleUserDelete(),this.setState({modal_status:"closed"})}},{key:"modalAlertClose",value:function(){var e=this,t=this.props.match.params.level;this.state.timer=setTimeout((function(){e.props.history.push("/back/байгууллага/түвшин/".concat(t,"/")),e.setState({modal_alert_status:"'closed'"})}),2e3)}},{key:"handleHistoryPush",value:function(e){var t=this.props.match.params.id;this.props.history.push("/back/байгууллага/түвшин/".concat(e,"/").concat(t,"/detail/")),this.props.refresh(e)}},{key:"render",value:function(){var e=this,t=this.props.allowed_geom,a=this.state,n=a.is_open,o=a.msg,l=a.is_loading,c=a.style,s=this.props.match.params.level,u=this.props.match.params.id;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},n?r.a.createElement("button",{className:"btn gp-outline-primary",onClick:this.handleFormOpen},r.a.createElement("i",{className:"fa fa-angle-double-left"})," Буцах"):r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary waves-effect waves-light m-1",onClick:this.handleFormOpen},r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Засах")," ",r.a.createElement("button",{className:"btn btn-danger waves-effect waves-light m-1",onClick:this.handleModalDeleteOpen},r.a.createElement("i",{className:"fa fa fa-trash-o"})," Устгах")),r.a.createElement("br",null),r.a.createElement("br",null),n?r.a.createElement(ue,{level:s,id:u,FormClose:this.handleFormOpen,PushHistory:this.handleHistoryPush}):null,r.a.createElement(me.a,{modalAction:function(){return e.modalClose()},text:"Та байгууллагыг устгахдаа итгэлтэй байна уу?",title:"Байгууллага устгах",model_type_icon:"success",status:this.state.modal_status,modalClose:function(){return e.handleModalDeleteClose()}})),r.a.createElement("div",{className:"col-6"},t&&r.a.createElement(te,{geom:t}))),r.a.createElement(k.a,{title:o,model_type_icon:c,status:this.state.modal_alert_status,modalAction:function(){return e.modalAlertClose()}}),r.a.createElement(i.a,{is_loading:l}))}}])&&pe(t.prototype,a),n&&pe(t,n),l}(n.Component),ge=a(237),Ee=a(161);function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(a),!0).forEach((function(t){we(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function we(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ne={create:function(e){var t=Oe(Oe({},Object(y.b)()),{},{body:JSON.stringify(e)});return fetch("/back/api/систем/үүсгэх/",t).then(y.c)},update:function(e){var t=Oe(Oe({},Object(y.b)()),{},{body:JSON.stringify(e)});return fetch("/back/api/систем/".concat(e.id,"/хадгалах/"),t).then(y.c)},remove:function(e){var t=Oe({},Object(y.b)());return fetch("/back/api/систем/".concat(e,"/устгах/"),t).then(y.c)},detail:function(e){var t=Oe({},Object(y.a)());return fetch("/back/api/систем/".concat(e,"/дэлгэрэнгүй/"),t).then(y.c)},getWMSList:function(){var e=Oe({},Object(y.a)());return fetch("/back/wms/all/",e).then(y.c)},tokenRefresh:function(e){var t=Oe({},Object(y.b)());return fetch("/back/api/систем/".concat(e,"/refresh-token/"),t).then(y.c)}};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Fe(e);if(t){var r=Fe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Pe(this,a)}}function Pe(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(i,e);var t,a,n,o=xe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={org_level:t.props.match.params.level,org_id:t.props.match.params.id,refresh:!1,"нэмэх_товч":"/back/байгууллага/түвшин/".concat(e.match.params.level,"/").concat(e.match.params.id,"/систем/үүсгэх/"),"жагсаалтын_холбоос":"/back/api/систем/govorgList/".concat(e.match.params.id,"/"),custom_query:{},"талбарууд":[{field:"name",title:"Системийн нэрүүд",has_action:!0},{field:"token",title:"Токен"},{field:"created_at",title:"Үүсгэсэн огноо"}],"хувьсах_талбарууд":[{field:"name",action:function(e){return t.go_link(e)}},{field:"token",text:""},{field:"created_at",text:""}],"нэмэлт_талбарууд":[{title:"Засах",text:"",icon:"fa fa-pencil-square-o text-success",action:function(e){return t.go_detial(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}}],modal_status:"closed",modal_alert_status:"initial",values:{}},t.go_link=t.go_link.bind(Re(t)),t.handleRemoveAction=t.handleRemoveAction.bind(Re(t)),t.handleModalOpen=t.handleModalOpen.bind(Re(t)),t.handleModalClose=t.handleModalClose.bind(Re(t)),t.handleRemove=t.handleRemove.bind(Re(t)),t}return t=i,(a=[{key:"go_link",value:function(e){var t=this.state,a=t.org_level,n=t.org_id;this.props.history.push("/back/байгууллага/түвшин/".concat(a,"/").concat(n,"/систем/").concat(e.id,"/дэлгэрэнгүй/"))}},{key:"go_detial",value:function(e){var t=this.state,a=t.org_level,n=t.org_id;this.props.history.push("/back/байгууллага/түвшин/".concat(a,"/").concat(n,"/систем/").concat(e.id,"/засах/"))}},{key:"handleRemoveAction",value:function(e){this.setState({values:e}),this.handleModalOpen()}},{key:"handleModalOpen",value:function(){this.setState({modal_status:"open"})}},{key:"handleModalClose",value:function(){this.setState({modal_status:"closed"})}},{key:"handleRemove",value:function(){var e=this,t=this.state.values;Ne.remove(t.id).then((function(t){var a=t.success;a&&(e.setState({refresh:!e.state.refresh,modal_alert_status:a?"success":"fail"}),e.handleModalClose())}))}},{key:"modalAlertClose",value:function(){this.setState({modal_alert_status:"closed"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.refresh,n=t.талбарууд,o=t.жагсаалтын_холбоос,i=t.хувьсах_талбарууд,c=t.custom_query,s=t.нэмэх_товч,u=t.нэмэлт_талбарууд,m=t.values,d=t.modal_status,p=t.modal_alert_status;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(l.a,{refresh:a,color:"bg-dark","талбарууд":n,"жагсаалтын_холбоос":o,per_page:20,"уншиж_байх_үед_зурвас":"Хүсэлтүүд уншиж байна","хувьсах_талбарууд":i,"нэмэх_товч":s,custom_query:c,"нэмэлт_талбарууд":u}))),r.a.createElement(ge.a,{text:'Та "'.concat(m.name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),title:"Систем устгах",model_type_icon:"success",status:d,modalClose:this.handleModalClose,modalAction:this.handleRemove}),r.a.createElement(Ee.a,{status:"success"==p?"open":"closed",title:"Системийг амжилттай устгалаа!",model_type_icon:"success",modalAction:function(){return e.modalAlertClose()}}))}}])&&Ce(t.prototype,a),n&&Ce(t,n),i}(n.Component),Te=a(189);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach((function(t){Le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Be(e);if(t){var r=Be(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ue(this,a)}}function Ue(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(l,e);var t,a,n,o=Je(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).too=0,t.state={govorg:{id:"",name:"",token:"",website:""},govorg_wms_list:[],public_url:"",private_url:"",is_state:!1,is_loading:!0,modal_status:"closed"},t.copyToClipboard=t.copyToClipboard.bind(Ie(t)),t.addNotif=t.addNotif.bind(Ie(t)),t.loadDetail=t.loadDetail.bind(Ie(t)),t.handleTokenRefresh=t.handleTokenRefresh.bind(Ie(t)),t.handleModalActionOpen=t.handleModalActionOpen.bind(Ie(t)),t.handleModalActionClose=t.handleModalActionClose.bind(Ie(t)),t}return t=l,(a=[{key:"addNotif",value:function(e,t,a){var n=this;this.too++,this.setState({show:!0,style:e,msg:t,icon:a});var r=setInterval((function(){n.too--,n.setState({show:!0}),clearInterval(r)}),2e3)}},{key:"componentDidMount",value:function(){this.loadDetail()}},{key:"loadDetail",value:function(e){var t=this;this.setState({is_loading:!0}),Ne.detail(this.props.match.params.system_id).then((function(a){var n=a.govorg,r=a.public_url,o=a.private_url,l=n.wms_list.map((function(e){return Ge(Ge({},e),{},{layer_list:e.layer_list.filter((function(e){return n.layers.indexOf(e.id)>-1}))})})).filter((function(e){return e.layer_list.length}));t.setState({govorg:n,govorg_wms_list:l,public_url:r,private_url:o,is_loading:!1}),e&&e()}))}},{key:"handleTokenRefresh",value:function(){var e=this,t=this.props.match.params.system_id;Ne.tokenRefresh(t).then((function(t){t.success?e.loadDetail((function(){e.addNotif("success","Токенийг амжилттай шинэчиллээ","check")})):e.addNotif("danger","Алдаа гарлаа!","times")}))}},{key:"copyToClipboard",value:function(e){var t=document.createElement("textarea");t.innerText=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),this.addNotif("success","Амжилттай хууллаа","times")}},{key:"handleModalActionOpen",value:function(){this.setState({modal_status:"open"})}},{key:"handleModalActionClose",value:function(){this.setState({modal_status:"closed"})}},{key:"render",value:function(){var e=this,t=this.state.govorg,a=(t.id,t.name),n=t.token,o=t.website,l=(this.props.match.params.level,this.props.match.params.id,this.state.is_state);return r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{className:"row"},r.a.createElement(i.a,{is_loading:this.state.is_loading}),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h5",null,a),r.a.createElement("form",{className:"form-inline"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Токен")),r.a.createElement("input",{type:"text",className:"form-control",disabled:!0,value:n}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:this.handleModalActionOpen},r.a.createElement("i",{className:"fa fa-refresh","aria-hidden":"true"})," Шинэчлэх")))),o&&r.a.createElement("p",null,r.a.createElement("strong",null,"Вебсайт"),": ",o," ")),r.a.createElement("div",{className:"col-md-9 pr-0 pl-0"},r.a.createElement("ul",{className:"nav nav-tabs nav-tabs-dark-gray col-12"},r.a.createElement("li",{className:"nav-item gp-text-primary"},r.a.createElement("a",{onClick:function(){return e.setState({is_state:!1})},className:"nav-link active","data-toggle":"tab",href:"#tabe-4"},r.a.createElement("i",{className:"icon-home"})," ",r.a.createElement("span",{className:"hidden-xs"},"Интернэт сүлжээ"))),r.a.createElement("li",{className:"nav-item gp-text-primary"},r.a.createElement("a",{onClick:function(){return e.setState({is_state:!0})},className:"nav-link","data-toggle":"tab",href:"#tabe-4"},r.a.createElement("i",{className:"icon-home"})," ",r.a.createElement("span",{className:"hidden-xs"},"Төрийн сүлжээ"))))),r.a.createElement("div",{className:"col-md-9 border-top-0 border border-secondary"},r.a.createElement("div",{className:"col-md-12 mt-3 mb-3"},l?r.a.createElement("div",{className:"input-group mt-2"},r.a.createElement("input",{type:"text",className:"form-control col-9",disabled:!0,value:this.state.private_url}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"btn btn-outline-primary ml-1",type:"button",onClick:function(){return e.copyToClipboard(e.state.private_url)}},r.a.createElement("i",{className:"fa fa-clone","aria-hidden":"true"})," Хуулах"))):r.a.createElement("div",{className:"input-group mt-2"},r.a.createElement("input",{type:"text",className:"form-control col-9",disabled:!0,value:this.state.public_url}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"btn btn-outline-primary ml-1",type:"button",onClick:function(){return e.copyToClipboard(e.state.public_url)}},r.a.createElement("i",{className:"fa fa-clone","aria-hidden":"true"})," Хуулах")))),this.state.govorg_wms_list.map((function(t){return r.a.createElement("div",{className:"col-md-12 mt-3 mb-3 ml-3",key:t.id},r.a.createElement("h5",null," ",t.name," "),r.a.createElement("ul",null,t.layer_list.map((function(t,a){return r.a.createElement("li",{key:a},"GeoJSON: ",t.title," (",t.code,")",r.a.createElement("div",{className:"input-group mt-2"},r.a.createElement("input",{type:"text",className:"form-control col-7",disabled:!0,value:"".concat(l?t.json_private_url:t.json_public_url)}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"btn btn-outline-primary ml-1",type:"button",onClick:function(){return e.copyToClipboard(l?t.json_private_url:t.json_public_url)}},r.a.createElement("i",{className:"fa fa-clone","aria-hidden":"true"})," Хуулах"))))}))))})))),r.a.createElement(me.a,{text:"Токенийг шинэчилсэнээр уг URL-ээр одоо ашиглаж байгаа газрууд ажиллахгүй болохыг анхаарна уу!",title:"Токен шинэчлэх",model_type_icon:"success",status:this.state.modal_status,modalClose:this.handleModalActionClose,modalAction:function(){return e.handleTokenRefresh()},actionName:"Шинэчлэх"}),r.a.createElement(Te.a,{show:this.state.show,too:this.too,style:this.state.style,msg:this.state.msg,icon:this.state.icon}))}}])&&Ve(t.prototype,a),n&&Ve(t,n),l}(n.Component),We=Object(w.c)().shape({name:Object(w.d)().max(250,"250-с илүүгүй урттай оруулна уу!").required("Хоосон байна утга оруулна уу."),website:Object(w.d)().matches(/^((http|https):\/\/)?([a-zA-Z0-9]+\.)?([a-zA-Z0-9][a-zA-Z0-9-]*)?((\:[a-zA-Z0-9]{2,6})|(\.[a-zA-Z0-9]{2,6}))$/,"Домайн нэрээ зөв оруулна уу.")});function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(a),!0).forEach((function(t){$e(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Xe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=at(e);if(t){var r=at(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return et(this,a)}}function et(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?tt(e):t}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(l,e);var t,a,n,o=Qe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={govorg:{},wms_list:[],layers:[],modal_alert_status:"closed",title:"",model_type_icon:"",timer:null},t.handleLayerToggle=t.handleLayerToggle.bind(tt(t)),t.handleSubmit=t.handleSubmit.bind(tt(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.system_id;Ne.getWMSList().then((function(t){var a=t.wms_list;e.setState({wms_list:a})})),t&&Ne.detail(t).then((function(t){var a=t.govorg;e.setState({govorg:a,layers:a.layers})}))}},{key:"handleLayerToggle",value:function(e){var t=this.state.layers,a=parseInt(e.target.value);e.target.checked?t.push(a):t=t.filter((function(e){return e!=a})),this.setState({layers:t})}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.props.match.params.id,i=Ye(Ye({},e),{},{layers:this.state.layers,org:l});n("checking"),r(!0),this.state.govorg.id?(i.id=this.state.govorg.id,Ne.update(i).then((function(e){var t=e.success,l=e.info,i=e.errors;t?(n("saved"),r(!1),a.setState({modal_alert_status:"open",title:l,model_type_icon:"success"}),a.modalCloseTime()):(o(i),r(!1))}))):Ne.create(i).then((function(e){var t=e.success,l=e.info,i=e.errors;t?(n("saved"),r(!1),a.setState({modal_alert_status:"open",title:l,model_type_icon:"success"}),a.props.refreshCount(),a.modalCloseTime()):(o(i),r(!1))}))}},{key:"modalCloseTime",value:function(){var e=this,t=this.props.match.params.level,a=this.props.match.params.id;this.state.timer=setTimeout((function(){e.props.history.push("/back/байгууллага/түвшин/".concat(t,"/").concat(a,"/систем/"))}),2e3)}},{key:"modalClose",value:function(){var e=this.props.match.params.level,t=this.props.match.params.id;this.props.history.push("/back/байгууллага/түвшин/".concat(e,"/").concat(t,"/систем/"))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(O.e,{enableReinitialize:!0,initialValues:{name:this.state.govorg.name||"",website:this.state.govorg.website||""},validationSchema:We,onSubmit:this.handleSubmit},(function(e){var t=e.errors,a=(e.status,e.touched,e.isSubmitting);return e.setFieldValue,e.handleBlur,e.values,e.isValid,e.dirty,Object.keys(t).length,r.a.createElement(O.d,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"id_name"},"Системүүдийн нэр:"),r.a.createElement(O.b,{className:"form-control mb-2"+(t.name?" is-invalid":""),placeholder:"Системүүдийн нэр",name:"name",id:"id_name",type:"text"}),r.a.createElement(O.a,{name:"name",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{htmlFor:"id_website"},"Домэйнээр хязгаарлах:"),r.a.createElement(O.b,{className:"form-control my-1"+(t.website?" is-invalid":""),placeholder:"Байршуулах вэбсайт",name:"website",id:"id_website",type:"text"}),r.a.createElement(O.a,{name:"website",component:"div",className:"invalid-feedback"}),r.a.createElement("small",{className:"text-muted"},"Жишээ нь: https://domain.mn")),r.a.createElement("div",null),r.a.createElement("div",{className:"span3"},r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:a},a&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),a&&" Шалгаж байна.",!a&&"Хадгалах"))))}))),r.a.createElement("div",{className:"col-md-8"},this.state.wms_list.map((function(t,a){return r.a.createElement("div",{className:"col-md-12",id:"accordion1",key:a},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 arrow-tree"},r.a.createElement("a",{className:"btn btn-link shadow-none collapsed","data-toggle":"collapse","data-target":"#collapse-".concat(a),"aria-expanded":"true","aria-controls":"collapse-1"},t.is_active?r.a.createElement("i",{className:"fa fa-check-circle",style:{color:"green"},"aria-hidden":"false"}):r.a.createElement("i",{className:"fa fa-times-circle",style:{color:"#FF4748"}}),r.a.createElement("strong",null," ",t.name)," ",t.public_url))),t.is_active&&t.layer_list.map((function(t,n){return r.a.createElement("div",{key:n,id:"collapse-".concat(a),className:"ml-5 collapse","data-parent":"#accordion1"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:t.id,onChange:e.handleLayerToggle,checked:e.state.layers.indexOf(t.id)>-1})," ",t.title," (",t.code,")"))})))})))),r.a.createElement(k.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:this.state.title,model_type_icon:this.state.model_type_icon}))}}])&&Xe(t.prototype,a),n&&Xe(t,n),l}(n.Component);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function lt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ut(e);if(t){var r=ut(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return st(this,a)}}function st(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(i,e);var t,a,n,l=ct(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l.call(this,e)}return t=i,(a=[{key:"render",value:function(){var e=this;return r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/систем/",component:De}),r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/систем/:system_id/дэлгэрэнгүй/",component:qe}),r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/систем/үүсгэх/",component:function(t){return r.a.createElement(nt,ot({},t,{refreshCount:e.props.refreshCount}))}}),r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/систем/:system_id/засах/",component:function(t){return r.a.createElement(nt,ot({},t,{refreshCount:e.props.refreshCount}))}}))}}])&&lt(t.prototype,a),n&&lt(t,n),i}(n.Component);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=vt(e);if(t){var r=vt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return yt(this,a)}}function yt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(i,e);var t,a,n,o=ht(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={refresh:!1,"жагсаалтын_холбоос":"/back/api/org/level-".concat(e.match.params.level,"/").concat(e.match.params.id,"/employeeList/"),"нэмэх_товч":"/back/байгууллага/түвшин/".concat(e.match.params.level,"/").concat(e.match.params.id,"/хэрэглэгч/нэмэх/"),custom_query:{},"талбарууд":[{field:"first_name",title:"Нэр",has_action:!0},{field:"email",title:"Цахим шуудан"},{field:"position",title:"Албан тушаал"},{field:"is_admin",title:"Админ",has_action:!0,is_center:!0},{field:"created_at",title:"Үүссэн"},{field:"updated_at",title:"Зассан"}],"хувьсах_талбарууд":[{field:"first_name",action:function(e){return t.go_link(e)}},{field:"email",text:""},{field:"position",text:""},{field:"is_admin",action:function(e){return t.set_icon(e)},action_type:!0,is_center:!0},{field:"created_at",text:""},{field:"updated_at",text:""}]},t}return t=i,(a=[{key:"set_icon",value:function(e){return e?"fa fa-check-circle-o text-success fa-lg":"fa fa-times-circle-o text-danger fa-lg"}},{key:"go_link",value:function(e){var t=this.props.match.params.level,a=this.props.match.params.id;this.props.history.push("/back/байгууллага/түвшин/".concat(t,"/").concat(a,"/хэрэглэгч/").concat(e.id,"/дэлгэрэнгүй/"))}},{key:"render",value:function(){var e=this.state,t=e.refresh,a=e.талбарууд,n=e.жагсаалтын_холбоос,o=e.хувьсах_талбарууд,i=e.custom_query,c=e.нэмэх_товч;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(l.a,{refresh:t,color:"bg-dark","талбарууд":a,"жагсаалтын_холбоос":n,per_page:20,"уншиж_байх_үед_зурвас":"Хүсэлтүүд уншиж байна","хувьсах_талбарууд":o,"нэмэх_товч":c,custom_query:i}))))}}])&&pt(t.prototype,a),n&&pt(t,n),i}(n.Component),_t=a(903),gt=a(104),Et=a(2),kt=a(889),Ot=a(16),wt=a(61);function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Rt(e);if(t){var r=Rt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return xt(this,a)}}function xt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?Pt(e):t}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(l,e);var t,a,n,o=jt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={projection_data:"EPSG:4326",projection_display:"EPSG:3857",coordinate_clicked:[],features:[]},t.marker=t.initMarker(),t.loadMap=t.loadMap.bind(Pt(t)),t.handleMapClick=t.handleMapClick.bind(Pt(t)),t.setFeatures=t.setFeatures.bind(Pt(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(Pt(t)),t.setMarker=t.setMarker.bind(Pt(t)),t}return t=l,(a=[{key:"initMarker",value:function(){var e=new B.c({image:new kt.a({anchor:[.5,86],anchorXUnits:"fraction",anchorYUnits:"pixels",scale:.4,src:"/static/assets/image/marker.png"})}),t=new wt.a([0,0]),a=new gt.a({geometry:t});return a.setStyle(e),{feature:a,point:t}}},{key:"componentDidMount",value:function(){this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){e.feature!==this.props.feature&&this.props.feature!=={}&&this.setFeatures(this.props.feature),e.point!==this.props.point&&this.props.point&&this.props.point!=={}&&this.setMarker(this.props.point)}},{key:"removeFeatureFromSource",value:function(e){var t=this.vector_layer.getSource(),a=t.getFeatures();if(null!=a&&a.length>0)for(var n=0;n<a.length;n++)if(a[n].getProperties().id==e){t.removeFeature(a[n]);break}}},{key:"fromLonLatToMapCoord",value:function(e){return Object(Et.d)(e)}},{key:"setMarker",value:function(e){var t=JSON.parse(e);if(t){var a=t.coordinates,n=this.fromLonLatToMapCoord(a);this.marker.point.setCoordinates(n),this.props.sendPointCoordinate([a[1],a[0]])}}},{key:"setFeatures",value:function(e){var t="aimag_sum";this.removeFeatureFromSource(t),(e=(new I.a).readFeatures(e,{dataProjection:this.state.projection_data,featureProjection:this.state.projection_display}))[0].setProperties({id:t}),this.vector_layer.getSource().addFeature(e[0]),this.map.getView().fit(e[0].getGeometry(),{padding:[100,100,100,100],duration:2e3})}},{key:"loadMap",value:function(){var e=new H.a({source:new z.a({features:[this.marker.feature]})});this.marker_layer=e;var t=new H.a({source:new z.a({}),style:new B.c({stroke:new q.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new W.a({color:"rgba(100, 255, 0, 0.3)"})})});this.vector_layer=t;var a=new L.a({layers:[new V.a({source:new J.a}),t,e],target:"map",view:new U.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});a.on("click",this.handleMapClick),this.map=a}},{key:"handleMapClick",value:function(e){var t=e.coordinate;this.marker.point.setCoordinates(t);var a=e.map.getView().getProjection(),n=Object(Et.p)(e.coordinate,a,this.state.projection_data),r=Object(Ot.f)(n,"{y},{x}",6);this.props.sendPointCoordinate(r),this.setState({coordinate_clicked:r})}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",style:{height:"75%"},className:"".concat(this.props.class)})}}])&&St(t.prototype,a),n&&St(t,n),l}(n.Component);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Mt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){At(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function At(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Gt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ut(e);if(t){var r=Ut(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return zt(this,a)}}function zt(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?Jt(e):t}function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(c,e);var t,a,o,l=Vt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={form_values:{id:null,username:"",first_name:"",last_name:"",position:"",email:"",gender:"Эрэгтэй",register:"",is_admin:!1,is_super:!1,re_password_mail:!1,phone_number:"",state:"",pro_class:""},aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",feature:{},description:"",point_coordinate:[],point:{},street:"",apartment:"",door_number:"",address_state:!0,modal_alert_status:"closed",is_loading:!0,errors:""},t.handleSubmit=t.handleSubmit.bind(Jt(t)),t.handleGetAll=t.handleGetAll.bind(Jt(t)),t.modalCloseTime=t.modalCloseTime.bind(Jt(t)),t.modalClose=t.modalClose.bind(Jt(t)),t.getFeildValues=t.getFeildValues.bind(Jt(t)),t.handleChange=t.handleChange.bind(Jt(t)),t.getPoint=t.getPoint.bind(Jt(t)),t.getGeomFromJson=t.getGeomFromJson.bind(Jt(t)),t.getGeom=t.getGeom.bind(Jt(t)),t}return t=c,(a=[{key:"componentDidMount",value:function(){var e=this.props.match.params.emp;e?this.handleGetAll(e):this.getFeildValues()}},{key:"handleGetAll",value:function(e){var t=this;g.employeeDetail(e).then((function(a){var n=a.success,r=a.employee;n&&(e&&t.getFeildValues(r.level_1,r.level_2,r.level_3),t.setState({form_values:{id:r.id,username:r.username,first_name:r.first_name,last_name:r.last_name,email:r.email,gender:r.gender,register:r.register,position:r.position_id,is_admin:r.is_admin,is_super:r.is_super,phone_number:r.phone_number,state:r.state_id,pro_class:r.pro_class_id},point:r.point,street:r.street,apartment:r.apartment,door_number:r.door_number,address_state:r.address_state}))}))}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.props.match.params.level,i=this.props.match.params.id,c=this.props.match.params.emp,s=this.state,u=s.street,m=s.apartment,d=s.door_number,p=s.address_state,f={values:e,address:{street:u,apartment:m,door_number:d,level_1:s.aimag_name,level_2:s.sum_name,level_3:s.horoo_name,point:s.point_coordinate,address_state:p}};c?e.re_password!==e.password?(o({re_password:"Нууц үг адил биш байна."}),r(!1)):g.employeeUpdate(c,l,f).then((function(e){var t=e.success,l=e.errors;t?(a.setState({modal_alert_status:"open"}),n("saved"),a.modalCloseTime()):(o(l),a.setState({errors:l})),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)})):g.employeeAdd(l,i,f).then((function(e){var t=e.success,l=e.errors,i=e.employee;t?(a.setState({modal_alert_status:"open"}),n("saved"),a.modalCloseTime(i.user_id)):(o(l),a.setState({errors:l})),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)}))}},{key:"modalCloseTime",value:function(e){var t=this;this.props.refreshCount(),setTimeout((function(){return t.modalClose(e)}),2e3)}},{key:"modalClose",value:function(e){var t=this.props.match.params,a=t.level,n=t.id,r=t.emp;this.props.history.push("/back/байгууллага/түвшин/".concat(a,"/").concat(n,"/хэрэглэгч/").concat(r||e,"/дэлгэрэнгүй/"))}},{key:"getGeomFromJson",value:function(e,t){var a;return t.map((function(t,n){t.name==e&&(a=n)})),a}},{key:"getFeildValues",value:function(e,t,a){var n,r,o=this,l=Object();g.formOptions("second").then((function(i){var c=i.success,s=i.secondOrders;c&&(e&&(l.aimag_id=o.getGeomFromJson(e,s),n=s[l.aimag_id].geo_id,l.aimag_geo_id=n,l.aimag_name=e,r=s[l.aimag_id].children,l.sum=r),t&&(l.sum_id=o.getGeomFromJson(t,r),n=r[l.sum_id].geo_id,l.sum_geo_id=n,r=r[l.sum_id].children,l.horoo=r,l.sum_name=t),a&&(l.horoo_id=o.getGeomFromJson(a,r),n=r[l.horoo_id].geo_id,l.horoo_geo_id=n,l.horoo_name=a),o.getGeom(n),o.setState(Mt(Mt({aimag:s},l),{},{is_loading:!1})))}))}},{key:"getGeom",value:function(e){var t=this;g.getGeom(e).then((function(e){var a=e.feature;a&&t.setState({feature:a})}))}},{key:"getPoint",value:function(e){var t=e;"string"==typeof e&&(t=e.split(","));var a=[t[1],t[0]];this.setState({point_coordinate:a})}},{key:"handleChange",value:function(e,t,a,n,r){var o,l=t+"_id",i=t+"_geo_id",c=t+"_name",s=e.target.value,u=Object();if("-1"!==s){var m=this.state[t][s];this.setState(At({},a,m.children)),a&&(u[a]=m.children),o=m.geo_id,n.map((function(e,t){var a=e+"_geo_id",n=e+"_name";u[e+"_id"]=-1,u[a]="",u[n]=""})),u[i]=o,u[c]=m.name,this.getGeom(o)}else{if(n.length>0&&n.map((function(e,t){var a=e+"_id",n=e+"_geo_id",r=e+"_name";u[e]=[],u[a]=-1,u[n]="",u[r]=""})),"mongol"!==r){var d=r+"_id",p=this.state[d];o=this.state[r][p].geo_id}else o="au_496";u[i]=o,this.getGeom(o)}this.setState(Mt(At({},l,s),u))}},{key:"render",value:function(){var e=this,t=this.state,a=t.form_values,o=t.aimag,l=t.sum,c=t.horoo,s=t.aimag_id,u=t.sum_id,m=t.horoo_id,d=t.is_loading,p=t.feature,f=t.street,h=t.apartment,y=t.door_number,v=t.point,b=t.errors,_=t.address_state,g=this.props,E=g.positions,w=g.states,N=g.pro_classes,S=this.props.match.params.level,C=this.props.match.params.id,j=this.props.match.params.emp;return"/back/байгууллага/түвшин/".concat(S,"/").concat(C,"/хэрэглэгч/"),"/back/байгууллага/түвшин/".concat(S,"/").concat(C,"/хэрэглэгч/").concat(j,"/дэлгэрэнгүй/"),r.a.createElement("div",{className:"ml-3"},r.a.createElement(i.a,{is_loading:d}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(O.e,{enableReinitialize:!0,initialValues:a,validationSchema:_t.a,onSubmit:this.handleSubmit},(function(e){var t=e.errors,a=(e.values,e.isSubmitting);return r.a.createElement(O.d,null,r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_name"},"Нэвтрэх нэр:"),r.a.createElement(O.b,{className:"form-control "+(t.username?"is-invalid":""),name:"username",id:"id_username",type:"text",placeholder:"Нэвтрэх нэр"}),r.a.createElement(O.a,{name:"username",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-6"},r.a.createElement("label",{htmlFor:"first_name"},"Овог:"),r.a.createElement(O.b,{className:"form-control "+(t.last_name?"is-invalid":""),name:"last_name",id:"id_last_name",type:"text",placeholder:"Овог"}),r.a.createElement(O.a,{name:"last_name",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-6"},r.a.createElement("label",{htmlFor:"first_name"},"Нэр:"),r.a.createElement(O.b,{className:"form-control "+(t.first_name?"is-invalid":""),name:"first_name",id:"id_first_name",type:"text",placeholder:"Нэр"}),r.a.createElement(O.a,{name:"first_name",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"position"},"Албан тушаал:"),r.a.createElement(O.b,{name:"position",as:"select",id:"position",style:{fontSize:"0.8rem"},className:"custom-select "+(t.position?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Албан тушаал сонгоно уу ---"),E.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))),r.a.createElement(O.a,{name:"position",component:"span",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"email"},"E-Mail"),r.a.createElement(O.b,{className:"form-control "+(t.email?"is-invalid":""),name:"email",id:"id_email",type:"text",placeholder:"E-Mail"}),r.a.createElement(O.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"gender"},"Хүйс:"),r.a.createElement(n.Fragment,null,r.a.createElement(O.b,{name:"gender",as:"select",className:"form-control "+(t.gender?"is-invalid":"")},r.a.createElement("option",null,"Эрэгтэй"),r.a.createElement("option",null,"Эмэгтэй")),r.a.createElement(O.a,{name:"gender",component:"div",className:"text-dange"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-6"},r.a.createElement("label",{htmlFor:"phone_number"},"Утасны дугаар:"),r.a.createElement(O.b,{className:"form-control "+(t.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(O.a,{name:"phone_number",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-6"},r.a.createElement("label",{htmlFor:"register"},"Регистер:"),r.a.createElement(O.b,{className:"form-control "+(t.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(O.a,{name:"register",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"id_state"},"Төлөв:"),r.a.createElement(O.b,{name:"state",as:"select",id:"state",style:{fontSize:"0.8rem"},className:"custom-select "+(t.state?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Ажилтаны төлөвийг сонгоно уу ---"),w.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(O.a,{name:"state",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"id_pro_class"},"Мэргэжлийн ангийн бүрэлдэхүүн:"),r.a.createElement(O.b,{name:"pro_class",as:"select",id:"pro_class",style:{fontSize:"0.8rem"},className:"custom-select "+(t.pro_class?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Мэргэжлийн ангийн бүрэлдэхүүн ---"),N.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(O.a,{name:"pro_class",component:"div",className:"invalid-feedback"}))),j&&r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"id_re_password_mail"},"Нууц үг солих e-mail илгээх"),r.a.createElement(O.b,{className:"ml-2",name:"re_password_mail",id:"id_re_password_mail",type:"checkbox"}),r.a.createElement(O.a,{name:"re_password_mail",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"id_is_admin"},"Байгууллагын админ"),r.a.createElement(O.b,{className:"ml-2",name:"is_admin",id:"id_is_admin",type:"checkbox"}),r.a.createElement(O.a,{name:"is_admin",component:"div",className:"invalid-feedback"}))),4==S&&r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"is_super"},"Системийн админ"),r.a.createElement(O.b,{className:"ml-2",name:"is_super",id:"id_is_super",type:"checkbox"}),r.a.createElement(O.a,{name:"is_super",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:a},a&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),a&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!a&&"Хадгалах"))))}))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"form-row p-1"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"custom-select "+(b.level_1?"is-invalid":""),"aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:s},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"custom-select "+(b.level_2?"is-invalid":""),onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:u},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),l.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"custom-select "+(b.level_3?"is-invalid":""),onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:m},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),c.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"street"},"Гудамж:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"street",className:"form-control "+(b.street?"is-invalid":""),onChange:function(t){return e.setState({street:t.target.value})},value:f,placeholder:"Гудамжны нэрийг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"гудамж")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"apartment"},"Байр:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"apartment",className:"form-control "+(b.apartment?"is-invalid":""),onChange:function(t){return e.setState({apartment:t.target.value})},value:h,placeholder:"Байрны дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"байр")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"door_number"},"Хаалганы дугаар:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"door_number",className:"form-control "+(b.door_number?"is-invalid":""),onChange:function(t){return e.setState({door_number:t.target.value})},value:y,placeholder:"Хаалганы дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"тоот")))),r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label",htmlFor:"id_address_state"},"Байнгын оршин суугаа хаяг"),r.a.createElement("input",{onChange:function(t){return e.setState({address_state:t.target.checked})},className:"form-check-input col-4 "+(b.address_state?"is-invalid":""),type:"checkbox",id:"id_address_state",checked:_})))),r.a.createElement(Ft,{feature:p,sendPointCoordinate:this.getPoint,point:v,class:b.point?"border border-danger":""}))),r.a.createElement(k.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:"Амжилттай хадгаллаа",model_type_icon:"success"}))}}])&&Gt(t.prototype,a),o&&Gt(t,o),c}(n.Component);function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t(e);if(t){var r=$t(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt(this,a)}}function Zt(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?Yt(e):t}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(i,e);var t,a,o,l=Ht(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={modal_status_confirm:"closed"},t.handleButtonClick=t.handleButtonClick.bind(Yt(t)),t}return t=i,(a=[{key:"handleButtonClick",value:function(){var e=this;this.setState({modal_status_confirm:"open"},(function(){e.setState({modal_status_confirm:"initial"})}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("span",{onClick:this.handleButtonClick,className:"btn btn-primary waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa-refresh"})," Токен шинэчлэх"),r.a.createElement(ge.a,{text:"Токенийг шинэчилсэнээр уг URL-ээр одоо ашиглаж байгаа газрууд ажиллахгүй болохыг анхаарна уу!",title:"Токен шинэчлэх",model_type_icon:"warning",actionNameDelete:"Шинэчлэх",status:this.state.modal_status_confirm,modalAction:this.props.onClick}),r.a.createElement(k.a,{status:"success"==this.props.status?"open":"closed",title:"Токенийг амжилттай шинэчиллээ!",model_type_icon:"success"}),r.a.createElement(k.a,{status:"fail"==this.props.status?"open":"closed",title:"Токен шинэчлэхэд алдаа гарлаа!",model_type_icon:"danger"}))}}])&&qt(t.prototype,a),o&&qt(t,o),i}(n.Component);function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Qt(e){return r.a.createElement(G.c,Kt({},e,{className:"btn btn-primary waves-effect waves-light m-1"}),r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Засах")}function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aa(e,t){return(aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=la(e);if(t){var r=la(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ra(this,a)}}function ra(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?oa(e):t}function oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aa(e,t)}(i,e);var t,a,o,l=na(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={modal_status_confirm:"closed"},t.handleButtonClick=t.handleButtonClick.bind(oa(t)),t}return t=i,(a=[{key:"handleButtonClick",value:function(){var e=this;this.setState({modal_status_confirm:"open"},(function(){e.setState({modal_status_confirm:"initial"})}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("span",{onClick:this.handleButtonClick,className:"btn btn-danger waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa fa-trash-o"})," Устгах"),r.a.createElement(me.a,{text:'Та "'.concat(this.props.employee_name,'" нэртэй албан хаагчийг устгахдаа итгэлтэй байна уу?'),title:"Албан хаагчийг устгах",model_type_icon:"remove",actionName:"Устгах",status:this.state.modal_status_confirm,modalAction:this.props.onClick}),r.a.createElement(k.a,{status:"success"==this.props.status?"open":"closed",title:"Албан хаагчийг амжилттай устгалаа!",model_type_icon:"success",modalAction:this.props.onSuccess}),r.a.createElement(k.a,{status:"fail"==this.props.status?"open":"closed",title:"Устгахад алдаа гарлаа!",model_type_icon:"danger"}))}}])&&ta(t.prototype,a),o&&ta(t,o),i}(n.Component);function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=fa(e);if(t){var r=fa(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return da(this,a)}}function da(e,t){return!t||"object"!==ca(t)&&"function"!=typeof t?pa(e):t}function pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fa(e){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(l,e);var t,a,n,o=ma(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={employee:{id:"",username:"",first_name:"",last_name:"",email:"",gender:"",register:"",position:"",is_admin:!1,is_super:!1},status_token_refresh:"initial",status_delete:"initial"},t.fetchDetail=t.fetchDetail.bind(pa(t)),t.handleTokenRefresh=t.handleTokenRefresh.bind(pa(t)),t.handleDelete=t.handleDelete.bind(pa(t)),t.handleDeleteSuccess=t.handleDeleteSuccess.bind(pa(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){this.fetchDetail()}},{key:"fetchDetail",value:function(){var e=this,t=this.props.match.params.emp;g.employeeDetail(t).then((function(t){var a=t.success,n=t.employee;a&&e.setState({employee:n})}))}},{key:"handleTokenRefresh",value:function(){var e=this,t=this.props.match.params.emp;this.setState({status_token_refresh:"loading"}),g.empTokenRefresh(t).then((function(t){var a=t.success;a&&e.fetchDetail(),e.setState({status_token_refresh:a?"success":"fail"})}))}},{key:"handleDelete",value:function(){var e=this,t=this.props.match.params.emp;this.setState({status_delete:"loading"}),g.employeeRemove(t).then((function(t){var a=t.success;e.setState({status_delete:a?"success":"fail"})}))}},{key:"handleDeleteSuccess",value:function(){var e=this.props.match.params,t=e.level,a=e.id;this.props.history.push("/back/байгууллага/түвшин/".concat(t,"/").concat(a,"/хэрэглэгч/"))}},{key:"render",value:function(){var e=this.props.match.params,t=e.level,a=e.id,n=e.emp,o=this.state.employee,l=o.username,i=o.last_name,c=o.first_name,s=o.position,u=o.email,m=o.gender,d=o.register,p=o.is_admin,f=o.is_active,h=o.token,y=o.created_at,v=o.updated_at,b=o.phone_number,_=o.level_1,g=o.level_2,E=o.level_3,k=o.street,O=o.apartment,w=o.door_number,N=o.state,S=o.address_state_display,C=o.pro_class,j=this.state,x=j.status_token_refresh,P=j.status_delete;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 p-0 text-right"},r.a.createElement(Xt,{onClick:this.handleTokenRefresh,status:x}),r.a.createElement(Qt,{to:"/back/байгууллага/түвшин/".concat(t,"/").concat(a,"/хэрэглэгч/").concat(n,"/засах/")}),r.a.createElement(ia,{status:P,onClick:this.handleDelete,employee_name:c,onSuccess:this.handleDeleteSuccess}))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Нэвтрэх нэр:"),r.a.createElement("dd",{className:"col-md-9"},l),r.a.createElement("dt",{className:"col-md-3"},"Овог, нэр:"),r.a.createElement("dd",{className:"col-md-9"},i,", ",c),r.a.createElement("dt",{className:"col-md-3"},"Албан тушаал:"),r.a.createElement("dd",{className:"col-md-9"},s),r.a.createElement("dt",{className:"col-md-3"},"Токен:"),r.a.createElement("dd",{className:"col-md-9"},h),r.a.createElement("dt",{className:"col-md-3"},"Мэргэжлийн ангийн бүрэлдэхүүн статус:"),r.a.createElement("dd",{className:"col-md-9"},C)),r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Бүртгэсэн:"),r.a.createElement("dd",{className:"col-md-9"},y),r.a.createElement("dt",{className:"col-md-3"},"Зассан:"),r.a.createElement("dd",{className:"col-md-9"},v))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Мэйл хаяг:"),r.a.createElement("dd",{className:"col-md-9"},u),r.a.createElement("dt",{className:"col-md-3"},"Хүйс:"),r.a.createElement("dd",{className:"col-md-9"},m),r.a.createElement("dt",{className:"col-md-3"},"Регистр:"),r.a.createElement("dd",{className:"col-md-9"},d),r.a.createElement("dt",{className:"col-md-3"},"Утасны дугаар:"),r.a.createElement("dd",{className:"col-md-9"},b),r.a.createElement("dt",{className:"col-md-3"},"Ажилтны төлөв:"),r.a.createElement("dd",{className:"col-md-9"},N)),_&&r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Гэрийн хаяг:"),r.a.createElement("dd",{className:"col-md-9"},_+", "+g+", "+E+", "+k+" гудамж "+O+" байр, "+w+" тоот"),r.a.createElement("dt",{className:"col-md-3"},"Төлөв:"),r.a.createElement("dd",{className:"col-md-9"},S)),p&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-check-circle-o fa-lg","aria-hidden":"true"})," Байгууллагын админ"),!f&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-times-circle text-danger fa-lg","aria-hidden":"true"})," Нэвтрэх эрхгүй"))))}}])&&sa(t.prototype,a),n&&sa(t,n),l}(n.Component);function ya(e){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function va(){return(va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ba(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Oa(e);if(t){var r=Oa(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ea(this,a)}}function Ea(e,t){return!t||"object"!==ya(t)&&"function"!=typeof t?ka(e):t}function ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(i,e);var t,a,n,l=ga(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={positions:[],states:[],pro_classes:[]},t.getSelectValue=t.getSelectValue.bind(ka(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){this.getSelectValue()}},{key:"getSelectValue",value:function(){var e=this;g.getSelectValue().then((function(t){var a=t.success,n=t.positions,r=t.states,o=t.pro_classes;a&&e.setState({positions:n,states:r,pro_classes:o})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/хэрэглэгч/",component:bt}),r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/хэрэглэгч/нэмэх/",component:function(t){return r.a.createElement(It,va({},t,{refreshCount:e.props.refreshCount,positions:e.state.positions,states:e.state.states,pro_classes:e.state.pro_classes}))}}),r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/хэрэглэгч/:emp/дэлгэрэнгүй/",component:ha}),r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/хэрэглэгч/:emp/засах/",component:function(t){return r.a.createElement(It,va({},t,{refreshCount:e.props.refreshCount,positions:e.state.positions,states:e.state.states,pro_classes:e.state.pro_classes}))}}))}}])&&ba(t.prototype,a),n&&ba(t,n),i}(n.Component);a(918);function Na(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Sa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(a),!0).forEach((function(t){Ca(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Na(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ca(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ja={getGovRoles:function(e,t){var a=Sa({},Object(y.a)());return fetch("".concat("/back/api/org","/level-").concat(e,"/").concat(t,"/gov-perm/"),a).then(y.c)},saveGovRoles:function(e,t,a){var n=Sa(Sa({},Object(y.b)()),{},{body:JSON.stringify({values:a})});return fetch("".concat("/back/api/org","/level-").concat(e,"/").concat(t,"/gov-perm/save/"),n).then(y.c)}};function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ta(e);if(t){var r=Ta(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Da(this,a)}}function Da(e,t){return!t||"object"!==xa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(l,e);var t,a,n,o=Fa(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={data:[],tid:0,pid:0,fid:0,properties:[],properties_perms:[]},t}return t=l,(a=[{key:"render",value:function(){var e=this,t=this.props,a=(t.fid,t.properties,t.name),n=t.index,o=t.tree,l=t.inspire,i=t.root_1,c=t.root_2,s=t.root_3,u=t.perm_all,m=t.perm_view,d=t.perm_create,p=t.perm_remove,f=t.perm_update,h=t.perm_approve,y=t.perm_revoke,v=t.mtop,b=t.root_1_index,_=t.root_2_index,g=t.root_3_index;return r.a.createElement("div",{className:("theme"==l?"role-card":"role-table-card")+(v?" mb-0 mt-3":"")},r.a.createElement("div",{className:"theme"==l?"role-card-body":"role-table-card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 arrow-tree collapsed",style:{width:"100px",paddingLeft:o}},"feature"==l?r.a.createElement("a",{className:"collapsed","data-toggle":"collapse","aria-expanded":"true","data-target":"#collapse".concat(n),"aria-controls":"collapse".concat(n),onClick:this.props.handleFeature,scope:"col text-wrap"},a):r.a.createElement("a",{className:"collapsed","data-toggle":"collapse","aria-expanded":"true","data-target":"#collapse".concat(n),"aria-controls":"collapse".concat(n),scope:"col text-wrap"},a)),r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2 pl-0 pr-0"},r.a.createElement("small",{className:"smaller text-center ml-2"},"харах"),r.a.createElement("div",{className:"switch-tree-state col-lg-12",onClick:function(t){return m>=u?"theme"==l?e.props.handleCheckedTheme(!1,1,i,b):"package"==l?e.props.handleCheckedPackage(!1,1,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!1,1,i,b,c,_,s,g):null:"theme"==l?e.props.handleCheckedTheme(!0,1,i,b):"package"==l?e.props.handleCheckedPackage(!0,1,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!0,1,i,b,c,_,s,g):null}},r.a.createElement("div",{className:m>=u?"switch-all switch-one":"switch-all"}),r.a.createElement("div",{className:0<m&&m<u?"switch-all switch-two":"switch-all"}),r.a.createElement("div",{className:m<=0?"switch-all switch-tree":"switch-all"}))),r.a.createElement("div",{className:"col-2 pl-0 pr-0"},r.a.createElement("small",{className:"smaller text-center ml-2"},"нэмэх"),r.a.createElement("div",{className:"switch-tree-state col-lg-12",onClick:function(t){return d>=u?"theme"==l?e.props.handleCheckedTheme(!1,2,i,b):"package"==l?e.props.handleCheckedPackage(!1,2,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!1,2,i,b,c,_,s,g):null:"theme"==l?e.props.handleCheckedTheme(!0,2,i,b):"package"==l?e.props.handleCheckedPackage(!0,2,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!0,2,i,b,c,_,s,g):null}},r.a.createElement("div",{className:d==u?"switch-all switch-one":"switch-all"}),r.a.createElement("div",{className:0<d&&d<u?"switch-all switch-two":"switch-all"}),r.a.createElement("div",{className:0==d?"switch-all switch-tree":"switch-all"}))),r.a.createElement("div",{className:"col-2 pl-0 pr-0",onClick:function(t){return p>=u?"theme"==l?e.props.handleCheckedTheme(!1,3,i,b):"package"==l?e.props.handleCheckedPackage(!1,3,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!1,3,i,b,c,_,s,g):null:"theme"==l?e.props.handleCheckedTheme(!0,3,i,b):"package"==l?e.props.handleCheckedPackage(!0,3,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!0,3,i,b,c,_,s,g):null}},r.a.createElement("small",{className:"smaller text-center ml-2"},"хасах"),r.a.createElement("div",{className:"switch-tree-state col-lg-12"},r.a.createElement("div",{className:p==u?"switch-all switch-one":"switch-all"}),r.a.createElement("div",{className:0<p&&p<u?"switch-all switch-two":"switch-all"}),r.a.createElement("div",{className:0==p?"switch-all switch-tree":"switch-all"}))),r.a.createElement("div",{className:"col-2 pl-0 pr-0",onClick:function(t){return f>=u?"theme"==l?e.props.handleCheckedTheme(!1,4,i,b):"package"==l?e.props.handleCheckedPackage(!1,4,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!1,4,i,b,c,_,s,g):null:"theme"==l?e.props.handleCheckedTheme(!0,4,i,b):"package"==l?e.props.handleCheckedPackage(!0,4,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!0,4,i,b,c,_,s,g):null}},r.a.createElement("small",{className:"smaller text-center ml-2"},"засах"),r.a.createElement("div",{className:"switch-tree-state col-lg-12"},r.a.createElement("div",{className:f==u?"switch-all switch-one":"switch-all"}),r.a.createElement("div",{className:0<f&&f<u?"switch-all switch-two":"switch-all"}),r.a.createElement("div",{className:0==f?"switch-all switch-tree":"switch-all"}))),r.a.createElement("div",{className:"col-2 pl-0 pr-0",onClick:function(t){return y>=u?"theme"==l?e.props.handleCheckedTheme(!1,6,i,b):"package"==l?e.props.handleCheckedPackage(!1,6,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!1,6,i,b,c,_,s,g):null:"theme"==l?e.props.handleCheckedTheme(!0,6,i,b):"package"==l?e.props.handleCheckedPackage(!0,6,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!0,6,i,b,c,_,s,g):null}},r.a.createElement("small",{className:"smaller text-center ml-2"},"цуцлах"),r.a.createElement("div",{className:"switch-tree-state col-lg-12"},r.a.createElement("div",{className:y==u?"switch-all switch-one":"switch-all"}),r.a.createElement("div",{className:0<y&&y<u?"switch-all switch-two":"switch-all"}),r.a.createElement("div",{className:0==y?"switch-all switch-tree":"switch-all"}))),r.a.createElement("div",{className:"col-2 pl-0 pr-0",onClick:function(t){return h>=u?"theme"==l?e.props.handleCheckedTheme(!1,5,i,b):"package"==l?e.props.handleCheckedPackage(!1,5,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!1,5,i,b,c,_,s,g):null:"theme"==l?e.props.handleCheckedTheme(!0,5,i,b):"package"==l?e.props.handleCheckedPackage(!0,5,i,b,c,_):"feature"==l?e.props.handleCheckedFeature(!0,5,i,b,c,_,s,g):null}},r.a.createElement("small",{className:"smaller text-center ml-2"},"батлах"),r.a.createElement("div",{className:"switch-tree-state col-lg-12"},r.a.createElement("div",{className:h==u?"switch-all switch-one":"switch-all"}),r.a.createElement("div",{className:0<h&&h<u?"switch-all switch-two":"switch-all"}),r.a.createElement("div",{className:0==h?"switch-all switch-tree":"switch-all"}))))))))}}])&&Pa(t.prototype,a),n&&Pa(t,n),l}(n.Component);function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ga(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function La(e,t){return(La=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ua(e);if(t){var r=Ua(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return za(this,a)}}function za(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?Ja(e):t}function Ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&La(e,t)}(l,e);var t,a,n,o=Va(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={data:[],tid:0,tid_index:0,pid:0,pid_index:0,fid:0,fid_index:0,properties:[],properties_perms:[],handle_save_is_laod:!1,modal_alert_status:"closed",role_is_load:!1},t.handleRoles=t.handleRoles.bind(Ja(t)),t.handleFeature=t.handleFeature.bind(Ja(t)),t.handleSubmit=t.handleSubmit.bind(Ja(t)),t.handleChecked=t.handleChecked.bind(Ja(t)),t.handleCheckedTheme=t.handleCheckedTheme.bind(Ja(t)),t.handleCheckedPackage=t.handleCheckedPackage.bind(Ja(t)),t.handleCheckedFeature=t.handleCheckedFeature.bind(Ja(t)),t.handleCheckedPerm=t.handleCheckedPerm.bind(Ja(t)),t.handleStateAll=t.handleStateAll.bind(Ja(t)),t.handleStateSole=t.handleStateSole.bind(Ja(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){this.handleRoles()}},{key:"handleRoles",value:function(){var e=this,t=this.props.match.params,a=t.level,n=t.id;this.setState({role_is_load:!0}),ja.getGovRoles(a,n).then((function(t){var a=t.success,n=t.data,r=t.roles;a&&e.setState({data:n,properties_perms:r,role_is_load:!1})}))}},{key:"handleFeature",value:function(e,t,a,n,r,o,l){this.setState({tid:e,tid_index:t,pid:a,pid_index:n,fid:r,fid_index:o,properties:l})}},{key:"getPermName",value:function(e){return 1==e?"perm_view":2==e?"perm_create":3==e?"perm_remove":4==e?"perm_update":5==e?"perm_approve":6==e?"perm_revoke":void 0}},{key:"handleStateAll",value:function(e,t,a,n,r,o,l,i){var c=this.getPermName(i);return t?(e[a][n][r][o][l][c]>0&&e[a][n][r][o][l][c]<e[a][n][r][o][l].perm_all&&(e[a][n][r][c]=e[a][n][r][c]+.5,e[a][n][r][c]==e[a][n][r].perm_all&&(e[a][c]=e[a][c]+.5),e[a][n][r][c]-.5==0&&(e[a][c]=e[a][c]+.5)),0==e[a][n][r][o][l][c]&&(e[a][n][r][c]=e[a][n][r][c]+1,e[a][n][r][c]==e[a][n][r].perm_all&&(e[a][c]=e[a][c]+.5),e[a][n][r][c]-1==0&&(e[a][c]=e[a][c]+.5)),e[a][n][r][o][l][c]=e[a][n][r][o][l].perm_all):(e[a][n][r][o][l][c]>0&&e[a][n][r][o][l][c]<e[a][n][r][o][l].perm_all&&(e[a][n][r][c]=e[a][n][r][c]-.5,0==e[a][n][r][c]&&(e[a][c]=e[a][c]-.5),e[a][n][r][c]+.5==e[a][n][r].perm_all&&(e[a][c]=e[a][c]-.5)),e[a][n][r][o][l][c]==e[a][n][r][o][l].perm_all&&(e[a][n][r][c]=e[a][n][r][c]-1,0==e[a][n][r][c]&&(e[a][c]=e[a][c]-.5),e[a][n][r][c]+1==e[a][n][r].perm_all&&(e[a][c]=e[a][c]-.5)),e[a][n][r][o][l][c]=0),e}},{key:"handleStateSole",value:function(e,t,a,n,r,o,l,i){var c=this.getPermName(i);return t?(e[a][n][r][o][l][c]=e[a][n][r][o][l][c]+1,e[a][n][r][o][l][c]==e[a][n][r][o][l].perm_all&&(e[a][n][r][c]=e[a][n][r][c]+.5,e[a][n][r][c]==e[a][n][r].perm_all&&(e[a][c]=e[a][c]+.5),e[a][n][r][c]-.5==0&&(e[a][c]=e[a][c]+.5)),e[a][n][r][o][l][c]-1==0&&(e[a][n][r][c]=e[a][n][r][c]+.5,e[a][n][r][c]==e[a][n][r].perm_all&&(e[a][c]=e[a][c]+.5),e[a][n][r][c]-.5==0&&(e[a][c]=e[a][c]+.5))):(e[a][n][r][o][l][c]=e[a][n][r][o][l][c]-1,0==e[a][n][r][o][l][c]&&(e[a][n][r][c]=e[a][n][r][c]-.5,0==e[a][n][r][c]&&(e[a][c]=e[a][c]-.5),e[a][n][r][c]+.5==e[a][n][r].perm_all&&(e[a][c]=e[a][c]-.5)),e[a][n][r][o][l][c]+1==e[a][n][r][o][l].perm_all&&(e[a][n][r][c]=e[a][n][r][c]-.5,0==e[a][n][r][c]&&(e[a][c]=e[a][c]-.5),e[a][n][r][c]+.5==e[a][n][r].perm_all&&(e[a][c]=e[a][c]-.5))),e}},{key:"handleCheckedTheme",value:function(e,t,a,n){var r=this,o=this.state.data[n].packages;o.map((function(o,l){r.handleCheckedPackage(e,t,a,n,o.id,l)}))}},{key:"handleCheckedPackage",value:function(e,t,a,n,r,o){var l=this,i=this.state.data[n].packages[o].features;i.map((function(i,c){l.handleCheckedFeature(e,t,a,n,r,o,i.id,c)}))}},{key:"handleCheckedFeature",value:function(e,t,a,n,r,o,l,i){var c=this,s=this.state.data,u=s,m=s[n].packages[o].features[i].data_types;e?(m.map((function(e){e.properties.map((function(a){c.handleCheckedPerm({perm_kind:t,feature_id:l,data_type_id:e.id,property_id:a.id,geom:!1,disable:!1},!0)}))})),this.handleCheckedPerm({perm_kind:t,feature_id:l,data_type_id:null,property_id:null,geom:!0,disable:!1},!0)):(m.map((function(e){e.properties.map((function(a){c.handleCheckedPerm({perm_kind:t,feature_id:l,data_type_id:e.id,property_id:a.id,geom:!1,disable:!1},!1)}))})),this.handleCheckedPerm({perm_kind:t,feature_id:l,data_type_id:null,property_id:null,geom:!0,disable:!1},!1)),u=this.handleStateAll(u,e,n,"packages",o,"features",i,t),this.setState({data:u})}},{key:"handleCheckedPerm",value:function(e,t){var a=this.state.properties_perms;if(t)0==a.filter((function(t){return t.perm_kind==e.perm_kind&&t.feature_id==e.feature_id&&t.data_type_id==e.data_type_id&&t.property_id==e.property_id&&t.geom==e.geom})).length&&a.push(e),this.setState({properties_perms:a});else{for(var n=0;n<a.length;n++)a[n].perm_kind==e.perm_kind&&a[n].feature_id==e.feature_id&&a[n].data_type_id==e.data_type_id&&a[n].property_id==e.property_id&&a[n].geom==e.geom&&0==a[n].disable&&a.splice(n,1);this.setState({properties_perms:a})}}},{key:"handleChecked",value:function(e,t,a){var n=this.state,r=n.tid_index,o=n.pid_index,l=n.fid_index,i=n.data,c=this.state.properties_perms;if(t)0==c.filter((function(t){return t.perm_kind==e.perm_kind&&t.feature_id==e.feature_id&&t.data_type_id==e.data_type_id&&t.property_id==e.property_id&&t.geom==e.geom})).length&&c.push(e),this.setState({properties_perms:c});else{for(var s=0;s<c.length;s++)c[s].perm_kind==e.perm_kind&&c[s].feature_id==e.feature_id&&c[s].data_type_id==e.data_type_id&&c[s].property_id==e.property_id&&c[s].geom==e.geom&&0==c[s].disable&&c.splice(s,1);this.setState({properties_perms:c})}i=this.handleStateSole(i,t,r,"packages",o,"features",l,a),this.setState({data:i})}},{key:"handleSubmit",value:function(){var e=this;this.setState({handle_save_is_laod:!0});var t=this.props.match.params,a=t.level,n=t.id,r=this.state.properties_perms;ja.saveGovRoles(a,n,r).then((function(t){t.success&&(e.handleRoles(),setTimeout((function(){e.setState({modal_alert_status:"open"}),e.setState({handle_save_is_laod:!1})}),1e3))}))}},{key:"modalClose",value:function(){this.setState({modal_alert_status:"closed"}),this.setState({handleSaveIsLoad:!1}),this.handleRoles()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=(t.tid,t.pid,t.fid),o=t.properties,l=t.properties_perms,c=t.role_is_load,s=t.handle_save_is_laod;return r.a.createElement("div",{className:"row"},r.a.createElement(i.a,{is_loading:c}),r.a.createElement("div",{className:"col-md-6"},s?r.a.createElement("a",{className:"btn gp-btn-primary btn-block waves-effect waves-light text-white",style:{zIndex:"0"}},r.a.createElement("div",{className:"spinner-border text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("a",{className:"text-light"}," Шалгаж байна.")):r.a.createElement("a",{className:"btn gp-btn-primary btn-block waves-effect waves-light text-white",style:{zIndex:"0"},onClick:this.handleSubmit},"Хадгалах"),r.a.createElement("div",{className:"fixed-height-b"},a.map((function(t,a){return t.packages.length>0&&t.perm_all>0&&r.a.createElement("div",{className:"bc-white border border-secondary",key:a},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"my-0"},r.a.createElement("div",{id:"accordion".concat(a+1),className:"",key:a},r.a.createElement("div",{className:""},r.a.createElement("div",{className:""},r.a.createElement("div",{className:""},r.a.createElement(Ma,{name:t.name,index:a+1,tree:10,mtop:!1,root_1:t.id,root_1_index:a,inspire:"theme",perm_all:t.perm_all,perm_view:t.perm_view,perm_create:t.perm_create,perm_remove:t.perm_remove,perm_update:t.perm_update,perm_approve:t.perm_approve,perm_revoke:t.perm_revoke,handleCheckedTheme:e.handleCheckedTheme,handleCheckedPackage:e.handleCheckedPackage,handleCheckedFeature:e.handleCheckedFeature}))),r.a.createElement("div",{id:"collapse".concat(a+1),className:"collapse","data-parent":"#accordion".concat(a+1)},r.a.createElement("div",{className:""},t.packages.map((function(n,o){return n.features.length>0&&r.a.createElement("div",{id:"accordion-p-".concat(o+1+n.id),key:o},r.a.createElement("div",{className:""},r.a.createElement("div",{className:""},r.a.createElement("div",{className:""},r.a.createElement(Ma,{root_1:t.id,root_1_index:a,mtop:!0,root_2:n.id,root_2_index:o,name:n.name,index:"-p-".concat(o+1+n.id),tree:10,inspire:"package",perm_all:n.perm_all,perm_view:n.perm_view,perm_create:n.perm_create,perm_remove:n.perm_remove,perm_update:n.perm_update,perm_approve:n.perm_approve,perm_revoke:n.perm_revoke,handleCheckedTheme:e.handleCheckedTheme,handleCheckedPackage:e.handleCheckedPackage,handleCheckedFeature:e.handleCheckedFeature}))),r.a.createElement("div",{id:"collapse-p-".concat(o+1+n.id),className:"collapse","data-parent":"#accordion-p-".concat(o+1+n.id)},r.a.createElement("div",{className:""},n.features.map((function(l,i){return r.a.createElement("div",{key:i},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"collapsed"},r.a.createElement("div",{className:"text-primary collapsed"},r.a.createElement(Ma,{handleFeature:function(){return e.handleFeature(t.id,a,n.id,o,l.id,i,l.data_types)},root_1:t.id,root_1_index:a,root_2:n.id,root_2_index:o,root_3:l.id,root_3_index:i,name:l.name,tree:60,mtop:!1,inspire:"feature",perm_all:l.perm_all,perm_view:l.perm_view,perm_create:l.perm_create,perm_remove:l.perm_remove,perm_update:l.perm_update,perm_approve:l.perm_approve,perm_revoke:l.perm_revoke,handleCheckedTheme:e.handleCheckedTheme,handleCheckedPackage:e.handleCheckedPackage,handleCheckedFeature:e.handleCheckedFeature})))))}))))))})))))))))})))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:""},o.length>0&&r.a.createElement("div",null,r.a.createElement("div",{className:" bc-white"},r.a.createElement("div",{className:"table-responsive table_wrapper-80"},r.a.createElement("table",{className:"table table_wrapper_table_saaral table-bordered"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Data",r.a.createElement("br",null),"type"),r.a.createElement("th",{scope:"col"},"property нэр"),r.a.createElement("th",{scope:"col",className:"vertical"},r.a.createElement("span",null,"харах")),r.a.createElement("th",{scope:"col",className:"vertical"},r.a.createElement("span",null,"нэмэх")),r.a.createElement("th",{scope:"col",className:"vertical"},r.a.createElement("span",null,"хасах")),r.a.createElement("th",{scope:"col",className:"vertical"},r.a.createElement("span",null,"засах")),r.a.createElement("th",{scope:"col",className:"vertical"},r.a.createElement("span",null,"цуцлах")),r.a.createElement("th",{scope:"col",className:"vertical"},r.a.createElement("span",null,"батлах")))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,"Geom"),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 1==e.perm_kind&&e.feature_id==n&&null==e.data_type_id&&1==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_view",name:"perm_view",checked:l.filter((function(e){return 1==e.perm_kind&&e.feature_id==n&&1==e.geom})).length>0,onChange:function(t){return e.handleChecked({perm_kind:1,feature_id:n,data_type_id:null,property_id:null,geom:!0,disable:!1},t.target.checked,1)}}),r.a.createElement("label",{htmlFor:"perm_view"})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 2==e.perm_kind&&e.feature_id==n&&null==e.data_type_id&&1==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_create",name:"perm_create",checked:l.filter((function(e){return 2==e.perm_kind&&e.feature_id==n&&1==e.geom})).length>0,onChange:function(t){return e.handleChecked({perm_kind:2,feature_id:n,data_type_id:null,property_id:null,geom:!0,disable:!1},t.target.checked,2)}}),r.a.createElement("label",{htmlFor:"perm_create"})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 3==e.perm_kind&&e.feature_id==n&&null==e.data_type_id&&1==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_remove",name:"perm_remove",checked:l.filter((function(e){return 3==e.perm_kind&&e.feature_id==n&&1==e.geom})).length>0,onChange:function(t){return e.handleChecked({perm_kind:3,feature_id:n,data_type_id:null,property_id:null,geom:!0,disable:!1},t.target.checked,3)}}),r.a.createElement("label",{htmlFor:"perm_remove"})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 4==e.perm_kind&&e.feature_id==n&&null==e.data_type_id&&1==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_revoke",name:"perm_revoke",checked:l.filter((function(e){return 4==e.perm_kind&&e.feature_id==n&&1==e.geom})).length>0,onChange:function(t){return e.handleChecked({perm_kind:4,feature_id:n,data_type_id:null,property_id:null,geom:!0,disable:!1},t.target.checked,4)}}),r.a.createElement("label",{htmlFor:"perm_revoke"})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 6==e.perm_kind&&e.feature_id==n&&null==e.data_type_id&&1==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_review",name:"perm_review",checked:l.filter((function(e){return 6==e.perm_kind&&e.feature_id==n&&1==e.geom})).length>0,onChange:function(t){return e.handleChecked({perm_kind:6,feature_id:n,data_type_id:null,property_id:null,geom:!0,disable:!1},t.target.checked,6)}}),r.a.createElement("label",{htmlFor:"perm_review"})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 5==e.perm_kind&&e.feature_id==n&&null==e.data_type_id&&1==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_approve",name:"perm_approve",checked:l.filter((function(e){return 5==e.perm_kind&&e.feature_id==n&&1==e.geom})).length>0,onChange:function(t){return e.handleChecked({perm_kind:5,feature_id:n,data_type_id:null,property_id:null,geom:!0,disable:!1},t.target.checked,5)}}),r.a.createElement("label",{htmlFor:"perm_approve"}))),o.map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{rowSpan:t.properties.length+1,className:"vertical text-center align-middle text-wrap"},r.a.createElement("span",{className:"text-center vertical align-middle"},t.name),r.a.createElement("br",null),r.a.createElement("span",{className:"text-center vertical align-middle"},"(",t.code,")"))),t.properties.map((function(o,i){return r.a.createElement("tr",{key:i},r.a.createElement("td",null,o.name),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 1==e.perm_kind&&e.feature_id==n&&e.data_type_id==t.id&&e.property_id==o.id&&0==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_view"+o.id+a+i,name:"perm_view",checked:l.filter((function(e){return 1==e.perm_kind&&e.feature_id==n&&e.property_id==o.id&&0==e.geom})).length>0,onChange:function(a){return e.handleChecked({perm_kind:1,feature_id:n,data_type_id:t.id,property_id:o.id,geom:!1,disable:!1},a.target.checked,1)}}),r.a.createElement("label",{htmlFor:"perm_view"+o.id+a+i})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 2==e.perm_kind&&e.feature_id==n&&e.data_type_id==t.id&&e.property_id==o.id&&0==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_create"+o.id+a+i,name:"perm_create",checked:l.filter((function(e){return 2==e.perm_kind&&e.feature_id==n&&e.property_id==o.id&&0==e.geom})).length>0,onChange:function(a){return e.handleChecked({perm_kind:2,feature_id:n,data_type_id:t.id,property_id:o.id,geom:!1,disable:!1},a.target.checked,2)}}),r.a.createElement("label",{htmlFor:"perm_create"+o.id+a+i})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 3==e.perm_kind&&e.feature_id==n&&e.data_type_id==t.id&&e.property_id==o.id&&0==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_remove"+o.id+a+i,name:"perm_remove",checked:l.filter((function(e){return 3==e.perm_kind&&e.feature_id==n&&e.property_id==o.id&&0==e.geom})).length>0,onChange:function(a){return e.handleChecked({perm_kind:3,feature_id:n,data_type_id:t.id,property_id:o.id,geom:!1,disable:!1},a.target.checked,3)}}),r.a.createElement("label",{htmlFor:"perm_remove"+o.id+a+i})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 4==e.perm_kind&&e.feature_id==n&&e.data_type_id==t.id&&e.property_id==o.id&&0==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_revoke"+o.id+a+i,name:"perm_revoke",checked:l.filter((function(e){return 4==e.perm_kind&&e.feature_id==n&&e.property_id==o.id&&0==e.geom})).length>0,onChange:function(a){return e.handleChecked({perm_kind:4,feature_id:n,data_type_id:t.id,property_id:o.id,geom:!1,disable:!1},a.target.checked,4)}}),r.a.createElement("label",{htmlFor:"perm_revoke"+o.id+a+i})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 6==e.perm_kind&&e.feature_id==n&&e.data_type_id==t.id&&e.property_id==o.id&&0==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_review"+o.id+a+i,name:"perm_review",checked:l.filter((function(e){return 6==e.perm_kind&&e.feature_id==n&&e.property_id==o.id&&0==e.geom})).length>0,onChange:function(a){return e.handleChecked({perm_kind:6,feature_id:n,data_type_id:t.id,property_id:o.id,geom:!1,disable:!1},a.target.checked,6)}}),r.a.createElement("label",{htmlFor:"perm_review"+o.id+a+i})),r.a.createElement("td",{className:"icheck-primary"},r.a.createElement("input",{disabled:l.filter((function(e){return 5==e.perm_kind&&e.feature_id==n&&e.data_type_id==t.id&&e.property_id==o.id&&0==e.geom&&1==e.disable})).length>0,type:"checkbox",id:"perm_approve"+o.id+a+i,name:"perm_approve",checked:l.filter((function(e){return 5==e.perm_kind&&e.feature_id==n&&e.property_id==o.id&&0==e.geom})).length>0,onChange:function(a){return e.handleChecked({perm_kind:5,feature_id:n,data_type_id:t.id,property_id:o.id,geom:!1,disable:!1},a.target.checked,5)}}),r.a.createElement("label",{htmlFor:"perm_approve"+o.id+a+i})))})))}))))))))),r.a.createElement("a",{className:"geo-back-btn",id:"geo-back-btn",onClick:this.props.history.goBack},r.a.createElement("i",{"aria-hidden":"true"})),r.a.createElement(k.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:"Амжилттай хадгаллаа",model_type_icon:"success"}))}}])&&Ga(t.prototype,a),n&&Ga(t,n),l}(n.Component);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ya(e);if(t){var r=Ya(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Za(this,a)}}function Za(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ya(e){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(i,e);var t,a,n,l=Ha(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l.call(this,e)}return t=i,(a=[{key:"render",value:function(){return r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/эрх/",component:Ia}))}}])&&qa(t.prototype,a),n&&qa(t,n),i}(n.Component),Xa=a(331),Ka=a(888),Qa=a(84),en=a(527),tn=a(528),an=a(333),nn=a(7),rn=a.n(nn),on=a(77);function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function un(e,t,a){return t&&sn(e.prototype,t),a&&sn(e,a),e}function mn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=yn(e);if(t){var r=yn(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return fn(this,a)}}function fn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?hn(e):t}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vn=function(e){mn(a,e);var t=pn(a);function a(e){var n;return cn(this,a),(n=t.call(this,e)).input_data={},n.state={input_value:""},n}return un(a,[{key:"componentDidUpdate",value:function(e,t){e.value!==this.props.value&&this.setState({input_value:this.props.value})}},{key:"handleOnChange",value:function(e){var t=this.props,a=t.idx,n=(t.ix,t.field,t.length,t.origin_name);this.setState({input_value:e}),this.props.getValues(e,a,n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.idx,n=(t.ix,t.field),o=t.length,l=t.choices,i=t.value,c=t.disabled,s=t.type,u=t.is_detail,m=this.state.input_value;return r.a.createElement("div",{className:"form-group animated slideInLeft"},r.a.createElement("dt",null,n),u?r.a.createElement("dd",null,i):"date"==s&&null==l?r.a.createElement("input",{type:s,maxLength:o,className:"form-control",disabled:c,value:m,onChange:function(t){return e.handleOnChange(t.target.value)}}):o>1900&&null==l?r.a.createElement("textarea",{className:"form-control",rows:"3",onChange:function(t){return e.handleOnChange(t.target.value)},maxLength:o,disabled:c,placeholder:i,value:m}):o<1900&&null==l?r.a.createElement("input",{type:"text",maxLength:o,className:"form-control",disabled:c,value:m,onChange:function(t){return e.handleOnChange(t.target.value)},placeholder:n+" оруулна уу"}):null!==l?r.a.createElement("select",{className:"form-control",disabled:c,onChange:function(t){return e.handleOnChange(t.target.value)},value:m},r.a.createElement("option",{key:a,value:""},"--- Сонгоно уу ---"),l.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))):null)}}]),a}(n.Component),bn=function(e){mn(a,e);var t=pn(a);function a(e){var n;return cn(this,a),(n=t.call(this,e)).state={values:{}},n.getValues=n.getValues.bind(hn(n)),n}return un(a,[{key:"getValues",value:function(e,t,a){var n=this.state.values;n[a]=e,this.setState({values:n})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.fields,n=t.is_detail,o=t.title,l=t.button_name,i=this.state.values;return r.a.createElement("div",null,r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-10"},r.a.createElement("h6",null,o)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{type:"button",className:"close"},r.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.props.handleClose()}},"×")))),r.a.createElement("div",{className:"overflow-auto",style:{maxHeight:"calc( 50vh - 70px - 15px)"}},a.map((function(t,a){return r.a.createElement(vn,{key:a,is_detail:n,field:t.name,length:t.length,disabled:t.disabled,idx:a,origin_name:t.origin_name,getValues:e.getValues,value:t.value,choices:t.choices,type:t.type})}))),n?r.a.createElement("div",{className:"pb-2"}):r.a.createElement("div",{className:"pb-2"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return e.props.saveErguulPlace(i)}},l)))}}]),a}(n.Component),_n=function(e){mn(a,e);var t=pn(a);function a(e){var n;cn(this,a);var r=e||{};(n=t.call(this,{element:document.createElement("div"),target:r.target})).is_component_initialized=!1;return n.element.className="col-md-3 card",n.element.style.display="none",n.element.style.height="auto",n.renderComponent=n.renderComponent.bind(hn(n)),n.toggleControl=n.toggleControl.bind(hn(n)),n}return un(a,[{key:"toggleControl",value:function(e){this.element.style.display=e?"block":"none"}},{key:"renderComponent",value:function(e){var t=this;e.handleClose=function(){t.toggleControl(!1)},this.is_component_initialized||(rn.a.render(r.a.createElement(bn,e),this.element),this.is_component_initialized=!0),rn.a.hydrate(r.a.createElement(bn,e),this.element)}},{key:"showForm",value:function(e,t,a,n,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.toggleControl(e),this.renderComponent({fields:t,title:a,is_detail:o,saveErguulPlace:n,button_name:r})}}]),a}(on.a);function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Sn(e);if(t){var r=Sn(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return wn(this,a)}}function wn(e,t){return!t||"object"!==gn(t)&&"function"!=typeof t?Nn(e):t}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(l,e);var t,a,n,o=On(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={projection_data:"EPSG:4326",projection_display:"EPSG:3857"},t.controls={form:new _n},t.loadMap=t.loadMap.bind(Nn(t)),t.readFeatures=t.readFeatures.bind(Nn(t)),t.readFeature=t.readFeature.bind(Nn(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(Nn(t)),t.translateStart=t.translateStart.bind(Nn(t)),t.translateEnd=t.translateEnd.bind(Nn(t)),t.selectedFeature=t.selectedFeature.bind(Nn(t)),t.getEmpInfo=t.getEmpInfo.bind(Nn(t)),t.changedFeatureSetColor=t.changedFeatureSetColor.bind(Nn(t)),t.makeLineString=t.makeLineString.bind(Nn(t)),t.sendErguuleg=t.sendErguuleg.bind(Nn(t)),t.downloadImage=t.downloadImage.bind(Nn(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){e.features!==this.props.features&&this.readFeatures(this.props.features),e.feature!==this.props.feature&&this.props.feature!=={}&&this.readFeature(this.props.feature)}},{key:"loadMap",value:function(){var e=this,t=new H.a({source:new z.a({}),style:new B.c({stroke:new q.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new W.a({color:"rgba(100, 255, 0, 0.3)"})})});this.vector_layer=t;var a=new en.a;a.on("select",(function(t){return e.selectedFeature(t)})),this.select=a;var n=new tn.a({features:a.getFeatures()});n.on("translatestart",(function(t){return e.translateStart(t)})),n.on("translateend",(function(t){return e.translateEnd(t)})),this.translate=n;var r=new L.a({interactions:Object(an.a)().extend([a,n]),layers:[new V.a({source:new J.a}),t],target:"map",view:new U.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971}),controls:[]});r.addControl(this.controls.form),this.map=r}},{key:"makeFields",value:function(e,t){var a=Array();return Object.keys(e).map((function(n,r){t.map((function(t,r){if(n==t.origin_name){var o=Object();o.name=t.name,o.origin_name=n,o.value=e[n]?e[n]:"",o.disabled=t.disabled,o.choices=null,o.length=t.length,"level_1"==n&&(o.value=e.level_1+", "+e.level_2+", "+e.level_3+", "+e.street+" гудамж "+e.apartment+" байр, "+e.door_number+" тоот"),t.is_erguul&&"level_3"==n&&(o.value=e.level_3+", "+e.street+" гудамж "+e.apartment+" байр"),a.push(o)}}))})),a}},{key:"getEmpInfo",value:function(e,t){var a=this;t||(t=!1),g.getEmpInfo(e,t).then((function(e){var n=e.success,r=e.info,o=e.title;if(n){var l=[{origin_name:"org_name",name:"Байгууллагын нэр",disabled:!0,length:100},{origin_name:"phone_number",name:"Утасны дугаар",disabled:!0,length:100},{origin_name:"level_1",name:"Гэрийн хаяг",disabled:!0,length:2e3},{origin_name:"last_name",name:"Овог",disabled:!0,length:100},{origin_name:"first_name",name:"Нэр",disabled:!0,length:100},{origin_name:"date_start",name:"Эхлэх огноо",disabled:!0,length:100},{origin_name:"date_end",name:"Дуусах огноо",disabled:!0,length:100},{origin_name:"part_time",name:"Ээлж",disabled:!0,length:100},{origin_name:"level_3",name:"Эргүүлийн хаяг",disabled:!0,length:100,is_erguul:t}],i=a.makeFields(r,l);a.controls.form.showForm(!0,i,o,void 0,"",!0)}}))}},{key:"featureWithTextStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red",a=new B.c({image:new Xa.a({radius:5,fill:new W.a({color:t})}),text:new Ka.a({text:e,font:"30px Calibri,sans-serif",stroke:new q.a({color:"white",width:3}),offsetY:-18})});return a}},{key:"changedFeatureSetColor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"green",a=this.vector_layer.getSource();a.getFeatures().map((function(a,n){if(a.getProperties().is_changed){var r=e.getFullName(a),o=e.featureWithTextStyle(r,t);a.setStyle(o)}}))}},{key:"getFullName",value:function(e){var t=e.getProperties().first_name;return e.getProperties().last_name.charAt(0).toUpperCase()+". "+(t.charAt(0).toUpperCase()+t.slice(1))}},{key:"selectedFeature",value:function(e){this.translate.setActive(!0);var t=e.selected[0];if(t)if("Point"==t.getGeometry().getType()){var a=t.getProperties(),n=a.id;this.id=n,a.is_cloned&&this.translate.setActive(!1),this.getEmpInfo(n,a.is_erguul)}else this.select.getFeatures().clear();else this.changedFeatureSetColor()}},{key:"translateStart",value:function(e){var t=0,a=this.vector_layer.getSource(),n=e.features.getArray()[0];if(n.getGeometry().getType().includes("Point")){var r=n.getProperties().id,o=a.getFeatures();if(null!=o&&o.length>0)for(var l=0;l<o.length;l++)if(o[l].getProperties().id==r&&t<2)t++;else if(2==t)break;if(t<2){var i=n.clone(),c=this.getFullName(i),s=this.featureWithTextStyle(c);i.setStyle(s),i.setProperties({is_cloned:!0}),a.addFeature(i)}n.setProperties({is_changed:!0})}}},{key:"translateEnd",value:function(e){var t=this,a=e.features.getArray()[0],n=a.getGeometry().getCoordinates(),r=a.getProperties().id;this.removeFeatureFromSource(r);var o=this.map.getView().getProjection(),l=Object(Et.p)(n,o,this.state.projection_data),i=Object(Ot.f)(l,"{y},{x}",6);this.changedFeatureSetColor(),g.getErguulegFields(r).then((function(e){var n=e.success,r=e.info,o=e.erguul_id;t.makeLineString([a],"one");var l="Хадгалах";o&&(l="Засах"),t.controls.form.showForm(n,r,"Эргүүлд гарах байршил",(function(e){return t.sendErguuleg(e,t.id,i,o)}),l)}))}},{key:"fromLonLatToMapCoord",value:function(e){return Object(Et.d)([e[0],e[1]])}},{key:"makeLineString",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.vector_layer.getSource(),r=n.getFeatures();if(null!=r&&r.length>0&&e.length>0)for(var o=function(){var o=r[l],i=o.getProperties(),c=i.id,s=void 0;s="one"==a?i.is_cloned:i.is_erguul,c&&s&&e.map((function(e,r){var l,i;i="one"==a?(l=e.getProperties()).is_changed:(l=e.properties).is_cloned;var s=l.id;if(s==c&&i){var u;"one"==a?u=e.getGeometry().getCoordinates():(u=e.geometry.coordinates,u=t.fromLonLatToMapCoord(u));var m=o.getGeometry().getCoordinates(),d=new Qa.a([u,m]),p=new gt.a(d);p.setProperties({id:s});var f=p.getGeometry().getExtent();t.extent=f,n.addFeature(p)}}))},l=0;l<r.length;l++)o()}},{key:"downloadImage",value:function(e,t,a,n){var r,o=this,l=this.map;this.props.setLoading(!0),l.once("rendercomplete",(function(){var i=document.createElement("canvas"),c=l.getSize();i.width=c[0],i.height=c[1];var s=i.getContext("2d");Array.prototype.forEach.call(document.querySelectorAll(".ol-layer canvas"),(function(e){if(e.width>0){var t=e.parentNode.style.opacity;s.globalAlpha=""===t?1:Number(t);var a=e.style.transform.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number);CanvasRenderingContext2D.prototype.setTransform.apply(s,a),s.drawImage(e,0,0)}})),navigator.msSaveBlob?navigator.msSaveBlob(i.msToBlob(),"map.png"):r=i.toDataURL(),o.props.saveErguulPlace(e,t,a,r,n)}))}},{key:"sendErguuleg",value:function(e,t,a,n){var r=this.extent;this.map.getView().fit(r,{padding:[200,200,200,200]}),this.downloadImage(e,t,a,n)}},{key:"removeFeatureFromSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.vector_layer.getSource(),n=a.getFeatures();if(null!=n&&n.length>0)for(var r=0;r<n.length;r++){var o=n[r].getProperties(),l=o.id,i=void 0,c=n[r].getGeometry().getType();if(l==e&&("only_aimag"==t&&c.includes("Polygon")?i=n[r]:t||"LineString"!=c||(i=n[r])),i){a.removeFeature(i);break}}}},{key:"readFeature",value:function(e){var t="aimag_sum";this.removeFeatureFromSource(t,"only_aimag");var a=this.vector_layer.getSource(),n=(new I.a).readFeatures(e,{dataProjection:this.state.projection_data,featureProjection:this.state.projection_display})[0];a.addFeature(n),n.setProperties({id:t}),this.map.getView().fit(n.getGeometry(),{padding:[50,50,50,50],duration:2e3})}},{key:"readFeatures",value:function(e){var t=this,a=this.vector_layer.getSource();e.features.map((function(e,n){if(e!=={}){var r=(new I.a).readFeatures(e,{dataProjection:t.state.projection_data,featureProjection:t.state.projection_display})[0],o=r.getProperties(),l=t.getFullName(r),i=t.featureWithTextStyle(l);o.is_erguul&&(i=t.featureWithTextStyle(l,"green")),r.setStyle(i),a.addFeature(r)}})),this.makeLineString(e.features)}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",style:{height:"calc( 90vh - 85px - 15px)"}})}}])&&En(t.prototype,a),n&&En(t,n),l}(n.Component);function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Rn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=An(e);if(t){var r=An(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Tn(this,a)}}function Tn(e,t){return!t||"object"!==jn(t)&&"function"!=typeof t?Mn(e):t}function Mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(l,e);var t,a,n,o=Dn(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:""},t.handleChange=t.handleChange.bind(Mn(t)),t.getGeom=t.getGeom.bind(Mn(t)),t.getFieldValues=t.getFieldValues.bind(Mn(t)),t}return t=l,(a=[{key:"getGeom",value:function(e){var t=this;g.getGeom(e).then((function(e){var a=e.feature;a&&t.props.sendFeature(a)}))}},{key:"getFieldValues",value:function(){var e=this;g.formOptions("second").then((function(t){var a=t.success,n=t.secondOrders;a&&e.setState({aimag:n})}))}},{key:"componentDidMount",value:function(){this.getFieldValues()}},{key:"handleChange",value:function(e,t,a,n,r){var o,l=t+"_id",i=t+"_geo_id",c=t+"_name",s=e.target.value,u=Object();if("-1"!==s){var m=this.state[t][s];this.setState(Pn({},a,m.children)),a&&(u[a]=m.children),o=m.geo_id,n.map((function(e,t){var a=e+"_geo_id",n=e+"_name";u[e+"_id"]=-1,u[a]="",u[n]=""})),u[i]=o,u[c]=m.name,this.getGeom(o)}else{if(n.length>0&&n.map((function(e,t){var a=e+"_id",n=e+"_geo_id",r=e+"_name";u[e]=[],u[a]=-1,u[n]="",u[r]=""})),"mongol"!==r){var d=r+"_id",p=this.state[d];o=this.state[r][p].geo_id}else o="au_496";u[i]=o,this.getGeom(o)}this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(a),!0).forEach((function(t){Pn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}(Pn({},l,s),u))}},{key:"render",value:function(){var e=this,t=this.state,a=t.aimag,n=t.sum,o=t.horoo,l=t.aimag_id,i=t.sum_id,c=t.horoo_id;return r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"form-control","aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:l},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),a.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"form-control",onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:i},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),n.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"form-control",onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:c},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))))}}])&&Rn(t.prototype,a),n&&Rn(t,n),l}(n.Component);function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zn(e,t){return(zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Bn(e);if(t){var r=Bn(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Un(this,a)}}function Un(e,t){return!t||"object"!==Ln(t)&&"function"!=typeof t?In(e):t}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zn(e,t)}(l,e);var t,a,n,o=Jn(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={points:[],feature:{},is_loading:!0},t.getAddresses=t.getAddresses.bind(In(t)),t.getFeature=t.getFeature.bind(In(t)),t.saveErguulPlace=t.saveErguulPlace.bind(In(t)),t.setLoading=t.setLoading.bind(In(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){var e=this.props.match.params.level,t=this.props.match.params.id;this.getAddresses(e,t)}},{key:"getAddresses",value:function(e,t){var a=this;g.getAddresses(e,t).then((function(e){var t=e.success,n=e.points;t&&a.setState({points:n,is_loading:!1})}))}},{key:"getFeature",value:function(e){this.setState({feature:e})}},{key:"setLoading",value:function(e){this.setState({is_loading:e})}},{key:"getPoint",value:function(e){var t=e;return"string"==typeof e&&(t=e.split(",")),[t[1],t[0]]}},{key:"saveErguulPlace",value:function(e,t,a,n,r){var o=this,l=this.getPoint(a);g.saveErguul(e,t,l,n,r).then((function(e){var t=e.success,a=e.info;t&&(alert(a),o.setLoading(!1))})).catch((function(e){alert("Алдаа гарсан байна"),o.setLoading(!1)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.points,n=t.feature,o=t.is_loading;return r.a.createElement("div",null,r.a.createElement("div",{className:"col-12"},r.a.createElement(i.a,{is_loading:o}),r.a.createElement(Gn,{sendFeature:this.getFeature}),r.a.createElement(Cn,{features:a,feature:n,saveErguulPlace:function(){return e.saveErguulPlace.apply(e,arguments)},setLoading:this.setLoading})))}}])&&Vn(t.prototype,a),n&&Vn(t,n),l}(n.Component);function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Kn(e);if(t){var r=Kn(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Xn(this,a)}}function Xn(e,t){return!t||"object"!==Wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(i,e);var t,a,n,l=$n(i);function i(){return Hn(this,i),l.apply(this,arguments)}return t=i,(a=[{key:"render",value:function(){return r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/back/байгууллага/түвшин/:level/:id/addresses/",component:qn}))}}])&&Zn(t.prototype,a),n&&Zn(t,n),i}(n.Component);function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(){return(tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ar(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ir(e);if(t){var r=ir(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return or(this,a)}}function or(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?lr(e):t}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t)}(i,e);var t,a,n,l=rr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={level:t.props.match.params.level,id:t.props.match.params.id,org_name:"",allowed_geom:null,sistem_count:0,employee_count:null},t.getOrgName=t.getOrgName.bind(lr(t)),t.handleSistemCount=t.handleSistemCount.bind(lr(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){Promise.all([this.getOrgName(this.state.level),this.handleSistemCount()])}},{key:"componentDidUpdate",value:function(e,t){e.allowed_geom!=this.props.allowed_geom&&this.setState({allowed_geom:this.props.allowed_geom})}},{key:"handleSistemCount",value:function(){var e=this,t=this.props.match.params.id;g.sistemCount(t).then((function(t){var a=t.count;e.setState({sistem_count:a})}))}},{key:"getOrgName",value:function(e){var t=this,a=this.state.id;g.orgAll(e,a).then((function(e){var a=e.orgs,n=e.count;a&&(a.map((function(e){return t.setState({org_name:e.name,allowed_geom:e.allowed_geom})})),t.setState({employee_count:n}))}))}},{key:"render",value:function(){var e,t,a,n=this,l=this.state,i=l.org_name,c=l.employee_count,s=l.allowed_geom,u=this.props.match.params.level,m=this.props.match.params.id;return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs nav-tabs-dark-gray"},r.a.createElement("li",{className:"nav-item gp-text-primary"},r.a.createElement(G.c,{to:"/back/байгууллага/түвшин/".concat(u,"/").concat(m,"/detail/"),className:"nav-link",activeClassName:"active","data-toggle":"tab"},r.a.createElement("i",{className:"fa fa-th-large"}),r.a.createElement("span",{className:"hidden-xs"}))),r.a.createElement("li",{className:"nav-item gp-text-primary"},r.a.createElement(G.c,{to:"/back/байгууллага/түвшин/".concat(u,"/").concat(m,"/эрх/"),className:"nav-link",activeClassName:"active","data-toggle":"tab"},r.a.createElement("i",{className:"fa fa-lock"}),r.a.createElement("span",{className:"hidden-xs"}," Эрх"))),r.a.createElement("li",{className:"nav-item gp-text-primary"},r.a.createElement(G.c,{to:"/back/байгууллага/түвшин/".concat(u,"/").concat(m,"/хэрэглэгч/"),className:"nav-link",activeClassName:"active","data-toggle":"tab"},r.a.createElement("i",{className:"icon-user"}),r.a.createElement("span",{className:"hidden-xs"}," Албан хаагчид"),r.a.createElement("small",{className:"badge float-right badge-dark-primary ml-2"},c))),r.a.createElement("li",{className:"nav-item gp-text-primary"},r.a.createElement(G.c,{to:"/back/байгууллага/түвшин/".concat(u,"/").concat(m,"/систем/"),className:"nav-link",activeClassName:"active","data-toggle":"tab"},r.a.createElement("i",{className:"icon-envelope-open"}),r.a.createElement("span",{className:"hidden-xs"}," Систем"),r.a.createElement("small",{className:"badge float-right badge-dark-primary ml-2"},this.state.sistem_count))),r.a.createElement("li",{className:"nav-item gp-text-primary"},r.a.createElement(G.c,{to:"/back/байгууллага/түвшин/".concat(u,"/").concat(m,"/addresses/"),className:"nav-link",activeClassName:"active","data-toggle":"tab"},r.a.createElement("i",{className:"fa fa-map-marker"}),r.a.createElement("span",{className:"hidden-xs"}," Ажилчдын хаяг")))),r.a.createElement("div",{className:"tab-content"},r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/back/байгууллага/түвшин/:level/:id/detail/",render:function(e){return r.a.createElement(_e,tr({},e,{allowed_geom:s,refresh:n.getOrgName}))}}),r.a.createElement(o.a,{path:"/back/байгууллага/түвшин/:level/:id/эрх/",component:$a}),r.a.createElement(o.a,{path:"/back/байгууллага/түвшин/:level/:id/хэрэглэгч/",component:function(e){return r.a.createElement(wa,tr({},e,{refreshCount:n.getOrgName}))}}),r.a.createElement(o.a,(a=function(e){return r.a.createElement(mt,tr({},e,{refreshCount:n.handleSistemCount}))},(t="component")in(e={path:"/back/байгууллага/түвшин/:level/:id/систем/",component:mt})?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e)),r.a.createElement(o.a,{path:"/back/байгууллага/түвшин/:level/:id/addresses/",component:Qn}))),r.a.createElement("a",{className:"geo-back-btn",id:"geo-back-btn",onClick:this.props.history.goBack},r.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",i)))}}])&&ar(t.prototype,a),n&&ar(t,n),i}(n.Component);function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function mr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=hr(e);if(t){var r=hr(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return fr(this,a)}}function fr(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hr(e){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(i,e);var t,a,n,l=pr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).default_url="/back/байгууллага/түвшин/1/",t.state={user_count:0},t}return t=i,(a=[{key:"componentDidMount",value:function(){this.props.location.pathname.endsWith("түвшин/")&&this.props.history.push(this.default_url)}},{key:"componentDidUpdate",value:function(){this.props.location.pathname.endsWith("түвшин/")&&this.props.history.push(this.default_url)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/",component:h}),r.a.createElement(o.a,{path:"/back/байгууллага/түвшин/:level/нэмэх/",component:function(t){return r.a.createElement(A,ur({},t,{refreshCount:e.props.refreshCount}))}}),r.a.createElement(o.a,{exact:!0,path:"/back/байгууллага/түвшин/:level/:id/засах/",component:A}),r.a.createElement(o.a,{path:"/back/байгууллага/түвшин/:level/:id/",component:cr})))))}}])&&mr(t.prototype,a),n&&mr(t,n),i}(n.Component)}}]);