(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1012:function(e,t,a){(t=a(63)(!1)).push([e.i,".bundle-view-scroll {\n    overflow-y: scroll;\n    height: calc(95vh);\n}\n\n.bundle-view-right-scroll {\n    overflow-y: scroll;\n    height: calc(95vh);\n}",""]),e.exports=t},110:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(0),r=a.n(n);a(111);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p(e);if(t){var r=p(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,a,n,o=s(u);function u(){return c(this,u),o.apply(this,arguments)}return t=u,(a=[{key:"render",value:function(){return this.props.is_loading?r.a.createElement("div",{className:"loader text-center"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),r.a.createElement("br",null),this.props.text?this.props.text:"Түр хүлээнэ үү...")):null}}])&&l(t.prototype,a),n&&l(t,n),u}(n.Component)},911:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return me}));var n=a(0),r=a.n(n),o=a(15),c=a(218);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={getall:function(){var e=i({},Object(c.a)());return fetch("".concat(p,"/all/"),e).then(c.c)},getPropertyFields:function(e,t){var a=i({},Object(c.b)());return fetch("".concat(p,"/property-fields/").concat(e,"/").concat(t,"/"),a).then(c.c)},setPropertyFields:function(e){var t=i(i({},Object(c.b)()),{},{body:e});return fetch("".concat(p,"/property-fields/save/"),t).then(c.c)},makeView:function(e){var t=i(i({},Object(c.b)()),{},{body:e});return fetch("".concat(p,"/make-view/"),t).then(c.c)}},p="/back/dedsan-butests";var f=a(110),m=a(71),d=(a(237),a(890)),h=a(136),y=a(547),_=a(221),v=a(471);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S(e);if(t){var r=S(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return k(this,a)}}function k(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,a,n,o=w(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={geojson:[],dataProjection:"EPSG:4326",featureProjection:"EPSG:3857",style_name:e.style_name,url:e.url,defualt_url:e.defualt_url,geom_type:e.geom_type,is_loading:!1},t.loadMapData=t.loadMapData.bind(O(t)),t.loadMap=t.loadMap.bind(O(t)),t}return t=c,(a=[{key:"componentDidMount",value:function(){this.loadMap(),this.loadMapData()}},{key:"componentDidUpdate",value:function(e,t){e.geom_type!=this.props.geom_type&&this.setState({geom_type:this.props.geom_type})}},{key:"loadMap",value:function(){var e=new d.a({layers:[new h.a({source:new y.a})],target:"map",view:new v.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});this.map=e}},{key:"getType",value:function(e){var t;return["line","point","poly"].map((function(a,n){e.toLowerCase().includes(a)&&(t=a)})),t||(t=e),t}},{key:"loadMapData",value:function(){var e=this.state,t=e.style_name,a=e.url,n=e.defualt_url,r=e.geom_type,o=(e.dataProjection,e.featureProjection),c=this.getType(r),l={FORMAT:"image/png",styles:t,cql_filter:"field_type iLIKE '%".concat(c,"%'")},i={tile:new h.a({source:new _.a({projection:o,url:a||n,params:l})})};this.map.addLayer(i.tile)}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 m-1 h-100 w-100"},r.a.createElement("div",{id:"map",style:{height:"calc( 49vh - 34px - 7px)"}})),this.state.is_loading?r.a.createElement("span",{className:"text-center d-block text-sp",style:{position:"fixed",top:"60%",right:"20%"}},r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),r.a.createElement("br",null),"Түр хүлээнэ үү..."):null)}}])&&g(t.prototype,a),n&&g(t,n),c}(n.Component);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var P=function(e){var t,a=j(Object(n.useState)(e.style_name),2),o=a[0],c=a[1],l=j(Object(n.useState)(!1),2),i=l[0],s=l[1],u=j(Object(n.useState)(!1),2),p=u[0],f=u[1],m=j(Object(n.useState)(e.invalid_feedback),2),d=m[0],h=m[1];return Object(n.useEffect)((function(){h(e.invalid_feedback)}),[e.invalid_feedback]),Object(n.useEffect)((function(){c(e.style_name||""),f(!1),s(!1)}),[e.style_name]),r.a.createElement("div",{className:"border mb-3 w-100 text-center py-2 pl-3"},r.a.createElement("h5",{className:"text-uppercase pt-2"},e.has_view?"View дахин үүсгэх":"давхаргын style тохируулах",e.has_view&&r.a.createElement("input",{type:"checkbox",className:"ml-2",checked:p,onChange:function(e){var t=e.target.checked;f(t)}})),!e.has_view||p?r.a.createElement("div",{className:"d-flex flex-column py-3"},r.a.createElement("label",{className:"mr-auto",htmlFor:"id_styles"},"Style-ийн нэр:"),r.a.createElement("select",{className:"custom-select mr-auto w-50"+(o?"":" is-invalid"),value:o||"",id:"id_styles",onChange:function(t){var a=t.target.value;c(a),s(!1),a||h(!0),e.getStyleName(a)}},r.a.createElement("option",{value:""}),e.style_names.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),!o&&d&&r.a.createElement("small",{className:"text-danger mr-auto"},"Style-ийн нэр хоосон байна"),r.a.createElement("div",{className:"mr-auto mt-3"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(e){s(!0)}},"Style-ийг шалгах")),i&&r.a.createElement("div",{className:"pr-4 mt-3"},r.a.createElement(N,{style_name:o,view_name:null===(t=e.view)||void 0===t?void 0:t.view_name,url:e.url,defualt_url:e.defualt_url,geom_type:e.geom_type}))):null)};function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var R=function(e){var t=C(Object(n.useState)(!1),2),a=t[0],o=t[1],c=C(Object(n.useState)(e.image_format),2),l=c[0],i=c[1],s=C(Object(n.useState)(e.zoom_start),2),u=s[0],p=s[1],f=C(Object(n.useState)(e.zoom_stop),2),m=f[0],d=f[1],h=C(Object(n.useState)(e.cache_type),2),y=h[0],_=h[1],v=C(Object(n.useState)(e.number_of_cache),2),b=v[0],g=v[1];Object(n.useEffect)((function(){i(e.image_format)}),[e.image_format]),Object(n.useEffect)((function(){p(e.zoom_start)}),[e.zoom_start]),Object(n.useEffect)((function(){d(e.zoom_stop)}),[e.zoom_stop]),Object(n.useEffect)((function(){_(e.cache_type)}),[e.cache_type]),Object(n.useEffect)((function(){g(e.number_of_cache)}),[e.number_of_cache]);var E=function(t,a,n){e.getTileCacheValue(t,a),n(a)};return r.a.createElement("div",{className:"border mb-3 p-1"},r.a.createElement("div",{className:"form-row col-md-12 text-center"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"",className:"m-2"},r.a.createElement("h5",null,"tilecache тохируулах")),r.a.createElement("input",{type:"checkbox",checked:a,onChange:function(e){return E("tile_cache_check",e.target.checked,o)}}))),a&&r.a.createElement("div",{className:"form-row col-md-12"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"",className:"m-2"},"Зургийн формат"),r.a.createElement("select",{className:"form-control form-control-sm",value:l,onChange:function(e){return E("image_format",e.target.value,i)}},r.a.createElement("option",{value:"jpeg"},"jpeg"),r.a.createElement("option",{value:"png"},"png"))),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"zoom_start",className:"m-2"},"Томруулах эхний утга"),r.a.createElement("input",{id:"zoom_start",type:"number",name:"zoom_start",className:"form-control col-4"+(u>21?" is-invalid":""),value:u,onChange:function(e){return E("zoom_start",e.target.value,p)}}),u>21&&r.a.createElement("label",{className:"text-danger"},"Томруулах эхний утга нь хамгийн ихдээ 21 байна")),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"zoom_stop",className:"m-2"},"Томруулах сүүлчийн утга"),r.a.createElement("input",{type:"number",id:"zoom_stop",name:"zoom_stop",className:"form-control col-4"+(m>21?" is-invalid":""),value:m,onChange:function(e){return E("zoom_stop",e.target.value,d)}}),m>21&&r.a.createElement("label",{className:"text-danger"},"Томруулах сүүлчийн утга нь хамгийн ихдээ 21 байна")),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Үйлдлийн төрөл"),r.a.createElement("select",{className:"form-control form-control-sm",value:y,onChange:function(e){return E("cache_type",e.target.value,_)}},r.a.createElement("option",{value:"seed"},"seed"),r.a.createElement("option",{value:"reseed"},"reseed"),r.a.createElement("option",{value:"truncate"},"Truncate"))),r.a.createElement("div",{className:"form-group col-md-4 mr-2"},r.a.createElement("label",{htmlFor:"number_of_cache",className:"m-2"},"Хэрэглэх таскуудын тоо"),r.a.createElement("input",{type:"number",id:"number_of_cache",name:"number_of_cache",className:"form-control col-4"+(m>100?" is-invalid":""),value:b,onChange:function(e){return E("number_of_cache",e.target.value,g)}}),b>100&&r.a.createElement("label",{className:"text-danger"},"Хэрэглэх таскын тоо хамгийн ихдээ 100 байна"))))},A=a(954);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=I(e);if(t){var r=I(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return B(this,a)}}function B(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(c,e);var t,a,n,o=M(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={is_open:!1},t}return t=c,(a=[{key:"render",value:function(){var e=this,t=this.state.is_open;return r.a.createElement("div",{className:"border mb-3 w-100  py-2 pl-3"},r.a.createElement("h5",{className:"text-uppercase text-center pt-2"},"Feature template оруулах",r.a.createElement("label",{htmlFor:"check",className:"m-2"}),r.a.createElement("input",{type:"checkbox",id:"check",checked:t,onChange:function(){return e.setState({is_open:!0})}})),t&&r.a.createElement(A.a,V({className:"mt-4",default_text:"Template оруулна уу"},this.props)))}}])&&z(t.prototype,a),n&&z(t,n),c}(n.Component);a(965);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=X(e);if(t){var r=X(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Q(this,a)}}function Q(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(l,e);var t,a,o,c=H(l);function l(e){var t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(a=c.call(this,e)).state=($(t={show:!1,id_list:e.id_list||[],open_datas:[],save_is_load:!1,modal_status:"closed",view:"",style_names:e.style_names,url:e.url,defualt_url:e.defualt_url,geom_type:e.geom_type,is_loading:e.property_loading,tile_cache_check:!1,check_list:e.check_list,check_open:e.check_open},"is_loading",!1),$(t,"invalid_feedback",!1),$(t,"is_open",!1),$(t,"zoom_stop",0),$(t,"zoom_start",0),$(t,"cache_type","seed"),$(t,"number_of_cache",2),$(t,"image_format","png"),t),a.handleInput=a.handleInput.bind(W(a)),a.getTileCacheValue=a.getTileCacheValue.bind(W(a)),a.handleSave=a.handleSave.bind(W(a)),a.handleAllCheck=a.handleAllCheck.bind(W(a)),a.getValuesFromState=a.getValuesFromState.bind(W(a)),a.makeView=a.makeView.bind(W(a)),a.getStyleName=a.getStyleName.bind(W(a)),a.getFile=a.getFile.bind(W(a)),a}return t=l,(a=[{key:"getTileCacheValue",value:function(e,t){this.state[e]=t}},{key:"handleInput",value:function(e,t,a,n,r){var o,c=this.state[r];e.target.checked?a.push(t):a=a.filter((function(e){return e!=t})),c=a.length==this.props.property_length,this.setState(($(o={},n,a),$(o,r,c),o))}},{key:"handleSave",value:function(){var e,t=this,a=this.props,n=a.fid,r=a.tid,o=this.state,c=o.id_list,l=o.view,i=(o.tile_cache_check,o.zoom_start,o.open_datas),s=o.file;e=this.getValuesFromState();var p=new FormData;p.append("fid",n),p.append("tid",r),p.append("id_list",c),p.append("open_datas",i),l&&p.append("view_id",l.id),s.name&&p.append("files",s,s.name),p.append("values",JSON.stringify({values:e})),u.setPropertyFields(p).then((function(e){var a=e.success,n=e.msg;a?(t.props.getAll(),t.modalChange("fa fa-check-circle",null,"success",n,!1,"","",null,null)):t.modalChange("fa fa-exclamation-circle",null,"danger",n,!1,"","",null,null),t.setState({save_is_load:!1,is_loading:!1})}))}},{key:"handleAllCheck",value:function(e,t,a,n){var r,o,c=[],l=this.props.fields;e.target.checked?(l.map((function(e,t){return e.data_types.map((function(e,t){return e.data_type_configs.map((function(e,t){return c.push(e[n])}))}))})),this.setState(($(r={},t,c),$(r,a,!0),r))):this.setState(($(o={},t,[]),$(o,a,!1),o))}},{key:"componentDidUpdate",value:function(e,t){var a,n,r=this.state,o=(r.view,r.tile_cache_check);if(e.check_list!=this.props.check_list&&this.setState({check_list:this.props.check_list}),e.check_open!=this.props.check_open&&this.setState({check_open:this.props.check_open}),t.tile_cache_check!=o&&this.setState({check_style:!1,tile_cache_check:o}),e.file!=this.props.file){var c=this.props.file;this.setState({file:c})}if((null===(a=e.view)||void 0===a?void 0:a.view_name)!=(null===(n=this.props.view)||void 0===n?void 0:n.view_name)&&this.setState({check_style:!1,view:this.props.view}),e.fields!==this.props.fields){var l=this.props.fields;this.setState({fields:l})}if(e.id_list!==this.props.id_list){var i=this.props.id_list;this.setState({id_list:i})}if(e.open_datas!==this.props.open_datas){var s=this.props.open_datas;this.setState({open_datas:s})}if(e.style_names!==this.props.style_names&&this.setState({style_names:this.props.style_names}),e.url!==this.props.url&&this.setState({url:this.props.url}),e.view_style_name!==this.props.view_style_name&&this.setState({style_name:this.props.view_style_name}),e.geom_type!==this.props.geom_type&&this.setState({geom_type:this.props.geom_type}),e.defualt_url!==this.props.defualt_url&&this.setState({defualt_url:this.props.defualt_url}),e.property_loading!==this.props.property_loading&&this.setState({is_loading:this.props.property_loading}),e.fid!==this.props.fid&&this.setState({tile_cache_check:!1,file:"",is_open:!1}),e.cache_values!==this.props.cache_values&&this.props.cache_values)if(this.props.cache_values.length>0){var u=this.props.cache_values[0];this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){$(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},u))}else this.setState({zoom_stop:0,zoom_start:0,cache_type:"seed",number_of_cache:0,image_format:"png"})}},{key:"handleModalAlert",value:function(){this.setState({modal_alert_check:"closed"}),clearTimeout(this.state.timer)}},{key:"getValuesFromState",value:function(){var e=this.state,t=e.style_name,a=e.geom_type,n=e.zoom_stop,r=e.zoom_start,o=e.number_of_cache,c=e.image_format,l=e.cache_type;return{style_name:t,geom_type:a,tile_cache_check:e.tile_cache_check,cache_values:{zoom_stop:n,zoom_start:r,number_of_cache:o,cache_type:l,image_format:c}}}},{key:"makeView",value:function(){var e=this,t=this.props,a=t.fid,n=t.tid,r=this.state,o=r.view,c=r.style_name,l=r.file,i=this.getValuesFromState(),s=new FormData;s.append("fid",a),s.append("tid",n),s.append("view_id",o.id),l&&s.append("files",l,l.name),s.append("values",JSON.stringify({values:i})),c?(this.setState({save_is_load:!0,is_loading:!0,load_text:"View үүсгэж байна"}),u.makeView(s).then((function(a){var n=a.success,r=(a.data,a.error);n?t.getProperties(t.fid,t.tid,t.fname,""):alert(r),e.setState({is_loading:!1,load_text:"",check_list:!1,check_open:!1})}))):this.setState({invalid_feedback:!0})}},{key:"getStyleName",value:function(e){this.state.style_name=e}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,a,n,r,o,c,l,i,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:a,title:n,text:r,has_button:o,actionNameBack:c,actionNameDelete:l,modalAction:i,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"getFile",value:function(e){var t=e.target.files[0];this.setState({file:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.fields,o=t.fid,c=t.fname,l=(t.has_view,t.file,this.state),i=l.is_loading,s=l.id_list,u=l.check_list,p=l.check_open,d=l.open_datas,h=this.state;return r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{is_loading:i,text:h.load_text?h.load_text:"Хүсэлтийг уншиж байна."}),r.a.createElement("div",{className:"card col-md-6 mb-1 bundle-view-right-scroll",style:{left:"10px"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"text-center"},c)),r.a.createElement("div",{className:"card-body"},c&&r.a.createElement("div",null,r.a.createElement(q,L({},this.state,{fid:o,getFile:this.getFile})),r.a.createElement(R,L({},this.state,{getTileCacheValue:this.getTileCacheValue})),r.a.createElement(P,L({},this.props,this.state,{getStyleName:this.getStyleName}))),a.length>0?r.a.createElement("div",null,r.a.createElement("table",{className:"table table-bordered mb-3"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center",style:{width:"15%"}},"Data ",r.a.createElement("br",null)," type"),r.a.createElement("th",{className:"text-center",style:{width:"15%"}},r.a.createElement("label",{htmlFor:"allcheck",className:"text-dark"}," Public "),r.a.createElement("div",{className:"custom-control custom-switch ml-1"},r.a.createElement("input",{id:"allcheck",type:"checkbox",className:"custom-control-input",checked:u,onChange:function(t){return e.handleAllCheck(t,"id_list","check_list","property_id")}}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"allcheck"}))),r.a.createElement("th",{className:"text-center",style:{width:"15%"}},r.a.createElement("label",{htmlFor:"open_datas",className:"text-dark"}," Нээлттэй ",r.a.createElement("br",null)," өгөгдөл "),r.a.createElement("div",{className:"custom-control custom-switch ml-1"},r.a.createElement("input",{id:"check_open",type:"checkbox",className:"custom-control-input",checked:p,onChange:function(t){return e.handleAllCheck(t,"open_datas","check_open","property_code")}}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"check_open"}," "))),r.a.createElement("th",{className:"text-center",style:{width:"70%"}},"Property")),a.map((function(t,a){return r.a.createElement(n.Fragment,{key:a},t.data_types.map((function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement("tr",{key:a},r.a.createElement("th",{rowSpan:t.data_type_configs.length+1,className:"text-wrap align-middle text-justify m-2"},r.a.createElement("span",{className:"text-center align-middle"},"(",t.data_type_name_eng,")"),r.a.createElement("br",null),r.a.createElement("span",{className:"text-center align-middle"},t.data_type_name),r.a.createElement("br",null),r.a.createElement("span",{className:"text-justify text-muted align-middle"},r.a.createElement("small",null,t.data_type_definition)))),t.data_type_configs.map((function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement("tr",{key:a},r.a.createElement("th",null,r.a.createElement("div",{className:"icheck-primary text-center"},r.a.createElement("input",{id:t.property_name,type:"checkbox",checked:s.indexOf(t.property_id)>-1,onChange:function(a){return e.handleInput(a,parseInt(t.property_id),s,"id_list","check_list")}}),r.a.createElement("label",{htmlFor:t.property_name}))),r.a.createElement("th",null,r.a.createElement("div",{className:"icheck-primary text-center"},r.a.createElement("input",{id:a+t.property_code,type:"checkbox",checked:d.indexOf(t.property_code)>-1,onChange:function(a){return e.handleInput(a,t.property_code,d,"open_datas","check_open")}}),r.a.createElement("label",{htmlFor:a+t.property_code}))),r.a.createElement("th",null,r.a.createElement("label",{htmlFor:t.property_name,"data-toggle":"tooltip","data-placement":"right",title:t.property_definition},t.property_name,r.a.createElement("br",null),t.value_types.map((function(e,t){return r.a.createElement("span",{key:t},e.value_type_name)}))))))})))})))})))),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-block gp-btn-primary",onClick:this.handleSave},"Хадгалах"))):r.a.createElement("div",{className:""},c&&r.a.createElement("div",{className:"h-100 d-flex flex-column"},r.a.createElement("a",{onClick:this.makeView,className:"btn gp-btn-primary btn-block text-white px-5 py-3"},"View үүсгэх")))),r.a.createElement(m.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,title:this.state.title,text:this.state.text,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose})))}}])&&G(t.prototype,a),o&&G(t,o),l}(n.Component);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=oe(e);if(t){var r=oe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ne(this,a)}}function ne(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(c,e);var t,a,n,o=ae(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={list_all:[],fields:[],fid:null,tid:null,id_list:[],open_datas:[],view_name:"",fname:null,prev_event:null,prev_theme_event:null,prev_package_event:null,check_package_event:null,style_names:[],url:"",defualt_url:"",view_style_name:"",geom_type:"",is_loading:!1,property_loading:!1,cache_values:[],property_length:null,check_list:!1,has_view:!1,check_open:!1},t.getAll=t.getAll.bind(re(t)),t.getProperties=t.getProperties.bind(re(t)),t.activeView=t.activeView.bind(re(t)),t}return t=c,(a=[{key:"componentDidMount",value:function(){this.getAll()}},{key:"getAll",value:function(){var e=this;this.setState({is_loading:!0}),u.getall().then((function(t){var a=t.success,n=t.data,r=t.style_names,o=t.defualt_url;a&&e.setState({list_all:n,style_names:r,defualt_url:o,is_loading:!1})}))}},{key:"getProperties",value:function(e,t,a,n){var r=this,o=this.state.check_list,c=this.state.check_open,l=0;n&&this.activeView(n),this.setState({fid:e,tid:t,fname:a,property_loading:!0}),u.getPropertyFields(t,e).then((function(e){var t=e.success,a=e.fields,n=e.id_list,i=e.view,s=e.url,u=e.style_name,p=e.geom_type,f=e.cache_values,m=e.open_datas,d=e.file;t?(a.map((function(e,t){return e.data_types.map((function(e,t){return e.data_type_configs.map((function(e,t){e.property_id&&(l+=1)}))}))})),l==n.length&&(o=!0),l==m.length&&(c=!0),r.setState({fields:a,id_list:n,view:i,url:s,check_list:o,view_style_name:u,geom_type:p,open_datas:m,check_open:c,property_loading:!1,cache_values:f,property_length:l,has_view:t,file:d})):r.setState({property_loading:!1,has_view:t,geom_type:p,view_style_name:"",file:d})}))}},{key:"componentDidUpdate",value:function(e,t){t.geom_type!==this.state.geom_type&&this.setState({geom_type:this.state.geom_type})}},{key:"activeView",value:function(e){this.setState({fields:[],id_list:[],view:""});var t=e.id,a=this.state.prev_event,n=this.state.prev_theme_event,r=this.state.prev_package_event,o=this.state.check_package_event,c=t.split("-").length;e.className="list-group-item collapsed active",1===c&&(e.querySelector("i").className="icon expand-icon fa fa-minus",null!==n&&(a.className="list-group-item collapsed",n.querySelector("i").className="icon expand-icon fa fa-plus"),this.setState({prev_theme_event:e})),2===c&&(n.className="list-group-item collapsed",null!==r?r.id.split("-")[0]===t.split("-")[0]?r.id===t?"icon expand-icon fa fa-minus ml-4"===e.querySelector("i").className?(a.className="list-group-item collapsed",e.querySelector("i").className="icon expand-icon fa fa-plus ml-4"):e.querySelector("i").className="icon expand-icon fa fa-minus ml-4":(e.querySelector("i").className="icon expand-icon fa fa-minus ml-4",a.className="list-group-item collapsed",r.querySelector("i").className="icon expand-icon fa fa-plus ml-4"):(e.querySelector("i").className="icon expand-icon fa fa-minus ml-4",null!==o&&(a.className="list-group-item collapsed",o.querySelector("i").className="icon expand-icon fa fa-plus ml-4"),this.setState({check_package_event:r})):e.querySelector("i").className="icon expand-icon fa fa-minus ml-4",this.setState({prev_package_event:e})),3===c&&(a.className="list-group-item collapsed"),this.setState({prev_event:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.list_all,n=(t.fid,t.tid,t.style_names),o=t.view_style_name,c=t.url,l=t.defualt_url,i=t.geom_type,s=t.is_loading,u=t.property_loading,p=t.cache_values,m=t.check_list;return r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card bundle-view-scroll mb-0"},r.a.createElement("div",{className:"card-header text-uppercase"},"Theme"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{id:"accordion1"},a.map((function(t,a){return r.a.createElement("ul",{className:"list-group",key:a},r.a.createElement("li",{className:"list-group-item collapsed",role:"button",id:"".concat(a),"data-toggle":"collapse","data-target":"#collapse-theme".concat(a),"aria-expanded":"false","aria-controls":"collapse-theme".concat(a),onClick:function(t){return e.activeView(t.currentTarget)}},r.a.createElement("i",{className:"icon expand-icon fa fa-plus",id:"".concat(a)}),"  ",t.name),r.a.createElement("div",{id:"collapse-theme".concat(a),className:"collapse","data-parent":"#accordion1"},r.a.createElement("div",{id:"accordion10".concat(a)},t.package.map((function(n,o){return r.a.createElement("ul",{className:"list-group",key:o},r.a.createElement("li",{className:"list-group-item collapsed",role:"button",id:"".concat(a,"-").concat(o),"data-toggle":"collapse","data-target":"#collapse-packages".concat(a).concat(o),"aria-expanded":"false","aria-controls":"collapse-packages".concat(a).concat(o),onClick:function(t){return e.activeView(t.currentTarget)}},r.a.createElement("i",{className:"icon expand-icon fa fa-plus ml-4",id:"".concat(a,"-").concat(o)}),"  ",n.name),r.a.createElement("div",{id:"collapse-packages".concat(a).concat(o),className:"collapse","data-parent":"#accordion10".concat(a)},r.a.createElement("div",{id:"accordion100".concat(o)},n.features.map((function(n,c){return r.a.createElement("ul",{className:"list-group",key:c},r.a.createElement("li",{className:"list-group-item",role:"button",id:"".concat(a,"-").concat(o,"-").concat(c),onClick:function(a){return e.getProperties(n.id,t.id,n.name,a.currentTarget)}},r.a.createElement("i",{className:n.view.view_name?"fa fa-table text-success":"fa fa-table text-muted",style:{paddingLeft:"40px"}})," ",r.a.createElement("span",{className:"p-0",id:"".concat(a,"-").concat(o,"-").concat(c)}," ",n.name),n.view.view_name&&r.a.createElement("ul",{style:{paddingLeft:"90px"},id:"".concat(a,"-").concat(o,"-").concat(c)},r.a.createElement("li",{id:"features-".concat(a).concat(o).concat(c)},n.view.view_name))))})))))})))))}))))),r.a.createElement(f.a,{is_loading:s})),r.a.createElement(Y,{getAll:this.getAll,getProperties:this.getProperties,fields:this.state.fields,fid:this.state.fid,fname:this.state.fname,tid:this.state.tid,id_list:this.state.id_list,open_datas:this.state.open_datas,property_length:this.state.property_length,check_list:m,check_open:this.state.check_open,view:this.state.view,style_names:n,url:c,defualt_url:l,view_style_name:o,geom_type:i,property_loading:u,cache_values:p,has_view:this.state.has_view,file:this.state.file}))}}])&&ee(t.prototype,a),n&&ee(t,n),c}(n.Component);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=fe(e);if(t){var r=fe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return pe(this,a)}}function pe(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(l,e);var t,a,n,c=ue(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.call(this,e)}return t=l,(a=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/back/inspire-views/",component:ce})))}}])&&ie(t.prototype,a),n&&ie(t,n),l}(n.Component)},954:function(e,t,a){"use strict";var n=a(0),r=a.n(n);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.a=function(e){var t=o(Object(n.useState)(""),2),a=t[0],c=t[1],l=o(Object(n.useState)(""),2),i=l[0],s=l[1];Object(n.useEffect)((function(){u(e.file)}),[e.file]);var u=function(e){if(e){var t=e.size;c((t/=1024).toFixed(3)),s("KB")}},p=e.file,f=e.className,m=e.default_text,d=e.accept;return r.a.createElement("div",null,r.a.createElement("div",{className:"row ".concat(f)},r.a.createElement("div",{className:"custom-file col-md-6 my-auto ml-3"},r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"}," ",p?p.name:m),r.a.createElement("input",{type:"file",name:"file",id:"customFile",style:{display:"none"},className:"custom-file-input",onChange:function(t){return e.getFile(t)},accept:d})),r.a.createElement("div",{className:"col-md-5 d-flex flex-column ml-4"},r.a.createElement("i",null," файлын нэр:    ",p?p.name:""," "),r.a.createElement("i",null," файлын хэмжээ:  ",p&&p.name?r.a.createElement("span",null,a,"   ",i):""," "))))}},965:function(e,t,a){var n=a(62),r=a(1012);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}}}]);