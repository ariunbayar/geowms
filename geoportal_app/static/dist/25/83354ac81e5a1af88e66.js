(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a);n(110);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,a,o=u(s);function s(){return l(this,s),o.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){return this.props.is_loading?r.a.createElement("div",{className:"loader text-center"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),r.a.createElement("br",null),this.props.text?this.props.text:"Түр хүлээнэ үү...")):null}}])&&i(t.prototype,n),a&&i(t,a),s}(a.Component)},936:function(e,t,n){var a=n(62),r=n(937);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},937:function(e,t,n){(t=n(63)(!1)).push([e.i,".display-block{\n    display: block;\n    right: 0;\n    top:5%;\n    list-style-type: disc;\n}\n.right-scroll-sticky{\n    position: sticky;\n    height: calc(96vh - 42px);\n    overflow-y: scroll;\n    top: 70px;\n}\n.height-feature-select{\n    height: 400px;\n    overflow-y: scroll;\n}\n\n\n.list-card {\n    padding: 7px;\n    background-color: #ff000000;\n    border-radius: 3px;\n    box-shadow: 0 1px 2px 0 rgba(218, 218, 253, 0.65), 0 2px 6px 0 rgba(206, 206, 238, 0.54);\n    margin-bottom: 2px;\n}\n.list-card:hover{\n    background-color: antiquewhite;\n    margin-bottom: 5px;\n    transition: .04s;\n}\n",""]),e.exports=t},975:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ce}));var a=n(0),r=n.n(a),o=n(46),l=n(217);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={getall:function(){var e=c({},Object(l.a)());return fetch("".concat(f,"/all/"),e).then(l.c)},getprop:function(e){var t=c({},Object(l.b)());return fetch("".concat(f,"/prop/").concat(e,"/"),t).then(l.c)},editName:function(e,t){var n=c(c({},Object(l.b)()),{},{body:JSON.stringify({id:e,name:t})});return fetch("".concat(f,"/editName/"),n).then(l.c)},getFields:function(e,t,n){var a=c(c({},Object(l.b)()),{},{body:JSON.stringify({name:e,id:t,edit_name:n})});return fetch("".concat(f,"/get-fields/"),a).then(l.c)},save:function(e,t,n,a){var r=c(c({},Object(l.b)()),{},{body:JSON.stringify({form_values:e,model_name:t,model_id:n,edit_name:a})});return fetch("".concat(f,"/save/"),r).then(l.c)},getDatas:function(e){var t=c({},Object(l.a)());return fetch("".concat(f,"/getDatas/").concat(e,"/"),t).then(l.c)},remove:function(e,t){var n=c(c({},Object(l.b)()),{},{body:JSON.stringify({model_name:e,model_id:t})});return fetch("".concat(f,"/remove/"),n).then(l.c)},erese:function(e,t,n){var a=c(c({},Object(l.b)()),{},{body:JSON.stringify({model_name:e,model_id:t,top_id:n})});return fetch("".concat(f,"/erese/"),a).then(l.c)},getOverlapsFeature:function(e){var t=c({},Object(l.a)());return fetch("".concat(f,"/overlaps-feature-get/").concat(e,"/"),t).then(l.c)},setOverlapsFeature:function(e,t,n){var a=c(c({},Object(l.b)()),{},{body:JSON.stringify({feature_id:e,overlap_feature_id:t,state:n})});return fetch("".concat(f,"/overlaps-feature-set/"),a).then(l.c)}},f="/back/dedsan-butests";function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,a,o=y(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).data_type_span=0,t.f_c_span=0,t.state={disabled:!0,property_name:t.props.property_name,property_definition:t.props.property_definition,toggleButton:!1},t.handleChange=t.handleChange.bind(_(t)),t.textEdit=t.textEdit.bind(_(t)),t.editText=t.editText.bind(_(t)),t.saveText=t.saveText.bind(_(t)),t}return t=l,(n=[{key:"handleChange",value:function(e){this.setState({property_name:e.target.value})}},{key:"textEdit",value:function(){this.setState({disabled:!1,toggleButton:!0})}},{key:"saveText",value:function(e){this.setState({disabled:!0,toggleButton:!1}),this.editText(e)}},{key:"editText",value:function(e){var t=this,n=this.state.property_name;s.editName(e,n).then((function(e){e.success?t.props.addNotif("success",e.info,"times"):t.props.addNotif("danger",e.info,"check")}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.property_name,a=t.property_definition,o=(t.disabled,t.toggleButton,this.props),l=o.property_id,i=o.is_read_only,c=o.top_id;return r.a.createElement("div",{className:"float-left","data-toggle":"tooltip","data-placement":"right",title:a},i?r.a.createElement("i",{className:"fa fa-eye fa-1x","aria-hidden":"true",title:"Зөвхөн харах"}):r.a.createElement("i",{className:"fa fa-pencil fa-1x","aria-hidden":"true",title:"засаж болно"})," ",r.a.createElement("span",{role:"button",className:"gp-text-primary",onClick:function(){return e.props.handleFormLef("property",l,n,c)}},n))}}])&&d(t.prototype,n),a&&d(t,a),l}(a.Component);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var x=function(e){var t=e.themes,n=g(Object(a.useState)(e.feature_id),2),o=n[0],l=n[1],i=g(Object(a.useState)([]),2),c=i[0],u=i[1];Object(a.useEffect)((function(){e.feature_id&&o!==e.feature_id&&f(e.feature_id)}),[e.feature_id]);var f=function(e){s.getOverlapsFeature(e).then((function(t){var n=t.success,a=t.feature_ids;n&&(u(a),l(e))}))},m=function(t,n,a){s.setOverlapsFeature(t,n,a).then((function(n){var a=n.success,r=n.info;a?(e.setNotif("success",r,"times"),f(t)):e.setNotif("danger",r,"check")}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"row border ml-1 mr-0 mb-5"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h4",{className:"text-center"},"Үл давхцах давхаргууд"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-md-6 height-feature-select card-body"},t.map((function(e,t){return e.package.map((function(e,t){return e.features.map((function(e,t){return c.indexOf(e.id)<0&&o!=e.id&&r.a.createElement("div",{key:t,className:"row list-card",onClick:function(){return m(o,e.id,"create")}},r.a.createElement("div",{className:"col-10"},r.a.createElement("a",null,r.a.createElement("i",{className:"fa fa-table"}),"  ",r.a.createElement("span",{role:"button",className:"hidden-xs gp-text-primary"}," ",e.name))),r.a.createElement("div",{className:"col-2"},r.a.createElement("a",{type:"button",className:"gp-text-primary"},r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary fa-2x"}))))}))}))}))),r.a.createElement("div",{className:"col-md-6 height-feature-select card-body"},t.map((function(e,t){return e.package.map((function(e,t){return e.features.map((function(e,t){return c.indexOf(e.id)>-1&&o!=e.id&&r.a.createElement("div",{key:t,className:"row list-card",onClick:function(){return m(o,e.id,"remove")}},r.a.createElement("div",{className:"col-11"},r.a.createElement("a",null,r.a.createElement("i",{className:"fa fa-table"}),"  ",r.a.createElement("span",{role:"button",className:"hidden-xs gp-text-primary"}," ",e.name))),r.a.createElement("div",{className:"col-1"},r.a.createElement("a",{type:"button",className:"gp-text-primary"},r.a.createElement("i",{className:"fa fa-minus gp-text-primary fa-2x"}))))}))}))})))))};function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=F(e);if(t){var r=F(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,o,l=w(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={},t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.features,o=t.check,l=t.hide,i=t.list_all,c=t.feature_id;return r.a.createElement("div",null,n.length>0&&r.a.createElement(x,{themes:i,feature_id:c,setNotif:this.props.setNotif}),r.a.createElement("form",null,r.a.createElement("div",{className:"table-responsive"},l?n.length>0&&"байгаа"==o?n.map((function(t,n){var o;return r.a.createElement("div",{key:n},r.a.createElement("div",null,r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:4,className:"text-center"},r.a.createElement("span",{className:"gp-text-primary",role:"button",onClick:function(){return e.props.handleFormLeft("feature",t.feature_id,t.feature_name)}},t.feature_name))),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Feature ",r.a.createElement("br",null),"config"),r.a.createElement("th",{className:"text-center"},"Data ",r.a.createElement("br",null),"type"),r.a.createElement("th",{className:"text-center"},"Property"),r.a.createElement("th",{className:"text-center"},"Property ",r.a.createElement("br",null),"тайлбар")),t.f_configs.map((function(t,n){return r.a.createElement(a.Fragment,{key:n},0==t.data_types.length?r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center vertical align-middle"},r.a.createElement("span",{className:"gp-text-primary",role:"button",onClick:function(){return e.props.handleFormLeft("feature_config",t.feature_config_id,t.data_type_display_name)}},t.data_type_display_name))):null,t.data_types.map((function(n,o){return r.a.createElement(a.Fragment,{key:o},r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:n.data_type_configs.length+3,className:"text-center vertical align-middle"},r.a.createElement("span",{className:"gp-text-primary",role:"button",onClick:function(){return e.props.handleFormLeft("feature_config",t.feature_config_id,t.data_type_display_name)}},t.data_type_display_name))),r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:n.data_type_configs.length+2,className:"text-center vertical align-middle"},r.a.createElement("span",{className:"gp-text-primary",role:"button",onClick:function(){return e.props.handleFormLeft("data_type",n.data_type_id,n.data_type_name,t.feature_config_id)}},n.data_type_name,"   ",n.is_read_only?r.a.createElement("i",{className:"fa fa-eye fa-1x","aria-hidden":"true",title:"Зөвхөн харах"}):r.a.createElement("i",{className:"fa fa-pencil fa-1x","aria-hidden":"true",title:"засаж болно"})))),n.data_type_configs.map((function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("th",{className:"text-center align-middle"},r.a.createElement(v,{top_id:t.data_type_config_id,property_name:t.property_name,property_definition:t.property_definition,property_id:t.property_id,handleFormLef:e.props.handleFormLeft,addNotif:e.props.setNotif,is_read_only:t.is_read_only})),r.a.createElement("th",null,r.a.createElement("ul",null,t.value_types.map((function(n,a){return r.a.createElement("li",{key:a},r.a.createElement("a",null,r.a.createElement("span",{className:"gp-text-primary",role:"button",onClick:function(){return e.props.handleFormLeft("value_type",n.value_type_id,n.value_type_name)}},n.value_type_name)),"single-select"==n.value_type_id?r.a.createElement("a",{type:"button",onClick:function(){return e.props.handleFormLeft("code_list_config",t.property_id)}},r.a.createElement("i",{className:"fa fa-plus-circle ml-1 gp-text-primary"}),r.a.createElement("span",{className:"text-danger"}," Code list засах")):null,n.code_lists.length>0&&"single-select"==n.value_type_id?r.a.createElement("ul",{style:{listStyleType:'"- "'}},n.code_lists.map((function(t,n){return r.a.createElement("li",{key:n},r.a.createElement("a",null,r.a.createElement("span",{className:"gp-text-primary",role:"button",onClick:function(){return e.props.handleFormLeft("code_list",t.code_list_id,t.code_list_name)}},t.code_list_name)))})),r.a.createElement("li",{className:"text-danger"},r.a.createElement("a",{type:"button",className:"gp-text-primary",onClick:function(){return e.props.handleFormLeft("code_list",t.property_id)}},r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary"}),"  Code list нэмэх"))):"single-select"==n.value_type_id&&0==n.code_lists.length?r.a.createElement("ul",{style:{listStyleType:'"- "'}},r.a.createElement("li",{className:"text-danger"},r.a.createElement("a",{type:"button",className:"gp-text-primary",onClick:function(){return e.props.handleFormLeft("code_list",t.property_id)}},r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary"}),"  Утга нэмж оруулах"))):null)})))))})),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2",className:"text-danger"},r.a.createElement("a",{type:"button",className:"gp-text-primary",onClick:function(){return e.props.handleFormLeft("data_type_config",n.data_type_id)}},r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary"}),"  DataType нэмэх"))))})))})),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"4",className:"text-danger"},r.a.createElement("a",(O(o={type:"button",className:"gp-text-primary",onClick:function(){return e.props.handleFormLeft("feature_config",t.feature_id)}},"className","gp-text-primary"),O(o,"role","button"),o),r.a.createElement("h5",{className:"text-danger"},r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary"}),"  Feature config нэмэх"))))))))})):""===o?r.a.createElement("h1",{className:"text-center"},"Feature сонгоно уу"):"байхгүй"==o?r.a.createElement("h1",{className:"text-center"},r.a.createElement("i",{className:"fa fa-exclamation-circle text-warning"})," Feature-ийн мэдээлэл алга"):null:null)))}}])&&k(t.prototype,n),o&&k(t,o),i}(a.Component),C=n(109);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function M(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I(e);if(t){var r=I(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return V(this,n)}}function V(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(l,e);var t,n,a,o=B(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={is_loading:!0,pid:e.pid,fid:e.fid,model_id:null,model_name:null,values:{},code:t.props.code,before_id:"",before_name:"",jumped:!1,edit_name:""},t.onSubmit=t.onSubmit.bind(J(t)),t.getFields=t.getFields.bind(J(t)),t.makeModel=t.makeModel.bind(J(t)),t.getValue=t.getValue.bind(J(t)),t.connectedFields=t.connectedFields.bind(J(t)),t.handleRemove=t.handleRemove.bind(J(t)),t}return t=l,(n=[{key:"onSubmit",value:function(){var e=this;this.setState({is_loading:!0});var t=this.state,n=t.values,a=t.model_name,r=t.code,o=t.model_id,l=t.edit_name;s.save(n,a,o,l).then((function(t){var n=t.success,a=t.info;n?(e.setState({is_loading:!1,info:a}),""!==r?e.props.refresh(r):e.props.refresh()):alert(a)}))}},{key:"handleRemove",value:function(){var e=this.props,t=e.model_name,n=e.model_id,a=e.edit_name,r=e.type,o=e.top_id;this.props.remove(t,n,a,r,o)}},{key:"openModal",value:function(e,t,n,a){var r={modal_status:"open",modal_icon:"fa fa-".concat(e),modal_bg:"",title:t,text:n,has_button:!0,actionNameBack:"Буцах",actionNameDelete:t,modalAction:a,modalClose:""};this.props.setModal(r)}},{key:"connectedFields",value:function(e,t){function n(e){return"true"==e?"false":"false"==e?"true":void 0}"is_connect_to_feature"==e.field_name&&(this.state.values[t-3].data=n(e.data),this.setState({values:this.state.values})),"has_class"==e.field_name&&(this.state.values[t+3].data=n(e.data),this.setState({values:this.state.values}))}},{key:"getValue",value:function(e,t){var n=this.state.values[t];this.state.values[t].data=e,this.connectedFields(n,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.model_id,a=t.model_name,r=t.edit_name;e.model_id!==n&&(this.getFields(a,n,r),this.setState({before_id:e.model_id,before_name:e.model_name,before_edit_name:e.edit_name})),e.model_name===a&&e.edit_name===r||(this.setState({model_id:n,model_name:a,edit_name:r}),this.getFields(a,n,r))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.model_id,n=e.model_name,a=e.edit_name;this.setState({model_id:t,model_name:n,edit_name:a}),this.getFields(n,t,a)}},{key:"getFields",value:function(e,t,n){var a=this;this.setState({values:{},is_loading:!0}),s.getFields(e,t,n).then((function(n){var r,o,l=n.success,i=n.fields;l&&(i.map((function(e,t){"has_class"==e.field_name&&(r=t),"is_connect_to_feature"==e.field_name&&(o=t)})),a.setState({values:i,is_loading:!1,model_id:t,model_name:e,has_class_idx:r,is_connected_to_feature_idx:o}))}))}},{key:"makeModel",value:function(){this.setState({jumped:!0}),"feature_config"==this.props.model_name&&this.props.handleFormLeft("data_type",""),"property"!=this.props.model_name&&"value_type"!=this.props.model_name||this.props.handleFormLeft("value_type",""),"data_type_config"==this.props.model_name&&this.props.handleFormLeft("property","")}},{key:"backToForm",value:function(){var e=this.state,t=e.before_id,n=e.before_name,a=e.before_edit_name;""!==a?this.props.handleFormLeft(n,t,a):this.props.handleFormLeft(n,t)}},{key:"checkSelectAddData",value:function(e){return!(e.field_name.includes("connect_feature")||"top_code_list_id"==e.field_name)}},{key:"render",value:function(){var e=this,t=this.props.model_name,n=this.props.edit_name,a=this.props.model_id,o=this.state,l=o.values,i=o.jumped,c=o.edit_name,u=o.is_connected_to_feature_idx,s=o.is_loading,f=""!==c?"Засах":"Хадгалах";return r.a.createElement("div",{className:"overflow-auto card-body"},i&&r.a.createElement("div",{className:"mb-2"},r.a.createElement("button",{type:"button",className:"btn btn-block gp-btn-primary",onClick:function(){return e.backToForm()}},"Буцах")),r.a.createElement(C.a,{is_loading:s,text:"Уншиж байна"}),n&&t?r.a.createElement("h4",{className:"text-center"},t,"-",n,a?"-"+a:""):r.a.createElement("h4",{className:"text-center"}," Model-",t,a?"-"+a:""),r.a.createElement("hr",null),r.a.createElement("div",null,l&&l.length>0?l.map((function(n,a){return r.a.createElement("div",{key:a,className:"row my-3"},r.a.createElement("div",{className:"col-md-4 overflow-hidden test-wrap"},r.a.createElement("label",{className:"col-form-label"},n.field_name)),r.a.createElement("div",{className:"col-md-8"},"radio"==n.field_type?r.a.createElement(z,T({},n,{index:a,setValue:e.getValue})):"select"==n.field_type?r.a.createElement("div",{className:"input-group"},r.a.createElement(q,T({},n,{index:a,setValue:e.getValue,can_connect_feature:u&&"false"==l[u].data})),"code_list_config"!=t&&e.checkSelectAddData(n)?r.a.createElement("a",{className:"input-group-btn"},r.a.createElement("i",{role:"button",className:"fa fa-plus-square gp-text-primary input-group-addon fa-2x m-0 p-0",onClick:function(){return e.makeModel()},"aria-hidden":"true"})):null):r.a.createElement($,T({},n,{index:a,setValue:e.getValue,model_name:t}))))})):null,r.a.createElement("div",{className:""!==c?" row":""},c&&"value_type"!=t?r.a.createElement("a",{className:"btn col-md-4 btn-danger mr-1 text-white",onClick:function(){return e.openModal("times-circle text-danger","Устгах","Та ".concat(n," - нэртэй ").concat(t,"-г устгахдаа итгэлтэй байна уу ?"),e.handleRemove)}},"Устгах"):null,r.a.createElement("button",{type:"button",onClick:function(){return e.openModal("check-circle text-success",f,"Та ".concat(c?"".concat(n," - нэртэй"):""," ").concat(t,"-г ").concat(f.toLowerCase(),"даа итгэлтэй байна уу ?"),e.onSubmit)},className:"btn ".concat(c?"col-md-7":"btn-block"," gp-btn-primary")},f))))}}])&&M(t.prototype,n),a&&M(t,a),l}(a.Component);function q(e){var t=L(Object(a.useState)(e.data),2),n=t[0],o=t[1];return r.a.createElement("select",{className:"form-control",placeholder:e.field_name,disabled:e.can_connect_feature&&e.field_name.includes("connect_feature")?"disabled":"",value:n,onChange:function(t){var n=t.target.value;o(n),e.setValue(n,e.index)}},r.a.createElement("option",{value:""}," --- Сонгоно уу --- "),e.options.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))}function $(e){var t=L(Object(a.useState)(e.data),2),n=t[0],o=t[1];return r.a.createElement("input",{type:e.field_type,placeholder:e.field_name,onChange:function(t){var n=t.target.value;o(n),e.setValue(n,e.index)},value:n,className:"form-control",disabled:e.data&&e.field_name.includes("id")&&e.field_name!=e.model_name+"_id"?"disabled":""})}function z(e){var t=L(Object(a.useState)(e.data.toString()),2),n=t[0],o=t[1];Object(a.useEffect)((function(){o(e.data.toString())}),[e.data]);var l=function(t){o(t.target.value),e.setValue(t.target.value,e.index)};return r.a.createElement("div",{className:"form-check"},r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"".concat(e.field_name,"-true"),name:e.field_name,checked:"true"==n,value:"true",onChange:l})," ",r.a.createElement("label",{htmlFor:"".concat(e.field_name,"-true")},"True")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"".concat(e.field_name,"-false"),name:e.field_name,checked:"false"==n,value:"false",onChange:l})," ",r.a.createElement("label",{htmlFor:"".concat(e.field_name,"-false")},"False")))}n(936);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Z(e);if(t){var r=Z(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(l,e);var t,n,a,o=W(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={list_all:[],feature_lists:[],check:"",form_is_laod:!0,form_is_laod_left:!0,model_id:null,model_name:null,code:"",edit_name:"",is_delete:!1,name:"",hideRight:!1,formLorR:"",top_id:"",feature_id:null},t.getAll=t.getAll.bind(Y(t)),t.handleForm=t.handleForm.bind(Y(t)),t.done=t.done.bind(Y(t)),t.handleFormLeft=t.handleFormLeft.bind(Y(t)),t.isDelete=t.isDelete.bind(Y(t)),t.remove=t.remove.bind(Y(t)),t.delete=t.delete.bind(Y(t)),t.deleteAndRemove=t.deleteAndRemove.bind(Y(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.getAll()}},{key:"getAll",value:function(){var e=this,t=this.state,n=t.formLorR,a=t.code,r=t.feature_id;s.getall().then((function(t){var o=t.success,l=t.data;o&&e.setState({list_all:l}),"right"==n&&(e.getProperties(a,r),e.setState({hideRight:!0})),"left"==n&&e.setState({hideRight:!1})}))}},{key:"getProperties",value:function(e,t){var n=this;this.setState({form_is_laod:!0}),s.getprop(e).then((function(a){a.success&&n.setState({feature_lists:a.feature_lists,check:a.check,code:e,hideRight:!0,feature_id:t})}))}},{key:"handleForm",value:function(e,t,n){n?this.setState({form_is_laod:!1,model_id:t,edit_name:n,model_name:e,hideRight:!0}):this.setState({form_is_laod:!1,model_name:e,model_id:t,edit_name:"",hideRight:!0})}},{key:"handleFormLeft",value:function(e,t,n,a){n?this.setState({form_is_laod_left:!1,model_name:e,edit_name:n,model_id:t,top_id:a}):this.setState({form_is_laod_left:!1,model_name:e,model_id:t,edit_name:"",top_id:a})}},{key:"done",value:function(){this.setState({form_is_laod_left:!0})}},{key:"isDelete",value:function(){this.setState({is_delete:!this.state.is_delete})}},{key:"remove",value:function(e,t,n,a){var r={modal_status:"open",modal_icon:modal_icon,modal_bg:modal_bg,icon_color:icon_color,title:title,text:text,has_button:has_button,actionNameBack:actionNameBack,actionNameDelete:actionNameDelete,modalAction:modalAction,modalClose:modalClose};this.props.setModal(r),this.setState({model_name:e,model_id:t,name:n,formLorR:a})}},{key:"deleteAndRemove",value:function(e,t){var n=this;s.remove(e,t).then((function(e){var t=e.success,a=e.info;t?(n.setState({hideRight:!1}),n.getAll()):alert(a),n.setState({info:a,top_id:""})})).catch((function(){alert("Алдаа гарсан байна")}))}},{key:"delete",value:function(){var e=this,t=this.state,n=t.model_name,a=t.model_id,r=t.formLorR,o=t.code,l=t.top_id;"left"==r&&this.deleteAndRemove(n,a),"right"==r&&l?s.erese(n,a,l).then((function(t){var n=t.success,a=t.info;n?(e.setState({hideRight:!0}),e.getProperties(o)):alert(a),e.setState({info:a,top_id:""})})).catch((function(){alert("Алдаа гарсан байна")})):this.deleteAndRemove(n,a)}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.list_all,o=n.form_is_laod_left,l=n.model_name,i=n.model_id,c=n.code,u=n.edit_name,s=n.is_delete,f=(n.info,n.hideRight);return r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"card col-md-4 right-scroll-sticky"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"icheck-danger float-right"},r.a.createElement("input",{type:"checkbox",id:"active-delete",onChange:function(){return t.isDelete()}}),r.a.createElement("label",{htmlFor:"active-delete"},"Устгах")),o?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",(H(e={className:"gp-text-primary",type:"button"},"className","gp-text-primary"),H(e,"onClick",(function(){return t.handleForm("theme",null)})),e),r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary"}),"  Дэд сан нэмэх")),a.map((function(e,n){return r.a.createElement("li",{key:n},r.a.createElement("div",null,r.a.createElement("span",{role:"button",className:"gp-text-primary",onClick:function(){return t.handleForm("theme",e.id,e.name)}},e.name)," ",s&&r.a.createElement("i",{className:"fa fa-trash text-danger fa-1x",role:"button",onClick:function(){return t.remove("theme",e.id,e.name)}})),r.a.createElement("ul",null,e.package.map((function(e,n){return r.a.createElement("li",{key:n},r.a.createElement("div",null,r.a.createElement("span",{role:"button",className:"gp-text-primary",onClick:function(){return t.handleForm("package",e.id,e.name)}},e.name)," ",s&&r.a.createElement("i",{className:"fa fa-trash text-danger fa-1x",role:"button",onClick:function(){return t.remove("package",e.id,e.name)}})),r.a.createElement("ul",null,e.features.map((function(e,n){return r.a.createElement("li",{key:n},r.a.createElement("a",{onClick:function(){return t.getProperties(e.code,e.id)}},r.a.createElement("i",{className:"fa fa-table"}),"  ",r.a.createElement("span",{role:"button",className:"hidden-xs gp-text-primary"},e.name))," ",s&&r.a.createElement("i",{className:"fa fa-trash text-danger fa-1x",role:"button",onClick:function(){return t.remove("feature",e.id,e.name)}}))})),r.a.createElement("li",null,r.a.createElement("a",{type:"button",className:"gp-text-primary",onClick:function(){return t.handleForm("feature",e.id)}},r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary"}),"  Давхрага нэмэх"))))})),r.a.createElement("li",null,r.a.createElement("a",{type:"button",className:"gp-text-primary",onClick:function(){return t.handleForm("package",e.id)}},r.a.createElement("i",{className:"fa fa-plus-circle gp-text-primary"}),"  Багц нэмэх"))))}))):r.a.createElement("div",null,r.a.createElement("a",{className:"btn gp-outline-primary",onClick:function(){return t.done()}},r.a.createElement("i",{className:"fa fa-angle-double-left"})," Болсон"),r.a.createElement(U,{setModal:this.props.setModal,model_name:l,model_id:i,refresh:function(){return t.getProperties(c)},handleFormLeft:this.handleFormLeft,code:c,done:function(){return t.done()},edit_name:u,remove:this.delete,type:"right",top_id:this.state.top_id})))),r.a.createElement("div",{className:"card col-md-8",style:{left:"10px"}},r.a.createElement("div",{className:"card-body"},this.state.form_is_laod?r.a.createElement(R,{setNotif:this.props.setNotif,features:this.state.feature_lists,check:this.state.check,feature_id:this.state.feature_id,handleFormLeft:this.handleFormLeft,handleForm:function(){return t.handleForm()},hide:f,list_all:a}):r.a.createElement(U,{setModal:this.props.setModal,model_name:l,model_id:i,refresh:this.getAll,done:function(){return t.done()},edit_name:u,remove:function(){return t.delete.apply(t,arguments)},type:"left"}))))}}])&&K(t.prototype,n),a&&K(t,a),l}(a.Component);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ie(e);if(t){var r=ie(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(i,e);var t,n,a,l=oe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={},t}return t=i,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/back/дэд-сан-бүтэц/",component:function(t){return r.a.createElement(ee,ne({},t,{setModal:e.props.setModal,setNotif:e.props.setNotif}))}})))}}])&&ae(t.prototype,n),a&&ae(t,a),i}(a.Component)}}]);