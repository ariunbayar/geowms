(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{120:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),r=n.n(a);n(121);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,o=s(u);function u(){return l(this,u),o.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.props.is_loading?r.a.createElement("div",{className:"loader text-center"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),r.a.createElement("br",null),this.props.text?this.props.text:"Түр хүлээнэ үү...")):null}}])&&c(t.prototype,n),a&&c(t,a),u}(a.Component)},944:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ln}));var a=n(0),r=n.n(a),o=n(13),l=(n(246),n(584)),c=n(69),i=n(33),s=n(976),u=n(172),m=n(304),f=n(303),p=n(568),y=n(223),d=n(226),h=n(348),_=n(131),b=n(197),g=n(228);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={checkStyleName:function(e,t){var n=E(E({},Object(g.b)()),{},{body:JSON.stringify({style_name:e,style_update:t})});return fetch("".concat(O,"/check-style-name/"),n).then(g.c)},getStyleData:function(e){var t=E(E({},Object(g.b)()),{},{body:JSON.stringify({geom_type:e})});return fetch("".concat(O,"/style-data/"),t).then(g.c)},createStyle:function(e,t,n,a,r,o){var l=E(E({},Object(g.b)()),{},{body:JSON.stringify({style_datas:e,style_name:t,style_title:n,style_abstract:a,style_update:r,old_style_name:o})});return fetch("".concat(O,"/create-style/"),l).then(g.c)},convertSldToJson:function(e){var t=E(E({},Object(g.b)()),{},{body:JSON.stringify({file_content:e})});return fetch("".concat(O,"/conver-sld-json/"),t).then(g.c)},getStyleList:function(){var e=E({},Object(g.a)());return fetch("".concat(O,"/style-list/"),e).then(g.c)},removeStyle:function(e){var t=E(E({},Object(g.b)()),{},{body:JSON.stringify({style_name:e})});return fetch("".concat(O,"/style-remove/"),t).then(g.c)},getStyleDetail:function(e){var t=E(E({},Object(g.b)()),{},{body:JSON.stringify({style_name:e})});return fetch("".concat(O,"/style-detail/"),t).then(g.c)}},O="/back/geoserver/rest";var k=n(14),x=n.n(k),N=n(58),j=n(19);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){M(n,e);var t=z(n);function n(e){var a;return C(this,n),(a=t.call(this,e)).handleCoordinateSet=a.handleCoordinateSet.bind(L(a)),a}return D(n,[{key:"componentDidMount",value:function(){this.handleCoordinateSet()}},{key:"componentDidUpdate",value:function(e){this.handleCoordinateSet()}},{key:"handleCoordinateSet",value:function(){var e=x.a.findDOMNode(this);e.focus(),e.select()}},{key:"render",value:function(){return r.a.createElement("input",{type:"text",className:"form-control col-md-12 text-center border border-primary",onChange:function(){},onBlur:this.props.handleBlur,value:this.props.coordinate})}}]),n}(a.Component),U=function(e){M(n,e);var t=z(n);function n(){var e;C(this,n),e=t.call(this,{element:document.createElement("div")});var a="coordinate-copy-control ".concat(j.b," ").concat(j.c);return e.element.className=a,e.element.style.right="0",e.element.style.margin="10px",e.element.style.width="auto",e.renderComponent=e.renderComponent.bind(L(e)),e}return D(n,[{key:"renderComponent",value:function(e){this.is_component_initialized||(x.a.render(r.a.createElement(q,e),this.element),this.is_component_initialized=!0),x.a.hydrate(r.a.createElement(q,e),this.element)}},{key:"setCoordinate",value:function(e){this.renderComponent({coordinate:e})}}]),n}(N.a);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=W(e);if(t){var r=W(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(g,e);var t,n,a,o=V(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=o.call(this,e)).controls={zoomControl:new U},t.state={geojson:[],dataProjection:"EPSG:4326",featureProjection:"EPSG:3857",style_state:e.style_state,style_color:e.style_color,style_size:e.style_size,fill_color:e.fill_color,style_name:e.style_name,view_name:e.view_name?e.view_name:"geoserver_design_view",url:e.url,defualt_url:e.defualt_url,geom_type:e.geom_type,dashed_line_gap:e.dashed_line_gap,dashed_line_length:e.dashed_line_length,color_opacity:e.color_opacity,wellknownname:e.wellknownname,is_loading:!1,style_datas:e.style_datas},t.loadMapData=t.loadMapData.bind(Z(t)),t.loadMap=t.loadMap.bind(Z(t)),t.handleZoom=t.handleZoom.bind(Z(t)),t.handleZoomIn=t.handleZoomIn.bind(Z(t)),t.styleFunction=t.styleFunction.bind(Z(t)),t}return t=g,(n=[{key:"componentDidMount",value:function(){this.loadMap(),this.props.only_clicked&&this.loadMapData()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.style_color,r=n.style_size,o=n.fill_color,l=(n.style_name,n.dashed_line_gap),c=n.dashed_line_length,i=n.color_opacity,s=n.wellknownname,u=n.geom_type,m=n.only_clicked,f=n.style_datas;e.color_opacity!=i&&this.setState({color_opacity:i}),e.dashed_line_length!=c&&this.setState({dashed_line_length:c}),e.dashed_line_gap!=l&&this.setState({dashed_line_gap:l}),e.wellknownname!=s&&this.setState({wellknownname:s}),e.style_size!=r&&this.setState({style_size:r}),e.fill_color!=o&&this.setState({fill_color:o}),e.style_color!=a&&this.setState({style_color:a}),e.geom_type!=u&&this.setState({geom_type:u}),e.style_datas!=f&&this.setState({style_datas:f}),e.only_clicked!=m&&this.props.only_clicked&&this.loadMapData()}},{key:"loadMap",value:function(){var e=new l.a({layers:[new c.a({source:new s.a})],target:"map",controls:Object(i.a)().extend([this.controls.zoomControl]),view:new m.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});e.on("moveend",this.handleZoom),this.map=e}},{key:"styleFunction",value:function(e,t){var n=t.style_color,a=t.style_size,r=t.fill_color,o=t.dashed_line_gap,l=t.dashed_line_length,c=t.color_opacity,i=t.wellknownname;if("Point"==e||"MultiPoint"==e)if(i&&"circle"!=i){var s=(0).points,u=(0).radius,m=(0).angle,f=(0).rotation,b=(0).radius2;"square"==i?(s=4,u=10,m=Math.PI/4):"triangle"==i?(s=3,u=10,f=Math.PI/4,m=0):"star"==i?(s=5,u=10,b=4,m=0):"x"==i&&(s=4,u=10,b=0,m=0);var g=new p.a({fill:new y.a({color:r}),stroke:new d.a({color:n,width:a,lineDash:l?[o,l]:""}),points:s,radius:u,radius2:b,rotation:f,angle:m})}else g=new h.a({radius:5,fill:new y.a({color:r}),stroke:new d.a({color:n,width:a})});return{MultiPolygon:new _.c({stroke:new d.a({color:n,width:a,lineDash:l?[o,l]:""}),fill:new y.a({color:r,opacity:c})}),Polygon:new _.c({stroke:new d.a({color:n||"#21130d",width:a,lineDash:l?[o,l]:""}),fill:new y.a({color:r,opacity:c})}),Point:new _.c({image:g}),LineString:new _.c({stroke:new d.a({color:n||"#21130d",width:a,lineDash:l?[o,l]:""}),fill:new y.a({color:r,opacity:c})}),MultiLineString:new _.c({stroke:new d.a({color:n,width:a,lineDash:l?[o,l]:""}),fill:new y.a({color:r,opacity:c})}),MultiPoint:new _.c({image:g})}[e]}},{key:"handleZoomIn",value:function(e,t){var n=this.state.style_datas,a=Object.keys(n).length,r=this.styleFunction;if(0<=e&&e<=21&&n&&a>0){var o=n[0].max_range,l=[];t<=o&&(l=n[0],n.slice(1,a).map((function(e,n){e.min_range<=t&&t<=e.max_range&&(l=e)}))),l&&Object.keys(l).length>0?this.map.getLayers().forEach((function(e){e&&"style_layer"===e.get("id")&&e.getSource().getFeatures().forEach((function(e){var t=e.getGeometry().getType();e.setStyle(r(t,l))}))})):this.map.getLayers().forEach((function(e){e&&"style_layer"===e.get("id")&&e.getSource().getFeatures().forEach((function(e){e.setStyle(new _.c({}))}))}))}}},{key:"handleZoom",value:function(e){var t=e.map.getView().getZoom(),n=21-parseInt(t),a=133.2955989906115*Math.pow(2,n);this.controls.zoomControl.setCoordinate(a),this.handleZoomIn(t,a)}},{key:"loadMapData",value:function(){var e=this,t=this.state,n=t.dataProjection,a=t.featureProjection,r=t.geom_type,o=t.style_datas,l=this.state;this.setState({is_loading:!0}),S.getStyleData(r).then((function(t){var r=t.data;if(r){e.map.getLayers().forEach((function(e){e&&"style_layer"===e.get("id")&&e.getSource().clear()}));var c=new f.a({dataProjection:n,featureProjection:a}).readFeatures(r),i=new u.a({features:c}),s=new b.a({source:i,style:Object.keys(o).length>0?new _.c({}):function(e,t){var n=e.getGeometry().getType();return this.styleFunction(n,l)},id:"style_layer"});e.map.addLayer(s),e.map.getView().fit(i.getExtent(),{padding:[200,200,200,200],duration:3e3}),e.setState({is_loading:!1})}}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 w-100"},r.a.createElement("div",{id:"map",style:{height:"80vh"}})),this.state.is_loading?r.a.createElement("span",{className:"text-center d-block text-sp",style:{position:"fixed",top:"60%",right:"20%"}}," ",r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"})," ",r.a.createElement("br",null)," Түр хүлээнэ үү... "):null)}}])&&G(t.prototype,n),a&&G(t,a),g}(a.Component);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=te(e);if(t){var r=te(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(l,e);var t,n,a,o=Q(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={},t.handleOnChange=t.handleOnChange.bind(ee(t)),t}return t=l,(n=[{key:"handleOnChange",value:function(e){this.props.handleOnChange(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.had_chosen,o=t.data_state;return r.a.createElement("div",{className:"col-md-12 d-inline-block mx-0 px-0"},n.range_number&&n.range_number>0&&a>0&&r.a.createElement("div",{className:"col-md-12 px-0"},1==n.index_of_range?r.a.createElement("div",{className:"col-md-12 d-flex my-2"},r.a.createElement("div",{className:"col-md-6 mb-2"},r.a.createElement("label",{htmlFor:""},"Max scale"),r.a.createElement("input",{className:"form-control",name:"max_range",type:"number",value:n.max_range,onChange:function(t){return e.handleOnChange(t)}}))):r.a.createElement("div",{className:"col-md-12 d-flex my-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:""},"Min scale"),r.a.createElement("input",{className:"form-control",name:"min_range",type:"number",value:n.min_range,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-6 mb-2 mx-0 px-0"},r.a.createElement("label",{htmlFor:""},"Max scale"),r.a.createElement("input",{className:"form-control",name:"max_range",type:"number",value:n.max_range,onChange:function(t){return e.handleOnChange(t)}})))),r.a.createElement("div",null,n&&(o||a>0)&&r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-12 d-flex mx-0 my-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:""},"Style-ийн төрөл"),r.a.createElement("select",{className:"form-control",name:"shape_type",value:n.shape_type,onChange:function(t){return e.handleOnChange(t)}},r.a.createElement("option",{value:""},"--------------------------"),n.shape_types.map((function(e,t){return r.a.createElement("option",{value:e.geo_name,key:t},e.name)})))),r.a.createElement("div",{className:"col-md-6 px-0"},r.a.createElement("label",{htmlFor:"rule_name"},"Rule-ийн нэр"),r.a.createElement("input",{type:"text",name:"rule_name",className:"form-control",value:n.rule_name,onChange:function(t){return e.handleOnChange(t)}}))),n.shape_type&&r.a.createElement("div",{className:"col-md-12"},("PointSymbolizer"==n.shape_type||"PolygonSymbolizer"==n.shape_type)&&r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Дүрсийн дүүргэлтийн өнгө"),r.a.createElement("input",{type:"color",name:"fill_color",className:"form-control col-4",value:n.fill_color,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Хүрээний өнгө"),r.a.createElement("input",{type:"color",name:"style_color",className:"form-control col-4",value:n.style_color,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"id_geoserver_user"},"Хүрээний өргөн"),r.a.createElement("input",{name:"style_size",type:"number",className:"form-control col-4",id:"style_size",value:n.style_size,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Өнгөний уусгалт"),r.a.createElement("input",{type:"number",name:"color_opacity",className:"form-control col-4",value:n.color_opacity,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Зураасын урт"),r.a.createElement("input",{type:"number",name:"dashed_line_length",className:"form-control col-4",value:n.dashed_line_length,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-0 p-0"},"Зураас хоорондох зай"),r.a.createElement("input",{type:"number",name:"dashed_line_gap",className:"form-control col-4",value:n.dashed_line_gap,onChange:function(t){return e.handleOnChange(t)}})),"PointSymbolizer"==n.shape_type&&r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"wellknownname"},"Дүрсний сонголт"),r.a.createElement("select",{className:"form-control form-control-sm",name:"wellknownname",value:n.wellknownname,onChange:function(t){return e.handleOnChange(t)}},r.a.createElement("option",{value:"circle"},"Дугуй"),r.a.createElement("option",{value:"square"},"Дөрвөлжин"),r.a.createElement("option",{value:"triangle"},"Гурвалжин"),r.a.createElement("option",{value:"star"}," Од"),r.a.createElement("option",{value:"x"}," Хэрээс")))))))}}])&&$(t.prototype,n),a&&$(t,a),l}(a.Component),ae=n(75);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=me(e);if(t){var r=me(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(l,e);var t,n,a,o=ie(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).style_datas=[],t.file_content={},t.state={style_color:"#800000",rule_name:"",style_size:1,fill_color:"#C0C0C0",wellknownname:"circle",wellknowshape:"",div_angle:"",color_opacity:.3,dashed_line_length:0,dashed_line_gap:0,check_style_name:"",range_number:"",had_chosen:0,style_name:"",style_title:"",style_abstract:"",check_style:!0,min_range:0,max_range:0,geom_type:"Point",shape_type:"PointSymbolizer",label_check:!1,shape_types:[{name:"Point",geo_name:"PointSymbolizer"},{name:"LineString",geo_name:"LineSymbolizer"},{name:"Polygon",geo_name:"PolygonSymbolizer"}],only_clicked:!1,prev_style_name:"",single_select_datas:[],data_state:!0,modal_status:"closed",modal_icon:"fa fa-check-circle",icon_color:"success",modal_text:"",sld_file:"",check_style_content:!0,desing_file_content:[],old_style_name:""},t.handleOnChange=t.handleOnChange.bind(ue(t)),t.handleOnClick=t.handleOnClick.bind(ue(t)),t.handleSubmit=t.handleSubmit.bind(ue(t)),t.ReadFileContent=t.ReadFileContent.bind(ue(t)),t.handleStyleDetial=t.handleStyleDetial.bind(ue(t)),t.handleSetStyleValues=t.handleSetStyleValues.bind(ue(t)),t.handleSetXml=t.handleSetXml.bind(ue(t)),t.handleModalOpen=t.handleModalOpen.bind(ue(t)),t.modalChange=t.modalChange.bind(ue(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.style_name;e&&this.handleStyleDetial(e)}},{key:"handleStyleDetial",value:function(e){var t=this;this.setState({is_loading:!0}),S.getStyleDetail(e).then((function(e){var n=e.style_content,a=e.check_style_content,r=e.simple_details;a?t.handleSetXml(n,r):n&&t.handleSetStyleValues(n)}))}},{key:"handleSetXml",value:function(e,t){t&&Object.keys(t).length>0?this.setState({check_style_content:!1,desing_file_content:e,style_name:t.style_name,style_title:t.style_title,style_abstract:t.style_abstract,old_style_name:t.old_style_name}):this.modalChange("fa fa-times-circle",null,"danger","Буруу форматтай файл байна","",!1,"","",null,null)}},{key:"handleSetStyleValues",value:function(e){var t=this,n=e.shape_rules,a=this.state.shape_types,r=this.props.match.params.style_name,o=Object.keys(n).length;if(n&&o>0){n.map((function(e,n){t.style_datas.push({index_of_range:n+1,range_number:o,min_range:e.min_range,max_range:e.max_range,style_color:e.style_color,style_size:e.style_size,fill_color:e.fill_color,wellknownname:e.wellknownname,color_opacity:e.color_opacity,dashed_line_length:e.dashed_line_length,dashed_line_gap:e.dashed_line_gap,shape_types:a,shape_type:e.shape_type,rule_name:e.rule_name})}));var l=this.style_datas[0];this.setState({style_name:e.style_name,style_title:e.style_title,style_abstract:e.style_abstract,geom_type:e.geom_type,range_number:o,single_select_datas:l,old_style_name:r,check_style_content:!0,had_chosen:1})}else this.setState({style_name:e.style_name,style_title:e.style_title,style_abstract:e.style_abstract,geom_type:e.geom_type,min_range:e.min_range,max_range:e.max_range,style_color:e.style_color,style_size:e.style_size,fill_color:e.fill_color,wellknownname:e.wellknownname,color_opacity:e.color_opacity,dashed_line_length:e.dashed_line_length,dashed_line_gap:e.dashed_line_gap,shape_type:e.shape_type,rule_name:e.rule_name,old_style_name:r,check_style_content:!0})}},{key:"ReadFileContent",value:function(e){var t=this,n=e.target.files[0],a=new FileReader;a.readAsText(n),a.onload=function(){var e;e=a.result,t.setState({sld_file:e})}}},{key:"handleOnChange",value:function(e){var t=this.state,n=t.style_size,a=t.style_color,r=t.fill_color,o=t.wellknownname,l=t.wellknowshape,c=t.div_angle,i=t.color_opacity,s=t.dashed_line_length,u=t.dashed_line_gap,m=t.min_range,f=t.max_range,p=t.had_chosen,y=t.shape_types,d=t.shape_type,h=t.rule_name,_=e.target.name,b=e.target.value;if("style_name"==_&&(b=b.replace(/ /g,"_")),"range_number"==_){if(b>0)for(var g=1;g<=b;g++)this.style_datas.push({index_of_range:g,range_number:b,min_range:m,max_range:f,style_color:a,style_size:n,fill_color:r,wellknownname:o,wellknowshape:l,div_angle:c,color_opacity:i,dashed_line_length:s,dashed_line_gap:u,shape_types:y,shape_type:d,rule_name:h});this.setState({single_select_datas:this.style_datas[0],data_state:!1})}if("range_number"!=_&&"had_chosen"!=_){if(this.style_datas.length>0&&p>0){var v=this.style_datas.findIndex((function(e){return e.index_of_range==p}));this.style_datas[v][_]=b,"shape_type"==_&&this.style_datas.map((function(e,t){e.shape_type=b})),"wellknownname"==_&&this.style_datas.map((function(e,t){e.wellknownname=b}))}if("shape_type"==_){v=y.findIndex((function(e){return e.geo_name==b}));var E=y[v].name;this.setState({geom_type:E})}}this.setState(oe({},_,b))}},{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.state,r=a.style_color,o=a.style_size,l=a.fill_color,c=a.style_name,i=a.dashed_line_gap,s=a.dashed_line_length,u=a.color_opacity,m=a.wellknownname,f=a.had_chosen,p=a.shape_type,y=a.check_style,d=a.min_range,h=a.max_range,_=a.range_number,b=a.check_style_content,g=a.sld_file;if(t.style_color==r&&t.style_size==o&&t.fill_color==l&&t.style_name==c&&t.dashed_line_gap==i&&t.dashed_line_length==s&&t.color_opacity==u&&t.wellknownname==m&&t.shape_type===p&&t.check_style==y||this.setState({style_size:o,fill_color:l,style_color:r,style_name:c,color_opacity:u,wellknownname:m,dashed_line_gap:i,dashed_line_length:s,min_range:d,max_range:h,shape_type:p,check_style:!1,only_clicked:!1}),t.had_chosen!==f&&f){if(f>0)var v=this.style_datas[f-1];else v=this.style_datas[0];this.setState({style_color:v.style_color,style_size:v.style_size,fill_color:v.fill_color,wellknownname:v.wellknownname,wellknowshape:v.wellknowshape,div_angle:v.div_angle,color_opacity:v.color_opacity,dashed_line_length:v.dashed_line_length,dashed_line_gap:v.dashed_line_gap,min_range:v.min_range,max_range:v.max_range,shape_type:v.shape_type,single_select_datas:v})}t.range_number!==_&&(!_||_<1?this.setState(oe({style_size:1,fill_color:"#C0C0C0",wellknownname:"",wellknowshape:"",div_angle:"",color_opacity:.3,dashed_line_length:0,dashed_line_gap:0,min_range:0,max_range:0,shape_type:"",style_color:"#800000",range_number:_,data_state:!0,geom_type:"Point"},"shape_type","PointSymbolizer")):this.style_datas&&this.style_datas.length>0&&(this.style_datas[0].range_number=_,v=this.style_datas[0],this.setState({single_select_datas:v,data_state:!1}))),t.check_style_content!==b&&this.setState({check_style_content:b}),t.sld_file!=g&&(this.setState({sld_file:g,desing_file_content:[],style_name:"",style_title:"",style_abstract:"",check_style_name:""}),S.convertSldToJson(g).then((function(e){var t=e.style_content,a=e.check_style_content,r=e.simple_details;a?n.handleSetXml(t,r):t&&n.handleSetStyleValues(t)})))}},{key:"handleSubmit",value:function(){var e=this,t=this.state,n=t.style_name,a=t.style_title,r=t.style_abstract,o=t.desing_file_content,l=t.old_style_name,c=this.props.match.params.style_name,i=this.state;o&&o.length>0?i=o:this.style_datas&&this.style_datas.length>0&&(i=this.style_datas),S.createStyle(i,n,a,r,c,l).then((function(t){var n=t.success,a=t.info;n?e.modalChange("fa fa-check-circle",null,"success",a,"",!1,"","",null,(function(){return e.props.history.push("/back/gp-geoserver/style/")})):e.modalChange("fa fa-times-circle",null,"danger",a,"",!1,"","",null,null)}))}},{key:"handleOnClick",value:function(){var e=this,t=this.state,n=t.style_name,a=t.prev_style_name,r=t.check_style_name;if(n)if(n!=a){var o=this.props.match.params.style_name;this.setState({is_loading:!0,prev_style_name:n}),S.checkStyleName(n,o).then((function(t){var n=t.success,a=t.info;n?e.setState({is_loading:!1,check_style:!1,only_clicked:!0,check_style_name:""}):e.setState({is_loading:!1,check_style_name:a,check_style:!0,only_clicked:!1})}))}else r?this.setState({check_style:!0,only_clicked:!1}):this.setState({check_style:!1,only_clicked:!0});else this.setState({check_style_name:"Style-ийн нэр хоосон байна",check_style:!0,only_clicked:!1})}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,n,a,r,o,l,c,i,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:r,has_button:o,actionNameBack:l,actionNameDelete:c,modalAction:i,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.range_number,a=t.had_chosen,o=t.style_name,l=t.style_title,c=t.style_abstract,i=t.fill_color,s=t.style_color,u=t.style_size,m=t.color_opacity,f=t.dashed_line_gap,p=t.dashed_line_length,y=t.check_style,d=t.check_style_name,h=t.wellknownname,_=t.wellknowshape,b=t.div_angle,g=t.only_clicked,v=t.single_select_datas,E=t.geom_type,w=t.data_state,S=t.check_style_content,O=t.desing_file_content,k=this.props.match.params.style_name;return r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"",className:"col-md-6 my-2"},"Нэр"),r.a.createElement("input",{name:"style_name",id:"style_name",type:"text",className:"form-control col-md-6",value:o,onChange:function(t){return e.handleOnChange(t)}})),d&&r.a.createElement("label",{className:"text-danger col-md-12 text-center d-inline-block"},d),r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"style_title",className:"col-md-6 my-2"},"Гарчиг"),r.a.createElement("input",{name:"style_title",id:"style_title",type:"text",value:l,className:"form-control col-md-6 mt-2",onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"style_abstract",className:"col-md-6 my-2"},"Товч тайлбар"),r.a.createElement("textarea",{name:"style_abstract",id:"style_abstract",type:"text",value:c,className:"form-control col-md-6 mt-2",onChange:function(t){return e.handleOnChange(t)}})),!k&&r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"sld_file",className:"col-md-6 my-2"},"Sld file оруулах"),r.a.createElement("input",{name:"sld_file",id:"sld_file",type:"file",className:"form-control mt-2",onChange:function(t){return e.ReadFileContent(t)}})),S?r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-12 d-flex"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"range_number"},"Scale-ийн тоо"),r.a.createElement("input",{className:"form-control",name:"range_number",type:"number",onChange:function(t){return e.handleOnChange(t)},value:n})),n&&n>0&&r.a.createElement("div",{className:"col-md-6 d-inline-block"},r.a.createElement("label",{htmlFor:"range_number"}),r.a.createElement("select",{className:"form-control mt-2",name:"had_chosen",onChange:function(t){return e.handleOnChange(t)},value:a},r.a.createElement("option",{className:"col-md-12",value:0}),function(){for(var e=[],t=1;t<=n;t++)e.push(r.a.createElement("option",{key:t,className:"col-md-12"},t));return e}()))),r.a.createElement("div",{className:"col-md-12 px-0"},n&&n>0?r.a.createElement(ne,{value:v,handleOnChange:this.handleOnChange,had_chosen:a,data_state:w}):r.a.createElement(ne,{value:this.state,handleOnChange:this.handleOnChange,data_state:w}),r.a.createElement("div",{className:"col-md-12 my-4"},r.a.createElement("button",{type:"button",className:"btn btn-warning col-md-6 mx-3",disabled:y,onClick:this.handleOnClick},"Style шалгах")))):r.a.createElement("div",{className:"col-md-12 d-flex"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("textarea",{name:"desing_file_content",id:"desing_file_content",type:"text",value:O,className:"form-control col-md-12 mt-2 overflow-auto",style:{height:"80vh"},onChange:function(t){return e.handleOnChange(t)}}))))),r.a.createElement("div",{className:"col-md-6"},S&&r.a.createElement(X,{style_color:s,style_size:u,fill_color:i,geom_type:E,check_style:y,wellknownname:h,wellknowshape:_,div_angle:b,color_opacity:m,dashed_line_length:p,dashed_line_gap:f,only_clicked:g,style_datas:this.style_datas})),r.a.createElement("div",{className:"col-md-6 px-4 mt-2"},r.a.createElement("button",{type:"button",className:"btn gp-btn-outline-primary waves-effect waves-light col-md-12 mx-3",disabled:y,onClick:this.handleSubmit},"Хадгалах")),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,title:this.state.title,text:this.state.text,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}))}}])&&le(t.prototype,n),a&&le(t,a),l}(a.Component),pe=n(31),ye=n(120);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Se(e);if(t){var r=Se(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(l,e);var t,n,a,o=ve(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={items:e.item_list,page:e.page,total_page:1,total_items:e.total_item,is_loading:!1,search_query:e.search_query,per_page:e.per_page,color:e.color?e.color:"dark",filter_name:e.filter_name?e.filter_name:""},t.paginate=t.paginate.bind(we(t)),t.load=t.load.bind(we(t)),t.prevPage=t.prevPage.bind(we(t)),t.nextPage=t.nextPage.bind(we(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.state,t=e.page,n=e.per_page,a=e.items,r=e.search_query,o=e.filter_name,l=e.total_items;this.load(t,n,a,r,o,l)}},{key:"load",value:function(e,t,n,a,r,o){this.paginate(e,t,n,a,r,o)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.page,r=n.per_page,o=n.item_list,l=n.search_query,c=n.filter_name,i=n.total_items;e.item_list==this.props.item_list&&e.page==a&&e.search_query==l&&e.filter_name==c&&e.total_items==i||(this.setState({search_query:l,page:a,items:o,filter_name:c,total_items:i}),this.load(a,r,o,l,c,i))}},{key:"paginate",value:function(e,t,n,a,r,o){var l=e*t,c=l-t,i={},s=[],u=[],m="";a.length>=1?(u=(s=r?o.filter((function(e){return e[r]?e[r].toString().toLowerCase().includes(a.toLowerCase()):e.toString().toLowerCase().includes(a.toLowerCase())})):o.filter((function(e){return e.toString().toLowerCase().includes(a.toLowerCase())}))).slice(0,s.length),m=Math.ceil(s.length/t),i.total_page=m):(u=n.slice(c,l),m=Math.ceil(n.length/t),i.total_page=m,i.search_query=""),this.props.paginate(u,e,a),this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i))}},{key:"nextPage",value:function(){var e=this.state,t=e.page,n=e.per_page,a=e.items,r=e.search_query,o=e.total_page,l=e.filter_name,c=e.total_items;t<o&&this.load(t+1,n,a,r,l,c)}},{key:"prevPage",value:function(){var e=this.state,t=e.page,n=e.per_page,a=e.items,r=e.search_query,o=e.filter_name,l=e.total_items;t>1&&this.load(t-1,n,a,r,o,l)}},{key:"render",value:function(){var e=this.state,t=e.total_page,n=e.page;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement("strong",null,"Хуудас ",n,"-",t)),r.a.createElement("div",{className:"float-right btn-group group-round"},r.a.createElement("button",{type:" button",className:"btn btn-dark waves-effect waves-light btn-sm",onClick:this.prevPage}," « өмнөх"),r.a.createElement("button",{type:"button",className:"btn btn-dark waves-effect waves-light btn-sm",onClick:this.nextPage},"дараах »"))))}}])&&be(t.prototype,n),a&&be(t,a),l}(a.Component),ke=n(983);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Re(e);if(t){var r=Re(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(l,e);var t,n,a,o=Pe(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o.call(this,e)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.value,n=e.idx;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,n),r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(pe.c,{className:"text-primary",to:"/back/gp-geoserver/style/".concat(t,"/edit/")},r.a.createElement(ke.a,{icon:"fa fa-pencil-square-o text-primary"}))),r.a.createElement("td",null,r.a.createElement("a",{href:"#",onClick:this.props.handleRemove},r.a.createElement(ke.a,{icon:"fa fa-trash-o text-danger"}))))}}])&&Ne(t.prototype,n),a&&Ne(t,a),l}(a.Component);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=qe(e);if(t){var r=qe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?Ae(e):t}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(l,e);var t,n,a,o=Fe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={style_list:[],search_query:"",currentPage:1,stylePerPage:20,is_loading:!1,currentStyles:[],modal_status:"closed"},t.handleListUpdated=t.handleListUpdated.bind(Ae(t)),t.handleStyleDelete=t.handleStyleDelete.bind(Ae(t)),t.handleSearch=t.handleSearch.bind(Ae(t)),t.paginate=t.paginate.bind(Ae(t)),t.handleModalOpen=t.handleModalOpen.bind(Ae(t)),t.modalChange=t.modalChange.bind(Ae(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.handleListUpdated()}},{key:"handleListUpdated",value:function(){var e=this;this.setState({is_loading:!0}),S.getStyleList().then((function(t){var n=t.style_list;e.setState({style_list:n,is_loading:!1})}))}},{key:"handleSearch",value:function(e){""!=e.target.value.length?this.setState({search_query:e.target.value}):(this.setState({search_query:""}),this.handleListUpdated())}},{key:"paginate",value:function(e,t,n){this.setState({currentPage:t,currentStyles:e,search_query:n})}},{key:"handleStyleDelete",value:function(e){var t=this;S.removeStyle(e).then((function(e){var n=e.success,a=e.info;n?t.modalChange("fa fa-check-circle",null,"success",a,"",!1,"","",null,null):t.modalChange("fa fa-times-circle",null,"danger",a,"",!1,"","",null,null),t.handleListUpdated()}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,n,a,r,o,l,c,i,s){var u=this;this.setState({modal_icon:e,modal_bg:t,icon_color:n,title:a,text:r,has_button:o,actionNameBack:l,actionNameDelete:c,modalAction:i,modalClose:s},(function(){return u.handleModalOpen()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.style_list,a=t.currentStyles,o=t.search_query,l=t.stylePerPage,c=t.currentPage,i=t.is_loading;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement(ye.a,{is_loading:i}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-left search-bar"},r.a.createElement("input",{type:"text",className:"form-control",id:"search_query small-input",placeholder:"Хайх",onChange:function(t){return e.handleSearch(t)},value:o}),r.a.createElement("a",null,r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-right"},r.a.createElement(pe.c,{className:"btn gp-btn-primary waves-effect waves-light btn-sm",to:"/back/gp-geoserver/style/add/"},"Нэмэх")))),r.a.createElement("div",{className:"table-responsive table_wrapper ml-2"},r.a.createElement("table",{className:"table table_wrapper_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"}," Нэр "),r.a.createElement("th",{scope:"col"},"Засах"),r.a.createElement("th",{scope:"col"},"Устгах"))),r.a.createElement("tbody",null,0===a.length?r.a.createElement("tr",{className:"text-center"},r.a.createElement("th",{colSpan:"4"},"geoserver дээр style бүртгэлгүй байна")):a.map((function(t,n){return r.a.createElement(De,{key:n,idx:c*l-l+n+1,value:t,handleRemove:function(){return e.modalChange("fa fa-exclamation-circle",null,"warning","Загвар устгах",'Та "'.concat(t,'" нэртэй загварыг устгахдаа итгэлтэй байна уу?'),!0,"Үгүй","Тийм",(function(){return e.handleStyleDelete(t)}),null)}})}))))),r.a.createElement(Oe,{paginate:this.paginate,item_list:n,total_items:n,search_query:o,per_page:l,page:c})),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,modal_bg:this.state.modal_bg,icon_color:this.state.icon_color,title:this.state.title,text:this.state.text,has_button:this.state.has_button,actionNameBack:this.state.actionNameBack,actionNameDelete:this.state.actionNameDelete,modalAction:this.state.modalAction,modalClose:this.state.modalClose}))}}])&&Te(t.prototype,n),a&&Te(t,a),l}(a.Component);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ze(e);if(t){var r=Ze(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(c,e);var t,n,a,l=Ve(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return t=c,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/back/gp-geoserver/style/",component:Ue}),r.a.createElement(o.b,{path:"/back/gp-geoserver/style/add/",component:fe}),r.a.createElement(o.b,{path:"/back/gp-geoserver/style/:style_name/edit/",component:fe}))))}}])&&Ge(t.prototype,n),a&&Ge(t,a),c}(a.Component);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke={getgrouplist:function(){var e=He({},Object(g.a)());return fetch("".concat(Qe,"/group_list/"),e).then(g.c)},remove_layer_group:function(e){var t=He(He({},Object(g.b)()),{},{body:JSON.stringify({group_name:e})});return fetch("".concat(Qe,"/remove_layer_group/"),t).then(g.c)},getGroupDetial:function(e){var t=He(He({},Object(g.b)()),{},{body:JSON.stringify({group_name:e})});return fetch("".concat(Qe,"/get_group_detial/"),t).then(g.c)},getLayers:function(e){var t=He(He({},Object(g.b)()),{},{body:JSON.stringify({ws_name:e})});return fetch("".concat(Qe,"/get_layers/"),t).then(g.c)},createLayerGroup:function(e,t,n,a,r){var o=He(He({},Object(g.b)()),{},{body:JSON.stringify({values:e,group_layer_name:t,layer_list:n,group_state:a,old_name:r})});return fetch("".concat(Qe,"/create_layer_group/"),o).then(g.c)},getGroupCacheList:function(e){var t=He(He({},Object(g.b)()),{},{body:JSON.stringify({group_name:e})});return fetch("".concat(Qe,"/get_group_cache_list/"),t).then(g.c)},createGroupCache:function(e,t){var n=He(He({},Object(g.b)()),{},{body:JSON.stringify({values:e})});return fetch("".concat(Qe,"/create_group_cache/").concat(t,"/"),n).then(g.c)},getStyleList:function(){var e=He({},Object(g.a)());return fetch("".concat(Qe,"/style-list/"),e).then(g.c)},getWslist:function(){var e=He({},Object(g.a)());return fetch("".concat(Qe,"/ws-list/"),e).then(g.c)}},Qe="/back/geoserver/rest";function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ot(e);if(t){var r=ot(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return at(this,n)}}function at(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?rt(e):t}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(l,e);var t,n,a,o=nt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={modal_status:"closed"},t.handleModalOpen=t.handleModalOpen.bind(rt(t)),t}return t=l,(n=[{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.idx;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,n),r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(pe.c,{to:"/back/gp-geoserver/layer-groups/".concat(t,"/tile-caching/")},r.a.createElement(ke.a,{icon:"fa fa-shopping-basket text-primary"}))),r.a.createElement("td",null,r.a.createElement(pe.c,{className:"text-primary",to:"/back/gp-geoserver/layer-groups/".concat(t,"/засах/")},r.a.createElement(ke.a,{icon:"fa fa-pencil-square-o text-primary"}))),r.a.createElement("td",null,r.a.createElement("a",{href:"#",onClick:this.handleModalOpen},r.a.createElement(ke.a,{icon:"fa fa-trash-o text-danger"}))),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:"fa fa-exclamation-circle",icon_color:"warning",title:"Тохиргоог устгах",text:'Та "'.concat(t,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),has_button:!0,modalAction:this.props.handleRemove,actionNameDelete:"Тийм",actionNameBack:"Үгүй"}))}}])&&et(t.prototype,n),a&&et(t,a),l}(a.Component);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pt(e);if(t){var r=pt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return mt(this,n)}}function mt(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?ft(e):t}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(l,e);var t,n,a,o=ut(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={group_list:[],search_query:"",currentPage:1,groupPerPage:20,is_loading:!1,currentGroups:[],modal_status:"closed"},t.handleListUpdated=t.handleListUpdated.bind(ft(t)),t.handleGroupDelete=t.handleGroupDelete.bind(ft(t)),t.handleSearch=t.handleSearch.bind(ft(t)),t.paginate=t.paginate.bind(ft(t)),t.handleModalOpen=t.handleModalOpen.bind(ft(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.handleListUpdated()}},{key:"handleListUpdated",value:function(){var e=this;this.setState({is_loading:!0}),Ke.getgrouplist().then((function(t){var n=t.group_list;e.setState({group_list:n,is_loading:!1})}))}},{key:"handleSearch",value:function(e){""!=e.target.value.length?this.setState({search_query:e.target.value}):(this.setState({search_query:""}),this.handleListUpdated())}},{key:"paginate",value:function(e,t,n){this.setState({currentPage:t,currentGroups:e,search_query:n})}},{key:"handleGroupDelete",value:function(e){var t=this;Ke.remove_layer_group(e).then((function(e){var n=e.success,a=e.info;n?t.modalChange("fa fa-check-circle","success",a):t.modalChange("fa fa-times-circle","danger",a),t.handleListUpdated()}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,n){this.setState({modal_icon:e,icon_color:t,title:n}),this.handleModalOpen()}},{key:"render",value:function(){var e=this,t=this.state,n=t.group_list,a=t.currentGroups,o=t.search_query,l=t.groupPerPage,c=t.currentPage,i=t.is_loading;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement(ye.a,{is_loading:i}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-left search-bar"},r.a.createElement("input",{type:"text",className:"form-control",id:"search_query small-input",placeholder:"Хайх",onChange:function(t){return e.handleSearch(t)},value:o}),r.a.createElement("a",null,r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-right"},r.a.createElement(pe.c,{className:"btn gp-btn-primary waves-effect waves-light btn-sm",to:"/back/gp-geoserver/layer-groups/нэмэх/"},"Нэмэх")))),r.a.createElement("div",{className:"table-responsive table_wrapper ml-2"},r.a.createElement("table",{className:"table table_wrapper_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"}," Нэр "),r.a.createElement("th",{scope:"col"},"TileCaching"),r.a.createElement("th",{scope:"col"},"Засах"),r.a.createElement("th",{scope:"col"},"Устгах"))),r.a.createElement("tbody",null,0===a.length?r.a.createElement("tr",null,r.a.createElement("td",null,"geoserver дээр group бүртгэлгүй байна")):a.map((function(t,n){return r.a.createElement(lt,{key:n,idx:c*l-l+n+1,value:t,handleRemove:function(){return e.handleGroupDelete(t)}})}))))),r.a.createElement(Oe,{paginate:this.paginate,item_list:n,total_items:n,search_query:o,per_page:l,page:c})),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,text:"",has_button:!1,modalAction:null}))}}])&&it(t.prototype,n),a&&it(t,a),l}(a.Component),dt=n(22),ht=n(36);function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=St(e);if(t){var r=St(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Et(this,n)}}function Et(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?wt(e):t}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(c,e);var t,n,o,l=vt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={status:t.props.status||"initial",layer_list:e.layer_list,search_query:"",current_page:1,layerPerPage:10,current_layers:[],search_name:""},t.handleOpen=t.handleOpen.bind(wt(t)),t.handleClose=t.handleClose.bind(wt(t)),t.handleIsload=t.handleIsload.bind(wt(t)),t.handleProceed=t.handleProceed.bind(wt(t)),t.handleSearch=t.handleSearch.bind(wt(t)),t.paginate=t.paginate.bind(wt(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"handleIsload",value:function(e){this.setState({is_loading:e})}},{key:"handleSearch",value:function(e){e.target.value.length>=1?this.setState({search_query:e.target.value}):this.setState({search_query:"",layer_list:this.props.layer_list})}},{key:"paginate",value:function(e,t,n){this.setState({current_layers:e,current_page:t,search_query:n})}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(cthis.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose()),this.props.layer_list!=e.layer_list&&this.setState({layer_list:this.props.layer_list})}},{key:"handleProceed",value:function(e,t,n){this.props.modalAction(t,n)}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e){var t=this;this.setState({status:"closing"}),setTimeout((function(){t.setState({status:"closed"}),t.props.modalClose()}),150)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":""),l=this.state,c=l.layer_list,i=l.current_layers,s=l.search_query,u=l.layerPerPage,m=l.current_page,f=this.props.total_items;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n+" ml-3 pl-4 mt-4 pt-4 rounded text-wrap h-75 position-fixed w-75",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",style:{top:"15%"}},r.a.createElement("div",{className:"col-md-12 modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content animated row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row mt-2",style:{background:"white"},onClick:function(){return e.handleClose()}},r.a.createElement("div",{className:"col-md-11"},r.a.createElement("h5",{className:"text-center text-justify"},"Шинэ давхарга сонгох")),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("button",{type:"button",className:"close float-right","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"×")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 col-md-3 col-xl-3"},r.a.createElement("div",{className:"float-sm-left search-bar"},r.a.createElement("input",{type:"text",className:"form-control",id:"small-input",placeholder:"Хайх",onChange:function(t){return e.handleSearch(t)},value:s}),r.a.createElement("a",null,r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement("div",{className:"col-md-12 overflow-auto text-justify my-2",style:{height:"calc( 40vh - 35px - 7px)"}},r.a.createElement("table",{className:"table table_wrapper_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"}," Нэр "))),r.a.createElement("tbody",null,i.length>0?i.map((function(t,n){return r.a.createElement("tr",{key:m*u-u+n+1},r.a.createElement("td",null,m*u-u+n+1),r.a.createElement("td",null,r.a.createElement("a",{href:"#",onClick:function(n){return e.handleProceed(n,t,e.props.more_detail)}},t.layer_name?t.layer_name:t)))})):r.a.createElement("tr",null,r.a.createElement("td",null,"geoserver дээр давхарга бүртгэлгүй байна")))))),r.a.createElement("div",{className:"mb-4"},r.a.createElement(Oe,{paginate:this.paginate,item_list:c,total_items:f,search_query:s,per_page:u,page:m,filter_name:"layer_name"})))))),r.a.createElement("div",{className:o}))}}])&&bt(t.prototype,n),o&&bt(t,o),c}(a.Component),kt=n(984);function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||Pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Rt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ft(e);if(t){var r=Ft(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Tt(this,n)}}function Tt(e,t){return!t||"object"!==xt(t)&&"function"!=typeof t?zt(e):t}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(l,e);var t,n,a,o=Mt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={form_values:{title:"",abstract:"",layers:"",minx:"",maxx:"",miny:"",maxy:"",projection:""},errors:"",layer_list:[],layer_detail:[],select_layer_status:!1,modal_alert_status:"closed",model_alert_text:"",model_alert_icon:"success",timer:null,old_name:e.match.params.group_name||"",values:[],modalAction:"",style_list:[],more_detail:"",work_space_list:[],work_space_name:"",group_layer_name:"",name_invalid:!1,is_loading:!1},t.getDetialAll=t.getDetialAll.bind(zt(t)),t.handleSubmit=t.handleSubmit.bind(zt(t)),t.modalClose=t.modalClose.bind(zt(t)),t.handleSelectedLayers=t.handleSelectedLayers.bind(zt(t)),t.removeLayer=t.removeLayer.bind(zt(t)),t.handleMoveUp=t.handleMoveUp.bind(zt(t)),t.handleMoveDown=t.handleMoveDown.bind(zt(t)),t.handleSwap=t.handleSwap.bind(zt(t)),t.modalCloseTime=t.modalCloseTime.bind(zt(t)),t.handleSelectModel=t.handleSelectModel.bind(zt(t)),t.setStyleName=t.setStyleName.bind(zt(t)),t.getWsDetail=t.getWsDetail.bind(zt(t)),t.handleOnChange=t.handleOnChange.bind(zt(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.group_name;t&&this.getDetialAll(t),Promise.all([Ke.getLayers(),Ke.getStyleList(),Ke.getWslist()]).then((function(t){var n=jt(t,3),a=n[0].layer_list,r=n[1].style_list,o=n[2].work_space_list;e.setState({layer_detail:a,style_list:r,work_space_list:o})}))}},{key:"getWsDetail",value:function(e){var t=this,n=e.target.value;Ke.getLayers(n).then((function(e){var a=e.layer_list;t.setState({layer_detail:a,work_space_name:n})}))}},{key:"setStyleName",value:function(e,t){var n=this.state.layer_list;n[t].style_name=e,this.setState({layer_list:n,select_layer_status:!1})}},{key:"handleSelectModel",value:function(e,t,n,a){return this.setState({select_layer_status:!0,modalAction:t,modal_title:e,values:n,more_detail:a})}},{key:"componentDidUpdate",value:function(e,t){t.layer_detail!=this.state.layer_detail&&this.setState({layer_detail:this.state.layer_detail})}},{key:"getDetialAll",value:function(e){var t=this;Ke.getGroupDetial(e).then((function(e){var n=e.detial_list,a=e.layer_list,r=n.bounds;n&&t.setState({form_values:{title:n.title,abstract:n.abstractTxt,minx:r.minx,maxx:r.maxx,miny:r.miny,maxy:r.maxy,projection:r.crs},layer_list:a,group_layer_name:n.name})}))}},{key:"modalClose",value:function(){this.setState({select_layer_status:!1})}},{key:"handleSelectedLayers",value:function(e){var t=this.state.layer_list.concat(e);this.setState({layer_list:t,select_layer_status:!1})}},{key:"removeLayer",value:function(e,t){var n,a=Nt(this.state.layer_list),r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Pt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}(a.entries());try{for(r.s();!(n=r.n()).done;){var o=jt(n.value,2),l=o[0];o[1].layer_name==t.layer_name&&a.splice(l,1)}}catch(e){r.e(e)}finally{r.f()}this.setState({layer_list:a})}},{key:"handleMoveUp",value:function(e,t){var n=Nt(this.state.layer_list);t>0&&this.handleSwap(n,t,t-1)}},{key:"handleMoveDown",value:function(e,t){var n=Nt(this.state.layer_list);t<n.length-1&&this.handleSwap(n,t,t+1)}},{key:"handleSwap",value:function(e,t,n){var a=e[t];e[t]=e[n],e[n]=a,this.setState({layer_list:e})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.state,c=l.layer_list,i=l.old_name,s=l.group_layer_name,u=!1,m=this.props.match.params.group_name;s||this.setState({name_invalid:!0}),m&&(u=!0),s?(this.setState({is_loading:!0}),Ke.createLayerGroup(e,s,c,u,i).then((function(e){var t=e.success,l=e.info,c=e.errors;t?(n.setState({modal_alert_status:"open",model_alert_text:l,model_alert_icon:"success"}),a("saved"),n.modalCloseTime()):(c?o(c):n.setState({modal_alert_status:"open",model_alert_text:l,model_alert_icon:"danger",is_loading:!1}),r(!1))}))):r(!1)}},{key:"handleOnChange",value:function(e){var t=e.target.value.replace(" ","_");this.setState({group_layer_name:t})}},{key:"modalCloseTime",value:function(){var e=this;this.state.timer=setTimeout((function(){e.setState({modal_alert_status:"closed",is_loading:!1})}),2e3),this.props.history.push("/back/gp-geoserver/layer-groups/")}},{key:"render",value:function(){var e=this,t=this.state,n=t.form_values,a=t.layer_list,o=t.layer_detail,l=t.select_layer_status,c=t.modal_alert_status,i=t.model_alert_text,s=t.model_alert_icon,u=t.modalAction,m=t.modal_title,f=t.values,p=t.style_list,y=t.more_detail,d=t.work_space_list,h=t.work_space_name,_=t.name_invalid,b=t.group_layer_name,g=t.is_loading,v=this.props.match.params.group_name;return r.a.createElement("div",{className:"col-md-8",style:{minHeight:"72vh"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 col-md-4 col-xl-4"},r.a.createElement("div",{className:"row"},r.a.createElement(ye.a,{is_loading:g,text:"Уншиж байна"}),r.a.createElement("div",{className:"col-12 mt-3 col-md-12 col-xl-12"},r.a.createElement("div",{className:"h-100"},r.a.createElement(dt.e,{enableReinitialize:!0,initialValues:n,onSubmit:this.handleSubmit},(function(t){t.errors;var n=t.isSubmitting;return r.a.createElement(dt.d,null,r.a.createElement("div",{className:"form-row col-md-12"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:""},"Нэр"),r.a.createElement("input",{className:"form-control "+(_?"is-invalid":""),name:"group_layer_name",id:"group_layer_name_id",type:"text",value:b,onChange:function(t){return e.handleOnChange(t)}}),!b&&_&&r.a.createElement("small",{className:"text-danger"},"Style-ийн нэр хоосон байна")),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"title"},"Гарчиг"),r.a.createElement(dt.b,{className:"form-control ",name:"title",id:"title",type:"text",placeholder:"Гарчиг"})),r.a.createElement("div",{className:"form-group col-md-12 mb-2"},r.a.createElement("label",{htmlFor:"abstract"},"Товч тайлбар"),r.a.createElement(dt.b,{className:"form-control",name:"abstract",id:"abstract_id",as:"textarea",placeholder:"Товч тайлбар"})),v&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-row col-md-12 my-2"},r.a.createElement("label",{htmlFor:"bbox",className:"col-md-12"},"Bounding box"),r.a.createElement("label",{htmlFor:"bbox",className:"col-md-12"},r.a.createElement("a",{className:"col-3 float-left pl-1"},"Minx"),r.a.createElement("a",{className:"col-3 float-left pl-1"},"Maxx"),r.a.createElement("a",{className:"col-3 float-left pl-1"},"Miny"),r.a.createElement("a",{className:"col-3 float-left pl-1"},"Maxy")),r.a.createElement(dt.b,{type:"number",name:"minx",id:"minx",placeholder:"minx",disabled:!0,className:"form-control col-3"}),r.a.createElement(dt.b,{type:"number",name:"miny",id:"miny",disabled:!0,placeholder:"miny",className:"form-control col-3"}),r.a.createElement(dt.b,{type:"number",name:"maxx",disabled:!0,id:"maxx",placeholder:"maxx",className:"form-control col-3"}),r.a.createElement(dt.b,{type:"number",name:"maxy",id:"maxy",disabled:!0,placeholder:"maxy",className:"form-control col-3"})),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"id_name"},"Projection"),r.a.createElement(dt.b,{className:"form-control col-4",name:"projection",disabled:!0,id:"projection",type:"text",placeholder:"projection"}))),!v&&r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-group col-md-12 px-0"},r.a.createElement("label",{htmlFor:"ws_check"},"WorkSpace-ээс сонгох"),r.a.createElement("select",{name:"work_space_name",id:"work_space_name",className:"form-control col-md-6",value:h,onChange:function(t){e.getWsDetail(t)}},r.a.createElement("option",{value:""}),d.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row justify-content-center overflow-auto",style:{height:"30vh"}},r.a.createElement("table",{className:"table table-wrapper-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"},"Давхарга"),r.a.createElement("th",{scope:"col"},"Төрөл"),r.a.createElement("th",{scope:"col"},"Style"),r.a.createElement("th",{scope:"col"},"Эрэмбэ"),r.a.createElement("th",{scope:"col"},"Хасах"))),r.a.createElement("tbody",null,a.length>0?a.map((function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n+1),r.a.createElement("td",null,t.layer_name),r.a.createElement("td",null,t.type),r.a.createElement("td",null,r.a.createElement("a",{href:"#",onClick:function(t){return e.handleSelectModel("Update Style",e.setStyleName,p,n)}},t.style_name)),r.a.createElement("td",{className:"text-center mx-0 px-0"},0!=n&&r.a.createElement("a",{href:"#",onClick:function(t){return e.handleMoveUp(t,n)}},r.a.createElement(ke.a,{icon:"fa fa-arrow-up text-primary float-right"})),n!=a.length-1&&r.a.createElement("a",{href:"#",onClick:function(t){return e.handleMoveDown(t,n)}},r.a.createElement(ke.a,{icon:"fa fa-arrow-down text-primary float-left"}))),r.a.createElement("td",{className:"text-center mx-0 px-0"},r.a.createElement("a",{href:"#",onClick:function(n){return e.removeLayer(n,t)}},r.a.createElement(ke.a,{icon:"fa fa-minus-circle text-danger"}))))})):null))),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("a",{href:"#",onClick:function(t){return e.handleSelectModel("Давхарга нэмэх",e.handleSelectedLayers,o)}},r.a.createElement(ke.a,{icon:"fa fa-plus-circle text-success mr-4 mt-2"}),"Давхарга нэмэх")))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:n},n&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),n&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!n&&"Хадгалах")))))})))))),l&&r.a.createElement(Ot,{modalClose:this.modalClose,modalAction:u,layer_list:f,total_items:o,title:m,more_detail:y})),r.a.createElement(kt.a,{modalAction:function(){return e.modalClose()},status:c,title:i,model_type_icon:s}))}}])&&Rt(t.prototype,n),a&&Rt(t,a),l}(a.Component);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Vt(e);if(t){var r=Vt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Gt(this,n)}}function Gt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?Jt(e):t}function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bt=ht.c().shape({zoom_start:ht.b().max(21,"Хамгийн ихдээ 21 байна"),zoom_stop:ht.b().max(21,"Хамгийн ихдээ 21 байна"),number_of_cache:ht.b().max(21,"Хамгийн ихдээ 21 байна")}),Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(l,e);var t,n,a,o=It(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={form_values:{image_format:"png",zoom_start:0,zoom_stop:0,cache_type:"reseed",number_of_cache:1},modal_alert_status:"closed",model_alert_text:"",model_alert_icon:"success",image_formats:["png","jpeg"],cache_types:["seed","reseed","truncate"],errors:[],timer:null},t.getDetialAll=t.getDetialAll.bind(Jt(t)),t.handleSubmit=t.handleSubmit.bind(Jt(t)),t.modalClose=t.modalClose.bind(Jt(t)),t.modalCloseTime=t.modalCloseTime.bind(Jt(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.group_name;e&&this.getDetialAll(e)}},{key:"getDetialAll",value:function(e){var t=this;Ke.getGroupCacheList(e).then((function(e){var n=e.cache_list;if(n.length>0){var a=n[0];t.setState({form_values:{image_format:a.image_format,zoom_start:a.zoom_start,zoom_stop:a.zoom_stop,cache_type:a.cache_type,number_of_cache:a.number_of_cache}})}}))}},{key:"modalClose",value:function(){this.setState({modal_alert_status:"closed"})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.props.match.params.group_name;Ke.createGroupCache(e,l).then((function(e){var t=e.success,l=e.errors,c=e.info;t?(n.setState({modal_alert_status:"open",model_alert_text:c,model_alert_icon:"success"}),a("saved"),n.modalCloseTime()):o(l),r(!1)}))}},{key:"modalCloseTime",value:function(){var e=this;this.state.timer=setTimeout((function(){e.setState({modal_alert_status:"closed"})}),2e3),this.props.history.push("/back/gp-geoserver/layer-groups/")}},{key:"render",value:function(){var e=this,t=this.state,n=t.form_values,a=t.modal_alert_status,o=t.model_alert_text,l=t.model_alert_icon,c=t.image_formats,i=t.cache_types,s=this.props.match.params.group_name;return r.a.createElement("div",{className:"ml-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(dt.e,{enableReinitialize:!0,initialValues:n,validationSchema:Bt,onSubmit:this.handleSubmit},(function(e){var t=e.errors,n=e.isSubmitting;return r.a.createElement(dt.d,null,r.a.createElement("div",{className:"form-row col-md-8"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-row col-md-12 mb-2"},r.a.createElement("label",{htmlFor:"group_name",className:"col-md-12 my-2 text-center text-dark h5"},s)),r.a.createElement("div",{className:"form-row col-md-12 mb-2"},r.a.createElement("label",{htmlFor:"image_format",className:"col-md-6 my-2"}," Зургийн формат"),r.a.createElement(dt.b,{name:"image_format",id:"image_format",as:"select",className:"form-control col-md-6"},c.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("div",{className:"form-row col-md-12 mb-4 mt-2"},r.a.createElement("label",{htmlFor:"",className:"col-md-6"},"Үйлдлийн төрөл"),r.a.createElement(dt.b,{name:"cache_type",id:"cache_type",as:"select",className:"form-control col-md-6"},i.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:""},"Томруулах эхний утга"),r.a.createElement(dt.b,{className:"form-control "+(t&&t.zoom_start?"is-invalid":""),name:"zoom_start",id:"zoom_start",type:"number"}),r.a.createElement(dt.a,{name:"zoom_start",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6 mb-2"},r.a.createElement("label",{htmlFor:""},"Томруулах сүүлчийн утга"),r.a.createElement(dt.b,{className:"form-control "+(t&&t.zoom_stop?"is-invalid":""),name:"zoom_stop",id:"zoom_stop",type:"number"}),r.a.createElement(dt.a,{name:"zoom_stop",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6 mb-2"},r.a.createElement("label",{htmlFor:""},"Хэрэглэх таскуудын тоо"),r.a.createElement(dt.b,{className:"form-control "+(t&&t.number_of_cache?"is-invalid":""),name:"number_of_cache",id:"number_of_cache",type:"number"}),r.a.createElement(dt.a,{name:"number_of_cache",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:n},n&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),n&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!n&&"Хадгалах"))))})))),r.a.createElement(kt.a,{modalAction:function(){return e.modalClose()},status:a,title:o,model_type_icon:l}))}}])&&qt(t.prototype,n),a&&qt(t,a),l}(a.Component);function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Qt(e);if(t){var r=Qt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){return!t||"object"!==Wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(c,e);var t,n,a,l=$t(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return t=c,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/back/gp-geoserver/layer-groups/",component:yt}),r.a.createElement(o.b,{path:"/back/gp-geoserver/layer-groups/:group_name/tile-caching/",component:Zt}),r.a.createElement(o.b,{path:"/back/gp-geoserver/layer-groups/нэмэх/",component:Lt}),r.a.createElement(o.b,{path:"/back/gp-geoserver/layer-groups/:group_name/засах/",component:Lt}))))}}])&&Xt(t.prototype,n),a&&Xt(t,a),c}(a.Component);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=on(e);if(t){var r=on(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return rn(this,n)}}function rn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(c,e);var t,n,a,l=an(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return t=c,(n=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/back/gp-geoserver/layer-groups/",component:Yt}),r.a.createElement(o.b,{path:"/back/gp-geoserver/style/",component:We})))}}])&&tn(t.prototype,n),a&&tn(t,a),c}(a.Component)},983:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return D}));var a=n(0),r=n.n(a);n(988);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,o=s(u);function u(){return l(this,u),o.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.size,a=e.color;return r.a.createElement("i",{className:"hover-fx ".concat(t," ").concat(n," ").concat(a)})}}])&&c(t.prototype,n),a&&c(t,a),u}(a.Component);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,n,a,o=h(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={value:e.value,main_values:e.main_values,options:e.options},t}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.mn_name,o=t.className,l=t.children,c=this.state,i=(c.value,c.main_values,c.options);return Array(),l.length,r.a.createElement("select",{name:n,id:"id_".concat(n),style:{fontSize:"0.8rem"},className:o||" custom-select",onChange:function(t){return e.props.handleOnChangeSelect(t.target.value,n)}},r.a.createElement("option",{value:""},"--- ",a," сонгоно уу ---"),i.map((function(e,t){return r.a.createElement("option",{key:t,value:e.code_list_id},e.code_list_name)})))}}])&&y(t.prototype,n),a&&y(t,a),l}(a.PureComponent);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=P(e);if(t){var r=P(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(l,e);var t,n,a,o=x(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={value:e.value,children:[]},t.handleOnChange=t.handleOnChange.bind(j(t)),t.handleOnChangeSelect=t.handleOnChangeSelect.bind(j(t)),t}return t=l,(n=[{key:"handleOnChange",value:function(e,t){this.props.sendValue(e,t),this.setState({value:e})}},{key:"handleOnChangeSelect",value:function(e,t){var n=this.props.options,a=Array();n.map((function(t,n){t.children&&t.code_list_id==e&&(a=t.children)})),this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:e},a)),this.props.sendValue(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.type,o=t.mn_name,l=t.placeholder,c=t.className,i=(t.options,t.main_values,this.state),s=i.value,u=i.children;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"id_".concat(n)},o),"select"==a?r.a.createElement("div",null,u.length>0?r.a.createElement(g,E({},this.props,{handleOnChangeSelect:this.handleOnChangeSelect,value:s})):r.a.createElement(g,E({},this.props,{children:u,handleOnChangeSelect:this.handleOnChangeSelect,value:s}))):"textarea"==a?r.a.createElement("textarea",{className:c||" form-control",name:n,id:"id_".concat(n),cols:"30",rows:"10",onChange:function(t){return e.handleOnChange(t.target.value,n)}}):r.a.createElement("input",{className:c||" form-control",type:a,name:n,placeholder:l,onChange:function(t){return e.handleOnChange(t.target.value,n)}}))}}])&&O(t.prototype,n),a&&O(t,a),l}(a.PureComponent),R=f,D=C},984:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(m,e);var t,n,o,s=i(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=s.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t}return t=m,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var n=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){n.setState({status:"closed"}),e&&e()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n,onClick:function(){return e.handleProceed()}},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},r.a.createElement("div",{className:"d-flex justify-content-center"},"danger"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"primary"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn gp-text-primary","aria-hidden":"true"}):"warning"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center my-1"},r.a.createElement("h6",{className:"text-dark"},this.props.title)),r.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 my-3 text-justify"},r.a.createElement("a",{className:"text-dark"},this.props.text))))),r.a.createElement("div",{className:o}))}}])&&l(t.prototype,n),o&&l(t,o),m}(a.Component)},988:function(e,t,n){var a=n(67),r=n(989);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},989:function(e,t,n){(t=n(68)(!1)).push([e.i,"\n.hover-fx {\n    display: inline-block;\n    cursor: pointer;\n    width: 30px;\n    height: 30px;\n    line-height: 32px;\n    border-radius: 50%;\n    text-align: center;\n    position: relative;\n    color: #f1f3f4;\n    background-color: rgba(255, 255, 255, 0.1);\n    transition: 300ms;\n}\n\n.hover-fx:after {\n    pointer-events: none;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    content: '';\n    box-sizing: content-box;\n    box-shadow: 0 0 0 3px #f1f3f4;\n    top: 0;\n    left: 0;\n    opacity: 0;\n    transition: 300ms;\n}\n\n.hover-fx:hover {\n    background-color: #f1f3f4;\n    color: #f1f3f4;\n}\n\n.hover-fx:hover:after {\n    opacity: 1;\n    transform: scale(1.15);\n}",""]),e.exports=t}}]);