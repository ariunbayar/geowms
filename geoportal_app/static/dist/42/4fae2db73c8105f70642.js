(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{900:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(36);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s={createEmployee:function(e,t,a,r){var l=o(o({},Object(n.b)()),{},{body:JSON.stringify({user_detail:e,emp_role_id:t,roles:a,address:r})});return fetch("".concat(i,"/create/"),l).then(n.c)},getRole:function(e){var t=o({},Object(n.a)());return fetch("".concat("/gov/api/role","/").concat(e,"/detail/"),t).then(n.c)},getRoleList:function(){var e=o({},Object(n.a)());return fetch("".concat("/gov/api/role","/"),e).then(n.c)},getDetailEmployee:function(e){var t=o({},Object(n.a)());return fetch("".concat(i,"/").concat(e,"/detail/"),t).then(n.c)},deleteEmployee:function(e){var t=o({},Object(n.a)());return fetch("".concat(i,"/").concat(e,"/delete/"),t).then(n.c)},updateEmployee:function(e,t,a,r,l,s){var c=o(o({},Object(n.b)()),{},{body:JSON.stringify({user_detail:e,role_id:t,id:a,add_perm:r,remove_perm:l,address:s})});return fetch("".concat(i,"/").concat(a,"/update/"),c).then(n.c)},empTokenRefresh:function(e){var t=o({},Object(n.a)());return fetch("".concat(i,"/").concat(e,"/refresh-token/"),t).then(n.c)},sendMail:function(e){var t=o(o({},Object(n.b)()),{},{body:JSON.stringify({username:e})});return fetch("".concat(i,"/send-mail/"),t).then(n.c)},getGeom:function(e){var t=o(o({},Object(n.b)()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/get-geom/",t).then(n.c)},getAddresses:function(e){var t=o(o({},Object(n.b)()),{},{body:JSON.stringify({all_user:e})});return fetch("".concat(i,"/addresses/"),t).then(n.c)},formOptions:function(){var e=o({},Object(n.a)());return fetch("/api/aimag/",e).then(n.c)},getEmpInfo:function(e,t){var a=o(o({},Object(n.b)()),{},{body:JSON.stringify({is_erguul:t})});return fetch("/back/api/org/".concat(e,"/emp-info/"),a).then(n.c)},getErguulegFields:function(e){var t=o({},Object(n.a)());return fetch("/back/api/org/".concat(e,"/erguuleg-fields/"),t).then(n.c)},saveErguul:function(e,t,a,r,l){var s=o(o({},Object(n.b)()),{},{body:JSON.stringify({values:e,emp_id:t,point:a,photo:r,erguul_id:l})});return fetch("/back/api/org/save-erguul/",s).then(n.c)},getFieldTailbar:function(){var e=o({},Object(n.a)());return fetch("".concat(i,"/get-field-tailbar/"),e).then(n.c)},saveTailbar:function(e,t){var a=o(o({},Object(n.b)()),{},{body:JSON.stringify({values:e,id:t})});return fetch("".concat(i,"/save-field-tailbar/"),a).then(n.c)},getErguul:function(){var e=o({},Object(n.a)());return fetch("".concat(i,"/get-erguul/"),e).then(n.c)},getSelectValue:function(){var e=o({},Object(n.a)());return fetch("/back/api/org/get-select-values/",e).then(n.c)}},i="/gov/api/role/employee"},954:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return $e}));var n=a(0),r=a.n(n),o=a(49),l=a(898);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p(e);if(t){var r=p(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,a,n,o=m(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={refresh:!1,"жагсаалтын_холбоос":"/gov/api/role/employee/","нэмэх_товч":"/gov/perm/employee/add/",custom_query:{},"талбарууд":[{field:"user__first_name",title:"Нэр",has_action:!0},{field:"user__email",title:"Цахим шуудан"},{field:"position",title:"Албан тушаал"},{field:"role_name",title:"Role",is_sort:!0},{field:"is_admin",title:"Админ",has_action:!0,is_center:!0}],"хувьсах_талбарууд":[{field:"user__first_name",action:function(e){return t.go_link(e)}},{field:"user__email",text:""},{field:"position",text:""},{field:"is_admin",action:function(e){return t.set_icon(e)},action_type:!0,is_center:!0}],is_user:!0,drop_name:"Хэрэглэгч"},t.handleListChange=t.handleListChange.bind(d(t)),t}return t=s,(a=[{key:"set_icon",value:function(e){return e?"fa fa-check-circle-o text-success fa-lg":"fa fa-times-circle-o text-danger fa-lg"}},{key:"go_link",value:function(e){this.props.history.push("/gov/perm/employee/".concat(e.id,"/detail/"))}},{key:"handleListChange",value:function(e,t){this.setState({is_user:e,drop_name:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.refresh,n=t.талбарууд,o=t.жагсаалтын_холбоос,s=t.хувьсах_талбарууд,i=t.custom_query,c=t.нэмэх_товч,m=t.нэмэлт_талбарууд,u=t.is_user;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"d-flex flex-row-reverse mb-2"},r.a.createElement("div",{className:"dropdown-menu-right show"},r.a.createElement("a",{className:"btn-sm dropdown-toggle",href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.drop_name),r.a.createElement("div",{className:"dropdown-menu mr-2","aria-labelledby":"dropdownMenuLink"},r.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleListChange(!0,"Хэрэглэгч")}},"Хэрэглэгч"),r.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleListChange(!1,"Бүх ажилчид")}},"Бүх ажилчид")))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(l.a,{refresh:a,color:"bg-dark","талбарууд":n,"жагсаалтын_холбоос":o,per_page:20,"уншиж_байх_үед_зурвас":"Хүсэлтүүд уншиж байна","хувьсах_талбарууд":s,"нэмэх_товч":c,custom_query:i,"нэмэлт_талбарууд":m,is_user:u}))))}}])&&i(t.prototype,a),n&&i(t,n),s}(n.Component),_=a(20),h=a(900),v=a(164),g=a(904),b=a(908),y=a(105),E=a(889),N=a(475),O=a(289),k=a(542),S=a(287),w=a(166),j=a(2),C=a(141),R=a(894),P=a(241),F=a(216),x=a(16),D=a(63),M=a(888);a(219);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=I(e);if(t){var r=I(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return L(this,a)}}function L(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(l,e);var t,a,n,o=J(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={projection_data:"EPSG:4326",projection_display:"EPSG:3857",coordinate_clicked:[],features:[]},t.marker=t.initMarker(),t.loadMap=t.loadMap.bind(A(t)),t.handleMapClick=t.handleMapClick.bind(A(t)),t.setFeatures=t.setFeatures.bind(A(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(A(t)),t}return t=l,(a=[{key:"initMarker",value:function(){var e=new C.c({image:new R.a({anchor:[.5,86],anchorXUnits:"fraction",anchorYUnits:"pixels",scale:.4,src:"/static/assets/image/marker.png"})}),t=new D.a([0,0]),a=new y.a({geometry:t});return a.setStyle(e),{feature:a,point:t}}},{key:"componentDidMount",value:function(){this.loadMap(),0!==this.props.map_coordinate.length&&this.marker.point.setCoordinates(this.props.map_coordinate)}},{key:"componentDidUpdate",value:function(e,t){e.feature!==this.props.feature&&this.props.feature!=={}&&(this.setFeatures(this.props.feature),0!==Object.keys(this.props.point).length&&0==this.props.map_coordinate.length&&this.setMarker(this.props.point))}},{key:"removeFeatureFromSource",value:function(e){var t=this.vector_layer.getSource(),a=t.getFeatures();if(null!=a&&a.length>0)for(var n=0;n<a.length;n++)if(a[n].getProperties().id==e){t.removeFeature(a[n]);break}}},{key:"fromLonLatToMapCoord",value:function(e){return Object(j.d)(e)}},{key:"setMarker",value:function(e){var t=JSON.parse(e);if(t){var a=t.coordinates,n=this.fromLonLatToMapCoord(a);this.marker.point.setCoordinates(n),this.props.sendPointCoordinate([a[1],a[0]],n)}}},{key:"setFeatures",value:function(e){var t="aimag_sum";this.removeFeatureFromSource(t),(e=(new M.a).readFeatures(e,{dataProjection:this.state.projection_data,featureProjection:this.state.projection_display}))[0].setProperties({id:t}),this.vector_layer.getSource().addFeature(e[0]),this.map.getView().fit(e[0].getGeometry(),{padding:[100,100,100,100],duration:2e3})}},{key:"loadMap",value:function(){var e=new S.a({source:new O.a({features:[this.marker.feature]})});this.marker_layer=e;var t=new S.a({source:new O.a({}),style:new C.c({stroke:new P.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new F.a({color:"rgba(100, 255, 0, 0.3)"})})});this.vector_layer=t;var a=new E.a({layers:[new w.a({source:new k.a}),t,e],target:"map",view:new N.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});a.on("click",this.handleMapClick),this.map=a}},{key:"handleMapClick",value:function(e){var t=e.coordinate;this.marker.point.setCoordinates(t);var a=e.map.getView().getProjection(),n=Object(j.p)(e.coordinate,a,this.state.projection_data),r=Object(x.f)(n,"{y},{x}",6);this.props.sendPointCoordinate(r,t),this.setState({coordinate_clicked:r})}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",style:{height:"calc( 50vh - 85px - 15px)"},className:"".concat(this.props.class)})}}])&&V(t.prototype,a),n&&V(t,n),l}(n.Component),B=a(897);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ee(e);if(t){var r=ee(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Z(this,a)}}function Z(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(s,e);var t,a,o,l=W(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).perms=[],t.role=[],t.remove_perms=[],t.state={form_values:{username:"",last_name:"",first_name:"",position:"",email:"",gender:"Эрэгтэй",register:"",phone_number:"",is_admin:!1,choose_role:"",state:"",pro_class:"",is_user:!1},role_list:[],emp_role_id:null,roles:{},modal_alert_status:"closed",model_type_icon:"",title:"",prefix:"/gov/perm/employee/",is_inspire_role:!1,is_inspire_role_null:!0,aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",feature:{},description:"",point_coordinate:[],point:{},street:"",apartment:"",door_number:"",map_coordinate:[],is_marker:!0,address_state:!0,is_address_map:!0,firstOrder_geom:"",positions:[],states:[],pro_classes:[]},t.handleSubmit=t.handleSubmit.bind($(t)),t.modalClose=t.modalClose.bind($(t)),t.getRolesForOption=t.getRolesForOption.bind($(t)),t.getRole=t.getRole.bind($(t)),t.getValue=t.getValue.bind($(t)),t.getFeildValues=t.getFeildValues.bind($(t)),t.handleChange=t.handleChange.bind($(t)),t.getPoint=t.getPoint.bind($(t)),t.getGeomFromJson=t.getGeomFromJson.bind($(t)),t.getGeom=t.getGeom.bind($(t)),t.getSelectValue=t.getSelectValue.bind($(t)),t}return t=s,(a=[{key:"componentDidMount",value:function(){this.getRolesForOption(),this.getFeildValues(),this.getSelectValue()}},{key:"getRolesForOption",value:function(){var e=this;h.a.getRoleList().then((function(t){var a=t.success,n=t.roles;a&&e.setState({role_list:n})}))}},{key:"getRole",value:function(e){var t=this;this.setState({emp_role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?h.a.getRole(e).then((function(e){var a=e.success,n=(e.role_name,e.role_id,e.role_description,e.roles);a&&t.setState({roles:n,is_inspire_role:!0})})):new Promise((function(e,a){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"getValue",value:function(e,t,a,n,r,o,l,s){var i=this;if(!e&&this.perms.length>0&&this.perms.map((function(e,r){e.feature_id==n&&e.property_id==a&&e.perm_kind==t&&i.perms.splice(r,1)})),e){var c={feature_id:n,property_id:a,perm_kind:t,gov_perm_ins_id:r,emp_role_ins_id:s||null};this.perms.push(c)}}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.state.emp_role_id,s=this.state,i=s.street,c=s.apartment,m=s.door_number,u=s.address_state,d={street:i,apartment:c,door_number:m,level_1:s.aimag_name,level_2:s.sum_name,level_3:s.horoo_name,point_coordinate:s.point_coordinate,address_state:u};h.a.createEmployee(e,l,this.perms,d).then((function(e){var t=e.success,l=e.errors,s=e.info;t?(n("saved"),a.setState({model_type_icon:"success",modal_alert_status:"open",title:s})):l&&o(l),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)}))}},{key:"modalClose",value:function(){this.props.history.push(this.state.prefix)}},{key:"getFeildValues",value:function(e,t,a){var n,r,o=this,l=Object();h.a.formOptions().then((function(s){var i=s.success,c=s.info,m=s.firstOrder_geom;i&&(e&&(l.aimag_id=o.getGeomFromJson(e,c),n=c[l.aimag_id].geo_id,l.aimag_geo_id=n,l.aimag_name=e,r=c[l.aimag_id].children,l.sum=r),t&&(l.sum_id=o.getGeomFromJson(t,r),n=r[l.sum_id].geo_id,l.sum_geo_id=n,r=r[l.sum_id].children,l.horoo=r,l.sum_name=t),a&&(l.horoo_id=o.getGeomFromJson(a,r),n=r[l.horoo_id].geo_id,l.horoo_geo_id=n,l.horoo_name=a),o.getGeom(n),o.setState(Y(Y({aimag:c},l),{},{firstOrder_geom:m})))}))}},{key:"getGeom",value:function(e){var t=this;h.a.getGeom(e).then((function(a){var n=a.feature;n&&t.setState({feature:n,last_geo_id:e})}))}},{key:"getSelectValue",value:function(){var e=this;h.a.getSelectValue().then((function(t){var a=t.success,n=t.positions,r=t.states,o=t.pro_classes;a&&e.setState({positions:n,states:r,pro_classes:o})}))}},{key:"getPoint",value:function(e,t){var a=e;"string"==typeof e&&(a=e.split(","));var n=[a[1],a[0]];this.setState({point_coordinate:n,map_coordinate:t})}},{key:"handleChange",value:function(e,t,a,n,r){var o,l=t+"_id",s=t+"_geo_id",i=t+"_name",c=e.target.value,m=Object();if("-1"!==c){var u=this.state[t][c];this.setState(H({},a,u.children)),a&&(m[a]=u.children),o=u.geo_id,n.map((function(e,t){var a=e+"_geo_id",n=e+"_name";m[e+"_id"]=-1,m[a]="",m[n]=""})),m[s]=o,m[i]=u.name,this.getGeom(o)}else{if(n.length>0&&n.map((function(e,t){var a=e+"_id",n=e+"_geo_id",r=e+"_name";m[e]=[],m[a]=-1,m[n]="",m[r]=""})),"mongol"!==r){var d=r+"_id",p=this.state[d];o=this.state[r][p].geo_id}else o=this.state.firstOrder_geom;m[s]=o,this.getGeom(o)}this.setState(Y(H({},l,c),m))}},{key:"getGeomFromJson",value:function(e,t){var a;return t.map((function(t,n){t.name==e&&(a=n)})),a}},{key:"render",value:function(){var e=this,t=this.state,a=t.form_values,o=t.roles,l=t.role_list,s=(t.emp_role_id,t.prefix),i=t.is_inspire_role,c=t.is_inspire_role_null,m=this.state,u=m.aimag,d=m.sum,p=m.horoo,f=m.aimag_id,h=m.sum_id,y=m.horoo_id,E=m.feature,N=m.street,O=m.apartment,k=m.door_number,S=m.point,w=m.address_state,j=m.is_address_map,C=this.state,R=C.positions,P=C.states,F=C.pro_classes,x=this.props.org_roles;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(_.e,{enableReinitialize:!0,initialValues:a,validationSchema:b.a,onSubmit:this.handleSubmit},(function(t){var a=t.errors,s=t.isSubmitting;return Object.keys(a).length,r.a.createElement(_.d,{className:"col-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"username"},"Нэвтрэх нэр:"),r.a.createElement(_.b,{className:"form-control "+(a.username?"is-invalid":""),name:"username",id:"id_username",type:"text",placeholder:"Нэвтрэх нэр"}),r.a.createElement(_.a,{name:"username",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"last_name"},"Овог:"),r.a.createElement(_.b,{className:"form-control "+(a.last_name?"is-invalid":""),name:"last_name",id:"id_last_name",type:"text",placeholder:"Овог"}),r.a.createElement(_.a,{name:"last_name",component:"div",className:"text-danger"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"first_name"},"Нэр:"),r.a.createElement(_.b,{className:"form-control "+(a.first_name?"is-invalid":""),name:"first_name",id:"id_first_name",type:"text",placeholder:"Нэр"}),r.a.createElement(_.a,{name:"first_name",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"position"},"Албан тушаал:"),r.a.createElement(_.b,{name:"position",as:"select",id:"position",style:{fontSize:"0.8rem"},className:"custom-select "+(a.position?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Албан тушаал сонгоно уу ---"),R.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))),r.a.createElement(_.a,{name:"position",component:"span",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"email"},"Цахим хаяг"),r.a.createElement(_.b,{className:"form-control "+(a.email?"is-invalid":""),name:"email",id:"id_email",type:"text",placeholder:"Цахим хаяг"}),r.a.createElement(_.a,{name:"email",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"gender"},"Хүйс:"),r.a.createElement(n.Fragment,null,r.a.createElement(_.b,H({name:"gender",as:"select",className:"form-control"},"className","form-control "+(a.gender?"is-invalid":"")),r.a.createElement("option",null,"Эрэгтэй"),r.a.createElement("option",null,"Эмэгтэй")),r.a.createElement(_.a,{name:"gender",component:"div",className:"text-dange"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"register"},"Регистер:"),r.a.createElement(_.b,{className:"form-control "+(a.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(_.a,{name:"register",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"choose_role"},"Role: "),r.a.createElement("select",{className:"form-control "+(a.choose_role?"is-invalid":""),id:"choose_role",name:"choose_role",onChange:function(t){return e.getRole(t.target.value)}},r.a.createElement("option",{value:""},"--- Role сонгоно уу ---"),l.length>0&&l.map((function(e,t){return r.a.createElement("option",{key:t,value:e.role_id},e.role_name)}))),r.a.createElement(_.a,{name:"choose_role",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"phone_number"},"Утасны дугаар:"),r.a.createElement(_.b,{className:"form-control "+(a.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(_.a,{name:"phone_number",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-row col-md-3 mt-4 text-center"},r.a.createElement("br",null),r.a.createElement("label",{className:"",htmlFor:"is_admin"},"Байгууллагын админ"),r.a.createElement(_.b,{className:"ml-2",name:"is_admin",id:"id_is_admin",type:"checkbox"}),r.a.createElement(_.a,{name:"is_admin",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-row col-md-3 mt-4 text-center"},r.a.createElement("br",null),r.a.createElement("label",{className:"",htmlFor:"is_user"},"Хэрэглэгч"),r.a.createElement(_.b,{className:"ml-2",name:"is_user",id:"id_is_user",type:"checkbox"}),r.a.createElement(_.a,{name:"is_user",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_state"},"Төлөв:"),r.a.createElement(_.b,{name:"state",as:"select",id:"state",style:{fontSize:"0.8rem"},className:"custom-select "+(a.state?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Ажилтаны төлөвийг сонгоно уу ---"),P.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(_.a,{name:"state",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_pro_class"},"Мэргэжлийн ангийн бүрэлдэхүүн:"),r.a.createElement(_.b,{name:"pro_class",as:"select",id:"pro_class",style:{fontSize:"0.8rem"},className:"custom-select "+(a.pro_class?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Мэргэжлийн ангийн бүрэлдэхүүн ---"),F.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(_.a,{name:"pro_class",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("button",{className:"btn btn-primary btn-block mb-2",type:"button",onClick:function(){j&&e.state.last_geo_id&&e.getGeom(e.state.last_geo_id),e.setState({is_address_map:!j})}},j?"Гэрийн хаяг оруулах":"Role сонгох"))),r.a.createElement("div",null,j&&(i||c)?r.a.createElement(g.default,{action_type:"editable",is_employee:!0,getValue:e.getValue,dontDid:!0,org_roles:x,role:o,is_inspire_role_null:c,editable_is_check:e.perms}):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-row p-1"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"form-control "+(a.level_1?"is-invalid":""),"aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:f},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),u.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"form-control "+(a.level_2?"is-invalid":""),onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:h},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),d.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"form-control "+(a.level_3?"is-invalid":""),onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:y},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),p.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"street"},"Гудамж:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"street",className:"form-control "+(a.street?"is-invalid":""),onChange:function(t){return e.setState({street:t.target.value})},value:N,placeholder:"Гудамжны нэрийг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"гудамж")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"apartment"},"Байр:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"apartment",className:"form-control "+(a.apartment?"is-invalid":""),onChange:function(t){return e.setState({apartment:t.target.value})},value:O,placeholder:"Байрны дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"байр")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"door_number"},"Хаалганы дугаар:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"door_number",className:"form-control "+(a.door_number?"is-invalid":""),onChange:function(t){return e.setState({door_number:t.target.value})},value:k,placeholder:"Хаалганы дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"тоот")))),r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label",htmlFor:"id_address_state"},"Байнгын оршин суугаа хаяг"),r.a.createElement("input",{onChange:function(t){return e.setState({address_state:t.target.checked})},className:"form-check-input col-4 "+(a.address_state?"is-invalid":""),type:"checkbox",id:"id_address_state",checked:w})))),r.a.createElement(z,{feature:E,sendPointCoordinate:e.getPoint,map_coordinate:e.state.map_coordinate,point:S,is_marker:e.state.is_address_map,class:a.point?"border border-danger":""}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary waves-effect waves-light m-1",disabled:s},s&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),s&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!s&&"Хадгалах"))))})))),r.a.createElement(v.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:this.state.title,model_type_icon:this.state.model_type_icon}),r.a.createElement(B.a,U({},this.props,{name:"Буцах",navlink_url:s})))}}])&&K(t.prototype,a),o&&K(t,o),s}(n.Component),ae=a(242),ne=a(191),re=a(54);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=_e(e);if(t){var r=_e(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return pe(this,a)}}function pe(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(s,e);var t,a,o,l=de(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).too=0,t.perms=[],t.role=[],t.remove_perms=[],t.emp_perms=[],t.state={form_values:{username:"",last_name:"",first_name:"",position:"",email:"",gender:"",register:"",phone_number:"",is_admin:!1,state:"",pro_class:"",is_user:!1},modal_status:"closed",is_loading:!0,roles:{},perms:{},role_id:"",old_role_id:null,is_inspire_role:!1,is_inspire_role_null:!1,prefix:"/gov/perm/employee/",id:t.props.match.params.id,role_list:[],modal_alert_status:"closed",timer:null,model_type_icon:"",title:"",is_address_map:!1,aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",feature:{},description:"",point_coordinate:[],point:{},street:"",apartment:"",door_number:"",address_state:!0,map_coordinate:[],is_marker:!0,firstOrder_geom:"",positions:[],states:[],pro_classes:[]},t.handleSubmit=t.handleSubmit.bind(fe(t)),t.getRolesForOption=t.getRolesForOption.bind(fe(t)),t.getDetail=t.getDetail.bind(fe(t)),t.getRole=t.getRole.bind(fe(t)),t.getValue=t.getValue.bind(fe(t)),t.removeItemFromArray=t.removeItemFromArray.bind(fe(t)),t.removeItemFromRemoveRoles=t.removeItemFromRemoveRoles.bind(fe(t)),t.checkRoleAndPerm=t.checkRoleAndPerm.bind(fe(t)),t.modalClose=t.modalClose.bind(fe(t)),t.modalCloseTime=t.modalCloseTime.bind(fe(t)),t.handleModalOpen=t.handleModalOpen.bind(fe(t)),t.handleModalClose=t.handleModalClose.bind(fe(t)),t.addNotif=t.addNotif.bind(fe(t)),t.handleSendMail=t.handleSendMail.bind(fe(t)),t.getFeildValues=t.getFeildValues.bind(fe(t)),t.handleChange=t.handleChange.bind(fe(t)),t.getPoint=t.getPoint.bind(fe(t)),t.getGeomFromJson=t.getGeomFromJson.bind(fe(t)),t.getGeom=t.getGeom.bind(fe(t)),t.refreshMap=t.refreshMap.bind(fe(t)),t.getSelectValue=t.getSelectValue.bind(fe(t)),t}return t=s,(a=[{key:"componentDidMount",value:function(){this.perms=[],this.role=[],this.remove_perms=[],this.emp_perms=[],this.getDetail(),this.state.id||this.getFeildValues(),this.getSelectValue()}},{key:"getSelectValue",value:function(){var e=this;h.a.getSelectValue().then((function(t){var a=t.success,n=t.positions,r=t.states,o=t.pro_classes;a&&e.setState({positions:n,states:r,pro_classes:o})}))}},{key:"getDetail",value:function(){var e=this,t=this.state.id;h.a.getDetailEmployee(t).then((function(t){var a=t.success,n=t.employee_detail,r=t.role_id,o=t.perms;a&&(e.getFeildValues(n.level_1,n.level_2,n.level_3),e.setState({perms:o,role_id:r,old_role_id:r,is_loading:!1,form_values:{username:n.username,last_name:n.last_name,first_name:n.first_name,position:n.position_id,email:n.email,gender:n.gender,register:n.register,phone_number:n.phone_number,is_admin:n.is_admin,state:n.state_id,pro_class:n.pro_class_id,is_user:n.is_user},point:n.point,street:n.street,apartment:n.apartment,door_number:n.door_number,address_state:n.address_state}),e.getRolesForOption())}))}},{key:"getRolesForOption",value:function(){var e=this;h.a.getRoleList().then((function(t){var a=t.success,n=t.roles;a&&(e.setState({role_list:n}),e.getRole(e.state.role_id))}))}},{key:"getRole",value:function(e){var t=this;this.perms=[],this.emp_perms=[],this.setState({role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?h.a.getRole(e).then((function(e){var a=e.success,n=e.roles;a&&(t.role=[],t.setState({roles:n,is_inspire_role:!0}))})):new Promise((function(e,a){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"getValue",value:function(e,t,a,n,r,o,l,s,i){if(e||null!=o||this.removeItemFromArray(this.role,n,a,t,s,i),!e&&this.perms.length>0&&this.removeItemFromArray(this.perms,n,a,t),e&&!o&&!i||e&&("role"==o||"perms"==o)){var c={feature_id:n,property_id:a,perm_kind:t,gov_perm_ins_id:r,emp_role_ins_id:s||null};"role"==o&&this.role.push(c),"perms"==o?this.emp_perms.push(c):this.perms.push(c)}i&&e&&null==o&&this.remove_perms.length>0&&this.removeItemFromRemoveRoles(s)}},{key:"removeItemFromArray",value:function(e,t,a,n,r,o){o?this.remove_perms.push(r):e.map((function(r,o){r.feature_id==t&&r.property_id==a&&r.perm_kind==n&&e.splice(o,1)}))}},{key:"removeItemFromRemoveRoles",value:function(e){var t=this;this.remove_perms.map((function(a,n){a==e&&t.remove_perms.splice(n,1)}))}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.state,s=l.id,i=l.role_id,c=this.state,m=c.street,u=c.apartment,d=c.door_number,p=c.address_state,f={street:m,apartment:u,door_number:d,level_1:c.aimag_name,level_2:c.sum_name,level_3:c.horoo_name,point:c.point_coordinate,address_state:p};this.checkRoleAndPerm(),h.a.updateEmployee(e,i,s,this.perms,this.remove_perms,f).then((function(e){var t=e.success,l=e.info,s=e.errors;t?(n("saved"),a.setState({model_type_icon:"success",modal_alert_status:"open",title:l}),a.modalCloseTime(),a.props.getEmpRoles()):s&&o(s),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)}))}},{key:"checkRoleAndPerm",value:function(){var e=this;this.role.map((function(t,a){e.emp_perms.map((function(a,n){t.property_id==a.property_id&&t.feature_id==a.feature_id&&t.perm_kind==a.perm_kind&&(e.remove_perms.find((function(e){return e==a.gov_perm_ins_id}))||e.remove_perms.push(a.gov_perm_ins_id))}))}))}},{key:"modalClose",value:function(){this.setState({handleSaveIsLoad:!1}),this.props.history.push(this.state.prefix),this.setState({modal_alert_status:"closed"}),clearTimeout(this.state.timer)}},{key:"modalCloseTime",value:function(){var e=this;setTimeout((function(){e.setState({handleSaveIsLoad:!1}),e.props.history.push(e.state.prefix),e.setState({modal_alert_status:"closed"})}),2e3)}},{key:"handleModalOpen",value:function(){this.setState({modal_status:"open"})}},{key:"handleModalClose",value:function(){this.setState({modal_status:"closed"})}},{key:"addNotif",value:function(e,t,a){var n=this;this.too++,this.setState({show:!0,style:e,msg:t,icon:a});var r=setInterval((function(){n.too--,n.setState({show:!0}),clearInterval(r)}),2e3)}},{key:"handleSendMail",value:function(){var e=this;this.setState({modal_status:"closed"}),this.setState({is_loading:!0});var t=this.state.form_values.username;h.a.sendMail(t).then((function(t){var a=t.success,n=t.info;a&&(e.setState({is_loading:!1}),e.addNotif("success",n,"check"))}))}},{key:"getFeildValues",value:function(e,t,a){var n,r,o=this,l=Object();h.a.formOptions().then((function(s){var i=s.success,c=s.info,m=s.firstOrder_geom;i&&(e&&(l.aimag_id=o.getGeomFromJson(e,c),n=c[l.aimag_id].geo_id,l.aimag_geo_id=n,l.aimag_name=e,r=c[l.aimag_id].children,l.sum=r),t&&(l.sum_id=o.getGeomFromJson(t,r),n=r[l.sum_id].geo_id,l.sum_geo_id=n,r=r[l.sum_id].children,l.horoo=r,l.sum_name=t),a&&(l.horoo_id=o.getGeomFromJson(a,r),n=r[l.horoo_id].geo_id,l.horoo_geo_id=n,l.horoo_name=a),o.getGeom(n),o.setState(ie(ie({aimag:c},l),{},{firstOrder_geom:m})))}))}},{key:"getGeom",value:function(e){var t=this;h.a.getGeom(e).then((function(a){var n=a.feature;n&&t.setState({feature:n,last_geo_id:e})}))}},{key:"getPoint",value:function(e,t){var a=e;"string"==typeof e&&(a=e.split(","));var n=[a[1],a[0]];this.setState({point_coordinate:n,map_coordinate:t})}},{key:"handleChange",value:function(e,t,a,n,r){var o,l=t+"_id",s=t+"_geo_id",i=t+"_name",c=e.target.value,m=Object();if("-1"!==c){var u=this.state[t][c];this.setState(ce({},a,u.children)),a&&(m[a]=u.children),o=u.geo_id,n.map((function(e,t){var a=e+"_geo_id",n=e+"_name";m[e+"_id"]=-1,m[a]="",m[n]=""})),m[s]=o,m[i]=u.name,this.getGeom(o)}else{if(n.length>0&&n.map((function(e,t){var a=e+"_id",n=e+"_geo_id",r=e+"_name";m[e]=[],m[a]=-1,m[n]="",m[r]=""})),"mongol"!==r){var d=r+"_id",p=this.state[d];o=this.state[r][p].geo_id}else o=this.state.firstOrder_geom;m[s]=o,this.getGeom(o)}this.setState(ie(ce({},l,c),m))}},{key:"getGeomFromJson",value:function(e,t){var a;return t.map((function(t,n){t.name==e&&(a=n)})),a}},{key:"refreshMap",value:function(){var e=this.state,t=e.last_geo_id,a=e.is_address_map,n=e.is_marker,r=e.point,o=Object();o.is_address_map=!a,a&&t&&(o.is_marker=!n,o.point=r,this.getGeom(t)),this.setState(ie({},o))}},{key:"render",value:function(){var e=this,t=this.state,a=t.form_values,o=t.roles,l=t.role_list,s=t.prefix,i=t.is_inspire_role,c=t.is_inspire_role_null,m=t.perms,u=t.old_role_id,d=t.role_id,p=(t.id,t.is_address_map),f=this.state,h=f.aimag,y=f.sum,E=f.horoo,N=f.aimag_id,O=f.sum_id,k=f.horoo_id,S=f.address_state,w=f.feature,j=f.street,C=f.apartment,R=f.door_number,P=f.point,F=this.props.org_roles,x=this.state,D=x.positions,M=x.states,T=x.pro_classes;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(_.e,{enableReinitialize:!0,initialValues:a,validationSchema:b.a,onSubmit:this.handleSubmit},(function(t){var s=t.errors,f=t.isSubmitting;return Object.keys(s).length,r.a.createElement(_.d,{className:"col-12"},r.a.createElement(re.a,{is_loading:e.state.is_loading}),r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"username"},"Нэвтрэх нэр:"),r.a.createElement(_.b,{className:"form-control "+(s.username?"is-invalid":""),name:"username",id:"id_username",type:"text",placeholder:"Нэвтрэх нэр"}),r.a.createElement(_.a,{name:"username",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_last_name"},"Овог:"),r.a.createElement(_.b,{className:"form-control "+(s.last_name?"is-invalid":""),name:"last_name",id:"id_last_name",type:"text",placeholder:"Овог"}),r.a.createElement(_.a,{name:"last_name",component:"div",className:"text-danger"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_first_name"},"Нэр:"),r.a.createElement(_.b,{className:"form-control "+(s.first_name?"is-invalid":""),name:"first_name",id:"id_first_name",type:"text",placeholder:"Нэр"}),r.a.createElement(_.a,{name:"first_name",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"position"},"Албан тушаал:"),r.a.createElement(_.b,{name:"position",as:"select",id:"position",style:{fontSize:"0.8rem"},className:"custom-select "+(s.position?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Албан тушаал сонгоно уу ---"),D.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))),r.a.createElement(_.a,{name:"position",component:"span",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"email"},"Цахим хаяг"),r.a.createElement(_.b,{className:"form-control "+(s.email?"is-invalid":""),name:"email",id:"id_email",type:"text",placeholder:"Цахим хаяг"}),r.a.createElement(_.a,{name:"email",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"gender"},"Хүйс:"),r.a.createElement(n.Fragment,null,r.a.createElement(_.b,ce({name:"gender",as:"select",className:"form-control"},"className","form-control "+(s.gender?"is-invalid":"")),r.a.createElement("option",null,"Эрэгтэй"),r.a.createElement("option",null,"Эмэгтэй")),r.a.createElement(_.a,{name:"gender",component:"div",className:"text-dange"})))),e.props.employee.is_admin?r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"register"},"Регистер:"),r.a.createElement(_.b,{className:"form-control "+(s.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(_.a,{name:"register",component:"div",className:"text-danger"})),e.props.employee.is_admin&&r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"choose_role"},"Role: "),r.a.createElement("select",{className:"form-control",id:"choose_role",name:"choose_role",value:e.state.role_id,onChange:function(t){return e.getRole(t.target.value)}},r.a.createElement("option",{value:""},"--- Role сонгоно уу ---"),l.length>0&&l.map((function(e,t){return r.a.createElement("option",{key:t,value:e.role_id},e.role_name)}))))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"phone_number"},"Утасны дугаар:"),r.a.createElement(_.b,{className:"form-control "+(s.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(_.a,{name:"phone_number",component:"div",className:"text-danger"}))),e.props.employee.is_admin&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group col-md-2 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"is_admin"},"Байгууллагын админ"),r.a.createElement(_.b,{className:"ml-2",name:"is_admin",id:"id_is_admin",type:"checkbox"}),r.a.createElement(_.a,{name:"is_admin",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-2 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"is_user"},"Хэрэглэгч"),r.a.createElement(_.b,{className:"ml-2",name:"is_user",id:"id_is_user",type:"checkbox"}),r.a.createElement(_.a,{name:"is_user",component:"div",className:"text-danger"}))),e.props.employee.username==a.username||e.props.employee.is_admin?r.a.createElement("div",{className:"col-md-2 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"btn gp-btn-primary btn-sm","aria-hidden":"true",onClick:e.handleModalOpen}," Нууц үг солих имэйл илгээх")):null)):r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"register"},"Регистер:"),r.a.createElement(_.b,{className:"form-control "+(s.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(_.a,{name:"register",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"phone_number"},"Утасны дугаар:"),r.a.createElement(_.b,{className:"form-control "+(s.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(_.a,{name:"phone_number",component:"div",className:"text-danger"})))),r.a.createElement("div",null,e.props.employee.username==a.username||e.props.employee.is_admin?r.a.createElement("div",{className:"col-md-3 mt-1"},r.a.createElement("button",{type:"button",className:"btn gp-btn-primary btn-sm","aria-hidden":"true",onClick:e.handleModalOpen}," Нууц үг солих имэйл илгээх")):null),r.a.createElement("br",null)),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_state"},"Төлөв:"),r.a.createElement(_.b,{name:"state",as:"select",id:"state",style:{fontSize:"0.8rem"},className:"custom-select "+(s.state?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Ажилтаны төлөвийг сонгоно уу ---"),M.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(_.a,{name:"state",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_pro_class"},"Мэргэжлийн ангийн бүрэлдэхүүн:"),r.a.createElement(_.b,{name:"pro_class",as:"select",id:"pro_class",style:{fontSize:"0.8rem"},className:"custom-select "+(s.pro_class?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Мэргэжлийн ангийн бүрэлдэхүүн ---"),T.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(_.a,{name:"pro_class",component:"div",className:"invalid-feedback"}))),e.props.employee.is_admin&&r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("button",{className:"btn btn-primary btn-block mb-2",type:"button",onClick:function(){return e.refreshMap()}},p?"Гэрийн хаяг оруулах":"Role сонгох")),r.a.createElement("div",null,p&&(i||c)?r.a.createElement(g.default,{action_type:"editable",is_employee:!0,getValue:e.getValue,dontDid:!0,org_roles:F,role:o,is_inspire_role_null:c,editable_is_check:e.perms,emp_perms:u==d?m:null}):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-row p-1"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"form-control "+(s.level_1?"is-invalid":""),"aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:N},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),h.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"form-control "+(s.level_2?"is-invalid":""),onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:O},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),y.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"form-control "+(s.level_3?"is-invalid":""),onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:k},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),E.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"street"},"Гудамж:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"street",className:"form-control "+(s.street?"is-invalid":""),onChange:function(t){return e.setState({street:t.target.value})},value:j,placeholder:"Гудамжны нэрийг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"гудамж")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"apartment"},"Байр:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"apartment",className:"form-control "+(s.apartment?"is-invalid":""),onChange:function(t){return e.setState({apartment:t.target.value})},value:C,placeholder:"Байрны дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"байр")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"door_number"},"Хаалганы дугаар:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"door_number",className:"form-control "+(s.door_number?"is-invalid":""),onChange:function(t){return e.setState({door_number:t.target.value})},value:R,placeholder:"Хаалганы дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"тоот")))),r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label",htmlFor:"id_address_state"},"Байнгын оршин суугаа хаяг"),r.a.createElement("input",{onChange:function(t){return e.setState({address_state:t.target.checked})},className:"form-check-input col-4 "+(s.address_state?"is-invalid":""),type:"checkbox",id:"id_address_state",checked:S})))),r.a.createElement(z,{feature:w,sendPointCoordinate:e.getPoint,map_coordinate:e.state.map_coordinate,point:P,is_marker:e.state.is_marker,class:s.point?"border border-danger":""}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary waves-effect waves-light m-1",disabled:f},f&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),f&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!f&&"Хадгалах"))))})))),r.a.createElement(ae.a,{title:"Та нууц үг солих имэйл илгээхдээ итгэлтэй байна уу?",model_type_icon:"warning",status:this.state.modal_status,modalClose:this.handleModalClose,modalAction:function(){return e.handleSendMail()},actionNameDelete:"Илгээх"}),r.a.createElement(v.a,{modalAction:function(){return e.modalClose()},status:this.state.modal_alert_status,title:this.state.title,model_type_icon:this.state.model_type_icon}),r.a.createElement(ne.a,{show:this.state.show,too:this.too,style:this.state.style,msg:this.state.msg,icon:this.state.icon}),r.a.createElement(B.a,le({},this.props,{name:"Буцах",navlink_url:s})))}}])&&me(t.prototype,a),o&&me(t,o),s}(n.Component);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Oe(e);if(t){var r=Oe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ee(this,a)}}function Ee(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?Ne(e):t}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(s,e);var t,a,o,l=ye(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).state={modal_status_confirm:"closed"},t.handleButtonClick=t.handleButtonClick.bind(Ne(t)),t.modalClose=t.modalClose.bind(Ne(t)),t}return t=s,(a=[{key:"handleButtonClick",value:function(){var e=this;this.setState({modal_status_confirm:"open"},(function(){e.setState({modal_status_confirm:"initial"})}))}},{key:"modalClose",value:function(){this.setState({modal_status_confirm:"closed"})}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("span",{onClick:this.handleButtonClick,className:"btn btn-primary waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa-refresh"})," Токен шинэчлэх"),r.a.createElement(ae.a,{text:"Токенийг шинэчилсэнээр уг URL-ээр одоо ашиглаж байгаа газрууд ажиллахгүй болохыг анхаарна уу!",title:"Токен шинэчлэх",model_type_icon:"warning",actionNameDelete:"Шинэчлэх",status:this.state.modal_status_confirm,modalAction:this.props.onClick,modalClose:this.modalClose}),r.a.createElement(v.a,{status:"success"==this.props.status?"open":"closed",title:this.props.status_info,model_type_icon:"success"}),r.a.createElement(v.a,{status:"fail"==this.props.status?"open":"closed",title:this.props.status_info,model_type_icon:"danger"}))}}])&&ge(t.prototype,a),o&&ge(t,o),s}(n.Component),Se=a(29);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function je(e){return r.a.createElement(Se.c,we({},e,{className:"btn btn-primary waves-effect waves-light m-1"}),r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Засах")}var Ce=a(896);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Te(e);if(t){var r=Te(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return De(this,a)}}function De(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?Me(e):t}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(s,e);var t,a,o,l=xe(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).state={modal_status_confirm:"closed"},t.handleButtonClick=t.handleButtonClick.bind(Me(t)),t.modalClose=t.modalClose.bind(Me(t)),t}return t=s,(a=[{key:"handleButtonClick",value:function(){var e=this;this.setState({modal_status_confirm:"open"},(function(){e.setState({modal_status_confirm:"initial"})}))}},{key:"modalClose",value:function(){this.setState({modal_status_confirm:"closed"})}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("span",{onClick:this.handleButtonClick,className:"btn btn-danger waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa fa-trash-o"})," Устгах"),r.a.createElement(ae.a,{text:'Та "'.concat(this.props.employee_name,'" нэртэй албан хаагчийг устгахдаа итгэлтэй байна уу?'),title:"Албан хаагчийг устгах",model_type_icon:"warning",actionName:"Устгах",status:this.state.modal_status_confirm,modalAction:this.props.onClick,modalClose:this.modalClose}),r.a.createElement(Ce.a,{status:"success"==this.props.status?"open":"closed",title:"Албан хаагчийг амжилттай устгалаа!",model_type_icon:"success",modalAction:this.props.onSuccess}),r.a.createElement(Ce.a,{status:"fail"==this.props.status?"open":"closed",title:"Устгахад алдаа гарлаа!",model_type_icon:"danger"}))}}])&&Pe(t.prototype,a),o&&Pe(t,o),s}(n.Component);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Le(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=qe(e);if(t){var r=qe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ze(this,a)}}function ze(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?Be(e):t}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(l,e);var t,a,n,o=Ie(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={employee:{id:"",username:"",first_name:"",last_name:"",email:"",gender:"",register:"",phone_number:"",position:"",is_admin:!1,is_super:!1},prefix:"/gov/perm/employee/",role_id:t.props.match.params.id,perms:{},role_name:"",roles:{},is_inspire_role:!1,is_inspire_role_null:!1,status_token_refresh:"initial",status_delete:"initial"},t.getDetail=t.getDetail.bind(Be(t)),t.getRole=t.getRole.bind(Be(t)),t.handleTokenRefresh=t.handleTokenRefresh.bind(Be(t)),t.handleDelete=t.handleDelete.bind(Be(t)),t.handleDeleteSuccess=t.handleDeleteSuccess.bind(Be(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"getDetail",value:function(){var e=this,t=this.state.role_id;h.a.getDetailEmployee(t).then((function(t){var a=t.employee_detail,n=t.perms,r=t.role_name,o=t.role_id;t.success&&e.setState({employee:a,perms:n,role_name:r}),e.getRole(o)}))}},{key:"getRole",value:function(e){var t=this;this.setState({role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?h.a.getRole(e).then((function(e){var a=e.success,n=e.roles;a&&t.setState({roles:n,is_inspire_role:!0,is_inspire_role_null:!1})})):new Promise((function(e,a){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"handleTokenRefresh",value:function(){var e=this;this.setState({status_token_refresh:"loading"}),h.a.empTokenRefresh(this.state.employee.id).then((function(t){var a=t.success,n=t.info;a&&e.getDetail(),e.setState({status_token_refresh:a?"success":"fail",info_token_refresh:n})}))}},{key:"handleDelete",value:function(){var e=this;this.setState({status_delete:"loading"});var t=this.state.employee.id;h.a.deleteEmployee(t).then((function(t){var a=t.success;e.setState({status_delete:a?"success":"fail"})}))}},{key:"handleDeleteSuccess",value:function(){this.props.history.push("".concat(this.state.prefix))}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.state,a=t.prefix,n=t.roles,o=t.is_inspire_role,l=t.is_inspire_role_null,s=t.perms,i=t.role_name,c=this.state.employee,m=c.username,u=c.last_name,d=c.first_name,p=c.position,f=c.email,_=c.gender,h=c.register,v=c.phone_number,b=c.is_admin,y=c.is_active,E=c.token,N=c.created_at,O=c.updated_at,k=c.level_1,S=c.level_2,w=c.level_3,j=c.street,C=c.apartment,R=c.door_number,P=c.state,F=c.pro_class,x=c.address_state_display,D=this.state,M=D.status_token_refresh,T=D.status_delete,V=D.info_token_refresh,G=this.props.org_roles;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 p-0 text-right"},this.props.employee.is_admin||this.props.employee.username==m?r.a.createElement(ke,{onClick:this.handleTokenRefresh,status:M,status_info:V}):null,this.props.employee.is_admin||this.props.employee.username==m?r.a.createElement(je,{to:"".concat(a).concat(e,"/edit/")}):null,this.props.employee.is_admin&&r.a.createElement(Ve,{status:T,onClick:this.handleDelete,employee_name:d,onSuccess:this.handleDeleteSuccess}))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Нэвтрэх нэр:"),r.a.createElement("dd",{className:"col-md-9"},m),r.a.createElement("dt",{className:"col-md-3"},"Овог, нэр:"),r.a.createElement("dd",{className:"col-md-9"},u,", ",d),r.a.createElement("dt",{className:"col-md-3"},"Албан тушаал:"),r.a.createElement("dd",{className:"col-md-9"},p),r.a.createElement("dt",{className:"col-md-3"},"Токен:"),r.a.createElement("dd",{className:"col-md-9"},E),r.a.createElement("dt",{className:"col-md-3"},"Мэргэжлийн ангийн бүрэлдэхүүн статус:"),r.a.createElement("dd",{className:"col-md-9"},F)),r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Бүртгэсэн:"),r.a.createElement("dd",{className:"col-md-9"},N),r.a.createElement("dt",{className:"col-md-3"},"Зассан:"),r.a.createElement("dd",{className:"col-md-9"},O))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Мэйл хаяг:"),r.a.createElement("dd",{className:"col-md-9"},f),r.a.createElement("dt",{className:"col-md-3"},"Хүйс:"),r.a.createElement("dd",{className:"col-md-9"},_),r.a.createElement("dt",{className:"col-md-3"},"Регистр:"),r.a.createElement("dd",{className:"col-md-9"},h),r.a.createElement("dt",{className:"col-md-3"},"Утасны дугаар:"),r.a.createElement("dd",{className:"col-md-9"},v),r.a.createElement("dt",{className:"col-md-3"},"Эрх:"),r.a.createElement("dd",{className:"col-md-9"},i),r.a.createElement("dt",{className:"col-md-3"},"Ажилтны төлөв:"),r.a.createElement("dd",{className:"col-md-9"},P)),k&&r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Гэрийн хаяг:"),r.a.createElement("dd",{className:"col-md-9"},k+", "+S+", "+w+", "+j+" гудамж "+C+" байр, "+R+" тоот"),r.a.createElement("dt",{className:"col-md-3"},"Төлөв:"),r.a.createElement("dd",{className:"col-md-9"},x)),b&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-check-circle-o fa-lg","aria-hidden":"true"})," Байгууллагын админ"),!y&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-times-circle text-danger fa-lg","aria-hidden":"true"})," Нэвтрэх эрхгүй")))),r.a.createElement("div",null,o||l?r.a.createElement(g.default,{action_type:"viewable",is_employee:!0,dontDid:!0,org_roles:l?G:n,emp_perms:s,is_inspire_role_null:l}):null)),r.a.createElement(B.a,Je({},this.props,{name:"Буцах",navlink_url:a})))}}])&&Le(t.prototype,a),n&&Le(t,n),l}(n.Component);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function He(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ze(e);if(t){var r=Ze(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return We(this,a)}}function We(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(s,e);var t,a,n,l=Qe(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).state={},t}return t=s,(a=[{key:"render",value:function(){var e=this,t=this.props,a=t.org_roles,n=t.getEmpRoles,l=t.employee,s=this.props.employee,i=s.is_admin;return s.username,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/",component:function(e){return r.a.createElement(f,Ye({},e,{employee:l}))}}),r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/:id/edit/",component:function(t){return r.a.createElement(he,Ye({},t,{org_roles:a,getEmpRoles:n,employee:l,states:e.state.states,pro_classes:e.state.pro_classes,positions:e.state.positions}))}}),i&&r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/add/",component:function(t){return r.a.createElement(te,Ye({},t,{org_roles:a,employee:l,states:e.state.states,pro_classes:e.state.pro_classes,positions:e.state.positions}))}}),r.a.createElement(o.a,{exact:!0,path:"/gov/perm/employee/:id/detail/",component:function(e){return r.a.createElement(Ue,Ye({},e,{org_roles:a,employee:l}))}}))}}])&&He(t.prototype,a),n&&He(t,n),s}(n.Component)}}]);