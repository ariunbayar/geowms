(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1105:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return u}));var n=a(0),r=a.n(n);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m(e);if(t){var r=m(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,t);var a,o,c,m=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=m.call(this,e)).state={},t}return a=u,(o=[{key:"handleButtonClick",value:function(){console.log(this.state.modal_status);var t={modal_status:"open",modal_icon:"fa fa-exclamation-circle",icon_color:"warning",modal_bg:"",title:"Албан хаагчийг чөлөөлөх",text:"".concat('Та "'.concat(this.props.employee_name,'" нэртэй албан хаагчийн төлөв чөлөөлөгдсөн болно. Та чөлөөлөх итгэлтэй байна уу?')),has_button:!0,actionNameDelete:"Тийм",actionNameBack:"Үгүй",modalAction:this.props.onClick,modalClose:null};e.MODAL(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("span",{onClick:function(){return e.handleButtonClick()},className:"btn btn-danger waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa fa-trash-o"})," Чөлөөлөх"))}}])&&i(a.prototype,o),c&&i(a,c),u}(n.Component)}).call(this,a(47))},579:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),r=a.n(n),o=a(31);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=d(e);if(t){var r=d(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,a,n,i=m(u);function u(){return l(this,u),i.apply(this,arguments)}return t=u,(a=[{key:"render",value:function(){return this.props.navlink_url?r.a.createElement(o.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},r.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?r.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},r.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):r.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},r.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&s(t.prototype,a),n&&s(t,n),u}(n.Component)},951:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Be}));var n=a(0),r=a.n(n),o=a(13),i=a(975);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p(e);if(t){var r=p(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,a,n,o=m(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={refresh:!1,"жагсаалтын_холбоос":"/gov/api/role/employee/","нэмэх_товч":"/gov/perm/employee/add/",custom_query:{},"талбарууд":[{field:"user__first_name",title:"Нэр",has_action:!0},{field:"user__email",title:"Цахим шуудан"},{field:"position",title:"Албан тушаал"},{field:"role_name",title:"Role",is_sort:!0},{field:"is_admin",title:"Админ",has_action:!0,is_center:!0}],"хувьсах_талбарууд":[{field:"user__first_name",action:function(e){return t.go_link(e)}},{field:"user__email",text:""},{field:"position",text:""},{field:"is_admin",action:function(e){return t.set_icon(e)},action_type:!0,is_center:!0}],is_user:!0,drop_name:"Хэрэглэгч"},t.handleListChange=t.handleListChange.bind(d(t)),t}return t=l,(a=[{key:"set_icon",value:function(e){return e?"fa fa-check-circle-o text-success fa-lg":"fa fa-times-circle-o text-danger fa-lg"}},{key:"go_link",value:function(e){this.props.history.push("/gov/perm/employee/".concat(e.id,"/detail/"))}},{key:"handleListChange",value:function(e,t){this.setState({is_user:e,drop_name:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.refresh,n=t.талбарууд,o=t.жагсаалтын_холбоос,l=t.хувьсах_талбарууд,s=t.custom_query,c=t.нэмэх_товч,m=t.нэмэлт_талбарууд,u=t.is_user,d=this.props.employee.is_admin;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"d-flex flex-row-reverse mb-2"},r.a.createElement("div",{className:"dropdown-menu-right show"},r.a.createElement("a",{className:"btn-sm dropdown-toggle",href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.drop_name),r.a.createElement("div",{className:"dropdown-menu mr-2","aria-labelledby":"dropdownMenuLink"},r.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleListChange(!0,"Хэрэглэгч")}},"Хэрэглэгч"),r.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleListChange(!1,"Бүх ажилчид")}},"Бүх ажилчид")))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(i.a,{refresh:a,color:"bg-dark","талбарууд":n,"жагсаалтын_холбоос":o,per_page:20,"уншиж_байх_үед_зурвас":"Хүсэлтүүд уншиж байна","хувьсах_талбарууд":l,"нэмэх_товч":d?c:null,custom_query:s,"нэмэлт_талбарууд":m,is_user:u}))))}}])&&s(t.prototype,a),n&&s(t,n),l}(n.Component),h=a(22),_=a(978),v=a(75),b=a(928),g=a(988),y=a(115),E=a(580),N=a(303),O=a(172),k=a(972),S=a(197),w=a(67),j=a(2),C=a(130),P=a(926),R=a(226),x=a(223),F=a(17),D=a(76),M=a(302);a(245);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=q(e);if(t){var r=q(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return L(this,a)}}function L(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,e);var t,a,n,o=J(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={projection_data:"EPSG:4326",projection_display:"EPSG:3857",coordinate_clicked:[],features:[]},t.marker=t.initMarker(),t.loadMap=t.loadMap.bind(A(t)),t.handleMapClick=t.handleMapClick.bind(A(t)),t.setFeatures=t.setFeatures.bind(A(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(A(t)),t}return t=i,(a=[{key:"initMarker",value:function(){var e=new C.c({image:new P.a({anchor:[.5,86],anchorXUnits:"fraction",anchorYUnits:"pixels",scale:.4,src:"/static/assets/image/marker.png"})}),t=new D.a([0,0]),a=new y.a({geometry:t});return a.setStyle(e),{feature:a,point:t}}},{key:"componentDidMount",value:function(){this.loadMap(),0!==this.props.map_coordinate.length&&this.marker.point.setCoordinates(this.props.map_coordinate)}},{key:"componentDidUpdate",value:function(e,t){e.feature!==this.props.feature&&this.props.feature!=={}&&(this.setFeatures(this.props.feature),0!==Object.keys(this.props.point).length&&0==this.props.map_coordinate.length&&this.setMarker(this.props.point))}},{key:"removeFeatureFromSource",value:function(e){var t=this.vector_layer.getSource(),a=t.getFeatures();if(null!=a&&a.length>0)for(var n=0;n<a.length;n++)if(a[n].getProperties().id==e){t.removeFeature(a[n]);break}}},{key:"fromLonLatToMapCoord",value:function(e){return Object(j.d)(e)}},{key:"setMarker",value:function(e){var t=JSON.parse(e);if(t){var a=t.coordinates,n=this.fromLonLatToMapCoord(a);this.marker.point.setCoordinates(n),this.props.sendPointCoordinate([a[1],a[0]],n)}}},{key:"setFeatures",value:function(e){var t="aimag_sum";this.removeFeatureFromSource(t),(e=(new M.a).readFeatures(e,{dataProjection:this.state.projection_data,featureProjection:this.state.projection_display}))[0].setProperties({id:t}),this.vector_layer.getSource().addFeature(e[0]),this.map.getView().fit(e[0].getGeometry(),{padding:[100,100,100,100],duration:2e3})}},{key:"loadMap",value:function(){var e=new S.a({source:new O.a({features:[this.marker.feature]})});this.marker_layer=e;var t=new S.a({source:new O.a({}),style:new C.c({stroke:new R.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new x.a({color:"rgba(100, 255, 0, 0.3)"})})});this.vector_layer=t;var a=new E.a({layers:[new w.a({source:new k.a}),t,e],target:"map",view:new N.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});a.on("click",this.handleMapClick),this.map=a}},{key:"handleMapClick",value:function(e){var t=e.coordinate;this.marker.point.setCoordinates(t);var a=e.map.getView().getProjection(),n=Object(j.p)(e.coordinate,a,this.state.projection_data),r=Object(F.f)(n,"{y},{x}",6);this.props.sendPointCoordinate(r,t),this.setState({coordinate_clicked:r})}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",style:{height:"calc( 50vh - 85px - 15px)"},className:"".concat(this.props.class)})}}])&&G(t.prototype,a),n&&G(t,n),i}(n.Component),z=a(579);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){X(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ee(e);if(t){var r=ee(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Z(this,a)}}function Z(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(l,e);var t,a,o,i=Q(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).perms=[],t.role=[],t.remove_perms=[],t.state={form_values:{username:"",last_name:"",first_name:"",position:"",email:"",gender:"Эрэгтэй",register:"",phone_number:"",is_admin:!1,choose_role:"",state:1,pro_class:"",is_user:!0},role_list:[],emp_role_id:null,roles:{},modal_status:"closed",prefix:"/gov/perm/employee/",is_inspire_role:!1,is_inspire_role_null:!0,aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",feature:{},description:"",point_coordinate:[],point:{},street:"",apartment:"",door_number:"",map_coordinate:[],is_marker:!0,address_state:!0,is_address_map:!0,firstOrder_geom:"",positions:[],states:[],pro_classes:[]},t.handleSubmit=t.handleSubmit.bind($(t)),t.modalClose=t.modalClose.bind($(t)),t.getRolesForOption=t.getRolesForOption.bind($(t)),t.getRole=t.getRole.bind($(t)),t.getValue=t.getValue.bind($(t)),t.getFeildValues=t.getFeildValues.bind($(t)),t.handleChange=t.handleChange.bind($(t)),t.getPoint=t.getPoint.bind($(t)),t.getGeomFromJson=t.getGeomFromJson.bind($(t)),t.getGeom=t.getGeom.bind($(t)),t.refreshMap=t.refreshMap.bind($(t)),t.getSelectValue=t.getSelectValue.bind($(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){this.getRolesForOption(),this.getFeildValues(),this.getSelectValue()}},{key:"getRolesForOption",value:function(){var e=this;_.a.getRoleList().then((function(t){var a=t.success,n=t.roles;a&&e.setState({role_list:n})}))}},{key:"getRole",value:function(e){var t=this;this.setState({emp_role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?_.a.getRole(e).then((function(e){var a=e.success,n=(e.role_name,e.role_id,e.role_description,e.roles);a&&t.setState({roles:n,is_inspire_role:!0})})):new Promise((function(e,a){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"getValue",value:function(e,t,a,n,r,o,i,l){var s=this;if(!e&&this.perms.length>0&&this.perms.map((function(e,r){e.feature_id==n&&e.property_id==a&&e.perm_kind==t&&s.perms.splice(r,1)})),e){var c={feature_id:n,property_id:a,perm_kind:t,gov_perm_ins_id:r,emp_role_ins_id:l||null};this.perms.push(c)}}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,i=this.state,l=i.emp_role_id,s=i.is_address_map,c=this.state,m=c.street,u=c.apartment,d=c.door_number,p=c.address_state,f={street:m,apartment:u,door_number:d,level_1:c.aimag_name,level_2:c.sum_name,level_3:c.horoo_name,point:c.point_coordinate,address_state:p};s&&(s&&this.state.last_geo_id&&this.getGeom(this.state.last_geo_id),this.setState({is_address_map:!s})),_.a.createEmployee(e,l,this.perms,f).then((function(e){var t=e.success,i=e.errors;e.info,t?(n("saved"),a.setState({modal_status:"open"},(function(){a.setState({modal_status:"initial"})}))):i&&o(i),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)}))}},{key:"modalClose",value:function(){this.props.history.push(this.state.prefix)}},{key:"getFeildValues",value:function(e,t,a){var n,r,o=this,i=Object();_.a.formOptions().then((function(l){var s=l.success,c=l.info,m=l.firstOrder_geom;s&&(e&&(i.aimag_id=o.getGeomFromJson(e,c),n=c[i.aimag_id].geo_id,i.aimag_geo_id=n,i.aimag_name=e,r=c[i.aimag_id].children,i.sum=r),t&&(i.sum_id=o.getGeomFromJson(t,r),n=r[i.sum_id].geo_id,i.sum_geo_id=n,r=r[i.sum_id].children,i.horoo=r,i.sum_name=t),a&&(i.horoo_id=o.getGeomFromJson(a,r),n=r[i.horoo_id].geo_id,i.horoo_geo_id=n,i.horoo_name=a),o.getGeom(n),o.setState(W(W({aimag:c},i),{},{firstOrder_geom:m})))}))}},{key:"getGeom",value:function(e){var t=this;_.a.getGeom(e).then((function(a){var n=a.data;n&&t.setState({feature:n,last_geo_id:e})}))}},{key:"getSelectValue",value:function(){var e=this;_.a.getSelectValue().then((function(t){var a=t.success,n=t.positions,r=t.states,o=t.pro_classes;a&&e.setState({positions:n,states:r,pro_classes:o})}))}},{key:"getPoint",value:function(e,t){var a=e;"string"==typeof e&&(a=e.split(","));var n=[a[1],a[0]];this.setState({point_coordinate:n,map_coordinate:t})}},{key:"handleChange",value:function(e,t,a,n,r){var o,i=t+"_id",l=t+"_geo_id",s=t+"_name",c=e.target.value,m=Object();if("-1"!==c){var u=this.state[t][c];this.setState(X({},a,u.children)),a&&(m[a]=u.children),o=u.geo_id,n.map((function(e,t){var a=e+"_geo_id",n=e+"_name";m[e+"_id"]=-1,m[a]="",m[n]=""})),m[l]=o,m[s]=u.name,this.getGeom(o)}else{if(n.length>0&&n.map((function(e,t){var a=e+"_id",n=e+"_geo_id",r=e+"_name";m[e]=[],m[a]=-1,m[n]="",m[r]=""})),"mongol"!==r){var d=r+"_id",p=this.state[d];o=this.state[r][p].geo_id}else o=this.state.firstOrder_geom;m[l]=o,this.getGeom(o)}this.setState(W(X({},i,c),m))}},{key:"refreshMap",value:function(){var e=this.state,t=e.last_geo_id,a=e.is_address_map,n=e.is_marker,r=e.point,o=Object();o.is_address_map=!a,a&&t&&(o.is_marker=!n,o.point=r,this.getGeom(t)),this.setState(W({},o))}},{key:"getGeomFromJson",value:function(e,t){var a;return t.map((function(t,n){t.name==e&&(a=n)})),a}},{key:"render",value:function(){var e=this,t=this.state,a=t.form_values,o=t.roles,i=t.role_list,l=(t.emp_role_id,t.prefix),s=t.is_inspire_role,c=t.is_inspire_role_null,m=t.aimag,u=t.sum,d=t.horoo,p=t.aimag_id,f=t.sum_id,_=t.horoo_id,y=t.feature,E=t.street,N=t.apartment,O=t.door_number,k=t.point,S=t.address_state,w=t.is_address_map,j=t.positions,C=t.states,P=t.pro_classes,R=(t.is_user,this.props.org_roles);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(h.e,{enableReinitialize:!0,initialValues:a,validationSchema:g.a,onSubmit:this.handleSubmit},(function(t){var a=t.errors,l=t.isSubmitting;return Object.keys(a).length,r.a.createElement(h.d,{className:"col-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_username"},"Нэвтрэх нэр:"),r.a.createElement(h.b,{className:"form-control "+(a.username?"is-invalid":""),name:"username",id:"id_username",type:"text",placeholder:"Нэвтрэх нэр"}),r.a.createElement(h.a,{name:"username",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_last_name"},"Овог:"),r.a.createElement(h.b,{className:"form-control "+(a.last_name?"is-invalid":""),name:"last_name",id:"id_last_name",type:"text",placeholder:"Овог"}),r.a.createElement(h.a,{name:"last_name",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_first_name"},"Нэр:"),r.a.createElement(h.b,{className:"form-control "+(a.first_name?"is-invalid":""),name:"first_name",id:"id_first_name",type:"text",placeholder:"Нэр"}),r.a.createElement(h.a,{name:"first_name",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"position"},"Албан тушаал:"),r.a.createElement(h.b,{name:"position",as:"select",id:"position",style:{fontSize:"0.8rem"},className:"custom-select "+(a.position?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Албан тушаал сонгоно уу ---"),j.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))),r.a.createElement(h.a,{name:"position",component:"span",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_email"},"Цахим хаяг"),r.a.createElement(h.b,{className:"form-control "+(a.email?"is-invalid":""),name:"email",id:"id_email",type:"text",placeholder:"Цахим хаяг"}),r.a.createElement(h.a,{name:"email",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"gender"},"Хүйс:"),r.a.createElement(n.Fragment,null,r.a.createElement(h.b,X({name:"gender",as:"select",className:"form-control"},"className","form-control "+(a.gender?"is-invalid":"")),r.a.createElement("option",null,"Эрэгтэй"),r.a.createElement("option",null,"Эмэгтэй")),r.a.createElement(h.a,{name:"gender",component:"div",className:"text-dange"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_register"},"Регистер:"),r.a.createElement(h.b,{className:"form-control "+(a.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(h.a,{name:"register",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"choose_role"},"Role: "),r.a.createElement("select",{className:"form-control "+(a.choose_role?"is-invalid":""),id:"choose_role",name:"choose_role",onChange:function(t){return e.getRole(t.target.value)}},r.a.createElement("option",{value:""},"--- Role сонгоно уу ---"),i.length>0&&i.map((function(e,t){return r.a.createElement("option",{key:t,value:e.role_id},e.role_name)}))),r.a.createElement(h.a,{name:"choose_role",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_phone_number"},"Утасны дугаар:"),r.a.createElement(h.b,{className:"form-control "+(a.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(h.a,{name:"phone_number",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-row col-md-3 mt-4 text-center"},r.a.createElement("br",null),r.a.createElement("label",{className:"",htmlFor:"id_is_admin"},"Байгууллагын админ"),r.a.createElement(h.b,{className:"ml-2",name:"is_admin",id:"id_is_admin",type:"checkbox"}),r.a.createElement(h.a,{name:"is_admin",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-row col-md-3 mt-4 text-center"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"id_is_user"},"Хэрэглэгч"),r.a.createElement(h.b,{name:"is_user",className:"ml-2",type:"checkbox",id:"id_is_user"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_state"},"Төлөв:"),r.a.createElement(h.b,{name:"state",as:"select",id:"id_state",style:{fontSize:"0.8rem"},className:"custom-select "+(a.state?"is-invalid":"")},C.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(h.a,{name:"state",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_pro_class"},"Мэргэжлийн ангийн бүрэлдэхүүн:"),r.a.createElement(h.b,{name:"pro_class",as:"select",id:"id_pro_class",style:{fontSize:"0.8rem"},className:"custom-select "+(a.pro_class?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Мэргэжлийн ангийн бүрэлдэхүүн ---"),P.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(h.a,{name:"pro_class",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("button",{className:"btn btn-primary btn-block mb-2",type:"button",onClick:function(){return e.refreshMap()}},w?"Гэрийн хаяг оруулах":"Role сонгох"))),r.a.createElement("div",null,w&&(s||c)?r.a.createElement(b.default,{action_type:"editable",is_employee:!0,getValue:e.getValue,dontDid:!0,org_roles:R,role:o,is_inspire_role_null:c,editable_is_check:e.perms}):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-row p-1"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"form-control "+(a.level_1?"is-invalid":""),"aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:p},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),m.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"form-control "+(a.level_2?"is-invalid":""),onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:f},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),u.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"form-control "+(a.level_3?"is-invalid":""),onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:_},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),d.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"street"},"Гудамж:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"street",className:"form-control "+(a.street?"is-invalid":""),onChange:function(t){return e.setState({street:t.target.value})},value:E,placeholder:"Гудамжны нэрийг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"гудамж")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"apartment"},"Байр:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"apartment",className:"form-control "+(a.apartment?"is-invalid":""),onChange:function(t){return e.setState({apartment:t.target.value})},value:N,placeholder:"Байрны дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"байр")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"door_number"},"Хаалганы дугаар:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"door_number",className:"form-control "+(a.door_number?"is-invalid":""),onChange:function(t){return e.setState({door_number:t.target.value})},value:O,placeholder:"Хаалганы дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"тоот")))),r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label",htmlFor:"id_address_state"},"Байнгын оршин суугаа хаяг"),r.a.createElement("input",{onChange:function(t){return e.setState({address_state:t.target.checked})},className:"form-check-input col-4 "+(a.address_state?"is-invalid":""),type:"checkbox",id:"id_address_state",checked:S})))),r.a.createElement(I,{feature:y,sendPointCoordinate:e.getPoint,map_coordinate:e.state.map_coordinate,point:k,is_marker:e.state.is_address_map,class:a.point?"border border-danger":""}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary waves-effect waves-light m-1",disabled:l},l&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),l&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!l&&"Хадгалах"))))})))),r.a.createElement(v.a,{modal_status:this.state.modal_status,modal_icon:"fa fa-check-circle",icon_color:"success",title:"Амжилттай нэмлээ",has_button:!1,text:"",modalClose:this.modalClose}),r.a.createElement(z.a,H({},this.props,{name:"Буцах",navlink_url:l})))}}])&&Y(t.prototype,a),o&&Y(t,o),l}(n.Component),ae=a(85),ne=a(119);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){se(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ce(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=fe(e);if(t){var r=fe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return de(this,a)}}function de(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?pe(e):t}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(l,e);var t,a,o,i=ue(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).too=0,t.perms=[],t.role=[],t.remove_perms=[],t.emp_perms=[],t.state={form_values:{username:"",last_name:"",first_name:"",position:"",email:"",gender:"",register:"",phone_number:"",is_admin:!1,state:1,pro_class:"",is_user:!1},modal_status:"closed",is_loading:!0,roles:{},perms:{},role_id:"",old_role_id:null,is_inspire_role:!1,is_inspire_role_null:!1,prefix:"/gov/perm/employee/",id:t.props.match.params.id,role_list:[],is_address_map:!1,aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",feature:{},description:"",point_coordinate:[],point:{},street:"",apartment:"",door_number:"",address_state:!0,map_coordinate:[],is_marker:!0,firstOrder_geom:"",positions:[],states:[],pro_classes:[]},t.handleSubmit=t.handleSubmit.bind(pe(t)),t.getRolesForOption=t.getRolesForOption.bind(pe(t)),t.getDetail=t.getDetail.bind(pe(t)),t.getRole=t.getRole.bind(pe(t)),t.getValue=t.getValue.bind(pe(t)),t.removeItemFromArray=t.removeItemFromArray.bind(pe(t)),t.removeItemFromRemoveRoles=t.removeItemFromRemoveRoles.bind(pe(t)),t.checkRoleAndPerm=t.checkRoleAndPerm.bind(pe(t)),t.handleModalOpen=t.handleModalOpen.bind(pe(t)),t.addNotif=t.addNotif.bind(pe(t)),t.handleSendMail=t.handleSendMail.bind(pe(t)),t.getFeildValues=t.getFeildValues.bind(pe(t)),t.handleChange=t.handleChange.bind(pe(t)),t.getPoint=t.getPoint.bind(pe(t)),t.getGeomFromJson=t.getGeomFromJson.bind(pe(t)),t.getGeom=t.getGeom.bind(pe(t)),t.refreshMap=t.refreshMap.bind(pe(t)),t.modalChange=t.modalChange.bind(pe(t)),t.handleChangeMail=t.handleChangeMail.bind(pe(t)),t.handleHistory=t.handleHistory.bind(pe(t)),t.getSelectValue=t.getSelectValue.bind(pe(t)),t}return t=l,(a=[{key:"componentDidMount",value:function(){this.perms=[],this.role=[],this.remove_perms=[],this.emp_perms=[],this.getDetail(),this.state.id||this.getFeildValues(),this.getSelectValue()}},{key:"getSelectValue",value:function(){var e=this;_.a.getSelectValue().then((function(t){var a=t.success,n=t.positions,r=t.states,o=t.pro_classes;a&&e.setState({positions:n,states:r,pro_classes:o})}))}},{key:"getDetail",value:function(){var e=this,t=this.state.id;_.a.getDetailEmployee(t).then((function(t){var a=t.success,n=t.employee_detail,r=t.role_id,o=t.perms;a&&(e.getFeildValues(n.level_1,n.level_2,n.level_3),e.setState({perms:o,role_id:r,old_role_id:r,is_loading:!1,form_values:{username:n.username,last_name:n.last_name,first_name:n.first_name,position:n.position_id,email:n.email,gender:n.gender,register:n.register,phone_number:n.phone_number,is_admin:n.is_admin,state:n.state_id,pro_class:n.pro_class_id,is_user:n.is_user},point:n.point,street:n.street,apartment:n.apartment,door_number:n.door_number,address_state:n.address_state}),e.getRolesForOption())}))}},{key:"getRolesForOption",value:function(){var e=this;_.a.getRoleList().then((function(t){var a=t.success,n=t.roles;a&&(e.setState({role_list:n}),e.getRole(e.state.role_id))}))}},{key:"getRole",value:function(e){var t=this;this.perms=[],this.emp_perms=[],this.setState({role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?_.a.getRole(e).then((function(e){var a=e.success,n=e.roles;a&&(t.role=[],t.setState({roles:n,is_inspire_role:!0}),t.refreshMap())})):new Promise((function(e,a){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"getValue",value:function(e,t,a,n,r,o,i,l,s){if(e||null!=o||this.removeItemFromArray(this.role,n,a,t,l,s),!e&&this.perms.length>0&&this.removeItemFromArray(this.perms,n,a,t),e&&!o&&!s||e&&("role"==o||"perms"==o)){var c={feature_id:n,property_id:a,perm_kind:t,gov_perm_ins_id:r,emp_role_ins_id:l||null};"role"==o&&this.role.push(c),"perms"==o?this.emp_perms.push(c):this.perms.push(c)}s&&e&&null==o&&this.remove_perms.length>0&&this.removeItemFromRemoveRoles(l)}},{key:"removeItemFromArray",value:function(e,t,a,n,r,o){o?this.remove_perms.push(r):e.map((function(r,o){r.feature_id==t&&r.property_id==a&&r.perm_kind==n&&e.splice(o,1)}))}},{key:"removeItemFromRemoveRoles",value:function(e){var t=this;this.remove_perms.map((function(a,n){a==e&&t.remove_perms.splice(n,1)}))}},{key:"handleSubmit",value:function(e,t){var a=this,n=t.setStatus,r=t.setSubmitting,o=t.setErrors,i=this.state,l=i.id,s=i.role_id,c=i.is_address_map,m=this.state,u=m.street,d=m.apartment,p=m.door_number,f=m.address_state,h={street:u,apartment:d,door_number:p,level_1:m.aimag_name,level_2:m.sum_name,level_3:m.horoo_name,point:m.point_coordinate,address_state:f};this.checkRoleAndPerm(),c&&this.refreshMap(),_.a.updateEmployee(e,s,l,this.perms,this.remove_perms,h).then((function(e){var t=e.success,i=(e.info,e.errors);t?(n("saved"),a.modalChange("fa fa-check-circle","success","Амжилттай хадгаллаа","",!1,a.handleHistory)):i&&o(i),r(!1)})).catch((function(e){alert("Алдаа гарсан байна"),r(!1)}))}},{key:"checkRoleAndPerm",value:function(){var e=this;this.role.map((function(t,a){e.emp_perms.map((function(a,n){t.property_id==a.property_id&&t.feature_id==a.feature_id&&t.perm_kind==a.perm_kind&&(e.remove_perms.find((function(e){return e==a.gov_perm_ins_id}))||e.remove_perms.push(a.gov_perm_ins_id))}))}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"addNotif",value:function(e,t,a){var n=this;this.too++,this.setState({show:!0,style:e,msg:t,icon:a});var r=setInterval((function(){n.too--,n.setState({show:!0}),clearInterval(r)}),2e3)}},{key:"handleSendMail",value:function(){var e=this;this.setState({is_loading:!0});var t=this.state.form_values.username;_.a.sendMail(t).then((function(t){var a=t.success,n=t.info;a&&(e.setState({is_loading:!1}),e.addNotif("success",n,"check"))}))}},{key:"getFeildValues",value:function(e,t,a){var n,r,o=this,i=Object();_.a.formOptions().then((function(l){var s=l.success,c=l.info,m=l.firstOrder_geom;s&&(e&&(i.aimag_id=o.getGeomFromJson(e,c),n=c[i.aimag_id].geo_id,i.aimag_geo_id=n,i.aimag_name=e,r=c[i.aimag_id].children,i.sum=r),t&&(i.sum_id=o.getGeomFromJson(t,r),n=r[i.sum_id].geo_id,i.sum_geo_id=n,r=r[i.sum_id].children,i.horoo=r,i.sum_name=t),a&&(i.horoo_id=o.getGeomFromJson(a,r),n=r[i.horoo_id].geo_id,i.horoo_geo_id=n,i.horoo_name=a),o.getGeom(n),o.setState(le(le({aimag:c},i),{},{firstOrder_geom:m})))}))}},{key:"getGeom",value:function(e){var t=this;_.a.getGeom(e).then((function(a){var n=a.data;n&&t.setState({feature:n,last_geo_id:e})}))}},{key:"getPoint",value:function(e,t){var a=e;"string"==typeof e&&(a=e.split(","));var n=[a[1],a[0]];this.setState({point_coordinate:n,map_coordinate:t})}},{key:"handleChange",value:function(e,t,a,n,r){var o,i=t+"_id",l=t+"_geo_id",s=t+"_name",c=e.target.value,m=Object();if("-1"!==c){var u=this.state[t][c];this.setState(se({},a,u.children)),a&&(m[a]=u.children),o=u.geo_id,n.map((function(e,t){var a=e+"_geo_id",n=e+"_name";m[e+"_id"]=-1,m[a]="",m[n]=""})),m[l]=o,m[s]=u.name,this.getGeom(o)}else{if(n.length>0&&n.map((function(e,t){var a=e+"_id",n=e+"_geo_id",r=e+"_name";m[e]=[],m[a]=-1,m[n]="",m[r]=""})),"mongol"!==r){var d=r+"_id",p=this.state[d];o=this.state[r][p].geo_id}else o=this.state.firstOrder_geom;m[l]=o,this.getGeom(o)}this.setState(le(se({},i,c),m))}},{key:"getGeomFromJson",value:function(e,t){var a;return t.map((function(t,n){t.name==e&&(a=n)})),a}},{key:"refreshMap",value:function(){var e=this.state,t=e.last_geo_id,a=e.is_address_map,n=e.is_marker,r=e.point,o=Object();o.is_address_map=!a,a&&t&&(o.is_marker=!n,o.point=r,this.getGeom(t)),this.setState(le({},o))}},{key:"modalChange",value:function(e,t,a,n,r,o){var i=this;this.setState({modal_icon:e,icon_color:t,title:a,text:n,has_button:r,modalClose:o},(function(){return i.handleModalOpen()}))}},{key:"handleChangeMail",value:function(){this.modalChange("fa fa-exclamation-circle","warning","Нууц үг солих","Та нууц үг солих имэйл илгээхдээ итгэлтэй байна уу?",!0,null)}},{key:"handleHistory",value:function(){this.props.history.push(this.state.prefix)}},{key:"render",value:function(){var e=this,t=this.state,a=t.form_values,o=t.roles,i=t.role_list,l=t.prefix,s=t.is_inspire_role,c=t.is_inspire_role_null,m=t.perms,u=t.old_role_id,d=t.role_id,p=(t.id,t.is_address_map),f=this.state,_=f.aimag,y=f.sum,E=f.horoo,N=f.aimag_id,O=f.sum_id,k=f.horoo_id,S=f.address_state,w=f.feature,j=f.street,C=f.apartment,P=f.door_number,R=f.point,x=this.props.org_roles,F=this.state,D=F.positions,M=F.states,V=F.pro_classes;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(h.e,{enableReinitialize:!0,initialValues:a,validationSchema:g.a,onSubmit:this.handleSubmit},(function(t){var l=t.errors,f=t.isSubmitting;return Object.keys(l).length,r.a.createElement(h.d,{className:"col-12"},r.a.createElement(ne.a,{is_loading:e.state.is_loading}),r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_username"},"Нэвтрэх нэр:"),r.a.createElement(h.b,{className:"form-control "+(l.username?"is-invalid":""),name:"username",id:"id_username",type:"text",placeholder:"Нэвтрэх нэр"}),r.a.createElement(h.a,{name:"username",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_last_name"},"Овог:"),r.a.createElement(h.b,{className:"form-control "+(l.last_name?"is-invalid":""),name:"last_name",id:"id_last_name",type:"text",placeholder:"Овог"}),r.a.createElement(h.a,{name:"last_name",component:"div",className:"text-danger"})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_first_name"},"Нэр:"),r.a.createElement(h.b,{className:"form-control "+(l.first_name?"is-invalid":""),name:"first_name",id:"id_first_name",type:"text",placeholder:"Нэр"}),r.a.createElement(h.a,{name:"first_name",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"position"},"Албан тушаал:"),r.a.createElement(h.b,{name:"position",as:"select",id:"position",style:{fontSize:"0.8rem"},className:"custom-select "+(l.position?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Албан тушаал сонгоно уу ---"),D.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))),r.a.createElement(h.a,{name:"position",component:"span",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_email"},"Цахим хаяг"),r.a.createElement(h.b,{className:"form-control "+(l.email?"is-invalid":""),name:"email",id:"id_email",type:"text",placeholder:"Цахим хаяг"}),r.a.createElement(h.a,{name:"email",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_gender"},"Хүйс:"),r.a.createElement(n.Fragment,null,r.a.createElement(h.b,se({name:"gender",as:"select",id:"id_gender",className:"form-control"},"className","form-control "+(l.gender?"is-invalid":"")),r.a.createElement("option",null,"Эрэгтэй"),r.a.createElement("option",null,"Эмэгтэй")),r.a.createElement(h.a,{name:"gender",component:"div",className:"text-dange"})))),e.props.employee.is_admin?r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_register"},"Регистер:"),r.a.createElement(h.b,{className:"form-control "+(l.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(h.a,{name:"register",component:"div",className:"text-danger"})),e.props.employee.is_admin&&r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"choose_role"},"Role: "),r.a.createElement("select",{className:"form-control",id:"choose_role",name:"choose_role",value:e.state.role_id,onChange:function(t){return e.getRole(t.target.value)}},r.a.createElement("option",{value:""},"--- Role сонгоно уу ---"),i.length>0&&i.map((function(e,t){return r.a.createElement("option",{key:t,value:e.role_id},e.role_name)}))))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_phone_number"},"Утасны дугаар:"),r.a.createElement(h.b,{className:"form-control "+(l.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(h.a,{name:"phone_number",component:"div",className:"text-danger"}))),e.props.employee.is_admin&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group col-md-2 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"id_is_admin"},"Байгууллагын админ"),r.a.createElement(h.b,{className:"ml-2",name:"is_admin",id:"id_is_admin",type:"checkbox"}),r.a.createElement(h.a,{name:"is_admin",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-2 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"id_is_user"},"Хэрэглэгч"),r.a.createElement(h.b,{className:"ml-2",name:"is_user",id:"id_is_user",type:"checkbox"}),r.a.createElement(h.a,{name:"is_user",component:"div",className:"text-danger"}))),e.props.employee.username==a.username||e.props.employee.is_admin?r.a.createElement("div",{className:"col-md-2 mt-1 text-center"},r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"btn gp-btn-primary btn-sm","aria-hidden":"true",onClick:e.handleChangeMail}," Нууц үг солих имэйл илгээх")):null)):r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_register"},"Регистер:"),r.a.createElement(h.b,{className:"form-control "+(l.register?"is-invalid":""),name:"register",id:"id_register",type:"text",placeholder:"Регистер"}),r.a.createElement(h.a,{name:"register",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"position-relative has-icon-right"},r.a.createElement("label",{htmlFor:"id_phone_number"},"Утасны дугаар:"),r.a.createElement(h.b,{className:"form-control "+(l.phone_number?"is-invalid":""),name:"phone_number",id:"id_phone_number",type:"text",placeholder:"Утасны дугаар"}),r.a.createElement(h.a,{name:"phone_number",component:"div",className:"text-danger"})))),r.a.createElement("div",null,e.props.employee.username==a.username||e.props.employee.is_admin?r.a.createElement("div",{className:"col-md-3 mt-1"},r.a.createElement("button",{type:"button",className:"btn gp-btn-primary btn-sm","aria-hidden":"true",onClick:e.handleChangeMail}," Нууц үг солих имэйл илгээх")):null),r.a.createElement("br",null)),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_state"},"Төлөв:"),r.a.createElement(h.b,{name:"state",as:"select",id:"id_state",style:{fontSize:"0.8rem"},className:"custom-select "+(l.state?"is-invalid":"")},M.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(h.a,{name:"state",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"id_pro_class"},"Мэргэжлийн ангийн бүрэлдэхүүн:"),r.a.createElement(h.b,{name:"pro_class",as:"select",id:"id_pro_class",style:{fontSize:"0.8rem"},className:"custom-select "+(l.pro_class?"is-invalid":"")},r.a.createElement("option",{value:""},"--- Мэргэжлийн ангийн бүрэлдэхүүн ---"),V.map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])}))),r.a.createElement(h.a,{name:"pro_class",component:"div",className:"invalid-feedback"}))),e.props.employee.is_admin&&r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("button",{className:"btn btn-primary btn-block mb-2",type:"button",onClick:function(){return e.refreshMap()}},p?"Гэрийн хаяг оруулах":"Role сонгох")),r.a.createElement("div",null,p&&(s||c)?r.a.createElement(b.default,{action_type:"editable",is_employee:!0,getValue:e.getValue,dontDid:!0,org_roles:x,role:o,is_inspire_role_null:c,editable_is_check:e.perms,emp_perms:u==d?m:null}):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-row p-1"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),r.a.createElement("select",{id:"aimag",className:"form-control "+(l.level_1?"is-invalid":""),"aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:N},r.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),_.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),r.a.createElement("select",{id:"sum",className:"form-control "+(l.level_2?"is-invalid":""),onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:O},r.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),y.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),r.a.createElement("select",{id:"horoo",className:"form-control "+(l.level_3?"is-invalid":""),onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:k},r.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),E.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)})))),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",{htmlFor:"street"},"Гудамж:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"street",className:"form-control "+(l.street?"is-invalid":""),onChange:function(t){return e.setState({street:t.target.value})},value:j,placeholder:"Гудамжны нэрийг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"гудамж")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"apartment"},"Байр:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"apartment",className:"form-control "+(l.apartment?"is-invalid":""),onChange:function(t){return e.setState({apartment:t.target.value})},value:C,placeholder:"Байрны дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"байр")))),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"door_number"},"Хаалганы дугаар:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"door_number",className:"form-control "+(l.door_number?"is-invalid":""),onChange:function(t){return e.setState({door_number:t.target.value})},value:P,placeholder:"Хаалганы дугаарыг оруулах"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"тоот")))),r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label",htmlFor:"id_address_state"},"Байнгын оршин суугаа хаяг"),r.a.createElement("input",{onChange:function(t){return e.setState({address_state:t.target.checked})},className:"form-check-input col-4 "+(l.address_state?"is-invalid":""),type:"checkbox",id:"id_address_state",checked:S})))),r.a.createElement(I,{feature:w,sendPointCoordinate:e.getPoint,map_coordinate:e.state.map_coordinate,point:R,is_marker:e.state.is_marker,class:l.point?"border border-danger":""}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary waves-effect waves-light m-1",disabled:f},f&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),f&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!f&&"Хадгалах"))))})))),r.a.createElement(v.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,has_button:this.state.has_button,text:this.state.text,modalAction:this.handleSendMail,modalClose:this.state.modalClose,actionNameDelete:"Шинэчлэх"}),r.a.createElement(ae.b,{show:this.state.show,too:this.too,style:this.state.style,msg:this.state.msg,icon:this.state.icon}),r.a.createElement(z.a,oe({},this.props,{name:"Буцах",navlink_url:l})))}}])&&ce(t.prototype,a),o&&ce(t,o),l}(n.Component);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ne(e);if(t){var r=Ne(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ye(this,a)}}function ye(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(l,e);var t,a,o,i=ge(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={modal_status:"closed",status_token_refresh:!1},t.handleButtonClick=t.handleButtonClick.bind(Ee(t)),t.modalChange=t.modalChange.bind(Ee(t)),t.handleModalOpen=t.handleModalOpen.bind(Ee(t)),t}return t=l,(a=[{key:"handleButtonClick",value:function(){this.modalChange("fa fa-exclamation-circle","warning","Токен шинэчлэх","Токенийг шинэчилсэнээр уг URL-ээр одоо ашиглаж байгаа газрууд ажиллахгүй болохыг анхаарна уу!",!0)}},{key:"modalChange",value:function(e,t,a,n,r){this.setState({modal_icon:e,icon_color:t,title:a,text:n,has_button:r}),this.handleModalOpen()}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open",status_token_refresh:!1},(function(){e.setState({modal_status:"initial"})}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("span",{onClick:this.handleButtonClick,className:"btn btn-primary waves-effect waves-light m-1"},r.a.createElement("i",{className:"fa fa-refresh"})," Токен шинэчлэх"),r.a.createElement(v.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,has_button:this.state.has_button,text:this.state.text,modalAction:this.props.onClick,actionNameDelete:"Шинэчлэх"}))}}])&&ve(t.prototype,a),o&&ve(t,o),l}(n.Component),ke=a(31);function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function we(e){return r.a.createElement(ke.c,Se({},e,{className:"btn btn-primary waves-effect waves-light m-1"}),r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Засах")}var je=a(1105);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ve(e);if(t){var r=Ve(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return De(this,a)}}function De(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?Me(e):t}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(i,e);var t,a,n,o=Fe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={employee:{id:"",username:"",first_name:"",last_name:"",email:"",gender:"",register:"",phone_number:"",position:"",is_admin:!1,is_super:!1},prefix:"/gov/perm/employee/",role_id:t.props.match.params.id,perms:{},role_name:"",roles:{},is_inspire_role:!1,is_inspire_role_null:!1,modal_status:"closed"},t.getDetail=t.getDetail.bind(Me(t)),t.getRole=t.getRole.bind(Me(t)),t.handleTokenRefresh=t.handleTokenRefresh.bind(Me(t)),t.handleDelete=t.handleDelete.bind(Me(t)),t.handleDeleteSuccess=t.handleDeleteSuccess.bind(Me(t)),t.modalChange=t.modalChange.bind(Me(t)),t.handleModalOpen=t.handleModalOpen.bind(Me(t)),t}return t=i,(a=[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"getDetail",value:function(){var e=this,t=this.state.role_id;_.a.getDetailEmployee(t).then((function(t){var a=t.employee_detail,n=t.perms,r=t.role_name,o=t.role_id;t.success&&e.setState({employee:a,perms:n,role_name:r}),e.getRole(o)}))}},{key:"getRole",value:function(e){var t=this;this.setState({role_id:e,is_inspire_role:!1,is_inspire_role_null:!1}),e?_.a.getRole(e).then((function(e){var a=e.success,n=e.roles;a&&t.setState({roles:n,is_inspire_role:!0,is_inspire_role_null:!1})})):new Promise((function(e,a){setTimeout((function(){t.setState({roles:{},is_inspire_role_null:!0})}),300)}))}},{key:"handleTokenRefresh",value:function(){var e=this;_.a.empTokenRefresh(this.state.employee.id).then((function(t){var a=t.success;t.info,a?(e.getDetail(),e.modalChange("fa fa-check-circle","success","Токенийг амжилттай шинэчиллээ!","",!1,null)):e.modalChange("fa fa-times-circle","danger","Алдаа гарлаа!","",!1,null)}))}},{key:"handleDelete",value:function(){var e=this,t=this.state.employee.id;_.a.deleteEmployee(t).then((function(t){t.success?e.modalChange("fa fa-check-circle","success","Албан хаагчийн төлөв чөлөөлөгдсөн боллоо!","",!1,e.handleDeleteSuccess):e.modalChange("fa fa-times-circle","danger","Устгах боломжгүй хэрэглэгч байна!","Хэрэглэгч худалдан авалт хийсэн байна.",!1,e.handleDeleteSuccess)}))}},{key:"handleDeleteSuccess",value:function(){this.props.history.push("".concat(this.state.prefix))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,a,n,r,o){this.setState({modal_icon:e,icon_color:t,title:a,text:n,has_button:r,modalClose:o}),this.handleModalOpen()}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.state,a=t.prefix,n=t.roles,o=t.is_inspire_role,i=t.is_inspire_role_null,l=t.perms,s=t.role_name,c=this.state.employee,m=c.username,u=c.last_name,d=c.first_name,p=c.position,f=c.email,h=c.gender,_=c.register,g=c.phone_number,y=c.is_admin,E=c.is_active,N=c.token,O=c.created_at,k=c.updated_at,S=c.level_1,w=c.level_2,j=c.level_3,C=c.street,P=c.apartment,R=c.door_number,x=c.state,F=c.pro_class,D=c.address_state_display,M=(this.state.status_token_refresh,this.props.org_roles);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 p-0 text-right"},this.props.employee.is_admin||this.props.employee.username==m?r.a.createElement(Oe,{onClick:this.handleTokenRefresh}):null,this.props.employee.is_admin||this.props.employee.username==m?r.a.createElement(we,{to:"".concat(a).concat(e,"/edit/")}):null,this.props.employee.is_admin&&r.a.createElement(je.a,{onClick:this.handleDelete,employee_name:d}))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Нэвтрэх нэр:"),r.a.createElement("dd",{className:"col-md-9"},m),r.a.createElement("dt",{className:"col-md-3"},"Овог, нэр:"),r.a.createElement("dd",{className:"col-md-9"},u,", ",d),r.a.createElement("dt",{className:"col-md-3"},"Албан тушаал:"),r.a.createElement("dd",{className:"col-md-9"},p),r.a.createElement("dt",{className:"col-md-3"},"Токен:"),r.a.createElement("dd",{className:"col-md-9"},N),r.a.createElement("dt",{className:"col-md-3"},"Мэргэжлийн ангийн бүрэлдэхүүн статус:"),r.a.createElement("dd",{className:"col-md-9"},F)),r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Бүртгэсэн:"),r.a.createElement("dd",{className:"col-md-9"},O),r.a.createElement("dt",{className:"col-md-3"},"Зассан:"),r.a.createElement("dd",{className:"col-md-9"},k))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Мэйл хаяг:"),r.a.createElement("dd",{className:"col-md-9"},f),r.a.createElement("dt",{className:"col-md-3"},"Хүйс:"),r.a.createElement("dd",{className:"col-md-9"},h),r.a.createElement("dt",{className:"col-md-3"},"Регистр:"),r.a.createElement("dd",{className:"col-md-9"},_),r.a.createElement("dt",{className:"col-md-3"},"Утасны дугаар:"),r.a.createElement("dd",{className:"col-md-9"},g),r.a.createElement("dt",{className:"col-md-3"},"Эрх:"),r.a.createElement("dd",{className:"col-md-9"},s),r.a.createElement("dt",{className:"col-md-3"},"Ажилтны төлөв:"),r.a.createElement("dd",{className:"col-md-9"},x)),S&&r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-md-3"},"Гэрийн хаяг:"),r.a.createElement("dd",{className:"col-md-9"},S+", "+w+", "+j+", "+C+" гудамж "+P+" байр, "+R+" тоот"),r.a.createElement("dt",{className:"col-md-3"},"Төлөв:"),r.a.createElement("dd",{className:"col-md-9"},D)),y&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-check-circle-o fa-lg","aria-hidden":"true"})," Байгууллагын админ"),!E&&r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-times-circle text-danger fa-lg","aria-hidden":"true"})," Нэвтрэх эрхгүй")))),r.a.createElement("div",null,o||i?r.a.createElement(b.default,{action_type:"viewable",is_employee:!0,dontDid:!0,org_roles:i?M:n,emp_perms:l,role_perm:l,is_inspire_role_null:i}):null)),r.a.createElement(z.a,Pe({},this.props,{name:"Буцах",navlink_url:a})),r.a.createElement(v.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,has_button:this.state.has_button,text:this.state.text,modalAction:this.props.onClick,actionNameDelete:"Шинэчлэх",modalClose:this.state.modalClose}))}}])&&Re(t.prototype,a),n&&Re(t,n),i}(n.Component);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Le(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ze(e);if(t){var r=ze(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ie(this,a)}}function Ie(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(l,e);var t,a,n,i=qe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={},t}return t=l,(a=[{key:"render",value:function(){var e=this,t=this.props,a=t.org_roles,n=t.employee,i=this.props.employee,l=i.is_admin;return i.username,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/gov/perm/employee/",render:function(e){return r.a.createElement(f,Je({},e,{employee:n}))}}),r.a.createElement(o.b,{path:"/gov/perm/employee/:id/detail/",render:function(e){return r.a.createElement(Ge,Je({},e,{org_roles:a,employee:n}))}}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{path:"/gov/perm/employee/:id/edit/",render:function(t){return r.a.createElement(he,Je({},t,{org_roles:a,employee:n,states:e.state.states,pro_classes:e.state.pro_classes,positions:e.state.positions}))}}),r.a.createElement(o.b,{path:"/gov/perm/employee/add/",render:function(t){return r.a.createElement(te,Je({},t,{org_roles:a,employee:n,states:e.state.states,pro_classes:e.state.pro_classes,positions:e.state.positions}))}})))}}])&&Le(t.prototype,a),n&&Le(t,n),l}(n.Component)},978:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(54);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l={createEmployee:function(e,t,a,r){var i=o(o({},Object(n.b)()),{},{body:JSON.stringify({user_detail:e,emp_role_id:t,roles:a,address:r})});return fetch("".concat(s,"/create/"),i).then(n.c)},getRole:function(e){var t=o({},Object(n.a)());return fetch("".concat("/gov/api/role","/").concat(e,"/detail/"),t).then(n.c)},getRoleList:function(){var e=o({},Object(n.a)());return fetch("".concat("/gov/api/role","/"),e).then(n.c)},getDetailEmployee:function(e){var t=o({},Object(n.a)());return fetch("".concat(s,"/").concat(e,"/detail/"),t).then(n.c)},deleteEmployee:function(e){var t=o({},Object(n.a)());return fetch("".concat(s,"/").concat(e,"/delete/"),t).then(n.c)},updateEmployee:function(e,t,a,r,i,l){var c=o(o({},Object(n.b)()),{},{body:JSON.stringify({user_detail:e,role_id:t,id:a,add_perm:r,remove_perm:i,address:l})});return fetch("".concat(s,"/").concat(a,"/update/"),c).then(n.c)},empTokenRefresh:function(e){var t=o({},Object(n.a)());return fetch("".concat(s,"/").concat(e,"/refresh-token/"),t).then(n.c)},sendMail:function(e){var t=o(o({},Object(n.b)()),{},{body:JSON.stringify({username:e})});return fetch("".concat(s,"/send-mail/"),t).then(n.c)},getGeom:function(e){var t=o(o({},Object(n.b)()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/get-geom/",t).then(n.c)},getAddresses:function(e,t){var a=o(o({},Object(n.b)()),{},{body:JSON.stringify({choose:e,value:t})});return fetch("".concat(s,"/addresses/"),a).then(n.c)},formOptions:function(){var e=o({},Object(n.a)());return fetch("/api/aimag/",e).then(n.c)},getEmpInfo:function(e,t){var a=o(o({},Object(n.b)()),{},{body:JSON.stringify({is_erguul:t})});return fetch("/back/api/org/".concat(e,"/emp-info/"),a).then(n.c)},getErguulegFields:function(e){var t=o({},Object(n.a)());return fetch("/back/api/org/".concat(e,"/erguuleg-fields/"),t).then(n.c)},getWherePos:function(e){var t=o({},Object(n.a)());return fetch("".concat(s,"/").concat(e,"/get-erguul-info/"),t).then(n.c)},saveErguul:function(e,t,a,r,i){var l=o(o({},Object(n.b)()),{},{body:JSON.stringify({values:e,emp_id:t,point:a,photo:r,erguul_id:i})});return fetch("/back/api/org/save-erguul/",l).then(n.c)},getFieldTailbar:function(){var e=o({},Object(n.a)());return fetch("".concat(s,"/get-field-tailbar/"),e).then(n.c)},saveTailbar:function(e,t){var a=o(o({},Object(n.b)()),{},{body:JSON.stringify({values:e,id:t})});return fetch("".concat(s,"/save-field-tailbar/"),a).then(n.c)},getErguul:function(){var e=o({},Object(n.a)());return fetch("".concat(s,"/get-erguul/"),e).then(n.c)},getSelectValue:function(e){var t=o(o({},Object(n.b)()),{},{body:JSON.stringify({org_id:e})});return fetch("/back/api/org/get-select-values/",t).then(n.c)},getAllOrg:function(){var e=o({},Object(n.a)());return fetch("/back/api/org/get-all-org/",e).then(n.c)},loadBaseLayers:function(){var e=Object(n.a)();return fetch("/суурь-давхарга/",e).then(n.c)}},s="/gov/api/role/employee"},988:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(36),r=Object(n.c)().shape({username:Object(n.d)().max(150,"150-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),first_name:Object(n.d)().max(30,"30-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),last_name:Object(n.d)().max(150,"150-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),position:Object(n.d)().required("Хоосон байна нэгийг сонгоно уу."),state:Object(n.d)().required("Хоосон байна нэгийг сонгоно уу."),email:Object(n.d)().email((function(e){e.value;return"Зөв e-mail хаяг оруулна уу."})).max(254,"254-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),gender:Object(n.d)().max(100,"100-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу."),phone_number:Object(n.d)().max(8,"8 урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу.").matches(new RegExp("[0-9]"),"Заавал тоо байх ёстой!"),register:Object(n.d)().matches(/[аАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОөӨпПрРсСтТуУүҮфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяЯ]{2}[0-9]{8}/,(function(e){var t=e.value;return"".concat(t," Регистер дугаараа зөв оруулна уу.")})).max(10,"10-с илүүгүй урттай утга оруулна уу!").required("Хоосон байна утга оруулна уу.")})}}]);