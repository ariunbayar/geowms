(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{891:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return i(this,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,o,i=c(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=i.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t}return t=d,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var n=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){n.setState({status:"closed"}),e&&e()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n,onClick:function(){return e.handleProceed()}},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},r.a.createElement("div",{className:"d-flex justify-content-center"},"danger"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"primary"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn gp-text-primary","aria-hidden":"true"}):"warning"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center my-1"},r.a.createElement("h6",{className:"text-dark"},this.props.title)),r.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 my-3 text-justify"},r.a.createElement("a",{className:"text-dark"},this.props.text))))),r.a.createElement("div",{className:o}))}}])&&s(t.prototype,n),o&&s(t,o),d}(a.Component)},982:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(0),r=n.n(a),o=n(34);function s(e){return null!=e?Object(o.d)().max(e,"${max}-с илүүгүй урттай оруулна уу!").required("Хоосон байна!"):Object(o.d)().required("Хоосон байна!")}var l=Object(o.c)().shape({old_password:s(20),new_password:s(20),re_new_password:s(20)}),c=n(20),i=n(229),u=n(891);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,n,a,o=f(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={old_password:"",new_password:"",re_new_password:"",handleSubmitIsLoad:!1,modal_alert_status:"closed",timer:null,msg:"",error:""},t.handleSubmit=t.handleSubmit.bind(y(t)),t.modalClose=t.modalClose.bind(y(t)),t}return t=s,(n=[{key:"handleSubmit",value:function(e){var t=this;this.setState({handleSubmitIsLoad:!0}),e.new_password==e.re_new_password?i.a.updatePassword(e.new_password,e.old_password,e.re_new_password).then((function(e){var n=e.success,a=e.error,r=e.msg;n?(t.setState({msg:r,modal_alert_status:"open"}),t.modalCloseTime()):t.setState({error:a,modal_alert_status:"open"})})):this.setState({error:"Таарахгүй байна",modal_alert_status:"open"})}},{key:"modalClose",value:function(){this.setState({handleSubmitIsLoad:!1,modal_alert_status:"closed"}),this.state.msg&&(window.location.href="/logout"),this.state.error&&this.setState({error:""})}},{key:"modalCloseTime",value:function(){var e=this;this.state.timer=setTimeout((function(){e.setState({handleSubmitIsLoad:!1,modal_alert_status:"closed"}),window.location.href="/logout"}),2e3)}},{key:"render",value:function(){var e=this,t=this.state,n=t.msg,a=t.error;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(c.e,{enableReinitialize:!0,initialValues:this.state,onSubmit:this.handleSubmit,validationSchema:l},(function(t){var o=t.errors;return Object.keys(o).length,r.a.createElement(c.d,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"password"},"Хуучин нууц үг:"),r.a.createElement(c.b,{name:"old_password",type:"password",className:"form-control",id:"password",placeholder:"Одоогийн нууц үг оруулах"}),r.a.createElement(c.a,{name:"old_password",component:"span"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"new_password"},"Шинэ нууц үг:"),r.a.createElement(c.b,{name:"new_password",type:"password",className:"form-control",id:"new_password",placeholder:"Шинэ нууц үг оруулах"}),r.a.createElement(c.a,{name:"new_password",component:"span"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"re_new_password"},"Шинэ нууц үг дахин оруулах:"),r.a.createElement(c.b,{name:"re_new_password",type:"password",className:"form-control",id:"re_new_password",placeholder:"Шинэ нууц үг дахин оруулах"}),r.a.createElement(c.a,{name:"re_new_password",component:"span"}))),r.a.createElement("div",{className:"form-group"},e.state.handleSubmitIsLoad?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn gp-btn-primary"},r.a.createElement("a",{className:"spinner-border text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("span",null," Шалгаж байна. ")),r.a.createElement(u.a,{modalAction:function(){return e.modalClose()},status:e.state.modal_alert_status,title:n||a,model_type_icon:""!==a?"danger":"success"})):r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary"},"Хадгалах")))}))))}}])&&m(t.prototype,n),a&&m(t,a),s}(a.Component)}}]);