(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{147:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,o,s=i(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).state={modal_status:t.props.modal_status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t}return t=f,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.modal_status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.modal_status!=e.modal_status&&(["initial","open"].includes(this.props.modal_status)&&this.handleOpen(),["closing","closed"].includes(this.props.modal_status)&&this.handleClose())}},{key:"handleOpen",value:function(){var e=this;this.setState({modal_status:"initial"}),setTimeout((function(){e.setState({modal_status:"open"})}),0)}},{key:"handleClose",value:function(e){var t=this;this.setState({modal_status:"closing"}),setTimeout((function(){t.setState({modal_status:"closed"}),e?e():(t.setState({modal_status:"closed"}),t.props.modalClose&&t.props.modalClose())}),150)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.modal_status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content border-0 rounded-lg ".concat(this.props.modal_bg?this.props.modal_bg:"bg-light")},r.a.createElement("div",{className:"col-md-12 offset-md-12 float-right my-1"},r.a.createElement("button",{type:"button",className:"close mt-2 mr-2","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.handleClose()}},"×"))),r.a.createElement("div",{className:"d-flex justify-content-center"},this.props.modal_icon&&r.a.createElement("i",{className:"".concat(this.props.modal_icon," fa-3x my-3 animated bounceIn text-").concat(this.props.icon_color),"aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,this.props.title&&this.props.title)),r.a.createElement("div",{className:"modal-body text-center text-wrap ml-2 mr-2 text-justify"},this.props.text&&this.props.text),this.props.has_button?r.a.createElement("div",{className:"modal-footer border-0"},r.a.createElement("button",{type:"button",onClick:function(){return e.handleClose()},className:"btn btn-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-times pr-1"}),this.props.actionNameBack?this.props.actionNameBack:"БУЦАХ"),r.a.createElement("button",{type:"button",onClick:this.handleProceed,className:"btn btn-outline-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-check-square-o pr-1"}),this.props.actionNameDelete?this.props.actionNameDelete:"УСТГАХ")):r.a.createElement("div",{className:"modal-body mt-3"})))),r.a.createElement("div",{className:o}))}}])&&l(t.prototype,n),o&&l(t,o),f}(a.Component)},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a);n(111);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,o=s(u);function u(){return l(this,u),o.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.props.is_loading?r.a.createElement("div",{className:"loader text-center"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),r.a.createElement("br",null),this.props.text?this.props.text:"Түр хүлээнэ үү...")):null}}])&&c(t.prototype,n),a&&c(t,a),u}(a.Component)},895:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,o,s=i(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t}return t=f,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var n=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){n.setState({status:"closed"}),e&&e()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n,onClick:function(){return e.handleProceed()}},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},r.a.createElement("div",{className:"d-flex justify-content-center"},"danger"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"primary"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn gp-text-primary","aria-hidden":"true"}):"warning"==this.props.model_type_icon?r.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),r.a.createElement("div",{className:"d-flex justify-content-center my-1"},r.a.createElement("h6",{className:"text-dark"},this.props.title)),r.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 my-3 text-justify"},r.a.createElement("a",{className:"text-dark"},this.props.text))))),r.a.createElement("div",{className:o}))}}])&&l(t.prototype,n),o&&l(t,o),f}(a.Component)},900:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return D}));var a=n(0),r=n.n(a);n(902);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,o=s(u);function u(){return l(this,u),o.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.size,a=e.color;return r.a.createElement("i",{className:"hover-fx ".concat(t," ").concat(n," ").concat(a)})}}])&&c(t.prototype,n),a&&c(t,a),u}(a.Component);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,n,a,o=h(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={value:e.value,main_values:e.main_values,options:e.options},t}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.mn_name,o=t.className,l=t.children,c=this.state,i=(c.value,c.main_values,c.options);return Array(),l.length,r.a.createElement("select",{name:n,id:"id_".concat(n),style:{fontSize:"0.8rem"},className:o||" custom-select",onChange:function(t){return e.props.handleOnChangeSelect(t.target.value,n)}},r.a.createElement("option",{value:""},"--- ",a," сонгоно уу ---"),i.map((function(e,t){return r.a.createElement("option",{key:t,value:e.code_list_id},e.code_list_name)})))}}])&&d(t.prototype,n),a&&d(t,a),l}(a.PureComponent);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=P(e);if(t){var r=P(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(l,e);var t,n,a,o=x(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={value:e.value,children:[]},t.handleOnChange=t.handleOnChange.bind(j(t)),t.handleOnChangeSelect=t.handleOnChangeSelect.bind(j(t)),t}return t=l,(n=[{key:"handleOnChange",value:function(e,t){this.props.sendValue(e,t),this.setState({value:e})}},{key:"handleOnChangeSelect",value:function(e,t){var n=this.props.options,a=Array();n.map((function(t,n){t.children&&t.code_list_id==e&&(a=t.children)})),this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:e},a)),this.props.sendValue(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.type,o=t.mn_name,l=t.placeholder,c=t.className,i=(t.options,t.main_values,this.state),s=i.value,u=i.children;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"id_".concat(n)},o),"select"==a?r.a.createElement("div",null,u.length>0?r.a.createElement(v,E({},this.props,{handleOnChangeSelect:this.handleOnChangeSelect,value:s})):r.a.createElement(v,E({},this.props,{children:u,handleOnChangeSelect:this.handleOnChangeSelect,value:s}))):"textarea"==a?r.a.createElement("textarea",{className:c||" form-control",name:n,id:"id_".concat(n),cols:"30",rows:"10",onChange:function(t){return e.handleOnChange(t.target.value,n)}}):r.a.createElement("input",{className:c||" form-control",type:a,name:n,placeholder:l,onChange:function(t){return e.handleOnChange(t.target.value,n)}}))}}])&&S(t.prototype,n),a&&S(t,a),l}(a.PureComponent),R=m,D=C},902:function(e,t,n){var a=n(53),r=n(903);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},903:function(e,t,n){(t=n(54)(!1)).push([e.i,"\n.hover-fx {\n    display: inline-block;\n    cursor: pointer;\n    width: 30px;\n    height: 30px;\n    line-height: 32px;\n    border-radius: 50%;\n    text-align: center;\n    position: relative;\n    color: #f1f3f4;\n    background-color: rgba(255, 255, 255, 0.1);\n    transition: 300ms;\n}\n\n.hover-fx:after {\n    pointer-events: none;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    content: '';\n    box-sizing: content-box;\n    box-shadow: 0 0 0 3px #f1f3f4;\n    top: 0;\n    left: 0;\n    opacity: 0;\n    transition: 300ms;\n}\n\n.hover-fx:hover {\n    background-color: #f1f3f4;\n    color: #f1f3f4;\n}\n\n.hover-fx:hover:after {\n    opacity: 1;\n    transform: scale(1.15);\n}",""]),e.exports=t},952:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ln}));var a=n(0),r=n.n(a),o=n(50),l=(n(220),n(887)),c=n(137),i=n(21),s=n(543),u=n(421),f=n(473),m=n(470),p=n(541),d=n(217),y=n(240),h=n(469),_=n(142),b=n(420),v=n(222);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={checkStyleName:function(e,t){var n=E(E({},Object(v.b)()),{},{body:JSON.stringify({style_name:e,style_update:t})});return fetch("".concat(S,"/check-style-name/"),n).then(v.c)},getStyleData:function(e){var t=E(E({},Object(v.b)()),{},{body:JSON.stringify({geom_type:e})});return fetch("".concat(S,"/style-data/"),t).then(v.c)},createStyle:function(e,t,n,a,r,o){var l=E(E({},Object(v.b)()),{},{body:JSON.stringify({style_datas:e,style_name:t,style_title:n,style_abstract:a,style_update:r,old_style_name:o})});return fetch("".concat(S,"/create-style/"),l).then(v.c)},convertSldToJson:function(e){var t=E(E({},Object(v.b)()),{},{body:JSON.stringify({file_content:e})});return fetch("".concat(S,"/conver-sld-json/"),t).then(v.c)},getStyleList:function(){var e=E({},Object(v.a)());return fetch("".concat(S,"/style-list/"),e).then(v.c)},removeStyle:function(e){var t=E(E({},Object(v.b)()),{},{body:JSON.stringify({style_name:e})});return fetch("".concat(S,"/style-remove/"),t).then(v.c)},getStyleDetail:function(e){var t=E(E({},Object(v.b)()),{},{body:JSON.stringify({style_name:e})});return fetch("".concat(S,"/style-detail/"),t).then(v.c)}},S="/back/geoserver/rest";var k=n(7),x=n.n(k),N=n(79),j=n(15);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),e}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=L(e);if(t){var r=L(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){T(n,e);var t=z(n);function n(e){var a;return C(this,n),(a=t.call(this,e)).handleCoordinateSet=a.handleCoordinateSet.bind(F(a)),a}return D(n,[{key:"componentDidMount",value:function(){this.handleCoordinateSet()}},{key:"componentDidUpdate",value:function(e){this.handleCoordinateSet()}},{key:"handleCoordinateSet",value:function(){var e=x.a.findDOMNode(this);e.focus(),e.select()}},{key:"render",value:function(){return r.a.createElement("input",{type:"text",className:"form-control col-md-12 text-center border border-primary",onChange:function(){},onBlur:this.props.handleBlur,value:this.props.coordinate})}}]),n}(a.Component),A=function(e){T(n,e);var t=z(n);function n(){var e;C(this,n),e=t.call(this,{element:document.createElement("div")});var a="coordinate-copy-control ".concat(j.b," ").concat(j.c);return e.element.className=a,e.element.style.right="0",e.element.style.margin="10px",e.element.style.width="auto",e.renderComponent=e.renderComponent.bind(F(e)),e}return D(n,[{key:"renderComponent",value:function(e){this.is_component_initialized||(x.a.render(r.a.createElement(q,e),this.element),this.is_component_initialized=!0),x.a.hydrate(r.a.createElement(q,e),this.element)}},{key:"setCoordinate",value:function(e){this.renderComponent({coordinate:e})}}]),n}(N.a);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=X(e);if(t){var r=X(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return V(this,n)}}function V(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(v,e);var t,n,a,o=J(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=o.call(this,e)).controls={zoomControl:new A},t.state={geojson:[],dataProjection:"EPSG:4326",featureProjection:"EPSG:3857",style_state:e.style_state,style_color:e.style_color,style_size:e.style_size,fill_color:e.fill_color,style_name:e.style_name,view_name:e.view_name?e.view_name:"geoserver_desing_view",url:e.url,defualt_url:e.defualt_url,geom_type:e.geom_type,dashed_line_gap:e.dashed_line_gap,dashed_line_length:e.dashed_line_length,color_opacity:e.color_opacity,wellknownname:e.wellknownname,is_loading:!1,style_datas:e.style_datas},t.loadMapData=t.loadMapData.bind(Z(t)),t.loadMap=t.loadMap.bind(Z(t)),t.handleZoom=t.handleZoom.bind(Z(t)),t.handleZoomIn=t.handleZoomIn.bind(Z(t)),t.StyleFunction=t.StyleFunction.bind(Z(t)),t}return t=v,(n=[{key:"componentDidMount",value:function(){this.loadMap(),this.props.only_clicked&&this.loadMapData()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.style_color,r=n.style_size,o=n.fill_color,l=(n.style_name,n.dashed_line_gap),c=n.dashed_line_length,i=n.color_opacity,s=n.wellknownname,u=n.geom_type,f=n.only_clicked,m=n.style_datas;e.color_opacity!=i&&this.setState({color_opacity:i}),e.dashed_line_length!=c&&this.setState({dashed_line_length:c}),e.dashed_line_gap!=l&&this.setState({dashed_line_gap:l}),e.wellknownname!=s&&this.setState({wellknownname:s}),e.style_size!=r&&this.setState({style_size:r}),e.fill_color!=o&&this.setState({fill_color:o}),e.style_color!=a&&this.setState({style_color:a}),e.geom_type!=u&&this.setState({geom_type:u}),e.style_datas!=m&&this.setState({style_datas:m}),e.only_clicked!=f&&this.props.only_clicked&&this.loadMapData()}},{key:"loadMap",value:function(){var e=new l.a({layers:[new c.a({source:new s.a})],target:"map",controls:Object(i.a)().extend([this.controls.zoomControl]),view:new f.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});e.on("moveend",this.handleZoom),this.map=e}},{key:"StyleFunction",value:function(e,t){var n=t.style_color,a=t.style_size,r=t.fill_color,o=t.dashed_line_gap,l=t.dashed_line_length,c=t.color_opacity,i=t.wellknownname;if("Point"==e||"MultiPoint"==e)if(i&&"circle"!=i){var s=(0).points,u=(0).radius,f=(0).angle,m=(0).rotation,b=(0).radius2;"square"==i?(s=4,u=10,f=Math.PI/4):"triangle"==i?(s=3,u=10,m=Math.PI/4,f=0):"star"==i?(s=5,u=10,b=4,f=0):"x"==i&&(s=4,u=10,b=0,f=0);var v=new p.a({fill:new d.a({color:r}),stroke:new y.a({color:n,width:a,lineDash:l?[o,l]:""}),points:s,radius:u,radius2:b,rotation:m,angle:f})}else v=new h.a({radius:5,fill:new d.a({color:r}),stroke:new y.a({color:n,width:a})});return{MultiPolygon:new _.c({stroke:new y.a({color:n,width:a,lineDash:l?[o,l]:""}),fill:new d.a({color:r,opacity:c})}),Polygon:new _.c({stroke:new y.a({color:n||"#21130d",width:a,lineDash:l?[o,l]:""}),fill:new d.a({color:r,opacity:c})}),Point:new _.c({image:v}),LineString:new _.c({stroke:new y.a({color:n||"#21130d",width:a,lineDash:l?[o,l]:""}),fill:new d.a({color:r,opacity:c})}),MultiLineString:new _.c({stroke:new y.a({color:n,width:a,lineDash:l?[o,l]:""}),fill:new d.a({color:r,opacity:c})}),MultiPoint:new _.c({image:v})}[e]}},{key:"handleZoomIn",value:function(e,t){var n=this.state.style_datas,a=Object.keys(n).length,r=this.StyleFunction;if(0<=e&&e<=21&&n&&a>0){var o=n[0].max_range,l=[];t<=o&&(l=n[0],n.slice(1,a).map((function(e,n){e.min_range<=t&&t<=e.max_range&&(l=e)}))),l&&Object.keys(l).length>0?this.map.getLayers().forEach((function(e){e&&"style_layer"===e.get("id")&&e.getSource().getFeatures().forEach((function(e){var t=e.getGeometry().getType();e.setStyle(r(t,l))}))})):this.map.getLayers().forEach((function(e){e&&"style_layer"===e.get("id")&&e.getSource().getFeatures().forEach((function(e){e.setStyle(new _.c({}))}))}))}}},{key:"handleZoom",value:function(e){var t=e.map.getView().getZoom(),n=21-parseInt(t),a=133.2955989906115*Math.pow(2,n);this.controls.zoomControl.setCoordinate(a),this.handleZoomIn(t,a)}},{key:"loadMapData",value:function(){var e=this,t=this.state,n=t.dataProjection,a=t.featureProjection,r=t.geom_type,o=t.style_datas,l=this.state,c=this.StyleFunction;this.setState({is_loading:!0}),O.getStyleData(r).then((function(t){var r=t.data;if(r){e.map.getLayers().forEach((function(e){e&&"style_layer"===e.get("id")&&e.getSource().clear()}));var i=new m.a({dataProjection:n,featureProjection:a}).readFeatures(r),s=new u.a({features:i}),f=new b.a({source:s,style:Object.keys(o).length>0?new _.c({}):function(e,t){var n=e.getGeometry().getType();return c(n,l)},id:"style_layer"});e.map.addLayer(f),e.map.getView().fit(s.getExtent(),{padding:[200,200,200,200],duration:3e3}),e.setState({is_loading:!1})}}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 w-100"},r.a.createElement("div",{id:"map",style:{height:"80vh"}})),this.state.is_loading?r.a.createElement("span",{className:"text-center d-block text-sp",style:{position:"fixed",top:"60%",right:"20%"}}," ",r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"})," ",r.a.createElement("br",null)," Түр хүлээнэ үү... "):null)}}])&&U(t.prototype,n),a&&U(t,a),v}(a.Component);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=te(e);if(t){var r=te(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(l,e);var t,n,a,o=Q(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={},t.handleOnChange=t.handleOnChange.bind(ee(t)),t}return t=l,(n=[{key:"handleOnChange",value:function(e){this.props.handleOnChange(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.had_chosen,o=t.data_state;return r.a.createElement("div",{className:"col-md-12 d-inline-block mx-0 px-0"},n.range_number&&n.range_number>0&&a>0&&r.a.createElement("div",{className:"col-md-12 px-0"},1==n.index_of_range?r.a.createElement("div",{className:"col-md-12 d-flex my-2"},r.a.createElement("div",{className:"col-md-6 mb-2"},r.a.createElement("label",{htmlFor:""},"Max scale"),r.a.createElement("input",{className:"form-control",name:"max_range",type:"number",value:n.max_range,onChange:function(t){return e.handleOnChange(t)}}))):r.a.createElement("div",{className:"col-md-12 d-flex my-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:""},"Min scale"),r.a.createElement("input",{className:"form-control",name:"min_range",type:"number",value:n.min_range,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-6 mb-2 mx-0 px-0"},r.a.createElement("label",{htmlFor:""},"Max scale"),r.a.createElement("input",{className:"form-control",name:"max_range",type:"number",value:n.max_range,onChange:function(t){return e.handleOnChange(t)}})))),r.a.createElement("div",null,n&&(o||a>0)&&r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-12 d-flex mx-0 my-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:""},"Style-ийн төрөл"),r.a.createElement("select",{className:"form-control",name:"shape_type",value:n.shape_type,onChange:function(t){return e.handleOnChange(t)}},r.a.createElement("option",{value:""},"--------------------------"),n.shape_types.map((function(e,t){return r.a.createElement("option",{value:e.geo_name,key:t},e.name)})))),r.a.createElement("div",{className:"col-md-6 px-0"},r.a.createElement("label",{htmlFor:"rule_name"},"Rule-ийн нэр"),r.a.createElement("input",{type:"text",name:"rule_name",className:"form-control",value:n.rule_name,onChange:function(t){return e.handleOnChange(t)}}))),n.shape_type&&r.a.createElement("div",{className:"col-md-12"},("PointSymbolizer"==n.shape_type||"PolygonSymbolizer"==n.shape_type)&&r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Дүрсийн дүүргэлтийн өнгө"),r.a.createElement("input",{type:"color",name:"fill_color",className:"form-control col-4",value:n.fill_color,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Хүрээний өнгө"),r.a.createElement("input",{type:"color",name:"style_color",className:"form-control col-4",value:n.style_color,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"id_geoserver_user"},"Хүрээний өргөн"),r.a.createElement("input",{name:"style_size",type:"number",className:"form-control col-4",id:"style_size",value:n.style_size,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Өнгөний уусгалт"),r.a.createElement("input",{type:"number",name:"color_opacity",className:"form-control col-4",value:n.color_opacity,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-2"},"Зураасын урт"),r.a.createElement("input",{type:"number",name:"dashed_line_length",className:"form-control col-4",value:n.dashed_line_length,onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"color",className:"m-0 p-0"},"Зураас хоорондох зай"),r.a.createElement("input",{type:"number",name:"dashed_line_gap",className:"form-control col-4",value:n.dashed_line_gap,onChange:function(t){return e.handleOnChange(t)}})),"PointSymbolizer"==n.shape_type&&r.a.createElement("div",{className:"col-md-4 d-inline-block"},r.a.createElement("label",{htmlFor:"wellknownname"},"Дүрсний сонголт"),r.a.createElement("select",{className:"form-control form-control-sm",name:"wellknownname",onChange:function(t){return e.handleOnChange(t)}},r.a.createElement("option",{value:"circle"},"Дугуй"),r.a.createElement("option",{value:"square"},"Дөрвөлжин"),r.a.createElement("option",{value:"triangle"},"Гурвалжин"),r.a.createElement("option",{value:"star"}," Од"),r.a.createElement("option",{value:"x"}," Хэрээс")))))))}}])&&$(t.prototype,n),a&&$(t,a),l}(a.Component),ae=n(147);n(888);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=fe(e);if(t){var r=fe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(l,e);var t,n,a,o=ie(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).style_datas=[],t.file_content={},t.state={style_color:"#800000",rule_name:"",style_size:1,fill_color:"#C0C0C0",wellknownname:"circle",wellknowshape:"",div_angle:"",color_opacity:.3,dashed_line_length:0,dashed_line_gap:0,check_style_name:"",range_number:"",had_chosen:0,style_name:"",style_title:"",style_abstract:"",check_style:!0,min_range:0,max_range:0,geom_type:"Point",shape_type:"PointSymbolizer",label_check:!1,shape_types:[{name:"Point",geo_name:"PointSymbolizer"},{name:"LineString",geo_name:"LineSymbolizer"},{name:"Polygon",geo_name:"PolygonSymbolizer"}],only_clicked:!1,prev_style_name:"",single_select_datas:[],data_state:!0,modal_status:"closed",modal_icon:"fa fa-check-circle",icon_color:"success",modal_text:"",sld_file:"",check_style_content:!0,desing_file_content:[],old_style_name:""},t.handleOnChange=t.handleOnChange.bind(ue(t)),t.handleOnClick=t.handleOnClick.bind(ue(t)),t.handleSubmit=t.handleSubmit.bind(ue(t)),t.ReadFileContent=t.ReadFileContent.bind(ue(t)),t.handleStyleDetial=t.handleStyleDetial.bind(ue(t)),t.handleSetStyleValues=t.handleSetStyleValues.bind(ue(t)),t.handleSetXml=t.handleSetXml.bind(ue(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.style_name;e&&this.handleStyleDetial(e)}},{key:"handleStyleDetial",value:function(e){var t=this;this.setState({is_loading:!0}),O.getStyleDetail(e).then((function(e){var n=e.style_content,a=e.check_style_content,r=e.simple_details;a?t.handleSetXml(n,r):n&&t.handleSetStyleValues(n)}))}},{key:"handleSetXml",value:function(e,t){t&&Object.keys(t).length>0?this.setState({check_style_content:!1,desing_file_content:e,style_name:t.style_name,style_title:t.style_title,style_abstract:t.style_abstract,old_style_name:t.old_style_name}):this.setState({modal_status:"open",modal_text:"Буруу форматтай файл байна",modal_icon:"fa fa-times-circle",icon_color:"danger"})}},{key:"handleSetStyleValues",value:function(e){var t=this,n=e.shape_rules,a=this.state.shape_types,r=this.props.match.params.style_name,o=Object.keys(n).length;if(n&&o>0){n.map((function(e,n){t.style_datas.push({index_of_range:n+1,range_number:o,min_range:e.min_range,max_range:e.max_range,style_color:e.style_color,style_size:e.style_size,fill_color:e.fill_color,wellknownname:e.wellknownname,color_opacity:e.color_opacity,dashed_line_length:e.dashed_line_length,dashed_line_gap:e.dashed_line_gap,shape_types:a,shape_type:e.shape_type,rule_name:e.rule_name})}));var l=this.style_datas[0];this.setState({style_name:e.style_name,style_title:e.style_title,style_abstract:e.style_abstract,geom_type:e.geom_type,range_number:o,single_select_datas:l,old_style_name:r,check_style_content:!0,had_chosen:1})}else this.setState({style_name:e.style_name,style_title:e.style_title,style_abstract:e.style_abstract,geom_type:e.geom_type,min_range:e.min_range,max_range:e.max_range,style_color:e.style_color,style_size:e.style_size,fill_color:e.fill_color,wellknownname:e.wellknownname,color_opacity:e.color_opacity,dashed_line_length:e.dashed_line_length,dashed_line_gap:e.dashed_line_gap,shape_type:e.shape_type,rule_name:e.rule_name,old_style_name:r,check_style_content:!0})}},{key:"ReadFileContent",value:function(e){var t=this,n=e.target.files[0],a=new FileReader;a.readAsText(n),a.onload=function(){var e;e=a.result,t.setState({sld_file:e})}}},{key:"handleOnChange",value:function(e){var t=this.state,n=t.style_size,a=t.style_color,r=t.fill_color,o=t.wellknownname,l=t.wellknowshape,c=t.div_angle,i=t.color_opacity,s=t.dashed_line_length,u=t.dashed_line_gap,f=t.min_range,m=t.max_range,p=t.had_chosen,d=t.shape_types,y=t.shape_type,h=t.rule_name,_=e.target.name;if("range_number"==_){if(e.target.value>0)for(var b=1;b<=e.target.value;b++)this.style_datas.push({index_of_range:b,range_number:e.target.value,min_range:f,max_range:m,style_color:a,style_size:n,fill_color:r,wellknownname:o,wellknowshape:l,div_angle:c,color_opacity:i,dashed_line_length:s,dashed_line_gap:u,shape_types:d,shape_type:y,rule_name:h});this.setState({single_select_datas:this.style_datas[0],data_state:!1})}if("range_number"!=_&&"had_chosen"!=_){if(this.style_datas.length>0&&p>0){var v=this.style_datas.findIndex((function(e){return e.index_of_range==p}));this.style_datas[v][_]=e.target.value,"shape_type"==_&&this.style_datas.map((function(t,n){t.shape_type=e.target.value})),"wellknownname"==_&&this.style_datas.map((function(t,n){t.wellknownname=e.target.value}))}if("shape_type"==_){v=d.findIndex((function(t){return t.geo_name==e.target.value}));var g=d[v].name;this.setState({geom_type:g})}}this.setState(oe({},e.target.name,e.target.value))}},{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.state,r=a.style_color,o=a.style_size,l=a.fill_color,c=a.style_name,i=a.dashed_line_gap,s=a.dashed_line_length,u=a.color_opacity,f=a.wellknownname,m=a.had_chosen,p=a.shape_type,d=a.check_style,y=a.min_range,h=a.max_range,_=a.range_number,b=a.check_style_content,v=a.sld_file;if(t.style_color==r&&t.style_size==o&&t.fill_color==l&&t.style_name==c&&t.dashed_line_gap==i&&t.dashed_line_length==s&&t.color_opacity==u&&t.wellknownname==f&&t.shape_type===p&&t.check_style==d||this.setState({style_size:o,fill_color:l,style_color:r,style_name:c,color_opacity:u,wellknownname:f,dashed_line_gap:i,dashed_line_length:s,min_range:y,max_range:h,shape_type:p,check_style:!1,only_clicked:!1}),t.had_chosen!==m&&m){if(m>0)var g=this.style_datas[m-1];else g=this.style_datas[0];this.setState({style_color:g.style_color,style_size:g.style_size,fill_color:g.fill_color,wellknownname:g.wellknownname,wellknowshape:g.wellknowshape,div_angle:g.div_angle,color_opacity:g.color_opacity,dashed_line_length:g.dashed_line_length,dashed_line_gap:g.dashed_line_gap,min_range:g.min_range,max_range:g.max_range,shape_type:g.shape_type,single_select_datas:g})}t.range_number!==_&&(!_||_<1?this.setState(oe({style_size:1,fill_color:"#C0C0C0",wellknownname:"",wellknowshape:"",div_angle:"",color_opacity:.3,dashed_line_length:0,dashed_line_gap:0,min_range:0,max_range:0,shape_type:"",style_color:"#800000",range_number:_,data_state:!0,geom_type:"Point"},"shape_type","PointSymbolizer")):this.style_datas&&this.style_datas.length>0&&(this.style_datas[0].range_number=_,g=this.style_datas[0],this.setState({single_select_datas:g,data_state:!1}))),t.check_style_content!==b&&this.setState({check_style_content:b}),t.sld_file!=v&&(this.setState({sld_file:v,desing_file_content:[],style_name:"",style_title:"",style_abstract:"",check_style_name:""}),O.convertSldToJson(v).then((function(e){var t=e.style_content,a=e.check_style_content,r=e.simple_details;a?n.handleSetXml(t,r):t&&n.handleSetStyleValues(t)})))}},{key:"handleSubmit",value:function(){var e=this,t=this.state,n=t.style_name,a=t.style_title,r=t.style_abstract,o=t.desing_file_content,l=t.old_style_name,c=this.props.match.params.style_name,i=this.state;o&&o.length>0?i=o:this.style_datas&&this.style_datas.length>0&&(i=this.style_datas),O.createStyle(i,n,a,r,c,l).then((function(t){var n=t.success,a=t.info;n?(e.setState({modal_status:"open",modal_text:a}),e.props.history.push("/back/gp-geoserver/style/")):e.setState({modal_status:"open",modal_text:a,modal_icon:"fa fa-times-circle",icon_color:"danger"})}))}},{key:"handleOnClick",value:function(){var e=this,t=this.state,n=t.style_name,a=t.prev_style_name,r=t.check_style_name;if(n)if(n!=a){var o=this.props.match.params.style_name;this.setState({is_loading:!0,prev_style_name:n}),O.checkStyleName(n,o).then((function(t){var n=t.success,a=t.info;n?e.setState({is_loading:!1,check_style:!1,only_clicked:!0,check_style_name:""}):e.setState({is_loading:!1,check_style_name:a,check_style:!0,only_clicked:!1})}))}else r?this.setState({check_style:!0,only_clicked:!1}):this.setState({check_style:!1,only_clicked:!0});else this.setState({check_style_name:"Style-ийн нэр хоосон байна",check_style:!0,only_clicked:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.range_number,a=t.had_chosen,o=t.style_name,l=t.style_title,c=t.style_abstract,i=t.fill_color,s=t.style_color,u=t.style_size,f=t.color_opacity,m=t.dashed_line_gap,p=t.dashed_line_length,d=t.check_style,y=t.check_style_name,h=t.wellknownname,_=t.wellknowshape,b=t.div_angle,v=t.only_clicked,g=t.single_select_datas,E=t.geom_type,w=t.data_state,O=t.modal_status,S=t.modal_icon,k=t.icon_color,x=t.modal_text,N=(t.sld_file,t.check_style_content),j=t.desing_file_content,P=this.props.match.params.style_name;return r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"",className:"col-md-6 my-2"},"Нэр"),r.a.createElement("input",{name:"style_name",id:"style_name",type:"text",className:"form-control col-md-6",value:o,onChange:function(t){return e.handleOnChange(t)}})),y&&r.a.createElement("label",{className:"text-danger col-md-12 text-center d-inline-block"},y),r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"style_title",className:"col-md-6 my-2"},"Гарчиг"),r.a.createElement("input",{name:"style_title",id:"style_title",type:"text",value:l,className:"form-control col-md-6 mt-2",onChange:function(t){return e.handleOnChange(t)}})),r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"style_abstract",className:"col-md-6 my-2"},"Товч тайлбар"),r.a.createElement("textarea",{name:"style_abstract",id:"style_abstract",type:"text",value:c,className:"form-control col-md-6 mt-2",onChange:function(t){return e.handleOnChange(t)}})),!P&&r.a.createElement("div",{className:"col-md-12 mb-2 d-flex"},r.a.createElement("label",{htmlFor:"sld_file",className:"col-md-6 my-2"},"Sld file оруулах"),r.a.createElement("input",{name:"sld_file",id:"sld_file",type:"file",className:"form-control mt-2",onChange:function(t){return e.ReadFileContent(t)}})),N?r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-12 d-flex"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"range_number"},"Scale-ийн тоо"),r.a.createElement("input",{className:"form-control",name:"range_number",type:"number",onChange:function(t){return e.handleOnChange(t)},value:n})),n&&n>0&&r.a.createElement("div",{className:"col-md-6 d-inline-block"},r.a.createElement("label",{htmlFor:"range_number"}),r.a.createElement("select",{className:"form-control mt-2",name:"had_chosen",onChange:function(t){return e.handleOnChange(t)},value:a},r.a.createElement("option",{className:"col-md-12",value:0}),function(){for(var e=[],t=1;t<=n;t++)e.push(r.a.createElement("option",{key:t,className:"col-md-12"},t));return e}()))),r.a.createElement("div",{className:"col-md-12 px-0"},n&&n>0?r.a.createElement(ne,{value:g,handleOnChange:this.handleOnChange,had_chosen:a,data_state:w}):r.a.createElement(ne,{value:this.state,handleOnChange:this.handleOnChange,data_state:w}),r.a.createElement("div",{className:"col-md-12 my-4"},r.a.createElement("button",{type:"button",className:"btn btn-warning col-md-6 mx-3",disabled:d,onClick:this.handleOnClick},"Style шалгах")))):r.a.createElement("div",{className:"col-md-12 d-flex"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("textarea",{name:"desing_file_content",id:"desing_file_content",type:"text",value:j,className:"form-control col-md-12 mt-2 overflow-auto",style:{height:"80vh"},onChange:function(t){return e.handleOnChange(t)}}))))),r.a.createElement("div",{className:"col-md-6"},N&&r.a.createElement(H,{style_color:s,style_size:u,fill_color:i,geom_type:E,check_style:d,wellknownname:h,wellknowshape:_,div_angle:b,color_opacity:f,dashed_line_length:p,dashed_line_gap:m,only_clicked:v,style_datas:this.style_datas})),r.a.createElement("div",{className:"col-md-6 px-4 mt-2"},r.a.createElement("button",{type:"button",className:"btn gp-btn-outline-primary waves-effect waves-light col-md-12 mx-3",disabled:d,onClick:this.handleSubmit},"Хадгалах")),r.a.createElement(ae.a,{modal_status:O,modal_icon:S,icon_color:k,title:"STYLE ХАДГАЛАХ",text:x,modalAction:this.modalAction}))}}])&&le(t.prototype,n),a&&le(t,a),l}(a.Component),pe=n(28),de=n(57);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ee(e);if(t){var r=Ee(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(l,e);var t,n,a,o=be(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={items:e.item_list,page:e.page,total_page:1,is_loading:!1,search_query:e.search_query,per_page:e.per_page,color:e.color?e.color:"dark",filter_name:e.filter_name?e.filter_name:""},t.paginate=t.paginate.bind(ge(t)),t.load=t.load.bind(ge(t)),t.prevPage=t.prevPage.bind(ge(t)),t.nextPage=t.nextPage.bind(ge(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.state,t=e.page,n=e.per_page,a=e.items,r=e.search_query,o=e.filter_name;this.load(t,n,a,r,o)}},{key:"load",value:function(e,t,n,a,r){this.paginate(e,t,n,a,r)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.page,r=n.per_page,o=n.item_list,l=n.search_query,c=n.filter_name;e.item_list==this.props.item_list&&e.page==a&&e.search_query==l&&e.filter_name==c||(this.setState({search_query:l,page:a,items:o,filter_name:c}),this.load(a,r,o,l,c))}},{key:"paginate",value:function(e,t,n,a,r){var o=e*t,l=o-t;if(a.length>=1){if(r)var c=n.filter((function(e){return e[r].toLowerCase().includes(a.toLowerCase())}));else c=n.filter((function(e){return e.toLowerCase().includes(a.toLowerCase())}));var i=c.slice(l,o),s=Math.ceil(c.length/t);this.props.paginate(i,e,a),this.setState({total_page:s})}else{var u=n.slice(l,o),f=Math.ceil(n.length/t);this.props.paginate(u,e,a),this.setState({total_page:f,search_query:""})}}},{key:"nextPage",value:function(){var e=this.state,t=e.page,n=e.per_page,a=e.items,r=e.search_query,o=e.total_page,l=e.filter_name;t<o&&this.load(t+1,n,a,r,l)}},{key:"prevPage",value:function(){var e=this.state,t=e.page,n=e.per_page,a=e.items,r=e.search_query,o=e.filter_name;t>1&&this.load(t-1,n,a,r,o)}},{key:"render",value:function(){var e=this.state,t=e.total_page,n=e.page;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement("strong",null,"Хуудас ",n,"-",t)),r.a.createElement("div",{className:"float-right btn-group group-round"},r.a.createElement("button",{type:" button",className:"btn btn-dark waves-effect waves-light btn-sm",onClick:this.prevPage}," « өмнөх"),r.a.createElement("button",{type:"button",className:"btn btn-dark waves-effect waves-light btn-sm",onClick:this.nextPage},"дараах »"))))}}])&&he(t.prototype,n),a&&he(t,a),l}(a.Component),Oe=n(900);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ce(e);if(t){var r=Ce(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return je(this,n)}}function je(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(l,e);var t,n,a,o=Ne(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={modal_status:"closed"},t.handleModalOpen=t.handleModalOpen.bind(Pe(t)),t}return t=l,(n=[{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.idx;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,n),r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(pe.c,{className:"text-primary",to:"/back/gp-geoserver/style/".concat(t,"/edit/")},r.a.createElement(Oe.a,{icon:"fa fa-pencil-square-o text-primary"}))),r.a.createElement("td",null,r.a.createElement("a",{href:"#",onClick:this.handleModalOpen},r.a.createElement(Oe.a,{icon:"fa fa-trash-o text-danger"}))),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:"fa fa-exclamation-circle",icon_color:"warning",title:"Тохиргоог устгах",text:'Та "'.concat(t,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),has_button:!0,modalAction:this.props.handleRemove,actionNameDelete:"Тийм",actionNameBack:"Үгүй"}))}}])&&ke(t.prototype,n),a&&ke(t,a),l}(a.Component);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Le(e);if(t){var r=Le(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?Fe(e):t}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(l,e);var t,n,a,o=ze(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={style_list:[],search_query:"",currentPage:1,stylePerPage:20,is_loading:!1,currentStyles:[],modal_status:"closed"},t.handleListUpdated=t.handleListUpdated.bind(Fe(t)),t.handleStyleDelete=t.handleStyleDelete.bind(Fe(t)),t.handleSearch=t.handleSearch.bind(Fe(t)),t.paginate=t.paginate.bind(Fe(t)),t.handleModalOpen=t.handleModalOpen.bind(Fe(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.handleListUpdated()}},{key:"handleListUpdated",value:function(){var e=this;this.setState({is_loading:!0}),O.getStyleList().then((function(t){var n=t.style_list;e.setState({style_list:n,is_loading:!1})}))}},{key:"handleSearch",value:function(e){""!=e.target.value.length?this.setState({search_query:e.target.value}):(this.setState({search_query:""}),this.handleListUpdated())}},{key:"paginate",value:function(e,t,n){this.setState({currentPage:t,currentStyles:e,search_query:n})}},{key:"handleStyleDelete",value:function(e){var t=this;O.removeStyle(e).then((function(e){var n=e.success,a=e.info;n?t.modalChange("fa fa-check-circle","success",a):t.modalChange("fa fa-times-circle","danger",a),t.handleListUpdated()}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,n){this.setState({modal_icon:e,icon_color:t,title:n}),this.handleModalOpen()}},{key:"render",value:function(){var e=this,t=this.state,n=t.style_list,a=t.currentStyles,o=t.search_query,l=t.stylePerPage,c=t.currentPage,i=t.is_loading;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement(de.a,{is_loading:i}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-left search-bar"},r.a.createElement("input",{type:"text",className:"form-control",id:"search_query small-input",placeholder:"Хайх",onChange:function(t){return e.handleSearch(t)},value:o}),r.a.createElement("a",null,r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-right"},r.a.createElement(pe.c,{className:"btn gp-btn-primary waves-effect waves-light btn-sm",to:"/back/gp-geoserver/style/add/"},"Нэмэх")))),r.a.createElement("div",{className:"table-responsive table_wrapper ml-2"},r.a.createElement("table",{className:"table table_wrapper_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"}," Нэр "),r.a.createElement("th",{scope:"col"},"Засах"),r.a.createElement("th",{scope:"col"},"Устгах"))),r.a.createElement("tbody",null,0===a.length?r.a.createElement("tr",null,r.a.createElement("td",null,"geoserver дээр style бүртгэлгүй байна")):a.map((function(t,n){return r.a.createElement(Re,{idx:c*l-l+n+1,value:t,handleRemove:function(){return e.handleStyleDelete(t)}})}))))),r.a.createElement(we,{paginate:this.paginate,item_list:n,search_query:o,per_page:l,page:c})),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,text:"",has_button:!1,modalAction:null}))}}])&&Te(t.prototype,n),a&&Te(t,a),l}(a.Component);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ve(e);if(t){var r=Ve(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Je(this,n)}}function Je(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(c,e);var t,n,a,l=Ge(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return t=c,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/back/gp-geoserver/style/",component:qe}),r.a.createElement(o.a,{path:"/back/gp-geoserver/style/add/",component:me}),r.a.createElement(o.a,{path:"/back/gp-geoserver/style/:style_name/edit/",component:me}))))}}])&&Ie(t.prototype,n),a&&Ie(t,a),c}(a.Component);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e={getgrouplist:function(){var e=He({},Object(v.a)());return fetch("".concat(Ke,"/group_list/"),e).then(v.c)},remove_layer_group:function(e){var t=He(He({},Object(v.b)()),{},{body:JSON.stringify({group_name:e})});return fetch("".concat(Ke,"/remove_layer_group/"),t).then(v.c)},getGroupDetial:function(e){var t=He(He({},Object(v.b)()),{},{body:JSON.stringify({group_name:e})});return fetch("".concat(Ke,"/get_group_detial/"),t).then(v.c)},getLayers:function(){var e=He({},Object(v.a)());return fetch("".concat(Ke,"/get_layers/"),e).then(v.c)},createLayerGroup:function(e,t,n,a){var r=He(He({},Object(v.b)()),{},{body:JSON.stringify({values:e,layer_list:t,group_state:n,old_name:a})});return fetch("".concat(Ke,"/create_layer_group/"),r).then(v.c)},getGroupCacheList:function(e){var t=He(He({},Object(v.b)()),{},{body:JSON.stringify({group_name:e})});return fetch("".concat(Ke,"/get_group_cache_list/"),t).then(v.c)},createGroupCache:function(e,t){var n=He(He({},Object(v.b)()),{},{body:JSON.stringify({values:e})});return fetch("".concat(Ke,"/create_group_cache/").concat(t,"/"),n).then(v.c)}},Ke="/back/geoserver/rest";function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=rt(e);if(t){var r=rt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(l,e);var t,n,a,o=tt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={modal_status:"closed"},t.handleModalOpen=t.handleModalOpen.bind(at(t)),t}return t=l,(n=[{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.idx;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,n),r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(pe.c,{to:"/back/gp-geoserver/layer-groups/".concat(t,"/tile-caching/")},r.a.createElement(Oe.a,{icon:"fa fa-shopping-basket text-primary"}))),r.a.createElement("td",null,r.a.createElement(pe.c,{className:"text-primary",to:"/back/gp-geoserver/layer-groups/".concat(t,"/засах/")},r.a.createElement(Oe.a,{icon:"fa fa-pencil-square-o text-primary"}))),r.a.createElement("td",null,r.a.createElement("a",{href:"#",onClick:this.handleModalOpen},r.a.createElement(Oe.a,{icon:"fa fa-trash-o text-danger"}))),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:"fa fa-exclamation-circle",icon_color:"warning",title:"Тохиргоог устгах",text:'Та "'.concat(t,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),has_button:!0,modalAction:this.props.handleRemove,actionNameDelete:"Тийм",actionNameBack:"Үгүй"}))}}])&&We(t.prototype,n),a&&We(t,a),l}(a.Component);function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=mt(e);if(t){var r=mt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?ft(e):t}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(l,e);var t,n,a,o=st(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={group_list:[],search_query:"",currentPage:1,groupPerPage:20,is_loading:!1,currentGroups:[],modal_status:"closed"},t.handleListUpdated=t.handleListUpdated.bind(ft(t)),t.handleGroupDelete=t.handleGroupDelete.bind(ft(t)),t.handleSearch=t.handleSearch.bind(ft(t)),t.paginate=t.paginate.bind(ft(t)),t.handleModalOpen=t.handleModalOpen.bind(ft(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.handleListUpdated()}},{key:"handleListUpdated",value:function(){var e=this;this.setState({is_loading:!0}),$e.getgrouplist().then((function(t){var n=t.group_list;e.setState({group_list:n,is_loading:!1})}))}},{key:"handleSearch",value:function(e){""!=e.target.value.length?this.setState({search_query:e.target.value}):(this.setState({search_query:""}),this.handleListUpdated())}},{key:"paginate",value:function(e,t,n){this.setState({currentPage:t,currentGroups:e,search_query:n})}},{key:"handleGroupDelete",value:function(e){var t=this;$e.remove_layer_group(e).then((function(e){var n=e.success,a=e.info;n?t.modalChange("fa fa-check-circle","success",a):t.modalChange("fa fa-times-circle","danger",a),t.handleListUpdated()}))}},{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"modalChange",value:function(e,t,n){this.setState({modal_icon:e,icon_color:t,title:n}),this.handleModalOpen()}},{key:"render",value:function(){var e=this,t=this.state,n=t.group_list,a=t.currentGroups,o=t.search_query,l=t.groupPerPage,c=t.currentPage,i=t.is_loading;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement(de.a,{is_loading:i}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-left search-bar"},r.a.createElement("input",{type:"text",className:"form-control",id:"search_query small-input",placeholder:"Хайх",onChange:function(t){return e.handleSearch(t)},value:o}),r.a.createElement("a",null,r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"float-sm-right"},r.a.createElement(pe.c,{className:"btn gp-btn-primary waves-effect waves-light btn-sm",to:"/back/gp-geoserver/layer-groups/нэмэх/"},"Нэмэх")))),r.a.createElement("div",{className:"table-responsive table_wrapper ml-2"},r.a.createElement("table",{className:"table table_wrapper_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"}," Нэр "),r.a.createElement("th",{scope:"col"},"TileCaching"),r.a.createElement("th",{scope:"col"},"Засах"),r.a.createElement("th",{scope:"col"},"Устгах"))),r.a.createElement("tbody",null,0===a.length?r.a.createElement("tr",null,r.a.createElement("td",null,"geoserver дээр group бүртгэлгүй байна")):a.map((function(t,n){return r.a.createElement(ot,{idx:c*l-l+n+1,value:t,handleRemove:function(){return e.handleGroupDelete(t)}})}))))),r.a.createElement(we,{paginate:this.paginate,item_list:n,search_query:o,per_page:l,page:c})),r.a.createElement(ae.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,text:"",has_button:!1,modalAction:null}))}}])&&ct(t.prototype,n),a&&ct(t,a),l}(a.Component),dt=n(20),yt=n(33);function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=wt(e);if(t){var r=wt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return gt(this,n)}}function gt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(c,e);var t,n,o,l=vt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={status:t.props.status||"initial",layer_list:e.layer_list,search_query:"",current_page:1,layerPerPage:10,current_layers:[],search_name:""},t.handleOpen=t.handleOpen.bind(Et(t)),t.handleClose=t.handleClose.bind(Et(t)),t.handleIsload=t.handleIsload.bind(Et(t)),t.handleProceed=t.handleProceed.bind(Et(t)),t.handleSearch=t.handleSearch.bind(Et(t)),t.paginate=t.paginate.bind(Et(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"handleIsload",value:function(e){this.setState({is_loading:e})}},{key:"handleSearch",value:function(e){e.target.value.length>=1?this.setState({search_query:e.target.value}):this.setState({search_query:"",layer_list:this.props.layer_list})}},{key:"paginate",value:function(e,t,n){this.setState({current_layers:e,current_page:t,search_query:n})}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(cthis.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose()),this.props.layer_list!=e.layer_list&&this.setState({layer_list:this.props.layer_list})}},{key:"handleProceed",value:function(e,t){this.props.modalAction(t)}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e){var t=this;this.setState({status:"closing"}),setTimeout((function(){t.setState({status:"closed"}),t.props.modalClose()}),150)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":""),l=this.state,c=l.layer_list,i=l.current_layers,s=l.search_query,u=l.layerPerPage,f=l.current_page;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:n+" ml-3 pl-4 mt-4 pt-4 rounded text-wrap h-75 position-fixed w-75",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",style:{top:"15%"}},r.a.createElement("div",{className:"col-md-12 modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content animated row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row mt-2",style:{background:"white"},onClick:function(){return e.handleClose()}},r.a.createElement("div",{className:"col-md-11"},r.a.createElement("h5",{className:"text-center text-justify"},"Шинэ давхарга сонгох")),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("button",{type:"button",className:"close float-right","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"×")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 col-md-3 col-xl-3"},r.a.createElement("div",{className:"float-sm-left search-bar"},r.a.createElement("input",{type:"text",className:"form-control",id:"small-input",placeholder:"Хайх",onChange:function(t){return e.handleSearch(t)},value:s}),r.a.createElement("a",null,r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement("div",{className:"col-md-12 overflow-auto text-justify my-2",style:{height:"calc( 40vh - 35px - 7px)"}},r.a.createElement("table",{className:"table table_wrapper_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"}," Нэр "))),r.a.createElement("tbody",null,i.length>0?i.map((function(t,n){return r.a.createElement("tr",{key:f*u-u+n+1},r.a.createElement("td",null,f*u-u+n+1),r.a.createElement("td",null,r.a.createElement("a",{href:"#",onClick:function(n){return e.handleProceed(n,t)}},t.layer_name)))})):r.a.createElement("tr",null,r.a.createElement("td",null,"geoserver дээр давхарга бүртгэлгүй байна")))))),r.a.createElement("div",{className:"mb-4"},r.a.createElement(we,{paginate:this.paginate,item_list:c,search_query:s,per_page:u,page:f,filter_name:"layer_name"})))))),r.a.createElement("div",{className:o}))}}])&&_t(t.prototype,n),o&&_t(t,o),c}(a.Component),St=n(895);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||jt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||jt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){if(e){if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ct(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=zt(e);if(t){var r=zt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Tt(this,n)}}function Tt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?Mt(e):t}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bt=yt.c().shape({name:yt.d().required("Нэр оруулна уу !"),title:yt.d(),abstract:yt.d()}),Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(l,e);var t,n,a,o=Dt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={form_values:{name:"",title:"",abstract:"",layers:"",minx:"",maxx:"",miny:"",maxy:"",projection:""},errors:"",layer_list:[],layer_detail:[],select_layer_status:!1,modal_alert_status:"closed",model_alert_text:"",model_alert_icon:"success",timer:null,old_name:e.match.params.group_name||""},t.getDetialAll=t.getDetialAll.bind(Mt(t)),t.handleSubmit=t.handleSubmit.bind(Mt(t)),t.modalClose=t.modalClose.bind(Mt(t)),t.handleSelectedLayers=t.handleSelectedLayers.bind(Mt(t)),t.removeLayer=t.removeLayer.bind(Mt(t)),t.handleMoveUp=t.handleMoveUp.bind(Mt(t)),t.handleMoveDown=t.handleMoveDown.bind(Mt(t)),t.handleSwap=t.handleSwap.bind(Mt(t)),t.modalCloseTime=t.modalCloseTime.bind(Mt(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.group_name;t&&this.getDetialAll(t),$e.getLayers().then((function(t){var n=t.layer_list;e.setState({layer_detail:n})}))}},{key:"componentDidUpdate",value:function(e,t){t.layer_detail!=this.state.layer_detail&&this.setState({layer_detail:this.state.layer_detail})}},{key:"getDetialAll",value:function(e){var t=this;$e.getGroupDetial(e).then((function(e){var n=e.detial_list,a=e.layer_list,r=n.bounds;n&&t.setState({form_values:{name:n.name,title:n.title,abstract:n.abstractTxt,minx:r.minx,maxx:r.maxx,miny:r.miny,maxy:r.maxy,projection:r.crs},layer_list:a})}))}},{key:"modalClose",value:function(){this.setState({select_layer_status:!1})}},{key:"handleSelectedLayers",value:function(e){var t=this.state.layer_list.concat(e);this.setState({layer_list:t,select_layer_status:!1})}},{key:"removeLayer",value:function(e,t){var n,a=Nt(this.state.layer_list),r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=jt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}(a.entries());try{for(r.s();!(n=r.n()).done;){var o=xt(n.value,2),l=o[0];o[1].layer_name==t.layer_name&&a.splice(l,1)}}catch(e){r.e(e)}finally{r.f()}this.setState({layer_list:a})}},{key:"handleMoveUp",value:function(e,t){var n=Nt(this.state.layer_list);t>0&&this.handleSwap(n,t,t-1)}},{key:"handleMoveDown",value:function(e,t){var n=Nt(this.state.layer_list);t<n.length-1&&this.handleSwap(n,t,t+1)}},{key:"handleSwap",value:function(e,t,n){var a=e[t];e[t]=e[n],e[n]=a,this.setState({layer_list:e})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.state,c=l.layer_list,i=l.old_name,s=!1;this.props.match.params.group_name&&(s=!0),$e.createLayerGroup(e,c,s,i).then((function(e){var t=e.success,l=e.info,c=e.errors;t?(n.setState({modal_alert_status:"open",model_alert_text:l,model_alert_icon:"success"}),a("saved"),n.modalCloseTime()):(c?o(c):n.setState({modal_alert_status:"open",model_alert_text:l,model_alert_icon:"danger"}),r(!1))}))}},{key:"modalCloseTime",value:function(){var e=this;this.state.timer=setTimeout((function(){e.setState({modal_alert_status:"closed"})}),2e3),this.props.history.push("/back/gp-geoserver/layer-groups/")}},{key:"render",value:function(){var e=this,t=this.state,n=t.form_values,a=t.layer_list,o=t.layer_detail,l=t.select_layer_status,c=t.modal_alert_status,i=t.model_alert_text,s=t.model_alert_icon,u=this.props.match.params.group_name;return r.a.createElement("div",{className:"col-md-8",style:{minHeight:"72vh"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 col-md-4 col-xl-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mt-3 col-md-12 col-xl-12"},r.a.createElement("div",{className:"h-100"},r.a.createElement(dt.e,{enableReinitialize:!0,initialValues:n,validationSchema:Bt,onSubmit:this.handleSubmit},(function(t){var n=t.errors,o=t.isSubmitting;return r.a.createElement(dt.d,null,r.a.createElement("div",{className:"form-row col-md-12"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:""},"Нэр"),r.a.createElement(dt.b,{className:"form-control "+(n.name?"is-invalid":""),name:"name",id:"name",type:"text"}),r.a.createElement(dt.a,{name:"name",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"title"},"Гарчиг"),r.a.createElement(dt.b,{className:"form-control ",name:"title",id:"title",type:"text",placeholder:"Гарчиг"})),r.a.createElement("div",{className:"form-group col-md-12 mb-2"},r.a.createElement("label",{htmlFor:"abstract"},"Товч тайлбар"),r.a.createElement(dt.b,{className:"form-control",name:"abstract",id:"abstract",as:"textarea",placeholder:"Товч тайлбар"})),u&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-row col-md-12 my-2"},r.a.createElement("label",{htmlFor:"bbox",className:"col-md-12"},"Bounding box"),r.a.createElement("label",{htmlFor:"bbox",className:"col-md-12"},r.a.createElement("a",{className:"col-3 float-left pl-1"},"Minx"),r.a.createElement("a",{className:"col-3 float-left pl-1"},"Maxx"),r.a.createElement("a",{className:"col-3 float-left pl-1"},"Miny"),r.a.createElement("a",{className:"col-3 float-left pl-1"},"Maxy")),r.a.createElement(dt.b,{type:"number",name:"minx",id:"minx",placeholder:"minx",disabled:!0,className:"form-control col-3"}),r.a.createElement(dt.b,{type:"number",name:"miny",id:"minx",disabled:!0,placeholder:"miny",className:"form-control col-3"}),r.a.createElement(dt.b,{type:"number",name:"maxx",disabled:!0,id:"maxx",placeholder:"maxx",className:"form-control col-3"}),r.a.createElement(dt.b,{type:"number",name:"maxy",id:"maxx",disabled:!0,placeholder:"maxy",className:"form-control col-3"})),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"id_name"},"Projection"),r.a.createElement(dt.b,{className:"form-control col-4",name:"projection",disabled:!0,id:"projection",type:"text",placeholder:"projection"}))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row justify-content-center overflow-auto",style:{height:"30vh"}},r.a.createElement("table",{className:"table table-wrapper-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}," № "),r.a.createElement("th",{scope:"col"},"Давхарга"),r.a.createElement("th",{scope:"col"},"Төрөл"),r.a.createElement("th",{scope:"col"},"Style"),r.a.createElement("th",{scope:"col"},"Эрэмбэ"),r.a.createElement("th",{scope:"col"},"Хасах"))),r.a.createElement("tbody",null,a.length>0?a.map((function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n+1),r.a.createElement("td",null,t.layer_name),r.a.createElement("td",null,t.type),r.a.createElement("td",null,t.style_name),r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{href:"#",onClick:function(t){return e.handleMoveUp(t,n)}},r.a.createElement(Oe.a,{icon:"fa fa-arrow-up text-primary"})),r.a.createElement("a",{href:"#",onClick:function(t){return e.handleMoveDown(t,n)}},r.a.createElement(Oe.a,{icon:"fa fa-arrow-down text-primary"}))),r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{href:"#",onClick:function(n){return e.removeLayer(n,t)}},r.a.createElement(Oe.a,{icon:"fa fa-minus-circle text-danger"}))))})):null))),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("a",{href:"#",onClick:function(t){return e.setState({select_layer_status:!0})}},r.a.createElement(Oe.a,{icon:"fa fa-plus-circle text-success mr-4 mt-2"}),"Давхарга нэмэх")))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:o},o&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),o&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!o&&"Хадгалах")))))})))))),l&&r.a.createElement(Ot,{modalClose:this.modalClose,modalAction:this.handleSelectedLayers,layer_list:o,title:"Давхаргууд"})),r.a.createElement(St.a,{modalAction:function(){return e.modalClose()},status:c,title:i,model_type_icon:s}))}}])&&Ct(t.prototype,n),a&&Ct(t,a),l}(a.Component);function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Jt(e);if(t){var r=Jt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ut(this,n)}}function Ut(e,t){return!t||"object"!==Lt(t)&&"function"!=typeof t?Gt(e):t}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vt=yt.c().shape({zoom_start:yt.b().max(21,"Хамгийн ихдээ 21 байна"),zoom_stop:yt.b().max(21,"Хамгийн ихдээ 21 байна"),number_of_cache:yt.b().max(21,"Хамгийн ихдээ 21 байна")}),Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(l,e);var t,n,a,o=It(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={form_values:{image_format:"png",zoom_start:0,zoom_stop:0,cache_type:"reseed",number_of_cache:1},modal_alert_status:"closed",model_alert_text:"",model_alert_icon:"success",image_formats:["png","jpeg"],cache_types:["seed","reseed","truncate"],errors:[],timer:null},t.getDetialAll=t.getDetialAll.bind(Gt(t)),t.handleSubmit=t.handleSubmit.bind(Gt(t)),t.modalClose=t.modalClose.bind(Gt(t)),t.modalCloseTime=t.modalCloseTime.bind(Gt(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.group_name;e&&this.getDetialAll(e)}},{key:"getDetialAll",value:function(e){var t=this;$e.getGroupCacheList(e).then((function(e){var n=e.cache_list;if(n.length>0){var a=n[0];t.setState({form_values:{image_format:a.image_format,zoom_start:a.zoom_start,zoom_stop:a.zoom_stop,cache_type:a.cache_type,number_of_cache:a.number_of_cache}})}}))}},{key:"modalClose",value:function(){this.setState({modal_alert_status:"closed"})}},{key:"handleSubmit",value:function(e,t){var n=this,a=t.setStatus,r=t.setSubmitting,o=t.setErrors,l=this.props.match.params.group_name;$e.createGroupCache(e,l).then((function(e){var t=e.success,l=e.errors,c=e.info;t?(n.setState({modal_alert_status:"open",model_alert_text:c,model_alert_icon:"success"}),a("saved"),n.modalCloseTime()):o(l),r(!1)}))}},{key:"modalCloseTime",value:function(){var e=this;this.state.timer=setTimeout((function(){e.setState({modal_alert_status:"closed"})}),2e3),this.props.history.push("/back/gp-geoserver/layer-groups/")}},{key:"render",value:function(){var e=this,t=this.state,n=t.form_values,a=t.modal_alert_status,o=t.model_alert_text,l=t.model_alert_icon,c=t.image_formats,i=t.cache_types,s=this.props.match.params.group_name;return r.a.createElement("div",{className:"ml-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(dt.e,{enableReinitialize:!0,initialValues:n,validationSchema:Vt,onSubmit:this.handleSubmit},(function(e){var t=e.errors,n=e.isSubmitting;return r.a.createElement(dt.d,null,r.a.createElement("div",{className:"form-row col-md-8"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-row col-md-12 mb-2"},r.a.createElement("label",{htmlFor:"group_name",className:"col-md-12 my-2 text-center text-dark h5"},s)),r.a.createElement("div",{className:"form-row col-md-12 mb-2"},r.a.createElement("label",{htmlFor:"image_format",className:"col-md-6 my-2"}," Зургийн формат"),r.a.createElement(dt.b,{name:"image_format",id:"image_format",as:"select",className:"form-control col-md-6"},c.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("div",{className:"form-row col-md-12 mb-4 mt-2"},r.a.createElement("label",{htmlFor:"",className:"col-md-6"},"Үйлдлийн төрөл"),r.a.createElement(dt.b,{name:"cache_type",id:"cache_type",as:"select",className:"form-control col-md-6"},i.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:""},"Томруулах эхний утга"),r.a.createElement(dt.b,{className:"form-control "+(t&&t.zoom_start?"is-invalid":""),name:"zoom_start",id:"zoom_start",type:"number"}),r.a.createElement(dt.a,{name:"zoom_start",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6 mb-2"},r.a.createElement("label",{htmlFor:""},"Томруулах сүүлчийн утга"),r.a.createElement(dt.b,{className:"form-control "+(t&&t.zoom_stop?"is-invalid":""),name:"zoom_stop",id:"zoom_stop",type:"number"}),r.a.createElement(dt.a,{name:"zoom_stop",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group col-md-6 mb-2"},r.a.createElement("label",{htmlFor:""},"Хэрэглэх таскуудын тоо"),r.a.createElement(dt.b,{className:"form-control "+(t&&t.number_of_cache?"is-invalid":""),name:"number_of_cache",id:"number_of_cache",type:"number"}),r.a.createElement(dt.a,{name:"number_of_cache",component:"div",className:"text-danger"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:n},n&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"}),n&&r.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!n&&"Хадгалах"))))})))),r.a.createElement(St.a,{modalAction:function(){return e.modalClose()},status:a,title:o,model_type_icon:l}))}}])&&qt(t.prototype,n),a&&qt(t,a),l}(a.Component);function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Qt(e);if(t){var r=Qt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){return!t||"object"!==Xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(c,e);var t,n,a,l=$t(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return t=c,(n=[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/back/gp-geoserver/layer-groups/",component:pt}),r.a.createElement(o.a,{path:"/back/gp-geoserver/layer-groups/:group_name/tile-caching/",component:Zt}),r.a.createElement(o.a,{path:"/back/gp-geoserver/layer-groups/нэмэх/",component:Ft}),r.a.createElement(o.a,{path:"/back/gp-geoserver/layer-groups/:group_name/засах/",component:Ft}))))}}])&&Ht(t.prototype,n),a&&Ht(t,a),c}(a.Component);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=on(e);if(t){var r=on(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return rn(this,n)}}function rn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(c,e);var t,n,a,l=an(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return t=c,(n=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/back/gp-geoserver/layer-groups/",component:Wt}),r.a.createElement(o.a,{path:"/back/gp-geoserver/style/",component:Ze})))}}])&&tn(t.prototype,n),a&&tn(t,a),c}(a.Component)}}]);