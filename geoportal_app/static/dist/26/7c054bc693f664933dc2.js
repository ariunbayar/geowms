(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1005:function(e,t,n){var r=n(69),o=n(1019);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};r(o,a);e.exports=o.locals||{}},1019:function(e,t,n){(t=n(70)(!1)).push([e.i,".img {\n    margin-right: 1rem;\n    max-width: 5%;\n}\n\n.fileContainer {\n    margin-bottom: 0px;\n    margin-top: 0px\n}\n\n* {\n    box-sizing: border-box;\n}\n\n.bundle-container-bundleForm {\n    background-color: white;\n    height: calc(95vh - 50px);\n    border-radius: 0.5rem;\n    box-shadow: 0 .125rem .25rem rgba(0,0,0,.075)!important;\n}\n\n.bundle-table-scroll {\n    overflow-y: scroll;\n    height: calc(44vh - 47px);\n}\n\n::-webkit-scrollbar {\n    width: 4px;\n    height: 5px;\n}\n\n.bundle-item_drop-scrol {\n    background-color: white;\n    height: calc(1vh - 2px);\n}\n\n@media (min-width: 576px) and (max-width: 1200px){\n    .bundle-BundleAdminRights-scroll {\n        height: auto;\n    }\n}\n\n@media (min-width: 1200px){\n    .bundle-BundleAdminRights-scroll {\n        overflow-y: scroll;\n        height: calc(97vh - 55px);\n    }\n}",""]),e.exports=t},1020:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(0),o=n.n(r),a=(n(1005),n(992));function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,t);var n,r,c,s=u(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=s.call(this,e)).state={id:e.values.id,check:t.props.roleChecks.checks,roles:t.props.roleChecks.roles,layerRoles:[]},t.handleLayerToggle=t.handleLayerToggle.bind(f(t)),t.DefaultCheck=t.DefaultCheck.bind(f(t)),t}return n=p,(r=[{key:"handleLayerToggle",value:function(t){var n=this.state.roles,r=this.state.check,o=this.props.wmsId,c=parseInt(t.target.value),i=this.props.values.id;if(t.target.checked){n.push(c);var l={bundleId:o,roleId:c,layerId:i,check:r};a.a.roleCreate(l).then((function(t){var n=t.success;t.item,n&&e.NOTIF("success","Амжилттай нэмлээ","check")}))}else if(5!=c){n=n.filter((function(e){return e!=c}));var u={bundleId:o,roleId:c,layerId:i};a.a.roleRemove(u).then((function(t){var n=t.success;t.item,n&&e.NOTIF("success","Амжилттай устгалаа","check")}))}this.setState({roles:n})}},{key:"DefaultCheck",value:function(t){var n=this.props.wmsId,r=this.props.values.id;if(t.target.checked){this.setState({check:1});var o={bundleId:n,layerId:r,check:1};a.a.defaultCheckUpdate(o).then((function(t){var n=t.success;t.item,n&&e.NOTIF("success","Амжилттай нэмлээ","check")}))}else{this.setState({check:0});var c={bundleId:n,layerId:r,check:0};a.a.defaultCheckUpdate(c).then((function(t){var n=t.success;t.item,n&&e.NOTIF("success","Амжилттай устгалаа","check")}))}}},{key:"render",value:function(){var e=this,t=this.props.values,n=t.id,r=t.name;return o.a.createElement("tr",null,o.a.createElement("td",null,r),o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox",onChange:this.DefaultCheck,checked:this.state.check>0,value:n})),this.props.role.map((function(t,n){var r=t.id;return o.a.createElement("td",{key:n},5!=r&&o.a.createElement("input",{type:"checkbox",onChange:e.handleLayerToggle,checked:e.state.roles.indexOf(r)>-1,value:r}))})))}}])&&i(n.prototype,r),c&&i(n,c),p}(r.Component)}).call(this,n(47))},579:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),o=n.n(r),a=n(31);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,r,c=s(f);function f(){return i(this,f),c.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){return this.props.navlink_url?o.a.createElement(a.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},o.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?o.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},o.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):o.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},o.a.createElement("i",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&l(t.prototype,n),r&&l(t,r),f}(r.Component)},953:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ue}));var r=n(0),o=n.n(r),a=n(13),c=n(992),i=(n(1005),n(31));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,r,a=f(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={},t}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.values,n=t.id,r=t.name,a=t.icon_url,c=t.wms_list,l=this.props,u=l.idx,s=l.values;return o.a.createElement("tr",{key:u,draggable:!0,onDrop:function(t){return e.props.onDrop(t,s,u)},onDragOver:function(t){return e.props.onDragOver(t,s,u)},onDrag:function(t){return e.props.onDrag(t,s,u)}},o.a.createElement("td",{scope:"col",className:"text-dark"},u+1),o.a.createElement("td",null,o.a.createElement(i.c,{to:"/back/дэд-сан/".concat(n,"/засах/")},o.a.createElement("img",{className:"img",src:a}),r)),o.a.createElement("td",null,c.map((function(e,t){return e.is_active?o.a.createElement("p",{key:t},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-check-circle",style:{color:"green"},"aria-hidden":"false"})),o.a.createElement("span",null,o.a.createElement("a",null," ",e.name))):o.a.createElement("p",{key:t},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-times-circle",style:{color:"#FF4748"}})),o.a.createElement("span",{className:"text-muted"},o.a.createElement("a",null,o.a.createElement("del",null," ",e.name))))}))))}}])&&u(t.prototype,n),r&&u(t,r),c}(r.Component);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,a=v(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={bundle_list:[],firt_item:{},firt_item_idx:null},t.handleListUpdated=t.handleListUpdated.bind(O(t)),t.onDrag=t.onDrag.bind(O(t)),t.onDrop=t.onDrop.bind(O(t)),t.onDragOver=t.onDragOver.bind(O(t)),t.handleSwap=t.handleSwap.bind(O(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.handleListUpdated()}},{key:"handleListUpdated",value:function(){var e=this;c.a.getAll().then((function(t){var n=t.bundle_list;e.setState({bundle_list:n})}))}},{key:"handleRemove",value:function(e){var t=this;c.a.remove(e).then((function(e){e.success&&t.handleListUpdated()})),this.modalCloseTime()}},{key:"onDrag",value:function(e,t,n){e.preventDefault(),this.setState({firt_item:t,firt_item_idx:n})}},{key:"onDragOver",value:function(e,t,n){e.preventDefault()}},{key:"onDrop",value:function(e,t,n){e.preventDefault();var r=this.state,o=r.bundle_list,a=r.firt_item,c=r.firt_item_idx,i=o;i[n]=a,i[c]=t,this.handleSwap(a.id,t.id),this.setState({bundle_list:i})}},{key:"handleSwap",value:function(e,t){c.a.swap(e,t)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"table-responsive table_wrapper"},o.a.createElement("table",{className:"table table_wrapper_table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"}," # "),o.a.createElement("th",{scope:"col"}," Сангийн нэр "),o.a.createElement("th",{scope:"col"}," WMS сервис "))),o.a.createElement("tbody",null,this.state.bundle_list.map((function(t,n){return o.a.createElement(m,{key:t.id,idx:n,values:t,handleRemove:function(){return e.handleRemove(t.id)},onDrag:e.onDrag,onDragOver:e.onDragOver,onDrop:e.onDrop})})))))))))}}])&&h(t.prototype,n),r&&h(t,r),i}(r.Component),k=n(113),w=n.n(k),S=n(579);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(c,e);var t,n,r,a=C(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={id:e.values.id,name:e.values.name,layers:e.values.layers,icon:e.values.icon,icon_url:e.values.icon_url,icon_url_err:""},t.handleChange=t.handleChange.bind(I(t)),t.handleSave=t.handleSave.bind(I(t)),t.handleLayerToggle=t.handleLayerToggle.bind(I(t)),t.onDrop=t.onDrop.bind(I(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){if(this.props.values.id!==e.values.id){var t=this.props.values,n=t.id,r=t.name,o=t.layers,a=t.icon_url;this.setState({id:n,name:r,layers:o,icon_url:a})}}},{key:"handleChange",value:function(e,t){var n,r,o;this.setState((n={},r=e,o=t.target.value,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n))}},{key:"handleSave",value:function(){var e=this.state,t=e.id,n=e.name,r=e.layers,o=e.icon,a=e.icon_url;if(t){var c={id:t,name:n,layers:r,icon:o,icon_url:a};this.props.handleSave(c)}else if(o){this.setState({icon_url_err:""});var i={id:t,name:n,layers:r,icon:o};this.props.handleSave(i)}else this.setState({icon_url_err:"Зураг алга байна"})}},{key:"handleLayerToggle",value:function(e){var t=this.state.layers,n=parseInt(e.target.value);e.target.checked?t.push(n):t=t.filter((function(e){return e!=n})),this.setState({layers:t})}},{key:"onDrop",value:function(e){var t=this,n=P(e,1)[0];if(n){var r=new FileReader;r.onload=function(e){t.setState({icon:btoa(e.target.result)})},r.readAsBinaryString(n)}}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-group",style:{marginBottom:"8px"}},o.a.createElement("label",{htmlFor:"id_name"}," Сангийн нэр: "),o.a.createElement("h5",null,this.state.name)),o.a.createElement("div",{className:"bundle-table-scroll border border-light rounded"},this.props.formOptions.map((function(t,n){var r=t.name,a=t.layers,c=t.is_active;return o.a.createElement("div",{className:"form-group",style:{marginTop:"10px"},key:n},o.a.createElement("div",{className:"col-md-12"},c?o.a.createElement("div",{id:"accordion2"},o.a.createElement("div",{className:" mb-2"},o.a.createElement("div",{className:"card-header",style:{padding:"5px"}},o.a.createElement("button",{key:n,className:"btn btn-link shadow-none text-dark text-left collapsed",style:{padding:"5px"},"data-toggle":"collapse","data-target":"#collapse-".concat(n),"aria-expanded":"true","aria-controls":"collapse-".concat(n)},o.a.createElement("a",null,o.a.createElement("i",{className:"fa fa-check-circle",style:{color:"green"},"aria-hidden":"true"}),o.a.createElement("span",{className:"ml-2"},r)))),o.a.createElement("div",{id:"collapse-".concat(n),className:"collapse","data-parent":"#accordion2"},o.a.createElement("div",{className:"card-body"},o.a.createElement("dd",null,a.map((function(t){return o.a.createElement("div",{key:t.id},o.a.createElement("label",{style:{marginLeft:"25px"}},o.a.createElement("input",{type:"checkbox",checked:e.state.layers.indexOf(t.id)>-1,onChange:e.handleLayerToggle,value:t.id}),o.a.createElement("a",null," ",t.name)))}))))))):o.a.createElement("div",null,o.a.createElement("div",{className:" mb-2"},o.a.createElement("div",{className:"card-header",style:{padding:"5px"}},o.a.createElement("button",{key:n,className:"btn btn-link shadow-none text-dark text-left",style:{padding:"5px"},"data-toggle":"collapse","data-target":"#collapse-".concat(n),"aria-expanded":"true","aria-controls":"collapse-".concat(n)},o.a.createElement("a",null,o.a.createElement("i",{className:"fa fa-times-circle",style:{color:"#FF4748"}}),o.a.createElement("span",{className:"ml-2"},r))))))))}))),o.a.createElement("div",{className:"form-group text-center mt-3"},o.a.createElement("label",{htmlFor:"id_icon",className:"mr-2",style:{marginBottom:"0px"}}," Icon: "),!this.state.icon&&o.a.createElement("img",{src:this.state.icon_url,style:{width:"50px"},className:"uploadPicture ml-2"}),o.a.createElement(w.a,{withPreview:!0,withIcon:!1,buttonText:"Icon оруулах",onChange:this.onDrop,imgExtension:[".jpg",".png"],maxFileSize:5242880,singleImage:!0,label:""}),this.state.icon_url_err&&o.a.createElement("p",{className:"text-danger"},this.state.icon_url_err)),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{className:"btn gp-btn-primary btn-block waves-effect waves-light",onClick:this.handleSave},"Хадгал")),o.a.createElement(S.a,x({},this.props,{name:"Буцах",navlink_url:"/back/дэд-сан/"})))}}])&&N(t.prototype,n),r&&N(t,r),c}(r.Component),U=n(1020);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(c,e);var t,n,r,a=J(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={id:e.values.id,name:e.values.name,layers:e.values.layers,icon:e.values.icon,icon_url:e.values.icon_url},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){if(this.props.values.id!==e.values.id){var t=this.props.values,n=t.id,r=t.name,o=t.layers;this.setState({id:n,name:r,layers:o})}}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,this.props.formOptions.map((function(t,n){t.id;var r,a=t.name,c=t.layers,i=t.is_active,l=t.layer_visible;return o.a.createElement("div",{key:n,className:"",id:"accordion3"},l&&o.a.createElement("div",{className:"row ml-1 card-header"},i?o.a.createElement("button",{key:n,className:"btn btn-link shadow-none text-dark text-left collapsed",style:{padding:"5px"},"data-toggle":"collapse","data-target":"#r-collapse-".concat(n),"aria-expanded":"true","aria-controls":"collapse-".concat(n)},o.a.createElement("a",null,o.a.createElement("i",{className:"fa fa-check-circle",style:{color:"green"},"aria-hidden":"false"}),o.a.createElement("span",{className:"ml-2"},a))):o.a.createElement("button",{key:n,className:"btn btn-link shadow-none text-dark text-left collapsed",style:{padding:"5px"},"data-toggle":"collapse","data-target":"#r-collapse-".concat(n),"aria-expanded":"true","aria-controls":"collapse-".concat(n)},o.a.createElement("a",null,o.a.createElement("i",{className:"fa fa-times-circle",style:{color:"#FF4748"}}),o.a.createElement("span",{className:"ml-2"},a)))),l?o.a.createElement("div",(M(r={className:"table-responsive card-body",id:"r-collapse-".concat(n)},"className","collapse"),M(r,"data-parent","#accordion3"),r),o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"}," Давхаргын нэр "),o.a.createElement("th",{scope:"col"}," Харагдах чек "),e.props.formOptionsRole.map((function(e,t){var n=e.id;return 1==n?o.a.createElement("th",{key:t,scope:"col"},"Нээлтэй өгөгдөл"):2==n?o.a.createElement("th",{key:t,scope:"col"},"Дан нэвтэрсэн"):null})))),o.a.createElement("tbody",null,c.map((function(t){return e.state.layers.indexOf(t.id)>-1&&e.props.values.roles.map((function(n){return n.layer_id==t.id&&o.a.createElement(U.a,{key:t.id,values:t,wmsId:e.state.id,role:e.props.formOptionsRole,roleChecks:n})}))}))))):null)})))}}])&&X(t.prototype,n),r&&X(t,r),c}(r.Component);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,r,a=Y(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).initial_form_values={id:null,name:"",icon:"",icon_url:"",layers:[]},t.state={bundle_list:[],form_options:[],form_options_role:[],form_values:$({},t.initial_form_values)},t.handleSaveSuccess=t.handleSaveSuccess.bind(ee(t)),t.handleSave=t.handleSave.bind(ee(t)),t.handleListUpdated=t.handleListUpdated.bind(ee(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.handleListUpdated()}},{key:"handleListUpdated",value:function(){var e=this,t=this.props.match.params.id;t?c.a.detail(t).then((function(t){var n=t.bundle_list,r=t.form_options,o=t.form_options_role;e.setState({form_values:n,form_options:r,form_options_role:o})})):c.a.getLayer().then((function(t){var n=t.form_options;e.setState({form_options:n})}))}},{key:"handleSaveSuccess",value:function(){this.handleListUpdated()}},{key:"handleSave",value:function(e){var t=this;e.id&&c.a.update(e).then((function(e){e.success&&t.handleSaveSuccess()}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"clearfix"},o.a.createElement("div",{className:"row",style:{padding:"0px"}},o.a.createElement("div",{className:"col-lg-4"},o.a.createElement("div",{className:"w-auto p-2 shadow-sm mb-2 bg-white rounded card"},o.a.createElement("div",{className:"card-body"},o.a.createElement(F,{handleSave:this.handleSave,handleCancel:this.handleFormCancel,formOptions:this.state.form_options,values:this.state.form_values})))),this.props.match.params.id&&o.a.createElement("div",{className:"col-lg-8"},o.a.createElement("div",{className:"bundle-BundleAdminRights-scroll card mb-2 table-responsive "},o.a.createElement("div",{className:"card-body"},o.a.createElement(H,{handleSave:this.handleSave,formOptions:this.state.form_options,formOptionsRole:this.state.form_options_role,values:this.state.form_values}))))))}}])&&Q(t.prototype,n),r&&Q(t,r),i}(r.Component);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(i,e);var t,n,r,c=ce(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c.call(this,e)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement(a.d,null,o.a.createElement(a.b,{path:"/back/дэд-сан/:id/засах/",component:ne}),o.a.createElement(a.b,{path:"/back/дэд-сан/үүсгэх/",component:ne}),o.a.createElement(a.b,{exact:!0,path:"/back/дэд-сан/",component:_}))}}])&&oe(t.prototype,n),r&&oe(t,r),i}(r.Component)},992:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}));var c={getAll:function(){var e=o({},{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});return fetch("".concat("/back","/bundle/all/"),e).then(l)},update:function(e){var t=o(o({},u()),{},{body:JSON.stringify(e)});return fetch("".concat("/back","/bundle/update/"),t).then(l)},swap:function(e,t){var n=o(o({},u()),{},{body:JSON.stringify({swap_one:e,swap_two:t})});return fetch("".concat("/back","/bundle/swap/"),n).then(l)},roleCreate:function(e){var t=o(o({},u()),{},{body:JSON.stringify(e)});return fetch("".concat("/back","/bundle/role-create/"),t).then(l)},roleRemove:function(e){var t=o(o({},u()),{},{body:JSON.stringify(e)});return fetch("".concat("/back","/bundle/role-remove/"),t).then(l)},defaultCheckUpdate:function(e){var t=o(o({},u()),{},{body:JSON.stringify(e)});return fetch("".concat("/back","/bundle/default-check-update/"),t).then(l)},detail:function(e){var t=o({},{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});return fetch("".concat("/back","/bundle/").concat(e,"/update-detail/"),t).then(l)},getLayer:function(e){var t=o({},{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});return fetch("".concat("/back","/bundle/get-layer/"),t).then(l)}};function i(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}function l(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&location.reload(!0);var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}function u(){return{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":i("csrftoken")}}}}}]);