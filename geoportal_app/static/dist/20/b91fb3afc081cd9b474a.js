(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{159:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,o,s=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t}return t=f,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose(null,0))}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e,t){var n=this;t=void 0===t?150:t,this.setState({status:"closing"}),setTimeout((function(){n.setState({status:"closed"}),e&&e()}),t)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:n,onClick:function(){return e.handleProceed()}},a.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},a.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},a.a.createElement("div",{className:"d-flex justify-content-center"},"danger"==this.props.model_type_icon?a.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"primary"==this.props.model_type_icon?a.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn gp-text-primary","aria-hidden":"true"}):"warning"==this.props.model_type_icon?a.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):a.a.createElement("i",{className:"fa fa-check-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),a.a.createElement("div",{className:"d-flex justify-content-center my-1"},a.a.createElement("h6",{className:"text-dark"},this.props.title)),a.a.createElement("div",{className:"modal-body text-wrap ml-2 mr-2 my-3 text-justify"},a.a.createElement("a",{className:"text-dark"},this.props.text))))),a.a.createElement("div",{className:o}))}}])&&i(t.prototype,n),o&&i(t,o),f}(r.Component)},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return Fn}));var r=n(0),a=n.n(r),o=(n(214),n(115)),i=n(881),c=n(468),l=n(883),s=n(2),u=n(880),f=n(113),p=n(282),m=n(886),d=n(161),h=n(284),y=n(135),b=n(885),v=n(332),g=n(211),_=n(884),w=n(235),E=n(69),k=n(121),S=n(224),x=n(16),O=n(21),C=n(509),j=n(510),N=n(508),P=n(134),R=n(76),L=n(15);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var a=z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,e);var t,n,r,a=M(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=e||{};(t=a.call(this,{element:document.createElement("div"),target:n.target})).toggleLayer=t.toggleLayer.bind(I(t)),t.initLayer=t.initLayer.bind(I(t)),t.handleClick=t.handleClick.bind(I(t)),t.last_active=null;var r=n.layers.map(t.initLayer),i="суурь-давхаргууд ".concat(L.e," ").concat(L.b),c=t.element;return c.className=i,r.forEach((function(e){return c.appendChild(e)})),t}return t=o,(n=[{key:"initLayer",value:function(e){var t=this,n=e.thumbnail_1x,r=e.thumbnail_2x,a=e.layer,o=e.is_active,i=document.createElement("a");i.setAttribute("href","#"),i.className="суурь-давхарга"+(o?" active":"");var c=document.createElement("img");return c.srcset="".concat(n," 1x, ").concat(r," 2x"),i.appendChild(c),i.addEventListener("click",(function(e){e.preventDefault(),t.handleClick(i,a)})),this.toggleLayer(!0===o,i,a),i}},{key:"toggleLayer",value:function(e,t,n){this.last_active&&e&&(this.last_active.layer.setVisible(!1),this.last_active.el.classList.toggle("active",!1)),n.setVisible(e),t.classList.toggle("active",e),e&&(this.last_active={el:t,layer:n})}},{key:"handleClick",value:function(e,t){this.last_active&&this.last_active.el===e||this.toggleLayer(!0,e,t)}}])&&T(t.prototype,n),r&&T(t,r),o}(R.a),B=n(7),W=n.n(B);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var a=Z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){X(n,e);var t=H(n);function n(e){var r;return J(this,n),(r=t.call(this,e)).handleCoordinateSet=r.handleCoordinateSet.bind($(r)),r}return G(n,[{key:"componentDidMount",value:function(){this.handleCoordinateSet()}},{key:"componentDidUpdate",value:function(e){this.handleCoordinateSet()}},{key:"handleCoordinateSet",value:function(){var e=W.a.findDOMNode(this);e.focus(),e.select()}},{key:"render",value:function(){return a.a.createElement("input",{type:"text",className:"form-control",onChange:function(){},onBlur:this.props.handleBlur,value:this.props.coordinate})}}]),n}(r.Component),ee=function(e){X(n,e);var t=H(n);function n(e){var r;J(this,n);var a=e||{};(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!1;var o="coordinate-copy-control ".concat(L.b," ").concat(L.c);return r.element.className=o,r.renderComponent=r.renderComponent.bind($(r)),r.toggleControl=r.toggleControl.bind($(r)),r}return G(n,[{key:"toggleControl",value:function(e){this.element.classList.toggle(L.c,!e)}},{key:"renderComponent",value:function(e){var t=this;e.handleBlur=function(){return t.toggleControl(!1)},this.is_component_initialized||(W.a.render(a.a.createElement(Q,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(Q,e),this.element)}},{key:"setCoordinate",value:function(e){this.renderComponent({coordinate:e}),this.toggleControl(!0)}}]),n}(R.a);n(20);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae={loadWMSLayers:function(e){var t=ne({},{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});return fetch("/дэд-сан/".concat(e,"/давхаргууд/"),t).then(ie)},loadBaseLayers:function(){var e=ne({},{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});return fetch("/суурь-давхарга/",e).then(ie)},payment:function(e,t,n){var r=ne(ne({},ce()),{},{body:JSON.stringify({price:e,description:t,data_id:n})});return fetch("/back/payment/purchase/",r).then(ie)},paymentDraw:function(e){var t=ne(ne({},ce()),{},{body:JSON.stringify(e)});return fetch("/payment/purchase-draw/",t).then(ie)},paymentCalcPrice:function(e,t,n,r){var a=ne(ne({},ce()),{},{body:JSON.stringify({area:e,layer_list:t,feature_info_list:n,selected_type:r})});return fetch("/payment/calc-price/",a).then(ie)},purchaseFromCart:function(e){var t=ne(ne({},ce()),{},{body:JSON.stringify({datas:e})});return fetch("/payment/purchase-from-cart/",t).then(ie)},searchPoint:function(e){var t=ne(ne({},ce()),{},{body:JSON.stringify({point_id:e})});return fetch("/gov/api/tseg-personal/find-point/",t).then(ie)},getAimags:function(){var e=ne({},{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});return fetch("/api/aimag/",e).then(ie)},getSum:function(e){var t=ne(ne({},ce()),{},{body:JSON.stringify({aimag_name:e})});return fetch("/api/sum/",t).then(ie)},getUser:function(){var e=ne({},{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});return fetch("/get_user/",e).then(ie)},checkButtonEnableWithPdf:function(e){var t=ne(ne({},ce()),{},{body:JSON.stringify({pdf_id:e})});return fetch("/payment/check-enable-pdf/",t).then(ie)},getPopUpInfo:function(e,t){var n=ne(ne({},ce()),{},{body:JSON.stringify({layers_code:e,coordinate:t})});return fetch("/payment/get-popup-info/",n).then(ie)},checkButtonEnableWithId:function(e){var t=ne(ne({},ce()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/check-enable-pdf-id/",t).then(ie)},getFeatureInfo:function(e,t){var n=ne(ne({},ce()),{},{body:JSON.stringify({layer_codes:e,coordinates:t})});return fetch("/payment/get-feature-info/",n).then(ie)},getGeom:function(e){var t=ne(ne({},ce()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/get-geom/",t).then(ie)},getContainGeoms:function(e,t,n){var r=ne(ne({},ce()),{},{body:JSON.stringify({layers_code:e,geometry:t,km_scale:n})});return fetch("/payment/get-contain-geoms/",r).then(ie)}};function oe(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var a=n[r].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}function ie(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&location.reload(!0);var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}function ce(){return{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":oe("csrftoken")}}}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return be(this,n)}}function be(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){de(n,e);var t=ye(n);function n(e){var r;return fe(this,n),(r=t.call(this,e)).state={price:3e3,description:"Газрын бүрхэвч, газар ашиглалт",payload:!1,data_id:2},r}return me(n,[{key:"handlePayment",value:function(){var e=this;this.setState({payload:!0});var t=this.state,n=t.price,r=t.description,a=t.data_id;ae.payment(n,r,a).then((function(t){var n=t.payment_id;n&&setTimeout((function(){e.props.history.push("/payment/purchase/".concat(n,"/"))}),1e3)}))}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.is_complete,r=this.state.payload;return a.a.createElement("div",null,a.a.createElement("div",{className:"show d-block modal modal-dialog"},a.a.createElement("div",{className:"modal-dialog-scrollable modal-dialog-centered"},a.a.createElement("div",{className:"modal-content animated swing"},a.a.createElement("div",{className:"modal-header",onClick:this.props.handleClose},a.a.createElement("h5",{className:"modal-title"},"Дэлгэрэнгүй мэдээлэл"),a.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},a.a.createElement("span",{"aria-hidden":"true"},"×"))),a.a.createElement("div",{className:"modal-body"},!n&&a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("strong",null,"Түр хүлээнэ үү..."),a.a.createElement("div",{className:"spinner-border ml-auto",role:"status","aria-hidden":"true"})),n&&t.map((function(e,t){var n=se(e,2),r=n[0],o=n[1];return a.a.createElement("div",{key:t},a.a.createElement("h6",null,r),a.a.createElement("table",{className:"table"},a.a.createElement("tbody",null,o.map((function(e,t){var n=se(e,2),r=n[0],o=n[1];return a.a.createElement("tr",{key:t},a.a.createElement("th",null,r),a.a.createElement("td",null,o))})))))}))),a.a.createElement("div",{className:"modal-footer"},a.a.createElement("button",{type:"button",onClick:this.props.handleClose,className:"btn btn-secondary","data-dismiss":"modal"},"Буцах"),r?a.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Ачааллаж байна...",a.a.createElement("a",{className:"spinner-border text-light",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading..."))):null)))),a.a.createElement("div",{className:"modal-backdrop fade show"}))}}]),n}(r.Component),we=function(e){de(n,e);var t=ye(n);function n(e){var r;fe(this,n);var a=e||{};return(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!1,r.element.className="modal fade show",r.renderComponent=r.renderComponent.bind(ve(r)),r.toggleControl=r.toggleControl.bind(ve(r)),r}return me(n,[{key:"toggleControl",value:function(e){this.element.classList.toggle("d-block",e)}},{key:"renderComponent",value:function(e){var t=this;e.handleClose=function(){return t.toggleControl(!1)},this.is_component_initialized||(W.a.render(a.a.createElement(_e,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(_e,e),this.element)}},{key:"showModal",value:function(e,t){this.toggleControl(!0),this.renderComponent({content:e,is_complete:t})}}]),n}(R.a);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var a=Re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ne(this,n)}}function Ne(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Le=function(e){Oe(n,e);var t=je(n);function n(e){var r;return ke(this,n),(r=t.call(this,e)).div=[],r.xy=[],r.state={coordinate:[],torf:!1,data:[],x:null,y:null,is_button:!1,is_purchase:!1,alert_msg:"",max_size:8,first_number:0,is_again:!1},r.removeList=r.removeList.bind(Pe(r)),r.checkDataForPurchase=r.checkDataForPurchase.bind(Pe(r)),r.moreItems=r.moreItems.bind(Pe(r)),r.undoItems=r.undoItems.bind(Pe(r)),r.makeList=r.makeList.bind(Pe(r)),r}return xe(n,[{key:"componentDidMount",value:function(){this.makeList()}},{key:"componentDidUpdate",value:function(e,t){var n=this;(e.geom_name!==this.props.geom_name&&this.makeList(),e.point_id===this.props.point_id&&this.props.is_again_clicked)&&(this.state.data.length>0&&this.state.data.filter((function(e){return e.id==n.props.point_id})).length>0||this.makeList());t.data!==this.state.data&&0==this.state.data.length&&this.setState({is_button:!0})}},{key:"makeList",value:function(){var e=this,t=this.props,n=(t.coordinate,t.torf),r=t.point_name,a=t.code,o=t.point_id,i=t.geom_name,c=t.pdf_id_props;if(1==n&&""!==i){var l="Нэр байхгүй байна",s="pdf байхгүй";c&&(s=c),r&&(l=r);var u={name:l,id:o,code:a,geom_name:i,pdf_id:s};if(this.state.data.length>0)if(this.state.data.filter((function(e){return e.geom_name==u.geom_name})).length>0)this.setState({alert_msg:"Адилхан цэг байна !",success:!1}),setTimeout((function(){e.setState({alert_msg:"",success:!1})}),2e3);else{var f=this.state.data;f.push(u),this.setState({data:f,is_button:!1})}else this.setState({data:[u],is_button:!1})}}},{key:"removeList",value:function(e){var t=this.state.data;if(1==t.length&&this.setState({data:[]}),t.length>1){if(t.every((function(t){return e}))){var n=t.filter((function(t){return t.geom_name!==e}));this.setState({data:n})}}}},{key:"checkDataForPurchase",value:function(){var e=this;this.setState({is_purchase:!0}),this.state.data.length>0?ae.purchaseFromCart(this.state.data).then((function(t){var n=t.success,r=t.msg,a=t.payment_id;n&&(e.setState({alert_msg:r,success:n}),setTimeout((function(){e.setState({data:[],is_purchase:!1,is_button:!0}),window.location.href="/payment/purchase/".concat(a,"/")}),1e3)),n||(e.setState({is_purchase:!1,is_button:!1,alert_msg:r}),setTimeout((function(){e.setState({alert_msg:""})}),2e3))})).catch((function(e){return alert("Алдаа гарсан тул хуудсыг дахин ачааллуулна уу")})):this.setState({alert_msg:"Уучлаарай сагс хоосон байна"})}},{key:"moreItems",value:function(){var e=this.state,t=e.max_size,n=e.first_number,r=t,a=r-n;n+=a,r+=a,this.setState({first_number:n,max_size:r,undoItem:!0})}},{key:"undoItems",value:function(){var e=this.state,t=e.max_size,n=e.first_number,r=n,a=t,o=a-n;r-=o,a-=o,this.setState({max_size:a,first_number:r}),r<=0&&this.setState({undoItem:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.coordinate,t.torf,t.data),r=t.is_button,o=t.alert_msg,i=t.success,c=t.max_size,l=t.first_number,s=t.undoItem,u=this.props;u.x,u.y;return n.length>0?(this.div=[],n.slice(l,c).map((function(t,n){var r=n+1+l;e.div.push(a.a.createElement("div",{className:"rounded bg-light card-baraa row shadow-sm bg-white",key:n},a.a.createElement("div",{className:"col-md-1 icon"},a.a.createElement("i",{type:"button",className:"fa fa-trash text-danger",onClick:function(){return e.removeList(t.geom_name)}})),a.a.createElement("span",{className:"col-md-10 name"},a.a.createElement("b",null,r,". Цэгийн нэр: "),t.name)))}))):this.div=[],a.a.createElement("div",{className:"root"},""!==o&&i?a.a.createElement("div",{className:"alert alert-success alert-custom-css",role:"alert"},o):a.a.createElement("div",{className:"alert alert-danger alert-custom-css "+(""!==o?"d-block":"d-none"),role:"alert"},o),a.a.createElement("div",null,a.a.createElement("div",{className:"cart-button"},a.a.createElement("div",{className:"card-count"},n.length),a.a.createElement("div",{className:"card-icon"},a.a.createElement("i",{className:"fa fa-shopping-cart","aria-hidden":"true"}))),a.a.createElement("div",{className:"cart-list"},s?a.a.createElement("a",{type:"button",className:"btn-outline btn-block p-0 my-2 m-0 text-center",onClick:function(){return e.undoItems()}},a.a.createElement("i",{style:{fontSize:"30px"},className:"fa fa-angle-up gp-text-primary","aria-hidden":"true"})):null,this.div,n.length>c?a.a.createElement("a",{type:"button",className:"btn-outline btn-block p-0 my-2 m-0 text-center",onClick:function(){return e.moreItems()}},a.a.createElement("i",{style:{fontSize:"30px"},className:"fa fa-angle-down gp-text-primary","aria-hidden":"true"})):null,this.state.is_purchase?a.a.createElement("button",{className:"btn gp-btn-primary my-4",disabled:!0},a.a.createElement("div",{className:"spinner-border",role:"status"},a.a.createElement("span",{className:"sr-only"}))," Түр хүлээнэ үү..."):a.a.createElement("button",{className:"btn gp-btn-primary pay-button my-4",onClick:function(){return e.checkDataForPurchase()},disabled:r},"Худалдаж авах"))))}}]),n}(r.Component),Fe=function(e){Oe(n,e);var t=je(n);function n(e){var r;ke(this,n);var a=e||{};return(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!0,r.is_cart=!1,r.element.className="d-block",r.renderComponent=r.renderComponent.bind(Pe(r)),r.showModal=r.showModal.bind(Pe(r)),r}return xe(n,[{key:"renderComponent",value:function(e){this.is_component_initialized||(W.a.render(a.a.createElement(Le,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(Le,e),this.element)}},{key:"showModal",value:function(e,t,n,r,a,o,i,c,l,s){this.renderComponent({coordinate:e,torf:t,x:n,y:r,point_name:a,code:o,point_id:i,is_again_clicked:c,geom_name:l,pdf_id_props:s})}}]),n}(R.a);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),e}function Ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?Je(e):t}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ge=function(e){Ve(n,e);var t=We(n);function n(e){var r;return Ae(this,n),(r=t.call(this,e)).state={price:3e3,description:"Газрын бүрхэвч, газар ашиглалт",payload:!1,data_id:2,is_button:r.props.is_button},r}return ze(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.content,n=e.is_button;t&&this.setState({is_button:!n})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.content,r=t.is_button;e.content!==n&&null!==n&&n.length>=1&&this.setState({is_button:!r})}},{key:"handlePayment",value:function(){var e=this;this.setState({payload:!0});var t=this.state,n=t.price,r=t.description,a=t.data_id;ae.payment(n,r,a).then((function(t){var n=t.payment_id;n&&setTimeout((function(){e.props.history.push("/payment/purchase/".concat(n,"/"))}),1e3)}))}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.is_complete,r=e.feature_price,o=(e.geodb_export_field,e.geodb_pk_field,e.geodb_schema,e.geodb_table,this.state),i=o.payload,c=o.is_button;return a.a.createElement("div",null,a.a.createElement("div",{className:"show d-block modal"},a.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable"},a.a.createElement("div",{className:"modal-content animated swing"},a.a.createElement("button",{type:"button",className:"close border","data-dismiss":"modal","aria-label":"Close",onClick:this.props.handleClose},a.a.createElement("span",{"aria-hidden":"true"},"×")),a.a.createElement("div",{className:"modal-body"},!n&&a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("strong",null,"Түр хүлээнэ үү..."),a.a.createElement("div",{className:"spinner-border ml-auto",role:"status","aria-hidden":"true"})),n&&t.map((function(e,t){var n=De(e,2),o=(n[0],n[1]);return a.a.createElement("div",{key:t},a.a.createElement("h6",{className:"text-center"},"Цэгийн мэдээлэл"),a.a.createElement("table",{className:"table"},a.a.createElement("tbody",null,o.map((function(e,t){var n=De(e,2),r=n[0],o=n[1];return"point_id"==r?a.a.createElement("tr",{key:t},a.a.createElement("th",null,"Цэгийн дугаар:"),a.a.createElement("td",null,o)):"point_name"==r?a.a.createElement("tr",{key:t},a.a.createElement("th",null,"Цэгийн Нэр:"),a.a.createElement("td",null,o)):"id"==r?a.a.createElement("tr",{key:t},a.a.createElement("th",null,"Цэгийн дахин давтагдашгүй дугаар:"),a.a.createElement("td",null,o)):"point_class_name"==r?a.a.createElement("tr",{key:t},a.a.createElement("th",null,"Сүлжээний төрөл:"),a.a.createElement("td",null,o)):null})),o.map((function(e,t){var n=De(e,2),r=n[0],o=n[1];return"aimag"==r?a.a.createElement("tr",{key:t},a.a.createElement("th",null,"Аймаг:"),a.a.createElement("td",null,o)):"sum"==r?a.a.createElement("tr",{key:t},a.a.createElement("th",null,"Сум:"),a.a.createElement("td",null,o)):"mclass"==r?a.a.createElement("tr",{key:t},a.a.createElement("th",null,"Сүлжээний зэрэг:"),a.a.createElement("td",null,o)):null})),a.a.createElement("tr",null,a.a.createElement("th",null,"Трапецийн дугаар(1:100000)"),a.a.createElement("td",null,o.map((function(e,t){var n=De(e,2),r=n[0],o=n[1];return"sheet1"==r?a.a.createElement("a",{key:t},o,"-"):"sheet2"==r?a.a.createElement("a",{key:t},parseInt(o),"-"):"sheet3"==r?a.a.createElement("a",{key:t},parseInt(o)):null})))),a.a.createElement("tr",{key:"price"},a.a.createElement("th",null,"Үнэ"),a.a.createElement("td",null,r)))))}))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-sm-12 mb-4"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-8 col-sm-6 d-flex justify-content-center"},a.a.createElement("button",{type:"button",className:"btn btn-lg gp-btn-primary",onClick:this.props.handlePointToCart,disabled:c},a.a.createElement("i",{className:"fa fa-shopping-cart"}),"  Сагсанд нэмэх")),a.a.createElement("div",{className:"col-sm-6 float-right"},a.a.createElement("a",{href:"/profile/tseg-personal/tseg-info/tseg-personal/",className:"btn btn-lg gp-btn-primary ml-3"},a.a.createElement("i",{className:"fa fa-location-arrow mr-2"}),"Цэг нэмэх")),a.a.createElement("div",{className:"col-4 col-sm-6 d-flex justify-content-center"},i?a.a.createElement("button",{type:"button",className:"btn btn-lg btn-secondary","data-dismiss":"modal"},"Ачааллаж байна...",a.a.createElement("a",{className:"spinner-border text-light",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading..."))):null))))))),a.a.createElement("div",{className:"modal-backdrop fade show"}))}}]),n}(r.Component),Xe=function(e){Ve(n,e);var t=We(n);function n(e){var r;Ae(this,n);var a=e||{};return(r=t.call(this,{element:document.createElement("div"),target:a.target})).comp={cart:new Fe},r.is_component_initialized=!1,r.element.className="modal fade show",r.renderComponent=r.renderComponent.bind(Je(r)),r.toggleControl=r.toggleControl.bind(Je(r)),r}return ze(n,[{key:"toggleControl",value:function(e){this.element.classList.toggle("d-block",e)}},{key:"handlePointToCart",value:function(e,t,n){e(!0,t,n),this.toggleControl(!1)}},{key:"renderComponent",value:function(e){var t=this;e.handleClose=function(){return t.toggleControl(!1)},e.handlePointToCart=function(){return t.handlePointToCart(e.func,e.content,e.code)},e.is_button=!0,this.is_component_initialized||(W.a.render(a.a.createElement(Ge,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(Ge,e),this.element)}},{key:"showModal",value:function(e,t,n,r,a,o,i,c,l){this.toggleControl(!0),this.renderComponent({feature_price:e,geodb_export_field:t,geodb_pk_field:n,geodb_schema:r,geodb_table:a,code:o,content:i,is_complete:c,func:l})}}]),n}(R.a);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t,n){return t&&Ke(e.prototype,t),n&&Ke(e,n),e}function Ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var a=rt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?nt(e):t}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var at=function(e){Ze(n,e);var t=et(n);function n(e){var r;return He(this,n),(r=t.call(this,e)).state={total_price:0,description:"Газрын бүрхэвч, газар ашиглалт",handlePaymentIsLoad:!1,types:["shp","jpeg","png","tiff","pdf"],selected_type:""},r.handlePayment=r.handlePayment.bind(nt(r)),r.onChangeType=r.onChangeType.bind(nt(r)),r.closeModal=r.closeModal.bind(nt(r)),r}return $e(n,[{key:"onChangeType",value:function(e){var t=this,n=this.props,r=n.area,a=n.layer_list,o=n.feature_info_list,i=e.target.value;this.setState({selected_type:i}),ae.paymentCalcPrice(r,a,o,i).then((function(e){var n=e.success,r=e.total_price;n&&t.setState({total_price:r})}))}},{key:"closeModal",value:function(){this.setState({total_price:0,selected_type:""}),this.props.handleClose()}},{key:"handlePayment",value:function(){var e=this;this.setState({handlePaymentIsLoad:!0});var t=this.state,n=t.description,r=t.selected_type,a=t.total_price,o=this.props,i=o.coodrinatLeftTop,c=o.coodrinatRightBottom,l=o.layer_info.bundle,s=o.area,u=o.feature_info_list,f=o.layer_list,p={price:a,description:n,coodrinatLeftTop:i,coodrinatRightBottom:c,bundle_id:l.id,area:s.output,area_type:s.type,feature_info_list:u,layer_list:f,selected_type:r};ae.paymentDraw(p).then((function(e){var t=e.success,n=e.payment_id;t&&(window.location.href="/payment/purchase/polygon/".concat(n,"/"))})).catch((function(t){alert("Алдаа гарсан байна"),e.setState({handlePaymentIsLoad:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.types,r=t.total_price,o=this.props,i=o.layer_info,c=o.is_loading,l=o.area,s=o.feature_info_list;return a.a.createElement("div",null,a.a.createElement("div",{className:"show d-block modal bd-example-modal-lg",tabIndex:"-1",role:"dialog","aria-hidden":"true"},a.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg",role:"document"},a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"modal-header",onClick:function(){return e.closeModal()}},a.a.createElement("h5",{className:"modal-title"},"Худалдан авалтын мэдээлэл"),a.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},a.a.createElement("span",{"aria-hidden":"true"},"×"))),c?a.a.createElement("div",{className:"modal-body height-30"},a.a.createElement("div",{className:"d-flex justify-content-center"},a.a.createElement("div",{className:"spinner-border gp-text-primary",role:"status"}))):a.a.createElement("div",{className:"modal-body"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"recipient-name",className:"col-form-label"},"Татаж авах төрөл:"),a.a.createElement("select",{className:"form-control",onChange:function(t){return e.onChangeType(t)}},a.a.createElement("option",{value:""},"--- Ямар төрлөөр авахаа сонгоно уу ---"),n.map((function(e,t){return a.a.createElement("option",{key:t,value:e},".",e)})))),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"recipient-name",className:"col-form-label"},"Худалдан авах талбайн хэмжээ:"),a.a.createElement("span",{className:"form-control",id:"size"},l.output,l.type,a.a.createElement("sup",null,"2"))),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"recipient-name",className:"col-form-label"},"Худалдан авах мөнгөн дүн:"),a.a.createElement("span",{className:"form-control",id:"price"},r,"₮"))),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("ul",null,i.wms_list.map((function(e,t){var n=e.name,r=e.layers,o=[],i=n;return r.map((function(e,t){var n=e.name,r=e.code;return s.map((function(e,t){e.layer_code==r&&o.push(n)}))})),o.length>0&&a.a.createElement("li",{key:t},i,a.a.createElement("ul",null,o.map((function(e,t){return a.a.createElement("li",{key:t},e)}))))}))))))),a.a.createElement("div",{className:"modal-footer"},a.a.createElement("button",{type:"button",onClick:function(){return e.closeModal()},className:"btn btn-secondary"},"Буцах"),a.a.createElement("div",{className:"form-group"},this.state.handlePaymentIsLoad?a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"btn gp-btn-primary"},a.a.createElement("a",{className:"spinner-border text-light",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")),a.a.createElement("span",null," Уншиж байна. "))):a.a.createElement("button",{disabled:this.state.selected_type.length<1,type:"button",className:"btn gp-btn-primary",onClick:this.handlePayment},"Худалдаж авах")))))),a.a.createElement("div",{className:"modal-backdrop fade show"}))}}]),n}(r.Component),ot=function(e){Ze(n,e);var t=et(n);function n(e){var r;He(this,n);var a=e||{};return(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!1,r.element.className="modal fade show",r.renderComponent=r.renderComponent.bind(nt(r)),r.toggleControl=r.toggleControl.bind(nt(r)),r}return $e(n,[{key:"toggleControl",value:function(e){this.element.classList.toggle("d-block",e)}},{key:"renderComponent",value:function(e){var t=this;e.handleClose=function(){return t.toggleControl(!1)},this.is_component_initialized||(W.a.render(a.a.createElement(at,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(at,e),this.element)}},{key:"showModal",value:function(e,t,n,r,a,o,i){this.toggleControl(!0),this.renderComponent({is_loading:e,coodrinatLeftTop:t,coodrinatRightBottom:n,layer_info:r,area:a,feature_info_list:o,layer_list:i})}}]),n}(R.a);n(289);function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return st(this,n)}}function st(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(n,e);var t=lt(n);function n(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var a=e||{},o=(r=t.call(this,{element:document.createElement("div"),target:a.target})).element;o.className="⚙-toggle";var i=document.createElement("a");i.setAttribute("href","#");var c=document.createElement("i");return c.setAttribute("aria-hidden","true"),c.className="fa fa-bars fa-lg",i.appendChild(c),o.addEventListener("click",(function(e){e.preventDefault(),a.toggleSidebar()})),o.appendChild(i),r}return n}(R.a);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vt(e);if(t){var a=vt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(i,e);var t,n,r,o=ht(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={name:e.layer.name,code:e.layer.code,tile:e.layer.tile,wms_tile:e.layer.wms_tile,wms_or_cache_ur:e.layer.wms_or_cache_ur,is_visible:e.layer.defaultCheck,legend:e.layer.legend,is_change_color:e.layer.is_change_color,color:e.layer.color},t.toggle=t.toggle.bind(bt(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.state.wms_or_cache_ur?this.state.tile.setVisible(this.props.layer.defaultCheck):this.state.wms_tile.setVisible(this.props.layer.defaultCheck)}},{key:"toggle",value:function(e){this.props.addLayer([this.props.layer],this.props.name,e),this.setState({is_visible:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,r=t.code,o=t.is_visible,i=t.legend,c=t.is_change_color,l=t.color;return a.a.createElement("li",null,a.a.createElement("label",null,a.a.createElement("div",{className:"custom-control custom-switch"},a.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:r,onChange:function(t){return e.toggle(t.target.checked)},checked:o}),a.a.createElement("label",{className:"custom-control-label",htmlFor:r},n))),a.a.createElement("ul",null,a.a.createElement("li",null,i?a.a.createElement("img",{className:"img",src:i}):c&&a.a.createElement("input",{type:"color",value:l,disabled:!0}))))}}])&&mt(t.prototype,n),r&&mt(t,r),i}(r.Component);function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xt(e);if(t){var a=xt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return St(this,n)}}function St(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(i,e);var t,n,r,o=kt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={layers:e.layers},t}return t=i,(n=[{key:"render",value:function(){var e=this;return a.a.createElement("ul",{style:{listStyle:"none"}},this.state.layers.map((function(t,n){return a.a.createElement(gt,{layer:t,addLayer:e.props.addLayer,key:n,name:e.props.name})})))}}])&&wt(t.prototype,n),r&&wt(t,r),i}(r.Component);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ft(e);if(t){var a=Ft(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Rt(this,n)}}function Rt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?Lt(e):t}function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(c,e);var t,n,o,i=Pt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).state={name:e.wms.name,tiles:e.wms.tiles,layers:e.wms.layers,is_visible:!0},t.toggle=t.toggle.bind(Lt(t)),t}return t=c,(n=[{key:"toggle",value:function(e){var t=e.target.checked;this.setState({is_visible:t}),this.props.addLayer(this.state.layers,null,t)}},{key:"render",value:function(){var e=this.state,t=e.tiles,n=e.name,o=e.layers,i=e.is_visible;return a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"my-1"},a.a.createElement("div",{className:"custom-control custom-switch font-weight-bold"},a.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:n,onChange:this.toggle,checked:i}),a.a.createElement("label",{className:"custom-control-label",htmlFor:n},n))),a.a.createElement(Ot,{name:n,layers:o,addLayer:this.props.addLayer,tileWMS:t}))}}])&&jt(t.prototype,n),o&&jt(t,o),c}(r.Component);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t,n){return t&&At(e.prototype,t),n&&At(e,n),e}function zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jt(e);if(t){var a=Jt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Wt(this,n)}}function Wt(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?Ut(e):t}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qt=function(e){zt(n,e);var t=Bt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,e)).state={},r}return It(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("span",null,"Давхаргууд"),a.a.createElement("hr",null),this.props.map_wms_list.map((function(t,n){return a.a.createElement(Tt,{wms:t,key:n,addLayer:e.props.addLayer})})))}}]),n}(r.Component),Gt=function(e){zt(n,e);var t=Bt(n);function n(e){var r;Mt(this,n);var a=e||{};(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!1;var o="col-md-2 ⚙ rounded bg-light ".concat(L.c);return r.element.className=o,r.renderComponent=r.renderComponent.bind(Ut(r)),r.toggleControl=r.toggleControl.bind(Ut(r)),r}return It(n,[{key:"toggleControl",value:function(e){this.element.classList.toggle(L.c,e)}},{key:"renderComponent",value:function(e){this.is_component_initialized||(W.a.render(a.a.createElement(qt,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(qt,e),this.element)}},{key:"showSideBar",value:function(e,t,n){this.toggleControl(t),this.renderComponent({map_wms_list:e,addLayer:n})}}]),n}(R.a),Xt=n(59);function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t,n){return t&&Kt(e.prototype,t),n&&Kt(e,n),e}function Zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rn(e);if(t){var a=rn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tn(this,n)}}function tn(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?nn(e):t}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an=function(e){Zt(n,e);var t=en(n);function n(e){var r;return Ht(this,n),(r=t.call(this,e)).click_count=0,r.is_from_inspire=!0,r.properties=[],r.state={startNumber:null,totalNumner:null,is_prev:!1,is_plus:!0,data:[],datas:"",mode:"",name:"",id:"",code:"",geom_name:"",pdf_id:"",is_purchase:!1,is_enable:!1,is_authenticated:!1},r.plusTab=r.plusTab.bind(nn(r)),r.prevTab=r.prevTab.bind(nn(r)),r.checkModeAndCode=r.checkModeAndCode.bind(nn(r)),r.openCartSide=r.openCartSide.bind(nn(r)),r.checkDataForPurchase=r.checkDataForPurchase.bind(nn(r)),r.checkButtonEnableWithPdf=r.checkButtonEnableWithPdf.bind(nn(r)),r.checkButtonEnableWithId=r.checkButtonEnableWithId.bind(nn(r)),r}return $t(n,[{key:"componentDidMount",value:function(){var e=this;this.element=document.getElementById("popup"),this.props.sendElem&&this.props.sendElem(this.element),ae.getUser().then((function(t){var n=t.is_authenticated;e.setState({is_authenticated:n})}))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.datas;if(e.datas!==n&&!this.props.is_loading){this.properties=[];this.setState({startNumber:1,is_plus:!0,is_prev:!1}),this.checkModeAndCode(1,n)}}},{key:"plusTab",value:function(){this.properties=[];var e=this.state,t=e.startNumber,n=e.datas,r=t+1;(r=Math.min(n.length,r))==n.length?this.setState({is_plus:!1,is_prev:!0}):this.setState({is_plus:!0,is_prev:!0}),this.checkModeAndCode(r,n),this.setState({startNumber:r})}},{key:"prevTab",value:function(){this.properties=[];var e=this.state,t=e.startNumber,n=e.datas,r=t-1;1==(r=Math.max(r,1))?this.setState({is_prev:!1,is_plus:!0}):this.setState({is_plus:!0,is_prev:!0}),this.checkModeAndCode(r,n),this.setState({startNumber:r})}},{key:"checkModeAndCode",value:function(e,t){var n,r,a,o,i=this;this.click_count=0,t.length>0&&(this.props.is_from_inspire?(r=t[e-1][0],a=t[e-1][1]):(n=t[e-1][1],r=t[e-1][2],a=t[e-1][0][1],o=t[e-1][0][0]),a.map((function(e,t){"point_id"==e[0]&&i.setState({id:e[1]}),("point_name"==e[0]||e[2]&&"name"==e[2].toLowerCase())&&i.setState({name:e[1]}),"pid"==e[0]&&"mpoint_view"==n&&i.checkButtonEnableWithPdf(e[1]),e[2]&&"pointnumber"==e[2].toLowerCase()&&(i.checkButtonEnableWithId(e[1]),i.setState({id:e[1]}),o=e[1])})),this.setNowData(e,t,n,r,o))}},{key:"setNowData",value:function(e,t,n,r,a){var o;this.is_from_inspire=!0,o=this.props.is_from_inspire?[t[e-1]]:t[e-1],r.startsWith("gp_layer_")||(this.is_from_inspire=!1),this.setState({data:o,mode:n,datas:t,code:r,geom_name:a})}},{key:"checkButtonEnableWithPdf",value:function(e){var t=this;ae.checkButtonEnableWithPdf(e).then((function(n){var r=n.is_enable;n.success&&t.setState({is_enable:r,pdf_id:e})}))}},{key:"checkButtonEnableWithId",value:function(e){var t=this;ae.checkButtonEnableWithId(e).then((function(e){var n=e.is_enable,r=e.success,a=e.pdf_id;r&&t.setState({is_enable:n,pdf_id:a})}))}},{key:"openCartSide",value:function(){this.click_count++;var e=!1;this.click_count>1&&(e=!0),this.props.cartButton(!0,this.state.name,this.state.code,this.state.id,e,this.state.geom_name,this.state.pdf_id)}},{key:"checkDataForPurchase",value:function(){var e=this;this.setState({is_purchase:!0});var t=[{name:this.state.name,id:this.state.id,code:this.state.code,geom_name:this.state.geom_name,pdf_id:this.state.pdf_id}];this.state.data.length>0&&ae.purchaseFromCart(t).then((function(t){var n=t.success,r=(t.msg,t.payment_id);n&&setTimeout((function(){e.setState({data:[],is_purchase:!1}),window.location.href="/payment/purchase/".concat(r,"/")}),1e3)})).catch((function(e){return alert("Алдаа гарсан тул хуудсыг дахин ачааллуулна уу")}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.datas,r=t.data,o=t.startNumber,i=t.is_prev,c=t.is_plus,l=t.is_enable,s=t.is_authenticated,u=this.props,f=u.is_empty,p=u.is_from_inspire,m=u.is_loading;return a.a.createElement("div",null,a.a.createElement("div",{className:"ol-popup-header"},a.a.createElement("div",{className:"ol-popup-header-content"},!f&&n&&n.length>0?a.a.createElement("div",{className:"ol-header-cont",role:"group"},o,"  -  ",n.length," ",i?a.a.createElement("span",{onClick:this.prevTab,className:"span-left",role:"button"},a.a.createElement("i",{className:"fa fa-caret-left gp-text-primary fa-1x","aria-hidden":"true"})):null,"   ",n.length!=o&&c?a.a.createElement("span",{className:"span-right",onClick:this.plusTab,role:"button"},a.a.createElement("i",{className:"fa fa-caret-right gp-text-primary fa-1x","aria-hidden":"true"})):null,a.a.createElement("div",{className:"ol-popup-closer",id:"popup-closer",role:"button",onClick:function(){return e.props.close()}},a.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):"Сонгоогүй байна",!n&&a.a.createElement("div",{className:"ol-popup-closer",id:"popup-closer",role:"button",onClick:function(){return e.props.close()}},a.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))),a.a.createElement(Xt.a,{is_loading:m}),f?a.a.createElement("div",{className:"ol-popup-contet text-center"},a.a.createElement("b",null,"Хоосон газар сонгосон байна.")):a.a.createElement("div",{className:"ol-popup-contet"},r.length>=1&&r[0].map((function(e,t){return 1==t&&e.map((function(e,t){return e[0].toLowerCase().startsWith("name")&&a.a.createElement("b",{key:t},e[1])}))})),a.a.createElement("hr",{className:"m-1 border border-secondary rounded"}),a.a.createElement("table",{className:"table borderless no-padding"},a.a.createElement("tbody",null,r.length>=1?r[0].map((function(e,t){return 1==t&&e.map((function(e,t){return!e[0].toLowerCase().startsWith("name")&&a.a.createElement("tr",{className:"p-0",style:{fontSize:"12px"},key:t},a.a.createElement("th",{className:"font-weight-normal"},a.a.createElement("b",null,e[0].charAt(0).toUpperCase()+e[0].substring(1),":"),a.a.createElement("p",{className:"m-0"},"   ",e[1].charAt(0).toUpperCase()+e[1].substring(1))))}))})):a.a.createElement("tr",null,a.a.createElement("th",null,"Хоосон байна"))))),s||f||!p?f?null:this.state.is_purchase?a.a.createElement("div",{className:"btn-group flex-wrap d-flex justify-content-center"},a.a.createElement("button",{className:"btn btn-xs btn-primary my-2 mx-3",disabled:!0},a.a.createElement("div",{className:"spinner-border",role:"status"},a.a.createElement("span",{className:"sr-only"}))," Хүлээнэ үү..")):p&&this.is_from_inspire?a.a.createElement("div",{className:"btn-group flex-wrap d-flex justify-content-center"},a.a.createElement("button",{className:"btn btn-xs btn-primary mx-3",onClick:function(){return e.checkDataForPurchase()},disabled:l?"":"disabled"},"Худалдаж авах"),a.a.createElement("button",{className:"btn btn-xs btn-primary my-2 mx-3",onClick:function(){return e.openCartSide()},disabled:l?"":"disabled"},"Сагсанд нэмэх")):null:a.a.createElement("div",{className:"btn-group flex-wrap d-flex justify-content-center"},a.a.createElement("button",{className:"btn btn-xs btn-primary mb-2 mx-3"},a.a.createElement("a",{className:"text-decoration-none text-white",href:"/login/"},"Нэвтрэх"))),a.a.createElement("div",{className:"ol-popup-arrow"}))}}]),n}(r.Component),on=function(e){Zt(n,e);var t=en(n);function n(e){var r;Ht(this,n);var a=e||{};return(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!1,r.element.className="ol-popup",r.element.setAttribute("id","popup"),r.renderComponent=r.renderComponent.bind(nn(r)),r.toggleControl=r.toggleControl.bind(nn(r)),r.getData=r.getData.bind(nn(r)),r}return $t(n,[{key:"toggleControl",value:function(e){e?(this.element.style.display="block",this.element.style.zIndex="1050"):this.element.style.display="none"}},{key:"renderComponent",value:function(e){this.is_component_initialized||(W.a.render(a.a.createElement(an,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(an,e),this.element)}},{key:"blockPopUp",value:function(e,t,n){this.toggleControl(e),this.renderComponent({sendElem:t,close:n})}},{key:"getData",value:function(e,t,n,r,a,o,i){var c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];this.toggleControl(e),this.renderComponent({datas:t,close:n,setSource:r,cartButton:a,is_empty:o,is_from_inspire:i,is_loading:c})}}]),n}(R.a);n(33),n(288);function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t,n){return t&&sn(e.prototype,t),n&&sn(e,n),e}function fn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yn(e);if(t){var a=yn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return dn(this,n)}}function dn(e,t){return!t||"object"!==cn(t)&&"function"!=typeof t?hn(e):t}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bn=function(e){fn(n,e);var t=mn(n);function n(e){var r;return ln(this,n),(r=t.call(this,e)).state={torf:r.props.TorF},r}return un(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.TorF;t&&setTimeout((function(){e.setState({torf:!t})}),2e3)}},{key:"componentWillReceiveProps",value:function(){var e=this,t=this.props.TorF;t&&(this.setState({torf:t}),setTimeout((function(){e.setState({torf:!t})}),2e3))}},{key:"render",value:function(){var e=this.props,t=(e.TorF,e.msg),n=this.state.torf;return a.a.createElement("div",null,n?a.a.createElement("div",{className:"alert alert-danger alert-custom-css",role:"alert"},t):null)}}]),n}(r.Component),vn=function(e){fn(n,e);var t=mn(n);function n(e){var r;ln(this,n);var a=e||{};return(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!0,r.is_cart=!1,r.element.className="d-block",r.renderComponent=r.renderComponent.bind(hn(r)),r.showAlert=r.showAlert.bind(hn(r)),r}return un(n,[{key:"renderComponent",value:function(e){this.is_component_initialized||(W.a.render(a.a.createElement(bn,e),this.element),this.is_component_initialized=!0),W.a.hydrate(a.a.createElement(bn,e),this.element)}},{key:"showAlert",value:function(e,t){this.renderComponent({TorF:e,msg:t})}}]),n}(R.a);function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){En(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e){return function(e){if(Array.isArray(e))return On(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||xn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||xn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){if(e){if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ln(e);if(t){var a=Ln(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pn(this,n)}}function Pn(e,t){return!t||"object"!==gn(t)&&"function"!=typeof t?Rn(e):t}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(L,e);var t,n,r,R=Nn(L);function L(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,L),(t=R.call(this,e)).sendFeatureInfo=[],t.is_not_visible_layers=[],t.saved_aimag_name="",t.state={projection:"EPSG:3857",is_authenticated:!1,projection_display:"EPSG:4326",bundle:e.bundle,map_wms_list:[],is_sidebar_open:!0,is_search_sidebar_open:!0,is_modal_info_open:!1,coordinate_clicked:null,vector_layer:null,is_draw_open:!1,draw_layer:null,draw:null,source_draw:null,is_cart:!1,y:null,x:null,is_loading:!1,format:new u.a,layer_one_tile:null},t.controls={coordinateCopy:new ee,modal:new we,shopmodal:new Xe,cart:new Fe,drawModal:new ot,sidebar:new Gt,alertBox:new vn,popup:new on},t.marker=t.initMarker(),t.handleToggle=t.handleToggle.bind(Rn(t)),t.handleMapDataLoaded=t.handleMapDataLoaded.bind(Rn(t)),t.handleMapClick=t.handleMapClick.bind(Rn(t)),t.handleSetCenter=t.handleSetCenter.bind(Rn(t)),t.toggleSidebar=t.toggleSidebar.bind(Rn(t)),t.loadMapData=t.loadMapData.bind(Rn(t)),t.loadWmsLayers=t.loadWmsLayers.bind(Rn(t)),t.addWmsLayers=t.addWmsLayers.bind(Rn(t)),t.showFeaturesAt=t.showFeaturesAt.bind(Rn(t)),t.cartButton=t.cartButton.bind(Rn(t)),t.onClickCloser=t.onClickCloser.bind(Rn(t)),t.getElement=t.getElement.bind(Rn(t)),t.setSourceInPopUp=t.setSourceInPopUp.bind(Rn(t)),t.formatArea=t.formatArea.bind(Rn(t)),t.handleModalApproveClose=t.handleModalApproveClose.bind(Rn(t)),t.getOnlyFeature=t.getOnlyFeature.bind(Rn(t)),t.resetFilteredOnlyFeature=t.resetFilteredOnlyFeature.bind(Rn(t)),t.allLayerVisible=t.allLayerVisible.bind(Rn(t)),t.addLayerToSearch=t.addLayerToSearch.bind(Rn(t)),t.drawBorderCircle=t.drawBorderCircle.bind(Rn(t)),t.fromLonLatToMapCoord=t.fromLonLatToMapCoord.bind(Rn(t)),t.check_inspire_layer=t.check_inspire_layer.bind(Rn(t)),t.transformToLatLong=t.transformToLatLong.bind(Rn(t)),t.setFeatureOnMap=t.setFeatureOnMap.bind(Rn(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(Rn(t)),t.getFeatureInfoFromInspire=t.getFeatureInfoFromInspire.bind(Rn(t)),t.writeFeat=t.writeFeat.bind(Rn(t)),t.getPopUpInfo=t.getPopUpInfo.bind(Rn(t)),t.setVisibleMarket=t.setVisibleMarket.bind(Rn(t)),t.readFeatures=t.readFeatures.bind(Rn(t)),t.readFeature=t.readFeature.bind(Rn(t)),t.getErguulLayer=t.getErguulLayer.bind(Rn(t)),t}return t=L,(n=[{key:"initMarker",value:function(){var e=new y.c({image:new b.a({anchor:[.5,86],anchorXUnits:"fraction",anchorYUnits:"pixels",scale:.4,src:"/static/assets/image/marker.png"})}),t=new E.a([0,0]),n=new o.a({geometry:t});return n.setStyle(e),{feature:n,point:t}}},{key:"handleModalApproveClose",value:function(){this.setState({is_modal_info_open:!1})}},{key:"cartButton",value:function(e,t,n,r,a,o,i){1==e&&this.controls.cart.showModal(this.state.coordinate_clicked,e,this.state.x,this.state.y,t,n,r,a,o,i)}},{key:"componentDidMount",value:function(){var e=this;ae.getUser().then((function(t){var n=t.is_authenticated;e.setState({is_authenticated:n})})),this.loadMapData()}},{key:"getFullName",value:function(e){var t=e.getProperties().first_name;return e.getProperties().last_name.charAt(0).toUpperCase()+". "+(t.charAt(0).toUpperCase()+t.slice(1))}},{key:"getErguulLayer",value:function(){var e=this,t=new p.a({source:new h.a({}),style:function(t,n){var r=n<100?t.get("name"):"";return new y.c({image:new v.a({radius:5,fill:new g.a({color:e.props.point_color})}),text:new _.a({text:r,font:"20px Calibri,sans-serif",stroke:new w.a({color:"white",width:1}),offsetY:-18})})},name:"erguul"});this.map.addLayer(t),this.erguul_layer=t}},{key:"readFeature",value:function(e){var t="aimag_sum",n=this.state.vector_layer;this.removeFeatureFromSource(t);var r=(new u.a).readFeatures(e,{dataProjection:this.state.projection_display,featureProjection:this.state.projection})[0];n.getSource().addFeature(r),r.setProperties({id:t}),this.map.getView().fit(r.getGeometry(),{padding:[50,50,50,50],duration:2e3})}},{key:"readFeatures",value:function(e){var t=this,n=this.erguul_layer,r=n.getSource();e.features.map((function(e,n){var a=(new u.a).readFeatures(e,{dataProjection:t.state.projection_display,featureProjection:t.state.projection})[0],o=t.getFullName(a);a.setProperties({name:o}),r.addFeature(a)}));var a=n.getStyle(),o={name:"Эргүүл",layers:[{name:"Эргүүлд гарсан хүмүүс",wms_tile:n,defaultCheck:1,is_change_color:!0,color:a().getImage().getFill().getColor()}]};this.state.map_wms_list.unshift(o)}},{key:"componentDidUpdate",value:function(e,t){if(t.coordinate_clicked!==this.state.coordinate_clicked&&this.controls.coordinateCopy.setCoordinate(this.state.coordinate_clicked),e.features!==this.props.features&&this.readFeatures(this.props.features),e.feature!==this.props.feature&&this.props.feature!=={}&&this.readFeature(this.props.feature),this.props.bundle.id!==e.bundle.id){var n=this.props.bundle;this.setState({bundle:n}),n.id&&(this.setState({is_sidebar_open:!1}),this.controls.sidebar.showSideBar([],!0,this.addLayerToSearch),this.loadWmsLayers(n.id))}if(this.props.code!==e.code){var r=this.props,a=r.code,o=r.url;this.oneLayerAdd(o,a),this.setState({is_loading:!0})}}},{key:"loadMapData",value:function(){var e=this;Promise.all([ae.loadBaseLayers()]).then((function(t){var n=Sn(t,1)[0].base_layer_list;e.handleMapDataLoaded(n)}))}},{key:"loadWmsLayers",value:function(e){var t=this;this.setState({is_loading:!0}),Promise.all([ae.loadWMSLayers(e)]).then((function(e){var n=Sn(e,1)[0].wms_list;t.addWmsLayers(n),t.props.loadErguul&&t.props.loadErguul((function(e){return t.readFeatures(e)})),t.props.loadNema&&t.props.loadNema((function(e){return t.addWmsLayers(e,!0)}))}))}},{key:"oneLayerAdd",value:function(e,t){var n=this,r=this.state.layer_one_tile;if(this.map.removeLayer(r),t){var a=new m.a({source:new P.a({projection:this.state.projection,ratio:1,url:e,params:{LAYERS:t,FORMAT:"image/png",VERSION:"1.1.1",STYLES:"",exceptions:"application/vnd.ogc.se_inimage"}})});this.setState({layer_one_tile:a}),this.map.addLayer(a),setTimeout((function(){n.setState({is_loading:!1})}),500)}else setTimeout((function(){n.setState({is_loading:!1})}),500)}},{key:"addWmsLayers",value:function(e){var t,n=this,r=this.state.map_wms_list;if((t=this.map).removeLayer.apply(t,kn(r.reduce((function(e,t){var n=t.layers.map((function(e){return e.wms_or_cache_ur?e.tile:e.wms_tile}));return[].concat(kn(e),kn(n))}),[]))),e.length>0){var a;console.log(e);var o=e.map((function(e){var t=e.name,r=e.url;return e.chache_url,e.wms_or_cache_ur,{name:t,layers:e.layers.map((function(e){return console.log(e),wn(wn({},e),{},{wms_tile:new m.a({source:new P.a({projection:n.state.projection,ratio:1,url:r,params:{LAYERS:e.code,FORMAT:"image/png",VERSION:"1.1.1",STYLES:"",exceptions:"application/vnd.ogc.se_inimage"}})})})}))}}));r.length>0?o.map((function(e,t){r.push(e)})):this.setState({map_wms_list:o}),o.map((function(e,t){return e.layers.map((function(e,t){0==e.defaultCheck&&e.tile.setVisible(!1),0==e.defaultCheck&&e.wms_tile.setVisible(!1),e.legend=e.wms_tile.getSource().getLegendUrl()}))})),(a=this.map).addLayer.apply(a,kn(o.reduce((function(e,t){var n=t.layers.map((function(e){return e.wms_or_cache_ur?e.tile:e.wms_tile}));return[].concat(kn(e),kn(n))}),[]))),this.setState({is_loading:!1})}else this.setState({map_wms_list:[]}),setTimeout((function(){n.setState({is_loading:!1})}),500)}},{key:"handleMapDataLoaded",value:function(e){this.setState({is_loading:!0});var t=e.reduce((function(e,t,n){var r;return"xyz"==t.tilename&&(r=new d.a({preload:6,source:new k.a({crossOrigin:"Anonymous",url:t.url}),name:"base_layer"})),"wms"==t.tilename&&(r=new m.a({source:new P.a({ratio:1,url:t.url,params:{LAYERS:t.layers,FORMAT:"image/png",VERSION:"1.1.1",STYLES:"",exceptions:"application/vnd.ogc.se_inimage"}}),name:"base_layer"})),e.base_layers.push(r),e.base_layer_controls.push({is_active:0==n,thumbnail_1x:t.thumbnail_1x,thumbnail_2x:t.thumbnail_2x,layer:r}),e}),{base_layers:[],base_layer_controls:[]}),n=t.base_layers,r=t.base_layer_controls,a=new p.a({source:new h.a({}),style:new y.c({stroke:new w.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new g.a({color:"rgba(100, 255, 0, 0.3)"})}),name:"vector_layer"});this.setState({vector_layer:a});var o=new p.a({source:new h.a({features:[this.marker.feature]}),name:"marker_layer"});this.marker_layer=o;var l=new i.a({maxTilesLoading:16,target:"map",controls:Object(O.a)().extend([new C.a,new j.a({projection:this.state.projection_display,coordinateFormat:function(e){return Object(x.f)(e,"{y},{x}",6)},undefinedHTML:""}),new V({layers:r}),new ft({toggleSidebar:this.toggleSidebar}),new N.a,this.controls.modal,this.controls.shopmodal,this.controls.drawModal,this.controls.coordinateCopy,this.controls.sidebar,this.controls.cart,this.controls.alertBox]),layers:[].concat(kn(n),[a,o]),view:new c.a({projection:this.state.projection,center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971,minZoom:1})});l.on("click",this.handleMapClick),this.map=l,this.getErguulLayer(),this.setState({is_loading:!1})}},{key:"onClickCloser",value:function(){var e=this.overlay,t=this.element_closer;e.setPosition(void 0),t.blur(),this.setVisibleMarket(!1)}},{key:"getElement",value:function(e){var t=this.map,n=new l.a({element:e,autoPan:!0,autoPanAnimation:{duration:250},autoPanMargin:65,offset:[15,-150]});t.addOverlay(n),this.element=e,this.overlay=n;var r=e.children[0];this.element_content=r.children[1],this.element_closer=r.children[0]}},{key:"handleMapClick",value:function(e){if(!this.state.is_draw_open){var t=e.coordinate;this.marker.point.setCoordinates(t);var n=e.map.getView().getProjection(),r=Object(s.p)(e.coordinate,n,this.state.projection_display),a=Object(x.f)(r,"{y},{x}",6);this.setState({coordinate_clicked:a}),this.showFeaturesAt(t)}}},{key:"allLayerVisible",value:function(e){var t=this;this.removeFeatureFromSource("buffer"),this.map.getLayers().getArray().forEach((function(n){n.get("filter")&&n.get("filter")==t.state.filtered_layer_name&&(n.setVisible(!1),t.map.removeLayer(n)),e?(n.get("code")&&n.getVisible()&&n.setVisible(!1),"inside"==n.get("name")&&n.getVisible()&&(n.setVisible(!1),t.map.removeLayer(n))):n.get("code")&&n.get("name")&&"inside"!=n.get("name")&&n.getVisible()&&(t.is_not_visible_layers.push(n.get("code")),n.setVisible(!1))}))}},{key:"addLayerToSearch",value:function(e,t,n){var r=this;if(this.state.filtered_wms){n?e.map((function(e){r.is_not_visible_layers.push(e.code),e.wms_or_cache_ur?e.tile.setVisible(!1):e.wms_tile.setVisible(!1)})):e.map((function(e){var t=r.is_not_visible_layers.filter((function(t){return t!==e.code}));r.is_not_visible_layers=t,e.wms_or_cache_ur?e.tile.setVisible(!1):e.wms_tile.setVisible(!1)}));var a=this.state,o=a.aimag_name,i=a.search_coordinate,c=a.sum_name,l=a.search_scale;this.getOnlyFeature(o,i,c,l,this.is_not_visible_layers)}else e.map((function(e){e.wms_or_cache_ur?e.tile.setVisible(n):e.wms_tile.setVisible(n)}))}},{key:"resetFilteredOnlyFeature",value:function(){var e=this;this.removeFeatureFromSource("aimag_sum"),this.removeFeatureFromSource("buffer"),this.map.getLayers().forEach((function(t){t&&(e.is_not_visible_layers.map((function(n){t.get("code")==n&&t.setVisible(!0),e.state.filtered_layer_name&&t.get("filter")==e.state.filtered_layer_name&&e.map.removeLayer(t)})),"inside"==t.get("name")&&e.map.removeLayer(t))})),this.setState({filtered_wms:void 0,filtered_layer:void 0}),this.is_not_visible_layers=[],this.onClickCloser()}},{key:"getKiloFromScale",value:function(e){return e/1e3}},{key:"fromLonLatToMapCoord",value:function(e){return Object(s.d)([e[0],e[1]])}},{key:"drawBorderCircle",value:function(e){this.removeFeatureFromSource("aimag_sum");var t=this.state.vector_layer,n=this.state.format.readFeatures(e,{dataProjection:this.state.projection_display,featureProjection:this.state.projection});n[0].setProperties({id:"buffer"}),t.getSource().addFeature(n[0])}},{key:"getOnlyFeature",value:function(e,t,n,r,a){var o,i=this;this.onClickCloser(),this.allLayerVisible(a),a&&(this.is_not_visible_layers=a);var c=this.state.map_wms_list.map((function(a){var c=a.name,l=a.layers,s="";return{name:c,layers:i.is_not_visible_layers.map((function(a){var c,u;return l.map((function(l){if(a==l.code){c=l;var f=l.tile.getSource().urls[0];if(!e&&t){var p=i.getKiloFromScale(r);s="DWITHIN(geom,Point("+t[0]+" "+t[1]+"),"+p+",kilometers)",o=t[0]+","+t[1]}else e&&n?(s="aimag='"+e+"' AND sum='"+n+"'",o=e+"_"+n):e&&!n&&(s="aimag='"+e+"'",o=e);var m=new d.a({source:new S.a({projection:i.state.projection,url:f,params:{LAYERS:l.code,FORMAT:"image/png",cql_filter:s}}),filter:o});!e&&t&&i.drawBorderCircle(t,i.getKiloFromScale(r)),m&&(i.map.addLayer(m),u=m)}})),wn(wn({},c),{},{tile:u})}))}}));this.setState({filtered_wms:c,filtered_layer_name:o,aimag_name:e,search_coordinate:t,sum_name:n,search_scale:r}),n||this.showFeaturesAt(this.fromLonLatToMapCoord(t))}},{key:"getWMSArray",value:function(){return this.array=[],this.state.map_wms_list?this.array=this.state.map_wms_list:this.state.filtered_wms&&(this.array=this.state.filtered_wms),this.array}},{key:"check_inspire_layer",value:function(e){var t=!1,n="",r=e.split("_");return r.map((function(e,a){if(0==a&&"gp"==e&&"layer"==r[a+1]){var o=r.slice(2);n=o.join("_"),t=!0}})),{layer_code:n,is_feature:t}}},{key:"getPopUpInfo",value:function(e,t){var n=this,r=Object(s.m)(e),a=t.length>0?t:this.is_not_visible_layers.length>0?this.is_not_visible_layers:[];ae.getPopUpInfo(a,r).then((function(e){var t=e.datas;n.sendFeatureInfo.length>0&&n.sendFeatureInfo.map((function(e,n){t.push(e[0])})),t.length}))}},{key:"showFeaturesAt",value:function(e){this.is_empty=!0,this.sendFeatureInfo=[],this.setState({pay_modal_check:!1}),this.sendFeatureInfo=[],this.is_empty=!0}},{key:"setSourceInPopUp",value:function(e){var t=this.selectSource;"private"!=e&&this.state.vector_layer.setSource(null),"private"==e&&this.state.vector_layer.setSource(t)}},{key:"handleToggle",value:function(e){var t=this.state.layers[e];t.setVisible(!t.getVisible())}},{key:"handleSetCenter",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.removeFeatureFromSource("buffer"),this.removeFeatureFromSource("aimag_sum");var r=this.map.getView(),a=r.getProjection(),o=Object(s.p)(e,this.state.projection_display,a);n&&this.marker.point.setCoordinates(o),r.animate({zoom:t},{center:r.setCenter(o)})}},{key:"removeFeatureFromSource",value:function(e){var t=this.state.vector_layer.getSource(),n=t.getFeatures();if(null!=n&&n.length>0)for(var r=0;r<n.length;r++)if(n[r].getProperties().id==e){t.removeFeature(n[r]);break}}},{key:"setVisibleMarket",value:function(e){this.marker_layer.setVisible(e)}},{key:"getFeatureInfoFromInspire",value:function(e,t,n){var r,a=this;this.onClickCloser(),this.setVisibleMarket(!1);var o=null;if(e){var i=this.writeFeat(e[0]);r=JSON.parse(i).geometry}else r=t,o=this.getKiloFromScale(n);this.getWMSArray().map((function(e,t){var n=e.layers;n&&n.map((function(e,t){var n=e.tile,r=e.code;if(n.getVisible()){var o=a.check_inspire_layer(r),i=o.layer_code;o.is_feature&&a.is_not_visible_layers.push(i)}}))})),this.allLayerVisible("inside"),ae.getContainGeoms(this.is_not_visible_layers,r,o).then((function(e){var t=e.features,n=e.layers_code,r=e.buffer;if(e.success){a.is_not_visible_layers=n;var o=a.state.format.readFeatures(t,{dataProjection:a.state.projection_display,featureProjection:a.state.projection}),i=new y.c({image:new v.a({radius:5,fill:new g.a({color:"red"})}),stroke:new w.a({color:"blue",width:2}),fill:new g.a({color:"rgba(0,191,255,0.3)"})}),c=new h.a({features:o}),l=new p.a({source:c,name:"inside",style:i});r&&a.drawBorderCircle(r),a.map.addLayer(l),l.setVisible(!0),a.setState({filtered_layer:l})}}))}},{key:"writeFeat",value:function(e){var t=this.state.format.writeFeatureObject(e,{dataProjection:this.state.projection_display,featureProjection:this.state.projection});return JSON.stringify(t)}},{key:"setFeatureOnMap",value:function(e,t,n){if(e){var r=this.state.vector_layer,a="aimag_sum";this.removeFeatureFromSource(a),(e=(new u.a).readFeatures(e,{dataProjection:this.state.projection_display,featureProjection:this.state.projection}))[0].setProperties({id:a}),r.getSource().addFeature(e[0]),this.map.getView().fit(e[0].getGeometry(),{padding:[100,100,100,100],duration:2e3})}this.getFeatureInfoFromInspire(e,t,n)}},{key:"toggleSidebar",value:function(e){var t,n=!0;e==this.state.is_sidebar_open&&(n=!1),n&&this.setState((function(e){return{is_sidebar_open:!e.is_sidebar_open}})),t=!!this.state.is_sidebar_open,this.controls.sidebar.showSideBar(this.state.map_wms_list,t,this.addLayerToSearch)}},{key:"transformToLatLong",value:function(e){var t=this;return e[0].map((function(e,n){return Object(s.p)(e,t.state.projection,t.state.projection_display)}))}},{key:"formatArea",value:function(e){var t,n,r=Object(f.a)(e);return r>1e4?(t=Math.round(r/1e6*100)/100,n="km"):(t=Math.round(100*r)/100,n="m"),{output:t,type:n}}},{key:"calcPrice",value:function(e,t,n,r,a){var o=this.formatArea(e),i=[];t.wms_list.map((function(e,t){e.layers.map((function(e,t){i.push(e.code)}))})),this.controls.drawModal.showModal(!1,n,r,t,o,a,i)}},{key:"render",value:function(){var e=this.state.is_loading;return a.a.createElement("div",null,a.a.createElement(Xt.a,{is_loading:e}),a.a.createElement("div",{id:"map",style:{height:"calc( 80vh - 85px - 15px)"}}))}}])&&Cn(t.prototype,n),r&&Cn(t,r),L}(r.Component)},236:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,o,s=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).state={status:t.props.status||"initial"},t.handleOpen=t.handleOpen.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t.handleProceed=t.handleProceed.bind(u(t)),t}return t=f,(n=[{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){this.props.status!=e.status&&(["initial","open"].includes(this.props.status)&&this.handleOpen(),["closing","closed"].includes(this.props.status)&&this.handleClose())}},{key:"handleOpen",value:function(){var e=this;this.setState({status:"initial"}),setTimeout((function(){e.setState({status:"open"})}),0)}},{key:"handleClose",value:function(e){var t=this;this.setState({status:"closing"}),setTimeout((function(){t.setState({status:"closed"}),e?e():(t.setState({status:"closed"}),t.props.modalClose&&t.props.modalClose())}),150)}},{key:"handleProceed",value:function(){this.handleClose(this.props.modalAction)}},{key:"render",value:function(){var e=this,t=this.state.status,n="modal fade"+("initial"==t?" d-block":"")+("open"==t?" show d-block":"")+("closing"==t?" d-block":"")+("closed"==t?" d-none":""),o="modal-backdrop fade"+("open"==t?" show":"")+("closed"==t?" d-none":"");return a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:n},a.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},a.a.createElement("div",{className:"modal-content",style:{border:"none",borderRadius:"7px",background:"#ebebeb"}},a.a.createElement("div",{className:"col-md-12 offset-md-12 float-right my-1"},a.a.createElement("button",{type:"button",className:"close mt-2 mr-2","aria-label":"Close"},a.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.handleClose()}},"×"))),a.a.createElement("div",{className:"d-flex justify-content-center"},"success"==this.props.model_type_icon?a.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-danger","aria-hidden":"true"}):"warning"==this.props.model_type_icon?a.a.createElement("i",{className:"fa fa-exclamation-circle fa-3x my-3 animated bounceIn text-warning","aria-hidden":"true"}):a.a.createElement("i",{className:"fa fa-times-circle fa-3x my-3 animated bounceIn text-success","aria-hidden":"true"})),a.a.createElement("div",{className:"d-flex justify-content-center"},a.a.createElement("h5",null,this.props.title)),a.a.createElement("div",{className:"modal-body text-center text-wrap ml-2 mr-2 text-justify"},this.props.text),a.a.createElement("div",{className:"modal-footer",style:{border:"none"}},a.a.createElement("button",{type:"button",onClick:function(){return e.handleClose()},className:"btn btn-primary waves-effect waves-light"},a.a.createElement("i",{className:"fa fa-times"}),this.props.actionNameBack?this.props.actionNameBack:"  БУЦАХ"),a.a.createElement("button",{type:"button",onClick:this.handleProceed,className:"btn btn-outline-primary waves-effect waves-light"},a.a.createElement("i",{className:"fa fa-check-square-o"}),this.props.actionNameDelete?this.props.actionNameDelete:"  УСТГАХ"))))),a.a.createElement("div",{className:o}))}}])&&i(t.prototype,n),o&&i(t,o),f}(r.Component)},289:function(e,t,n){var r=n(67),a=n(290);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};r(a,o);e.exports=a.locals||{}},290:function(e,t,n){(t=n(68)(!1)).push([e.i,'element.style {\n    position: relative;\n}\n\n\n.⚙ {\n    position: absolute;\n    top: 1%;\n    right: 70px;\n    bottom: 150px;\n    padding-top: 1rem;\n    padding-bottom: 1rem;\n    overflow-y: auto;\n    background-color: white;\n    -webkit-box-shadow: 0px 0px 21px 7px rgba(0,0,0,0.65);\n    -moz-box-shadow: 0px 0px 21px 7px rgba(0,0,0,0.65);\n    box-shadow: 0px 0px 21px 7px rgba(0,0,0,0.65);\n    opacity: 1;\n}\n\n.⚙.ol-hidden {\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity .1s linear, visibility 0s linear .1s;\n}\n\n.⚙-search {\n    position: absolute;\n    top: 1%;\n    left: 70px;\n    bottom: 150px;\n    padding-top: 1rem;\n    padding-bottom: 1rem;\n    overflow-y: auto;\n    background-color: white;\n    -webkit-box-shadow: 0px 0px 21px 7px rgba(0,0,0,0.65);\n    -moz-box-shadow: 0px 0px 21px 7px rgba(0,0,0,0.65);\n    box-shadow: 0px 0px 21px 7px rgba(0,0,0,0.65);\n    opacity: 1;\n}\n.⚙-search.ol-hidden {\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity .1s linear, visibility 0s linear .1s;\n}\n\n\n.⚙-toggle-search{\n    position: absolute;\n    top: 7px;\n    left: 12px;\n    width: 50px;\n    height: 50px;\n    background-color: rgba(0,60,136,0.5);\n    border-radius: 4px;\n    padding: 2px;\n}\n.⚙-toggle-search:hover{\n    background-color: rgba(0,60,136,0.7);\n}\n.⚙-toggle-search:focus{\n    background-color: rgba(0,60,136,0.7);\n\n}\n\n.⚙-toggle-search a{\n    position: absolute;\n    top: -6px;\n    left: 7px;\n    width: 50px;\n    height: 50px;\n\n}\n\n.fa-lg{\n    font-size: 40px;\n    color: white;\n    line-height: unset;\n}\n\n.⚙-toggle{\n    position: absolute;\n    top: 7px;\n    right: 12px;\n    width: 50px;\n    height: 50px;\n    background-color: rgba(0,60,136,0.5);\n    border-radius: 4px;\n    padding: 2px;\n}\n.⚙-toggle:hover{\n    background-color: rgba(0,60,136,0.7);\n}\n.⚙-toggle:focus{\n    background-color: rgba(0,60,136,0.7);\n\n}\n\n\n.⚙-toggle a{\n    position: absolute;\n    top: -6px;\n    right: -7px;\n    width: 50px;\n    height: 50px;\n\n}\n.fa-lg{\n    font-size: 40px;\n    color: white;\n    line-height: unset;\n}\n\n.ol-full-screen {\n    right: .5rem;\n    top: 58px;\n    width: 57px;\n    height: 57px;\n\n}\n.ol-full-screen .ol-full-screen-false{\n    width: 50px;\n    height: 50px;\n    font-size: 40px;\n\n}\n.ol-full-screen .ol-full-screen-true{\n    width: 50px;\n    height: 50px;\n    font-size: 40px;\n\n}\n.ol-zoom {\n    width: 57px;\n    height: 107px;\n    left: unset;\n    right: .5rem;\n    top: 110px;\n}\n.ol-zoom  .ol-zoom-out{\n    width: 50px;\n    height: 50px;\n    font-size: 55px;\n\n}\n.ol-zoom .ol-zoom-in{\n    width: 50px;\n    height: 50px;\n    font-size: 55px;\n}\n\n.ol-mouse-position {\n    right: 4rem;\n    background: rgba(0,60,136,0.3);\n    border-radius: 4px;\n    padding: 2px .2rem;\n    font-size: smaller;\n    color: #eee;\n    text-align: center;\n    width: 8.8rem;\n    min-height: 1rem;\n}\n\n.coordinate-copy-control {\n    width: 10rem;\n    left: 2%;\n    top: 0.5rem;\n    opacity: 1;\n}\n.coordinate-copy-control.ol-hidden {\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-scale-line{\n    position: absolute;\n    bottom: 9px;\n}\n\n\n.draw-button {\n    position: absolute;\n    top: 300px;\n    right: 12px;\n    width: 50px;\n    height: 50px;\n    background-color: rgba(0,60,136,0.5);\n    border-radius: 4px;\n    padding: 2px 5px;\n}\n.draw-button:active{\n    background-color: rgba(0,60,136,0.9);\n\n}\n\n.draw-button .fa-object-ungroup{\n    font-size: 30px;\n    color: white;\n    line-height: unset;\n}\n\n\n.root{\n    padding-top: 50px;\n    padding-right: 30px;\n    padding-bottom: 50px;\n    padding-left: 80px;\n}\n\n\n.cart-size{\n    font-size: 40px;\n    margin-left: 5px;\n    color: white;\n    line-height: unset;\n}\n\n.cart-count{\n    color: rgb(255, 255, 255);\n    margin-top: -40px;\n    margin-left: 15px;\n}\n\n.cart-button{\n    position: absolute;\n    top: 70px;\n    left: 12px;\n    width: 50px;\n    height: 50px;\n    background-color: rgba(0,60,136,0.5);\n    border-radius: 4px;\n    padding: 2px;\n}\n.cart-button .card-icon{\n    position: absolute;\n    padding: 9px 3px;\n    font-size: 28px;\n    color: white;\n}\n\n.cart-button .card-count{\n    padding: 0px 27px;\n    font-size: 22px;\n    color: white;\n    position: absolute;\n}\n.cart-list {\n    padding: 2px 3px;\n    position: absolute;\n    left: 10px;\n    top: 130px;\n}\n\n.card-baraa {\n    height: auto;\n    width: auto;\n    background-color: rgba(0,60,136,0.5);\n    margin-top: 7px;\n    padding: 9px 7px;\n}\n.cart{\n    z-index: 1;\n}\n\n.alert-custom-css{\n    width: auto;\n    position: absolute;\n    bottom: 5%;\n}\n\n.ol-popup {\n    position: absolute;\n    background-color: white;\n    box-shadow: 0 1px 4px rgba(0,0,0,0.2);\n    border-radius: 10px;\n    border: 1px solid #cccccc;\n    min-width: 200px;\n    max-width: 600px;\n    z-index: 1030;\n    min-height: 170px;\n}\n\n.ol-popup:after, .ol-popup:before {\n    top: 135px;\n    border: solid transparent;\n    content: " ";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n}\n\n.ol-popup:after {\n    border-top-color: white;\n    border-width: 10px;\n    transform: rotate(90deg);\n    margin-left: -10px;\n    left: -10px;\n}\n\n.ol-popup:before {\n    border-top-color: #cccccc;\n    border-width: 10px;\n    transform: rotate(90deg);\n    margin-left: -11px;\n    left: -10px;\n}\n\n.ol-popup-contet {\n    margin-top: 5px;\n    margin-left: 15px;\n    margin-bottom: 5px;\n    margin-right: 15px;\n}\n\n.ol-popup-header-content {\n    margin-left: 15px;\n    margin-right: 15px;\n}\n\n.ol-popup-header{\n    border-top-left-radius: 9px;\n    border-top-right-radius: 9px;\n    margin: 0;\n    top: 0;\n    padding: 0;\n    background-color:rgba(0,0,0,0.2);\n}\n\n.ol-popup-closer {\n    float: right;\n    text-decoration: none;\n}\n\n.ol-popup-closer:hover {\n    color: red\n}\n\n.ol-popup-table .table td, .ol-popup-table .table td{\n    padding:0px !important;\n}\n\n.borderless td, .borderless th {\n    border: none;\n}\n\n.no-padding td, .no-padding th {\n    padding-left: 10px !important;\n    padding-right: 0px !important;\n    padding-top: 0px !important;\n    padding-bottom: 5px !important;\n}\n\n.no-padding td {\n    padding-left: 20px !important;\n}\n\n.borderless th {\n    text-transform: lowercase;\n}\n\n.суурь-давхаргууд{\n    right: 8px;\n    position: absolute;\n    bottom: 9px;\n\n}\n.суурь-давхаргууд > .суурь-давхарга{\n    display: block;\n    width: 8rem;\n    height: 4.5rem;\n    overflow: hidden;\n    margin: 1px;\n    border-radius: 2px;\n    float: right;\n    transition: opacity .15s ease-out;\n}\n.суурь-давхаргууд > .суурь-давхарга.active,\n.суурь-давхаргууд:hover > .суурь-давхарга.active:hover,\n.суурь-давхаргууд > .суурь-давхарга:hover {\n    opacity: 1;\n}\n.суурь-давхаргууд > .суурь-давхарга,\n.суурь-давхаргууд:hover > .суурь-давхарга.active {\n    opacity: .7;\n}\n',""]),e.exports=t},957:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return K}));var r=n(0),a=n.n(r),o=n(50),i=n(889),c=n(236),l=n(20),s=n(33),u=n(44);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={create_nema_layer:function(e,t){var n=p(p({},Object(u.b)()),{},{body:JSON.stringify({values:e,id:t})});return fetch("".concat(h,"/create/"),n).then(u.c)},getDetialAll:function(e){var t=p({},Object(u.a)());return fetch("".concat(h,"/").concat(e,"/detail/"),t).then(u.c)},getNema:function(){var e=p({},Object(u.a)());return fetch("/covid/get-nema/",e).then(u.c)},covidConfigGet:function(){var e=p({},Object(u.a)());return fetch("/back/api/config/covid/",e).then(u.c)},remove:function(e){var t=p({},Object(u.a)());return fetch("".concat(h,"/remove/").concat(e,"/"),t).then(u.c)}},h="/gov/api/nema";var y=n(159),b=n(218);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=s.c().shape({code:s.d().required("Давхаргын нэр оруулна уу !")}),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r,o=w(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={form_values:{code:"",is_open:1,layer_name:"",created_by:"",created_at:"",user_id:""},modal_alert_status:"closed",model_alert_text:"",model_alert_icon:"success",timer:null,layer_types:[{layer_choice:"1",choice_value:"Нээлттэй"},{layer_choice:"2",choice_value:"Хаалттай"}]},t.getDetialAll=t.getDetialAll.bind(k(t)),t.handleSubmit=t.handleSubmit.bind(k(t)),t.modalClose=t.modalClose.bind(k(t)),t.modalCloseTime=t.modalCloseTime.bind(k(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getDetialAll(e)}},{key:"getDetialAll",value:function(e){var t=this;d.getDetialAll(e).then((function(e){var n=e.nema_detail_list;n.length>0&&(n=n[0],t.setState({form_values:{code:n.code,is_open:n.is_open,layer_name:n.layer_name,created_by:n.created_by,created_at:n.created_at,user_id:n.user_id}}))}))}},{key:"modalClose",value:function(){this.setState({modal_alert_status:!1})}},{key:"handleSubmit",value:function(e,t){var n=this,r=t.setStatus,a=t.setSubmitting,o=t.setErrors,i=this.props.match.params.id;d.create_nema_layer(e,i).then((function(e){var t=e.success,i=e.info,c=e.errors;t?(n.setState({modal_alert_status:"open",model_alert_text:i,model_alert_icon:"success"}),r("saved"),n.modalCloseTime()):(c?o(c):n.setState({modal_alert_status:"open",model_alert_text:i,model_alert_icon:"danger"}),a(!1))}))}},{key:"modalCloseTime",value:function(){var e=this;this.state.timer=setTimeout((function(){e.setState({modal_alert_status:"closed"})}),2e3),this.props.history.push("/gov/nema/list/")}},{key:"render",value:function(){var e=this,t=this.state,n=t.form_values,r=t.modal_alert_status,o=t.model_alert_text,i=t.model_alert_icon,c=t.layer_types,s=this.props.match.params.id;return a.a.createElement("div",{className:"col-md-8"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-4 col-md-4 col-xl-4"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12 mt-3 col-md-12 col-xl-12"},a.a.createElement("div",{className:"h-100"},a.a.createElement(l.e,{enableReinitialize:!0,initialValues:n,validationSchema:x,onSubmit:this.handleSubmit},(function(e){var t=e.errors,n=e.isSubmitting;return a.a.createElement(l.d,null,a.a.createElement("div",{className:"form-row col-md-12"},a.a.createElement("div",{className:"form-row col-md-12 d-inline-block text-dark"},a.a.createElement("div",{className:"form-row col-md-12"},a.a.createElement("label",{htmlFor:"",className:"col-md-12"},a.a.createElement("strong",null,"Давхаргын code")),a.a.createElement(l.b,{type:"text",name:"code",id:"code",className:"form-control col-12"+(t.code?"is-invalid":"")}),a.a.createElement(l.a,{name:"code",component:"div",className:"text-danger"})),s&&a.a.createElement("div",{className:"form-row col-md-12 my-2"},a.a.createElement("label",{htmlFor:"",className:"col-md-12"},a.a.createElement("strong",null,"Давхаргын Нэр")),a.a.createElement(l.b,{type:"text",name:"layer_name",id:"layer_name",className:"form-control col-12"}))),a.a.createElement("div",{className:"form-row col-md-12 mb-4 mt-2"},a.a.createElement("label",{htmlFor:"",className:"col-md-6 pt-2"},"Давхаргын статус"),a.a.createElement(l.b,{name:"is_open",id:"is_open",as:"select",className:"form-control col-md-6"},c.map((function(e,t){return a.a.createElement("option",{key:t,value:e.layer_choice},e.choice_value)})))),s&&a.a.createElement("div",{className:"form-row col-md-12 mb-4 mt-2"},a.a.createElement("div",{className:"form-group col-md-6 mb-2"},a.a.createElement("label",{htmlFor:""},"Үүсгэсэн"),a.a.createElement(l.b,{className:"form-control",name:"created_by",id:"created_by",type:"text"})),a.a.createElement("div",{className:"form-group col-md-6 mb-2"},a.a.createElement("label",{htmlFor:""},"Үүссэн"),a.a.createElement(l.b,{className:"form-control",name:"created_at",id:"created_at",type:"text"}))),a.a.createElement("div",{className:"form-group"},a.a.createElement("button",{type:"submit",className:"btn gp-btn-primary",disabled:n},n&&a.a.createElement("i",{className:"fa fa-spinner fa-spin"}),n&&a.a.createElement("a",{className:"text-light"},"Шалгаж байна."),!n&&"Хадгалах"))))})))))),a.a.createElement("div",null)),r&&a.a.createElement(y.a,{modalAction:function(){return e.modalClose()},status:r,title:o,model_type_icon:i}))}}])&&g(t.prototype,n),r&&g(t,r),i}(r.Component);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var a=F(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(l,e);var t,n,r,o=P(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={"жагсаалтын_холбоос":"/gov/api/nema/","талбарууд":[{field:"code",title:"layer code"},{field:"is_open",title:"is_open"},{field:"created_at",title:"Огноо"},{field:"created_by",title:"Үүсгэсэн"}],"хувьсах_талбарууд":[{field:"is_open",text:"",action:t.set_active_color,action_type:!0}],"нэмэлт_талбарууд":[{title:"Засах",text:"",icon:"fa fa-pencil-square-o text-success",action:function(e){return t.go_link(e)}},{title:"Устгах",text:"",icon:"fa fa-trash-o text-danger",action:function(e){return t.handleRemoveAction(e)}}],refresh:!0,modal_status:"closed",values:{},button_clicked:!1},t.handleRemove=t.handleRemove.bind(L(t)),t.go_link=t.go_link.bind(L(t)),t.handleModalOpen=t.handleModalOpen.bind(L(t)),t.handleModalClose=t.handleModalClose.bind(L(t)),t.handleRemoveAction=t.handleRemoveAction.bind(L(t)),t}return t=l,(n=[{key:"set_active_color",value:function(e){var t="text-danger fa fa-times";return e&&(t="text-success fa fa-check"),t}},{key:"go_link",value:function(e){this.props.history.push("/gov/nema/".concat(e.id,"/засах/"))}},{key:"handleRemove",value:function(){var e=this,t=this.state.values;d.remove(t.id).then((function(t){t.success&&(e.setState({refresh:!e.state.refresh}),e.handleModalClose())}))}},{key:"handleModalOpen",value:function(){this.setState({modal_status:"open"})}},{key:"handleModalClose",value:function(){this.setState({modal_status:"closed"})}},{key:"handleRemoveAction",value:function(e){this.setState({values:e}),this.handleModalOpen()}},{key:"render",value:function(){var e=this.state,t=e.талбарууд,n=e.жагсаалтын_холбоос,r=e.хувьсах_талбарууд,o=e.нэмэлт_талбарууд,l=e.refresh,s=e.values,u=e.modal_status;return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-lg-12"},a.a.createElement(i.a,{"талбарууд":t,"жагсаалтын_холбоос":n,"уншиж_байх_үед_зурвас":"Уншиж байна","хувьсах_талбарууд":r,"нэмэлт_талбарууд":o,"нэмэх_товч":"/gov/nema/үүсгэх/",refresh:l})),a.a.createElement(c.a,{text:'Та "'.concat(s.name,'" нэртэй тохиргоог устгахдаа итгэлтэй байна уу?'),title:"Тохиргоог устгах",model_type_icon:"success",status:u,modalClose:this.handleModalClose,modalAction:this.handleRemove}))}}])&&j(t.prototype,n),r&&j(t,r),l}(r.Component);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var a=B(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,n,r,o=I(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={bundle:"",is_loading:!1},t.loadNema=t.loadNema.bind(V(t)),t.getDatas=t.getDatas.bind(V(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getDatas()}},{key:"getDatas",value:function(){var e=this;d.covidConfigGet().then((function(t){e.setState({bundle:t.bundle,is_loading:!1})}))}},{key:"loadNema",value:function(e){d.getNema().then((function(t){var n=t.success,r=t.info,a=t.wms_list;n?a.length>0&&e(a):alert(r)}))}},{key:"render",value:function(){var e=this,t=this.state.bundle;return a.a.createElement("div",{className:"col-lg-12"},a.a.createElement(b.a,{bundle:{id:t},loadNema:function(t){return e.loadNema(t)}}))}}])&&M(t.prototype,n),r&&M(t,r),i}(r.Component);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var a=H(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(c,e);var t,n,r,i=X(c);function c(){return J(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-lg-12"},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement(o.c,null,a.a.createElement(o.a,{exact:!0,path:"/gov/nema/list/",component:T}),a.a.createElement(o.a,{exact:!0,path:"/gov/nema/map/",component:W}),a.a.createElement(o.a,{exact:!0,path:"/gov/nema/үүсгэх/",component:O}),a.a.createElement(o.a,{exact:!0,path:"/gov/nema/:id/засах/",component:O}))))))}}])&&q(t.prototype,n),r&&q(t,r),c}(r.Component)}}]);