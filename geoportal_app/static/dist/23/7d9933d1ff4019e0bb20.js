(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{535:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),a=n.n(r),o=n(33);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,r,i=s(f);function f(){return l(this,f),i.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){return this.props.navlink_url?a.a.createElement(o.c,{className:"geo-back-btn geo-back-btn-toggled",to:this.props.navlink_url},a.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):this.props.back_url?a.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.push(this.props.back_url)},a.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name)):a.a.createElement("a",{className:"geo-back-btn geo-back-btn-toggled",id:"geo-back-btn",onClick:this.props.history.goBack},a.a.createElement("small",{className:"fa fa-chevron-circle-left"}," ",this.props.name&&this.props.name))}}])&&c(t.prototype,n),r&&c(t,r),f}(r.Component)},890:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(48);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={createEmployee:function(e,t,n,a){var i=o(o({},Object(r.b)()),{},{body:JSON.stringify({user_detail:e,emp_role_id:t,roles:n,address:a})});return fetch("".concat(c,"/create/"),i).then(r.c)},getRole:function(e){var t=o({},Object(r.a)());return fetch("".concat("/gov/api/role","/").concat(e,"/detail/"),t).then(r.c)},getRoleList:function(){var e=o({},Object(r.a)());return fetch("".concat("/gov/api/role","/"),e).then(r.c)},getDetailEmployee:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/detail/"),t).then(r.c)},deleteEmployee:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/delete/"),t).then(r.c)},updateEmployee:function(e,t,n,a,i,l){var u=o(o({},Object(r.b)()),{},{body:JSON.stringify({user_detail:e,role_id:t,id:n,add_perm:a,remove_perm:i,address:l})});return fetch("".concat(c,"/").concat(n,"/update/"),u).then(r.c)},empTokenRefresh:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/refresh-token/"),t).then(r.c)},sendMail:function(e){var t=o(o({},Object(r.b)()),{},{body:JSON.stringify({username:e})});return fetch("".concat(c,"/send-mail/"),t).then(r.c)},getGeom:function(e){var t=o(o({},Object(r.b)()),{},{body:JSON.stringify({geo_id:e})});return fetch("/payment/get-geom/",t).then(r.c)},getAddresses:function(e,t){var n=o(o({},Object(r.b)()),{},{body:JSON.stringify({choose:e,value:t})});return fetch("".concat(c,"/addresses/"),n).then(r.c)},formOptions:function(){var e=o({},Object(r.a)());return fetch("/api/aimag/",e).then(r.c)},getEmpInfo:function(e,t){var n=o(o({},Object(r.b)()),{},{body:JSON.stringify({is_erguul:t})});return fetch("/back/api/org/".concat(e,"/emp-info/"),n).then(r.c)},getErguulegFields:function(e){var t=o({},Object(r.a)());return fetch("/back/api/org/".concat(e,"/erguuleg-fields/"),t).then(r.c)},getWherePos:function(e){var t=o({},Object(r.a)());return fetch("".concat(c,"/").concat(e,"/get-erguul-info/"),t).then(r.c)},saveErguul:function(e,t,n,a,i){var l=o(o({},Object(r.b)()),{},{body:JSON.stringify({values:e,emp_id:t,point:n,photo:a,erguul_id:i})});return fetch("/back/api/org/save-erguul/",l).then(r.c)},getFieldTailbar:function(){var e=o({},Object(r.a)());return fetch("".concat(c,"/get-field-tailbar/"),e).then(r.c)},saveTailbar:function(e,t){var n=o(o({},Object(r.b)()),{},{body:JSON.stringify({values:e,id:t})});return fetch("".concat(c,"/save-field-tailbar/"),n).then(r.c)},getErguul:function(){var e=o({},Object(r.a)());return fetch("".concat(c,"/get-erguul/"),e).then(r.c)},getSelectValue:function(){var e=o({},Object(r.a)());return fetch("/back/api/org/get-select-values/",e).then(r.c)},getAllOrg:function(){var e=o({},Object(r.a)());return fetch("/back/api/org/get-all-org/",e).then(r.c)},loadBaseLayers:function(){var e=Object(r.a)();return fetch("/суурь-давхарга/",e).then(r.c)}},c="/gov/api/role/employee"},911:function(e,t,n){var r=n(66),a=n(945);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};r(a,o);e.exports=a.locals||{}},945:function(e,t,n){(t=n(67)(!1)).push([e.i,".org-list-scroll {\n    overflow-y: scroll;\n    max-height: 45vh;\n    /* opacity: 0; */\n}\n\n.org-list-scroll::-webkit-scrollbar-track {\n    background: #f8f9fa;\n}\n\n/* Handle */\n.org-list-scroll::-webkit-scrollbar-thumb {\n    background: #f8f9fa;\n    border-radius: 10px;\n}\n\n/* Handle on hover */\n.org-list-scroll::-webkit-scrollbar-thumb:hover {\n    background: #034ea2;\n}\n.org-list-scroll:hover::-webkit-scrollbar-thumb {\n    background: #A9A9A9;\n    border-radius: 10px;\n    transition: 0.4s;\n}\n\n.суурь-давхаргууд{\n    right: .0rem;\n    z-index: -100;\n    bottom: 2px;\n    height: 2.1rem;\n    position: absolute;\n\n}\n\n.суурь-давхаргууд > .суурь-давхарга{\n    display: block;\n    width: 5.6rem;\n    height: 1.75rem;\n    overflow: hidden;\n    margin: 1px;\n    border-radius: 2px;\n    float: right;\n    transition: opacity .15s ease-out;\n}\n\n.суурь-давхаргууд > .суурь-давхарга.active,\n.суурь-давхаргууд:hover > .суурь-давхарга.active:hover,\n.суурь-давхаргууд > .суурь-давхарга:hover {\n    opacity: 1;\n}\n\n.суурь-давхаргууд > .суурь-давхарга,\n.суурь-давхаргууд:hover > .суурь-давхарга.active {\n    opacity: .7;\n}\n",""]),e.exports=t},958:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return bt}));var r=n(0),a=n.n(r),o=n(49),i=n(880),l=n(467),c=n(102),u=n(281),s=n(280),f=n(2),p=n(141),m=n(234),d=n(212),h=n(329),y=n(885),g=n(16),v=n(84),b=n(512),_=n(513),E=n(331),O=n(330),w=n(13),S=n.n(w),k=n(77);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var a=G(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){C(n,e);var t=R(n);function n(e){var r;return P(this,n),(r=t.call(this,e)).input_data={},r.state={input_value:""},r}return N(n,[{key:"componentDidUpdate",value:function(e,t){e.value!==this.props.value&&this.setState({input_value:this.props.value})}},{key:"handleOnChange",value:function(e){var t=this.props,n=t.idx,r=(t.ix,t.field,t.length,t.origin_name);this.setState({input_value:e}),this.props.getValues(e,n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.idx,r=(t.ix,t.field),o=t.length,i=t.choices,l=t.value,c=t.disabled,u=t.type,s=t.is_detail,f=this.state.input_value;return a.a.createElement("div",{className:"form-group animated slideInLeft"},a.a.createElement("dt",null,r),s?a.a.createElement("dd",null,l):"date"==u&&null==i?a.a.createElement("input",{type:u,maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)}}):o>1900&&null==i?a.a.createElement("textarea",{className:"form-control",rows:"3",onChange:function(t){return e.handleOnChange(t.target.value)},maxLength:o,disabled:c,placeholder:l,value:f}):o<1900&&null==i?a.a.createElement("input",{type:"text",maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)},placeholder:r+" оруулна уу"}):null!==i?a.a.createElement("select",{className:"form-control",disabled:c,onChange:function(t){return e.handleOnChange(t.target.value)},value:f},a.a.createElement("option",{key:n,value:""},"--- Сонгоно уу ---"),i.map((function(e,t){return a.a.createElement("option",{key:t,value:e[0]},e[1])}))):null)}}]),n}(r.Component),B=function(e){C(n,e);var t=R(n);function n(e){var r;return P(this,n),(r=t.call(this,e)).state={values:{}},r.getValues=r.getValues.bind(T(r)),r}return N(n,[{key:"getValues",value:function(e,t,n){var r=this.state.values;r[n]=e,this.setState({values:r})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.fields,r=t.is_detail,o=t.title,i=t.button_name,l=this.state.values;return a.a.createElement("div",null,a.a.createElement("div",{className:"row text-center"},a.a.createElement("div",{className:"col-md-10"},a.a.createElement("h6",null,o)),a.a.createElement("div",{className:"col-md-2"},a.a.createElement("button",{type:"button",className:"close"},a.a.createElement("span",{"aria-hidden":"true",onClick:function(){return e.props.handleClose()}},"×")))),a.a.createElement("div",{className:"overflow-auto",style:{maxHeight:"calc( 50vh - 70px - 15px)"}},n.map((function(t,n){return a.a.createElement(A,{key:n,is_detail:r,field:t.name,length:t.length,disabled:t.disabled,idx:n,origin_name:t.origin_name,getValues:e.getValues,value:t.value,choices:t.choices,type:t.type})}))),r?a.a.createElement("div",{className:"pb-2"}):a.a.createElement("div",{className:"pb-2"},a.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return e.props.saveErguulPlace(l)}},i)))}}]),n}(r.Component),M=function(e){C(n,e);var t=R(n);function n(e){var r;P(this,n);var a=e||{};(r=t.call(this,{element:document.createElement("div"),target:a.target})).is_component_initialized=!1;return r.element.className="col-md-3 card",r.element.style.display="none",r.element.style.height="auto",r.renderComponent=r.renderComponent.bind(T(r)),r.toggleControl=r.toggleControl.bind(T(r)),r}return N(n,[{key:"toggleControl",value:function(e){this.element.style.display=e?"block":"none"}},{key:"renderComponent",value:function(e){var t=this;e.handleClose=function(){t.toggleControl(!1)},this.is_component_initialized||(S.a.render(a.a.createElement(B,e),this.element),this.is_component_initialized=!0),S.a.hydrate(a.a.createElement(B,e),this.element)}},{key:"showForm",value:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.toggleControl(e),this.renderComponent({fields:t,title:n,is_detail:o,saveErguulPlace:r,button_name:a})}}]),n}(k.a),V=(n(235),n(890)),D=n(131),I=n(121),W=n(17);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var a=$(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(o,e);var t,n,r,a=H(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=e||{};(t=a.call(this,{element:document.createElement("div"),target:n.target})).toggleLayer=t.toggleLayer.bind(Z(t)),t.initLayer=t.initLayer.bind(Z(t)),t.handleClick=t.handleClick.bind(Z(t)),t.last_active=null;var r=n.layers.map(t.initLayer),i="суурь-давхаргууд ".concat(W.e," ").concat(W.b),l=t.element;return l.className=i,r.forEach((function(e){return l.appendChild(e)})),t}return t=o,(n=[{key:"initLayer",value:function(e){var t=this,n=e.thumbnail_1x,r=e.thumbnail_2x,a=e.layer,o=e.is_active,i=document.createElement("a");i.setAttribute("href","#"),i.className="суурь-давхарга"+(o?" active":"");var l=document.createElement("img");return l.srcset="".concat(n," 1x, ").concat(r," 2x"),i.appendChild(l),i.addEventListener("click",(function(e){e.preventDefault(),t.handleClick(i,a)})),this.toggleLayer(!0===o,i,a),i}},{key:"toggleLayer",value:function(e,t,n){this.last_active&&e&&(this.last_active.layer.setVisible(!1),this.last_active.el.classList.toggle("active",!1)),n.setVisible(e),t.classList.toggle("active",e),e&&(this.last_active={el:t,layer:n})}},{key:"handleClick",value:function(e,t){this.last_active&&this.last_active.el===e||this.toggleLayer(!0,e,t)}}])&&z(t.prototype,n),r&&z(t,r),o}(k.a);n(911);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var a=oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(w,e);var t,n,r,o=ne(w);function w(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(t=o.call(this,e)).state={projection_data:"EPSG:4326",projection_display:"EPSG:3857"},t.controls={form:new M},t.loadMap=t.loadMap.bind(ae(t)),t.readFeatures=t.readFeatures.bind(ae(t)),t.readFeature=t.readFeature.bind(ae(t)),t.removeFeatureFromSource=t.removeFeatureFromSource.bind(ae(t)),t.translateStart=t.translateStart.bind(ae(t)),t.translateEnd=t.translateEnd.bind(ae(t)),t.selectedFeature=t.selectedFeature.bind(ae(t)),t.getEmpInfo=t.getEmpInfo.bind(ae(t)),t.changedFeatureSetColor=t.changedFeatureSetColor.bind(ae(t)),t.makeLineString=t.makeLineString.bind(ae(t)),t.sendErguuleg=t.sendErguuleg.bind(ae(t)),t.downloadImage=t.downloadImage.bind(ae(t)),t.setBaseLayer=t.setBaseLayer.bind(ae(t)),t.loadBaseLayers=t.loadBaseLayers.bind(ae(t)),t}return t=w,(n=[{key:"componentDidMount",value:function(){this.loadMap(),this.loadBaseLayers()}},{key:"componentDidUpdate",value:function(e,t){e.features!==this.props.features&&(this.vector_layer.getSource().clear(),this.readFeatures(this.props.features)),e.feature!==this.props.feature&&this.props.feature!=={}&&this.readFeature(this.props.feature)}},{key:"loadMap",value:function(){var e=this,t=new s.a({source:new u.a({}),style:new p.c({stroke:new m.a({color:"rgba(100, 255, 0, 1)",width:2}),fill:new d.a({color:"rgba(100, 255, 0, 0.3)"})})});this.setState({vector_layer:t}),t.setZIndex(10),this.vector_layer=t;var n=new b.a;n.on("select",(function(t){return e.selectedFeature(t)})),this.select=n;var r=new _.a({features:n.getFeatures()});r.on("translatestart",(function(t){return e.translateStart(t)})),r.on("translateend",(function(t){return e.translateEnd(t)})),this.translate=r;var a=new i.a({interactions:Object(E.a)().extend([n,r]),layers:[t],target:"map",view:new l.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971}),controls:[]});a.addControl(this.controls.form),this.map=a}},{key:"loadBaseLayers",value:function(){var e=this;Promise.all([V.a.loadBaseLayers()]).then((function(t){var n=K(t,1)[0].base_layer_list;e.setBaseLayer(n)}))}},{key:"setBaseLayer",value:function(e){var t=this,n=(this.state.center,[.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765625e-19,4291534423828125e-20,21457672119140625e-21,10728836059570312e-21,5364418029785156e-21,2682209014892578e-21,1341104507446289e-21,6.705522537231445e-7,3.3527612686157227e-7]),r=["EPSG:4326:0","EPSG:4326:1","EPSG:4326:2","EPSG:4326:3","EPSG:4326:4","EPSG:4326:5","EPSG:4326:6","EPSG:4326:7","EPSG:4326:8","EPSG:4326:9","EPSG:4326:10","EPSG:4326:11","EPSG:4326:12","EPSG:4326:13","EPSG:4326:14","EPSG:4326:15","EPSG:4326:16","EPSG:4326:17","EPSG:4326:18","EPSG:4326:19","EPSG:4326:20","EPSG:4326:21"],a=e.reduce((function(e,a,o){var i;return"xyz"==a.tilename&&(i=new D.a({preload:6,source:new I.a({crossOrigin:"Anonymous",url:a.url}),name:"base_layer"})),"wms"==a.tilename&&(i=new D.a({source:new TileWMS({ratio:1,url:a.url,params:{LAYERS:a.layers,FORMAT:"image/png",VERSION:"1.1.1",STYLES:"",exceptions:"application/vnd.ogc.se_inimage"},tileLoadFunction:securedImageWMS}),name:"base_layer"})),"wmts"==a.tilename&&(i=new D.a({source:new WMTS({url:a.url,layer:a.layers,matrixSet:t.state.projection_display,format:"image/png",projection:t.state.projection_display,tileGrid:new WMTSTileGrid({tileSize:[256,256],extent:[-180,-90,180,90],origin:[-180,90],resolutions:n,matrixIds:r}),tileLoadFunction:securedImageWMS,style:"",wrapX:!0})})),e.base_layers.push(i),e.base_layer_controls.push({is_active:0==o,thumbnail_1x:a.thumbnail_1x,thumbnail_2x:a.thumbnail_2x,layer:i}),i.setZIndex(0),t.map.addLayer(i),e}),{base_layers:[],base_layer_controls:[]}),o=(a.base_layers,a.base_layer_controls),i=new q({layers:o});this.map.addControl(i)}},{key:"makeFields",value:function(e,t){var n=Array();return Object.keys(e).map((function(r,a){t.map((function(t,a){if(r==t.origin_name){var o=Object();o.name=t.name,o.origin_name=r,o.value=e[r]?e[r]:"",o.disabled=t.disabled,o.choices=null,o.length=t.length,"level_1"==r&&(o.value=e.level_1+", "+e.level_2+", "+e.level_3+", "+e.street+" гудамж "+e.apartment+" байр, "+e.door_number+" тоот"),n.push(o)}}))})),n}},{key:"getEmpInfo",value:function(e,t){var n=this;t||(t=!1),V.a.getEmpInfo(e,t).then((function(e){var t=e.success,r=e.info,a=e.title;if(t){var o=n.makeFields(r,[{origin_name:"org_name",name:"Байгууллагын нэр",disabled:!0,length:100},{origin_name:"phone_number",name:"Утасны дугаар",disabled:!0,length:100},{origin_name:"level_1",name:"Гэрийн хаяг",disabled:!0,length:2e3},{origin_name:"last_name",name:"Овог",disabled:!0,length:100},{origin_name:"first_name",name:"Нэр",disabled:!0,length:100},{origin_name:"date_start",name:"Эхлэх огноо",disabled:!0,length:100},{origin_name:"date_end",name:"Дуусах огноо",disabled:!0,length:100},{origin_name:"part_time",name:"Ээлж",disabled:!0,length:100},{origin_name:"erguul_address",name:"Эргүүлийн хаяг",disabled:!0,length:100}]);n.controls.form.showForm(!0,o,a,void 0,"",!0)}}))}},{key:"featureWithTextStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red",n=new p.c({image:new h.a({radius:5,fill:new d.a({color:t})}),text:new y.a({text:e,font:"30px Calibri,sans-serif",stroke:new m.a({color:"white",width:3}),offsetY:-18})});return n}},{key:"changedFeatureSetColor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"green",n=this.vector_layer.getSource();n.getFeatures().map((function(n,r){if(n.getProperties().is_changed){var a=e.getFullName(n),o=e.featureWithTextStyle(a,t);n.setStyle(o)}}))}},{key:"getFullName",value:function(e){var t=e.getProperties().first_name;return e.getProperties().last_name.charAt(0).toUpperCase()+". "+(t.charAt(0).toUpperCase()+t.slice(1))}},{key:"selectedFeature",value:function(e){this.translate.setActive(!0);var t=e.selected[0];if(t)if("Point"==t.getGeometry().getType()&&this.props.is_admin){var n=t.getProperties(),r=n.id;this.id=r,n.is_cloned&&this.translate.setActive(!1),this.getEmpInfo(r,n.is_erguul)}else this.select.getFeatures().clear();else this.changedFeatureSetColor()}},{key:"translateStart",value:function(e){var t=0,n=this.vector_layer.getSource(),r=e.features.getArray()[0],a=r.getProperties().id,o=n.getFeatures();if(null!=o&&o.length>0)for(var i=0;i<o.length;i++)if(o[i].getProperties().id==a&&t<2)t++;else if(2==t)break;if(t<2){var l=r.clone(),c=this.getFullName(l),u=this.featureWithTextStyle(c);l.setStyle(u),l.setProperties({is_cloned:!0}),n.addFeature(l)}r.setProperties({is_changed:!0})}},{key:"translateEnd",value:function(e){var t=this,n=e.features.getArray()[0],r=n.getGeometry().getCoordinates();this.end_coordinates=r;var a=n.getProperties().id;this.removeFeatureFromSource(a);var o=this.map.getView().getProjection(),i=Object(f.p)(r,o,this.state.projection_data),l=Object(g.f)(i,"{y},{x}",6);this.changedFeatureSetColor(),V.a.getErguulegFields(a).then((function(e){var r=e.success,a=e.info,o=e.erguul_id;t.makeLineString([n],"one");var i="Хадгалах";o&&(i="Засах"),t.controls.form.showForm(r,a,"Эргүүлд гарах байршил",(function(e){return t.sendErguuleg(e,t.id,l,o)}),i)}))}},{key:"fromLonLatToMapCoord",value:function(e){return Object(f.d)([e[0],e[1]])}},{key:"makeLineString",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.vector_layer.getSource(),a=r.getFeatures();if(null!=a&&a.length>0&&e.length>0)for(var o=function(){var o=a[i],l=o.getProperties(),u=l.id,s=void 0;s="one"==n?l.is_cloned:l.is_erguul,u&&s&&e.map((function(e,a){var i,l;l="one"==n?(i=e.getProperties()).is_changed:(i=e.properties).is_cloned;var s=i.id;if(s==u&&l){var f;"one"==n?f=e.getGeometry().getCoordinates():(f=e.geometry.coordinates,f=t.fromLonLatToMapCoord(f));var p=o.getGeometry().getCoordinates(),m=new v.a([f,p]),d=new c.a(m);d.setProperties({id:s});var h=d.getGeometry().getExtent();t.extent=h,t.props.is_admin||t.map.getView().fit(h,{padding:[200,200,200,200]}),r.addFeature(d)}}))},i=0;i<a.length;i++)o()}},{key:"downloadImage",value:function(e,t,n,r){var a,o=this,i=this.map;this.props.setLoading(!0),i.once("rendercomplete",(function(){var l=document.createElement("canvas"),c=i.getSize();l.width=c[0],l.height=c[1];var u=l.getContext("2d");Array.prototype.forEach.call(document.querySelectorAll(".ol-layer canvas"),(function(e){if(e.width>0){var t=e.parentNode.style.opacity;u.globalAlpha=""===t?1:Number(t);var n=e.style.transform.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number);CanvasRenderingContext2D.prototype.setTransform.apply(u,n),u.drawImage(e,0,0)}})),navigator.msSaveBlob?navigator.msSaveBlob(l.msToBlob(),"map.png"):a=l.toDataURL(),o.props.saveErguulPlace(e,t,n,a,r)}))}},{key:"sendErguuleg",value:function(e,t,n,r){var a=this.extent;this.map.getView().fit(a,{padding:[200,200,200,200]}),this.downloadImage(e,t,n,r)}},{key:"removeFeatureFromSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.vector_layer.getSource(),r=n.getFeatures();if(null!=r&&r.length>0)for(var a=0;a<r.length;a++){var o=r[a].getProperties(),i=o.id,l=void 0,c=r[a].getGeometry().getType();if(i==e&&("only_aimag"==t&&c.includes("Polygon")?l=r[a]:t||"LineString"!=c||(l=r[a])),l){n.removeFeature(l);break}}}},{key:"readFeature",value:function(e){var t="aimag_sum";this.removeFeatureFromSource(t,"only_aimag");var n=this.vector_layer.getSource(),r=(new O.a).readFeatures(e,{dataProjection:this.state.projection_data,featureProjection:this.state.projection_display})[0];n.addFeature(r),r.setProperties({id:t}),this.map.getView().fit(r.getGeometry(),{padding:[50,50,50,50],minResolution:1})}},{key:"readFeatures",value:function(e){var t=this,n=this.vector_layer.getSource();e.features.length>0&&(e.features.map((function(e,r){if(e!=={}){var a=(new O.a).readFeatures(e,{dataProjection:t.state.projection_data,featureProjection:t.state.projection_display})[0],o=a.getProperties(),i=t.getFullName(a),l=t.featureWithTextStyle(i);o.is_erguul&&(t.props.is_admin||(t.start_coordinate=a.getGeometry().getCoordinates()),l=t.featureWithTextStyle(i,"green")),t.props.is_admin||o.is_erguul||(t.end_coordinates=a.getGeometry().getCoordinates()),a.setStyle(l),n.addFeature(a)}})),this.makeLineString(e.features))}},{key:"render",value:function(){return a.a.createElement("div",{id:"map",style:{height:"calc( 90vh - 85px - 15px)"}})}}])&&ee(t.prototype,n),r&&ee(t,r),w}(r.Component),le=n(107);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?ye(e):t}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){pe(n,e);var t=de(n);function n(e){var r;return ue(this,n),(r=t.call(this,e)).input_data={},r.state={input_value:""},r}return fe(n,[{key:"componentDidMount",value:function(){this.props.value&&this.setState({input_value:this.props.value})}},{key:"handleOnChange",value:function(e){var t=this.props,n=t.idx,r=(t.ix,t.field,t.length,t.origin_name);this.setState({input_value:e}),this.props.getValues(e,n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.idx,r=(t.ix,t.field),o=t.length,i=t.choices,l=t.value,c=t.disabled,u=t.type,s=t.is_detail,f=this.state.input_value;return a.a.createElement("div",{className:"form-group animated slideInLeft"},a.a.createElement("dt",null,r),s?a.a.createElement("dd",null,l):"date"==u&&null==i?a.a.createElement("input",{type:u,maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)}}):o>1900&&null==i?a.a.createElement("textarea",{className:"form-control",rows:"3",onChange:function(t){return e.handleOnChange(t.target.value)},maxLength:o,disabled:c,placeholder:r+" оруулна уу",value:f}):o<1900&&null==i?a.a.createElement("input",{type:"text",maxLength:o,className:"form-control",disabled:c,value:f,onChange:function(t){return e.handleOnChange(t.target.value)},placeholder:r+" оруулна уу"}):null!==i?a.a.createElement("select",{className:"form-control",disabled:c,onChange:function(t){return e.handleOnChange(t.target.value)},value:f},a.a.createElement("option",{key:n,value:""},"--- Сонгоно уу ---"),i.map((function(e,t){return a.a.createElement("option",{key:t,value:e[0]},e[1])}))):null)}}]),n}(r.Component),be=function(e){pe(n,e);var t=de(n);function n(e){var r;return ue(this,n),(r=t.call(this,e)).state={fields:[],id:"",values:{}},r.getField=r.getField.bind(ye(r)),r.getValues=r.getValues.bind(ye(r)),r}return fe(n,[{key:"componentDidMount",value:function(){this.getField()}},{key:"getField",value:function(){var e=this;V.a.getFieldTailbar().then((function(t){var n=t.success,r=t.fields,a=t.id;n&&e.setState({fields:r,id:a})}))}},{key:"getValues",value:function(e,t,n){var r=this.state.values;r[n]=e,this.setState({values:r})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fields,r=t.values,o=t.id,i=this.props.is_empty;return a.a.createElement("div",null,a.a.createElement("h5",{className:"text-center"},"Эргүүлд гарсан мэдээлэл"),n.map((function(t,n){return a.a.createElement(ve,{key:n,field:t.name,length:t.length,disabled:!!i||t.disabled,idx:n,origin_name:t.origin_name,getValues:e.getValues,value:t.value,choices:t.choices,type:t.type})})),a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-primary btn-block",disabled:i,onClick:function(){return e.props.saveErguulTailbar(r,o)}},o?"Засах":"Хадгалах")))}}]),n}(r.Component),_e=n(888);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var a=Pe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?je(e):t}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(i,e);var t,n,r,o=Se(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={refresh:!1,"талбарууд":[{field:"fullname",title:"Хэрэглэгчийн овог, нэр",has_action:!0},{field:"part_time",title:"Ээлж",has_action:!0},{field:"state",title:"Төлөв",has_action:!0},{field:"date_start",title:"Эхлэх огноо"},{field:"date_end",title:"Дуусах огноо"}],"жагсаалтын_холбоос":"/gov/api/role/employee/erguul-list/","хувьсах_талбарууд":[{field:"fullname",action:function(e){return t.goLink(e)}},{field:"part_time",action:t.getPartTime,action_type:!0},{field:"state",action:t.getState,action_type:!0}]},t.goLink=t.goLink.bind(je(t)),t}return t=i,(n=[{key:"goLink",value:function(e){this.props.history.push("/gov/perm/erguuleg/".concat(e.id,"/details/"))}},{key:"getState",value:function(e){return{"Гараагүй":"text-danger","Гарсан":"text-success","Гарч байгаа":"text-warning"}[e]}},{key:"getPartTime",value:function(e){return{"Үдээс хойш":"text-dark","Үдээс өмнө":"text-warning"}[e]}},{key:"render",value:function(){var e=this.state,t=e.refresh,n=e.талбарууд,r=e.жагсаалтын_холбоос,o=e.хувьсах_талбарууд;return a.a.createElement("div",null,a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-lg-12"},a.a.createElement(_e.a,{refresh:t,color:"bg-dark","талбарууд":n,"жагсаалтын_холбоос":r,per_page:100,"уншиж_байх_үед_зурвас":"Уншиж байна","хоосон_байх_үед_зурвас":"Хоосон байна","хувьсах_талбарууд":o}))))}}])&&Oe(t.prototype,n),r&&Oe(t,r),i}(r.Component);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(i,e);var t,n,r,o=Re(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={points:[],feature:{},is_loading:!0,is_empty:!1,infos:[],is_open:!1},t.getAddresses=t.getAddresses.bind(Te(t)),t.saveErguulTailbar=t.saveErguulTailbar.bind(Te(t)),t.handleOpen=t.handleOpen.bind(Te(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getAddresses()}},{key:"getAddresses",value:function(){var e=this;V.a.getErguul().then((function(t){var n=t.success,r=t.points;if(n){var a=!1;(r.length>0||r.features.length<2)&&(a=!0),e.setState({points:r,is_empty:a,is_loading:!1})}}))}},{key:"saveErguulTailbar",value:function(e,t){var n=this;this.setState({is_loading:!0}),V.a.saveTailbar(e,t).then((function(e){e.success;var t=e.info;alert(t),n.setState({is_loading:!1})})).catch((function(e){alert("Алдаа гарсан байна"),n.setState({is_loading:!1})}))}},{key:"handleOpen",value:function(){this.setState({is_open:!this.state.is_open})}},{key:"render",value:function(){var e=this,t=this.state,n=t.points,r=t.is_loading,o=t.is_empty,i=t.infos,l=t.is_open;return this.props.employee.is_admin,a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement(le.a,{is_loading:r}),a.a.createElement("button",{className:"btn gp-outline-primary",onClick:this.handleOpen},l?"Эргүүлд гарсан мэдээлэл":"Эргүүлд гарсан ажилчдын мэдээлэл"),a.a.createElement("br",null),a.a.createElement("br",null),l?a.a.createElement(xe,this.props):a.a.createElement("div",null,a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-4"},a.a.createElement(be,{is_empty:o,infos:i,saveErguulTailbar:function(){return e.saveErguulTailbar.apply(e,arguments)}})),a.a.createElement("div",{className:"col-8"},a.a.createElement(ie,{features:n,is_admin:!1}))))))}}])&&Ce(t.prototype,n),r&&Ce(t,r),i}(r.Component);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var a=Ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?ze(e):t}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(i,e);var t,n,r,o=We(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={aimag:[],sum:[],horoo:[],aimag_id:-1,sum_id:-1,horoo_id:-1,aimag_name:"",sum_name:"",horoo_name:"",aimag_geo_id:"",sum_geo_id:"",horoo_geo_id:"",firstOrder_geom:"",org_list:[],levels:[]},t.handleChange=t.handleChange.bind(ze(t)),t.getGeom=t.getGeom.bind(ze(t)),t.getFieldValues=t.getFieldValues.bind(ze(t)),t.getAllOrg=t.getAllOrg.bind(ze(t)),t.handleChoose=t.handleChoose.bind(ze(t)),t}return t=i,(n=[{key:"getGeom",value:function(e){var t=this;V.a.getGeom(e).then((function(e){var n=e.feature;n&&t.props.sendFeature(n)}))}},{key:"getFieldValues",value:function(){var e=this;V.a.formOptions().then((function(t){var n=t.success,r=t.info,a=t.firstOrder_geom;n&&e.setState({aimag:r,firstOrder_geom:a})}))}},{key:"componentDidMount",value:function(){this.getFieldValues(),this.getAllOrg()}},{key:"handleChange",value:function(e,t,n,r,a){var o,i=t+"_id",l=t+"_geo_id",c=t+"_name",u=e.target.value,s=Object();if("-1"!==u){var f=this.state[t][u];this.setState(Ve({},n,f.children)),n&&(s[n]=f.children),o=f.geo_id,r.map((function(e,t){var n=e+"_geo_id",r=e+"_name";s[e+"_id"]=-1,s[n]="",s[r]=""})),s[l]=o,s[c]=f.name,this.getGeom(o)}else{if(r.length>0&&r.map((function(e,t){var n=e+"_id",r=e+"_geo_id",a=e+"_name";s[e]=[],s[n]=-1,s[r]="",s[a]=""})),"mongol"!==a){var p=a+"_id",m=this.state[p];o=this.state[a][m].geo_id}else o=this.state.firstOrder_geom;s[l]=o,this.getGeom(o)}this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(Ve({},i,u),s))}},{key:"getAllOrg",value:function(){var e=this;V.a.getAllOrg().then((function(t){var n=t.success,r=t.org_list,a=t.levels;n&&e.setState({org_list:r,levels:a})}))}},{key:"handleChoose",value:function(e,t){this.props.handleChoose(e,t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.aimag,r=t.sum,o=t.horoo,i=t.aimag_id,l=t.sum_id,c=t.horoo_id,u=t.org_list,s=t.levels;return a.a.createElement("div",{className:"form-row"},a.a.createElement("div",{className:"form-group col-3"},a.a.createElement("label",{htmlFor:"aimag"},"Аймаг/Хот:"),a.a.createElement("select",{id:"aimag",className:"form-control","aria-label":"Default select example",onChange:function(t){return e.handleChange(t,"aimag","sum",["sum","horoo"],"mongol")},value:i},a.a.createElement("option",{value:"-1"},"--- Аймаг/Хот сонгох ---"),n.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.name)})))),a.a.createElement("div",{className:"form-group col-3"},a.a.createElement("label",{htmlFor:"sum"},"Сум/Дүүрэг:"),a.a.createElement("select",{id:"sum",className:"form-control",onChange:function(t){return e.handleChange(t,"sum","horoo",["horoo"],"aimag")},value:l},a.a.createElement("option",{value:"-1"},"--- Сум/Дүүрэг сонгох ---"),r.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.name)})))),a.a.createElement("div",{className:"form-group col-3"},a.a.createElement("label",{htmlFor:"horoo"},"Хороо/Баг:"),a.a.createElement("select",{id:"horoo",className:"form-control",onChange:function(t){return e.handleChange(t,"horoo",void 0,[],"sum")},value:c},a.a.createElement("option",{value:"-1"},"--- Баг/Хороо сонгох ---"),o.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.name)})))),a.a.createElement("div",{className:"form-group col-3 text-right mt-4"},a.a.createElement("div",{className:"dropdown"},a.a.createElement("button",{className:"btn btn-outline-primary btn-sm waves-effect waves-light m-1 dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Байгууллага/Түвшин"),a.a.createElement("div",{className:"dropdown-menu dropdown-menu-right org-list-scroll","aria-labelledby":"dropdownMenuButton"},s.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"dropdown-divider"}),a.a.createElement("button",{className:"dropdown-item py-1",value:"all",onClick:function(t){return e.handleChoose("all",t.target.value)}},"Бүх байгууллага"),a.a.createElement("div",{className:"dropdown-divider"}),a.a.createElement("button",{className:"dropdown-item py-1",value:"this_org",onClick:function(t){return e.handleChoose("this_org",t.target.value)}},"Энэ байгууллага"),s.map((function(t,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"dropdown-divider"}),a.a.createElement("button",{key:n,className:"dropdown-item py-1",value:t,onClick:function(t){return e.handleChoose("level",t.target.value)}},"Түвшин-",t),a.a.createElement("ul",{className:"mb-1"},u.map((function(n,r){return n.level==t&&a.a.createElement("button",{key:r,className:"dropdown-item py-1 pl-0",value:n.id,onClick:function(t){return e.handleChoose("org",t.target.value)}},n.name)}))))})))))))}}])&&De(t.prototype,n),r&&De(t,r),i}(r.Component);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qe(e);if(t){var a=Qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xe(this,n)}}function Xe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?Ke(e):t}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(i,e);var t,n,r,o=qe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={points:[],feature:{},is_loading:!0,is_empty:!1,choose:"this_org",value:""},t.getAddresses=t.getAddresses.bind(Ke(t)),t.getFeature=t.getFeature.bind(Ke(t)),t.saveErguulPlace=t.saveErguulPlace.bind(Ke(t)),t.saveErguulTailbar=t.saveErguulTailbar.bind(Ke(t)),t.setLoading=t.setLoading.bind(Ke(t)),t.handleChoose=t.handleChoose.bind(Ke(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getAddresses(this.state.choose,this.state.value)}},{key:"getAddresses",value:function(e,t){var n=this;V.a.getAddresses(e,t).then((function(e){var t=e.success,r=e.points;if(t){var a=!1;r.features.length<2&&(a=!0),n.setState({points:r,is_loading:!1,is_empty:a})}}))}},{key:"getFeature",value:function(e){this.setState({feature:e})}},{key:"getPoint",value:function(e){var t=e;return"string"==typeof e&&(t=e.split(",")),[t[1],t[0]]}},{key:"setLoading",value:function(e){this.setState({is_loading:e})}},{key:"saveErguulPlace",value:function(e,t,n,r,a){var o=this,i=this.getPoint(n);V.a.saveErguul(e,t,i,r,a).then((function(e){var t=e.success,n=e.info;t&&(alert(n),o.setLoading(!1))})).catch((function(e){alert("Алдаа гарсан байна"),o.setLoading(!1)}))}},{key:"saveErguulTailbar",value:function(e){var t=this;this.setLoading(!0),V.a.saveTailbar(e).then((function(e){e.success;var n=e.info;alert(n),t.setLoading(!1)})).catch((function(e){alert("Алдаа гарсан байна"),t.setLoading(!1)}))}},{key:"handleChoose",value:function(e,t){this.getAddresses(e,t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.points,r=t.feature,o=t.is_loading,i=(t.is_empty,this.props.employee.is_admin);return a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement(le.a,{is_loading:o}),a.a.createElement("div",{className:"col-12"},a.a.createElement(He,{sendFeature:this.getFeature,handleChoose:this.handleChoose}),a.a.createElement(ie,{features:n,feature:r,saveErguulPlace:function(){return e.saveErguulPlace.apply(e,arguments)},is_admin:i,setLoading:this.setLoading}))))}}])&&Ze(t.prototype,n),r&&Ze(t,r),i}(r.Component),tt=n(535);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?ct(e):t}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(i,e);var t,n,r,o=it(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={id:t.props.match.params.id,indicate:""},t.getPos=t.getPos.bind(ct(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getPos()}},{key:"getPos",value:function(){var e=this,t=this.state.id;V.a.getWherePos(t).then((function(t){var n=t.success,r=t.first_name,a=t.last_name,o=t.local_lvl1,i=t.local_lvl2,l=t.local_lvl3,c=t.local_street,u=t.local_apart,s=t.local_dn,f=t.erguul_level3,p=t.erguul_street,m=t.erguul_apart,d=t.date_start,h=t.date_end,y=t.status,g=t.desc;n&&e.setState({first_name:r,last_name:a,local_lvl1:o,local_lvl2:i,local_lvl3:l,local_street:c,local_apart:u,local_dn:s,erguul_level3:f,erguul_street:p,erguul_apart:m,date_start:d,date_end:h,status:y,desc:g}),"Гарсан"==y?e.setState({indicate:"text-success"}):"Гараагүй"==y?e.setState({indicate:"text-danger"}):"Гарч байгаа"==y&&e.setState({indicate:"text-warning"})}))}},{key:"render",value:function(){var e=this.state,t=e.first_name,n=e.last_name,r=e.local_lvl1,o=e.local_lvl2,i=e.local_lvl3,l=e.local_street,c=e.local_apart,u=e.local_dn,s=e.erguul_level3,f=e.erguul_street,p=e.erguul_apart,m=e.date_start,d=e.date_end,h=e.status,y=e.desc,g=e.indicate;return a.a.createElement("div",{className:"card pl-5"},a.a.createElement("div",{className:"row mt-4 "},a.a.createElement(tt.a,rt({},this.props,{name:"Буцах",navlink_url:"/gov/perm/erguuleg/"})),a.a.createElement("div",{className:"col-4 "},a.a.createElement("div",{className:"row"},a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Овог, нэр:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},n,", ",t),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Эхэлсэн хугацаа:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},m),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Дууссан хугацаа:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},d),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Төлөв:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 ".concat(g)},h))),a.a.createElement("div",{className:"col-4"},a.a.createElement("div",{className:"row"},a.a.createElement("h5",{className:"col-sm-12 col-xl-12 "},"Эргүүл хийсэн газар:"),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хороо/баг:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},s),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Гудамж:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},f),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"}," Байр:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},p))),a.a.createElement("div",{className:"col-4"},a.a.createElement("div",{className:"row"},a.a.createElement("h5",{className:"col-sm-12 col-xl-12 "},"Гэрийн хаяг:"),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хот/Аймаг:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},r),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"}," Дүүрэг/Сум:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},o),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хороо/баг:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9"},i),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Гудамж:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},l),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Байр:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},c),a.a.createElement("dt",{className:"col-sm-6 col-xl-3"},"Хаалганы дугаар:"),a.a.createElement("dd",{className:"col-sm-6 col-xl-9 "},u)))),a.a.createElement("div",{className:"row pb-5 pr-5"},a.a.createElement("div",{className:"col-12"},a.a.createElement("div",null,a.a.createElement("b",null,"Эргүүлд гарсан тайлбар:")),a.a.createElement("div",null,a.a.createElement("a",{className:"ml-4 text-justify"},y)))))}}])&&at(t.prototype,n),r&&at(t,r),i}(r.Component);function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(){return(pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vt(e);if(t){var a=vt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return gt(this,n)}}function gt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(l,e);var t,n,r,i=yt(l);function l(){return mt(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props.employee;return a.a.createElement(o.c,null,a.a.createElement(o.a,{path:"/gov/perm/addresses/",component:function(t){return a.a.createElement(et,pt({},t,{employee:e}))}}),a.a.createElement(o.a,{exact:!0,path:"/gov/perm/erguuleg/",component:function(t){return a.a.createElement(Ae,pt({},t,{employee:e}))}}),a.a.createElement(o.a,{exact:!0,path:"/gov/perm/erguuleg/:id/details/",component:function(t){return a.a.createElement(st,pt({},t,{employee:e}))}}))}}])&&dt(t.prototype,n),r&&dt(t,r),l}(r.Component)}}]);