(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1e3:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a),o=n(1012);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,n,a,c=u(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).state={is_modal_request_open:!1,title:e.button_name||"Шийдвэрлэх",values:e.values,state:e.values.state},t.openModalMapMap=t.openModalMapMap.bind(f(t)),t.closeModalMap=t.closeModalMap.bind(f(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this.state.values.group;e&&(this.values=e,this.setState({title:"Олноор шийдвэрлэх"}))}},{key:"openModalMapMap",value:function(){this.setState({is_modal_request_open:!0})}},{key:"closeModalMap",value:function(){this.setState({is_modal_request_open:!1})}},{key:"render",value:function(){var e=this.state,t=e.is_modal_request_open,n=e.title,a=e.values,c=e.state,l=this.props,i=l.button_name,u=l.is_not_array;return(!i||this.values||u)&&(i||this.values||u)?i&&this.values&&a&&!u?this.values=a:u&&(this.values=[a]):this.values=[a],r.a.createElement("div",null,"ШИНЭ"==c||i?r.a.createElement("a",{className:"btn btn-primary btn-sm text-white text-capitalize",onClick:this.openModalMapMap},n):null,t&&r.a.createElement(o.a,{hide_btn:this.props.hide_btn,modalClose:this.closeModalMap,refreshData:this.props.refreshData,values:this.values}))}}])&&l(t.prototype,n),a&&l(t,a),s}(a.Component)},1010:function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return E}));var a=n(0),r=n.n(a),o=n(975),c=n(1011),l=n(1e3),i=n(1013);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){var t=e.values;return t.org+"/"+t.employee},_=function(e){var t;return"ШИНЭ"==e?t="text-primary":"ТАТГАЛЗСАН"==e?t="text-danger":("ЗӨВШӨӨРСӨН"==e||"ХЯНАХ"==e)&&(t="text-success"),t},w=function(e){var t;return"ҮҮССЭН"==e?t="text-success":"ЗАССАН"==e?t="text-primary":("ЦУЦЛАСАН"==e||"БУЦААГДСАН"==e||"УСТГАСАН"==e||"ШУУД"==e)&&(t="text-danger"),t},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,a,u=h(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).state={org_request:[],state:null,kind:null,search_geom:null,theme_id:null,package_id:null,feature_id:null,is_loading:!1,refresh:!1,"талбарууд":[{field:"theme_name",title:"Орон зайн өгөгдөл",has_action:!0},{field:"org",title:"Байгууллага / мэргэжилтэн",has_action:!0},{field:"order_no",title:"Тушаалын дугаар"},{field:"order_at",title:"Тушаал гарсан огноо"},{field:"created_at",title:"Огноо"},{field:"state",title:"Төлөв",has_action:!0},{field:"kind",title:"Өөрчлөлт",has_action:!0},{field:"llc_request",title:"ААН / Төслийн нэр"}],"жагсаалтын_холбоос":"/gov/api/org-request/","хувьсах_талбарууд":[{field:"org",component:g},{field:"theme_name",component:c.a,props:{refreshData:function(){return t.refreshData()}}},{field:"state",action:function(e){return _(e)},action_type:!0},{field:"kind",action:function(e){return w(e)},action_type:!0}],"нэмэлт_талбарууд":[{title:"Шийдвэрлэх",component:l.a,props:{refreshData:function(){return t.refreshData()}}}],is_modal_request_open:!1,custom_query:{}},t.refreshData=t.refreshData.bind(b(t)),t.onChangeItems=t.onChangeItems.bind(b(t)),t.handleSearch=t.handleSearch.bind(b(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this;i.a.getChoices().then((function(t){var n=t.success,a=t.modules,r=t.choices;n&&e.setState({modules:a,choices:r})}))}},{key:"refreshData",value:function(){this.setState({refresh:!this.state.refresh})}},{key:"onChangeItems",value:function(e,t,n){var a,r,o,c=Object();this.state[n].map((function(n,a){n.id==e&&(r=n[t])})),"modules"==n?(o="theme_id",c.package_id=null,c.feature_id=null):"packages"==n&&(o="package_id",c.feature_id=null),this.setState(f((p(a={},t,r),p(a,o,e),a),c))}},{key:"handleSearch",value:function(){var e=this.state,t=e.state,n=e.kind,a=e.theme_id,r=e.package_id,o=e.feature_id,c=Object();t&&(c.state=t),n&&(c.kind=n),a&&(c.theme_id=a),r&&(c.package_id=r),o&&(c.feature_id=o);var l=Object();"theme_id"in c||("package_id"in c&&(delete c.package_id,l.package_id=null),"feature_id"in c&&(delete c.feature_id,l.feature_id=null)),"package_id"in c||"feature_id"in c&&(delete c.feature_id,l.feature_id=null),this.setState(f({custom_query:c},l))}},{key:"render",value:function(){var e=this,t=this.state,n=t.choices,a=t.packages,c=t.features,l=t.modules,i=this.state,u=i.жагсаалтын_холбоос,s=i.талбарууд,f=i.хувьсах_талбарууд,p=i.нэмэлт_талбарууд,m=i.refresh;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:""},"Төлөв"),r.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){return e.setState({state:t.target.value})}},r.a.createElement("option",{value:""},"--- Төлөвөөр хайх ---"),n&&n.length>0?n[0].map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])})):null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:""},"Өөрчлөлт"),r.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){return e.setState({kind:t.target.value})}},r.a.createElement("option",{value:""},"--- Өөрчлөлтөөр хайх ---"),n&&n.length>0?n[1].map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[1])})):null)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:""},"Орон зайн өгөгдөл"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){return e.onChangeItems(t.target.value,"packages","modules")}},r.a.createElement("option",{value:""},"--- Дэд сангаар хайх ---"),l&&l.length>0?l.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})):null)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){return e.onChangeItems(t.target.value,"features","packages")}},r.a.createElement("option",{value:""},"--- Багцаас хайх ---"),a&&a.length>0?a.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})):null)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){return e.setState({feature_id:t.target.value})}},r.a.createElement("option",{value:""},"--- Давхаргаас хайх ---"),c&&c.length>0?c.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})):null)))),r.a.createElement("button",{className:"btn gp-btn-primary d-flex justify-content-center m-3 float-right",onClick:function(){return e.handleSearch()}},"Хайх")),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(o.a,{refresh:m,color:"primary","талбарууд":s,"жагсаалтын_холбоос":u,per_page:20,"уншиж_байх_үед_зурвас":"Хүсэлтүүд уншиж байна","хувьсах_талбарууд":f,"нэмэлт_талбарууд":p,max_data:"open","хайлт":"closed",sort_name:"-created_at",custom_query:this.state.custom_query})))}}])&&m(t.prototype,n),a&&m(t,a),s}(a.Component)},1011:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(0),r=n.n(a),o=n(1e3),c=n(1010);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y(e);if(t){var r=y(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){f(n,e);var t=m(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).state={show_group:!1,values:e.values,fields:[{mn_name:"Төлөв",eng_name:"state"},{mn_name:"Өөрчлөлт",eng_name:"kind"}],collection_of_value:[],is_all_checked:!1},a.showGroup=a.showGroup.bind(h(a)),a.collectAllValue=a.collectAllValue.bind(h(a)),a}return s(n,[{key:"showGroup",value:function(){this.state.values.group&&this.setState({show_group:!this.state.show_group})}},{key:"collectAllValue",value:function(e,t){var n=this.state.collection_of_value;e.target.checked?(t.map((function(e,t){n.push(e)})),this.setState({collection_of_value:n,is_all_checked:!0})):this.setState({collection_of_value:[],is_all_checked:!1})}},{key:"collectValue",value:function(e,t){var n=this.state.collection_of_value;e.target.checked?n.push(t):n.map((function(e,a){t.id==e.id&&n.splice(a,1)})),this.setState({collection_of_value:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.show_group,a=t.fields,l=t.values,i=t.collection_of_value,u=t.is_all_checked,s=l.group,f=l.theme_name,p=l.package_name,m=l.feature_name;return r.a.createElement("div",null,r.a.createElement("a",{role:s?"button":"",className:s?"text-primary":"",onClick:this.showGroup},f," / ",p," / ",m),n&&r.a.createElement("br",null),n?r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.collectAllValue(t,s)}})),r.a.createElement("th",null,"№"),a.map((function(e,t){return r.a.createElement("th",{key:t},e.mn_name)})),r.a.createElement("th",null))),r.a.createElement("tbody",null,s.map((function(t,n){return r.a.createElement("tr",{key:n,htmlFor:n},"ШИНЭ"===t.state||"ХЯНАХ"===t.state?r.a.createElement("td",null,r.a.createElement(v,{collectValue:function(t,n){return e.collectValue(t,n)},value:t,is_all_checked:u,idx:n})):r.a.createElement("td",null),r.a.createElement("th",{htmlFor:n},n+1),a.map((function(e,a){return"state"==e.eng_name?r.a.createElement("td",{key:a,className:Object(c.c)(t[e.eng_name])},t[e.eng_name]):"kind"==e.eng_name?r.a.createElement("td",{key:a,className:Object(c.b)(t[e.eng_name])},t[e.eng_name]):r.a.createElement("td",{key:a},r.a.createElement("label",{htmlFor:n,className:"form-check-label"},t[e.eng_name]))})),r.a.createElement("td",null,r.a.createElement(o.a,{values:t,refreshData:e.props.refreshData})))})))):null,i.length>1?r.a.createElement(o.a,{values:i,button_name:"Олноор шийдвэрлэх",refreshData:this.props.refreshData}):null)}}]),n}(a.Component),v=function(e){f(n,e);var t=m(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).state={is_checked:!1},a.isChecked=a.isChecked.bind(h(a)),a}return s(n,[{key:"isChecked",value:function(e){var t=this.props.value;this.setState({is_checked:e.target.checked}),this.props.collectValue(e,t)}},{key:"componentDidUpdate",value:function(e){e.is_all_checked!==this.props.is_all_checked&&this.setState({is_checked:this.props.is_all_checked})}},{key:"render",value:function(){var e=this,t=this.state.is_checked,n=this.props.idx;return r.a.createElement("input",{id:n,type:"checkbox",checked:t,onChange:function(t){return e.isChecked(t)}})}}]),n}(a.Component)},1012:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return w}));var a=n(0),r=n.n(a),o=n(1130),c=n(1077),l=n(76),i=n(119),u=n(1013);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){var t="";return"ҮҮССЭН"==e?t="шинэ геометр өгөгдөл үүсгэхийг":"ЗАССАН"==e?t="засагдсан геометр өгөгдлийг":"УСТГАСАН"==e&&(t="геометр өгөгдлийг устгахыг"),t},_=function(e){var t=e.form_json,n=e.modalChange,a=e.modalClose,o=e.values,c=e.cancelWarningRequest;return r.a.createElement("div",{className:"col-md-4 overflow-auto text-justify",style:{height:"calc( 90vh - 85px - 15px)"}},n&&!o.llc_request_id?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("button",{className:"btn gp-btn-primary",onClick:function(){return n("reject","fa fa-exclamation-circle","warning","Тохиргоог татгалзах","Та ".concat(g(o.kind)," татгалзахдаа итгэлтэй байна уу?"),!0,"татгалзах",a,c)}},"Татгалзах")),r.a.createElement("div",{className:"ml-auto kindmr-3"},r.a.createElement("button",{className:"btn gp-btn-outline-primary",onClick:function(){return n("approve","fa fa-exclamation-circle","warning","Тохиргоог зөвшөөрөх","Та ".concat(g(o.kind)," зөвшөөрөхдөө итгэлтэй байна уу?"),!0,"зөвшөөрөх",a)}},"Зөвшөөрөх"))):null,n&&r.a.createElement("hr",null),t?t.map((function(e,t){return r.a.createElement("div",{key:t,className:"row my-3"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("label",{className:"col-form-label"},e.property_name)),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("input",{className:"form-control",disabled:!0,value:e.data||"",type:e.value_type}),r.a.createElement("div",{className:"col-form-label "},e.property_definition)))})):null)},w=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(y,t);var n,s,f,p=h(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=p.call(this,e)).state={status:"initial",action_type:"",modal_status:"closed",modal_icon:"fa fa-check-circle",icon_color:"success",title:"",text:"",model_type_icon:"",has_button:!1,action_name:"",modalClose:null,desc:"",ref_in_direct:!0,values:e.values},t.handleOpen=t.handleOpen.bind(b(t)),t.handleClose=t.handleClose.bind(b(t)),t.handleModalOpen=t.handleModalOpen.bind(b(t)),t.handleModalAction=t.handleModalAction.bind(b(t)),t.selectedFeature=t.selectedFeature.bind(b(t)),t.handleRequestApprove=t.handleRequestApprove.bind(b(t)),t.modalChange=t.modalChange.bind(b(t)),t.handleModalClose=t.handleModalClose.bind(b(t)),t.getDesc=t.getDesc.bind(b(t)),t.getRefViewStatus=t.getRefViewStatus.bind(b(t)),t.cancelWarningRequest=t.cancelWarningRequest.bind(b(t)),t}return n=y,(s=[{key:"handleModalOpen",value:function(){var e=this;this.setState({modal_status:"open"},(function(){e.setState({modal_status:"initial"})}))}},{key:"getRequestIds",value:function(e,t){var n,a=[];return(e?[e]:t).map((function(e,t){0==t&&(n=e.feature_id),a.push(e.id)})),{ids:a,feature_id:n}}},{key:"getRefViewStatus",value:function(e,t){"Direct"==e?this.setState({ref_in_direct:t.target.checked}):this.setState({ref_in_direct:!1})}},{key:"handleModalAction",value:function(){var e=this.state,t=e.selected_value,n=e.values,a=e.desc,r=e.action_type,o=e.ref_in_direct,c=this.getRequestIds(t,n),l=c.ids,i=c.feature_id;this.setState({is_loading:!0}),["revoke","reject","dismiss"].includes(r)&&this.handleRequestReject(l,i,a,r),"approve"==r&&this.handleRequestApprove(l,i,o)}},{key:"handleRequestReject",value:function(t,n,a,r){var o=this;u.a.requestReject(t,n,a,r).then((function(t){var n=t.success,a=t.info;n?(o.modalChange("","fa fa-check-circle","success",a,"",!1,"",o.handleModalClose),e.refreshCount()):o.modalChange("","fa fa-times-circle","danger",a,"",!1,"",o.handleModalClose),o.setState({is_loading:!1})})).catch((function(e){o.modalChange("","fa fa-exclamation-circle","warning","Алдаа гарлаа. Обьект олдсонгүй","",!1,"",o.handleModalClose),o.setState({is_loading:!1})}))}},{key:"handleRequestApprove",value:function(t,n,a){var r=this;u.a.requestApprove(t,n,a).then((function(t){var n=t.success,a=t.info;n?(r.modalChange("","fa fa-check-circle","success",a,"",!1,"",r.handleModalClose),e.refreshCount()):r.modalChange("","fa fa-times-circle","danger",a,"",!1,"",r.handleModalClose),r.setState({is_loading:!1})})).catch((function(e){r.modalChange("","fa fa-exclamation-circle","warning","Алдаа гарлаа","",!1,"",r.handleModalClose),r.setState({is_loading:!1})}))}},{key:"componentDidMount",value:function(){"initial"==this.state.status&&this.handleOpen()}},{key:"handleOpen",value:function(){this.setState({status:"open"})}},{key:"handleClose",value:function(){this.setState({status:"closed"}),this.props.modalClose()}},{key:"selectedFeature",value:function(e){var t=this,n=e.selected[0];if(n){var a=this.props.values,r=n.getProperties().id;a.map((function(e,n){e.id==r&&t.setState({form_json:e.form_json,selected_value:e})}))}}},{key:"modalChange",value:function(e,t,n,a,r,o,c,l){var i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:this.handleModalAction;this.setState({action_type:e,modal_icon:t,icon_color:n,title:a,text:r,has_button:o,action_name:c,modalClose:l,modalAction:i}),this.handleModalOpen()}},{key:"handleModalClose",value:function(){this.setState({is_loading:!1}),this.props.refreshData()}},{key:"getDesc",value:function(e){this.state.desc=e.target.value}},{key:"cancelWarningRequest",value:function(){this.modalChange("reject","fa fa-exclamation-circle","warning","Тохиргоог татгалзах",r.a.createElement(E,{getDesc:this.getDesc}),!0,"татгалзах",null)}},{key:"cancelRequest",value:function(){var e=this.props.values;this.modalChange("reject","fa fa-exclamation-circle","warning","Тохиргоог татгалзах","Та ".concat(1==e.length?g(e[0].kind):e.length>1?"сонгосон ".concat(e.length," геометр өгөгдлөө"):null,"\n            татгалзахдаа итгэлтэй байна уу?"),!0,"татгалзах",null,this.cancelWarningRequest)}},{key:"render",value:function(){var e=this,t=this.state.form_json,n=this.state,u=n.is_loading,s=n.status,f=n.selected_value,p=n.values,m=this.props.hide_btn,d="modal fade"+("initial"==s?" d-block":"")+("open"==s?" show d-block":"")+("closing"==s?" d-block":"")+("closed"==s?" d-none":""),h="modal-backdrop fade"+("open"==s?" show":"")+("closed"==s?" d-none":"");return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:d+" ml-3 mr-3 mb-3 mt-3 pl-3 pr-3 pb-3 pt-3 rounded text-wrap",style:{height:"calc( 103vh - 85px - 15px)"}},r.a.createElement("div",{className:"col-md-10 d-flex justify-content-center container"},r.a.createElement("div",{className:"modal-content animated row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row mt-2",style:{background:"white"}},r.a.createElement("div",{className:"col-md-11"},m?r.a.createElement("h5",{className:"text-center text-justify"},"Хүсэлт шийдвэрлэгдсэн "):r.a.createElement("h5",{className:"text-center text-justify"},"Хүсэлт шийдвэрлэx")),r.a.createElement("div",{className:"col-md-1",onClick:function(){return e.handleClose()}},r.a.createElement("button",{type:"button",className:"close float-right","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"×")))),p&&p.length>0?p.map((function(n,a){var c=n.form_json;if(a==p.length-1)return r.a.createElement("div",{key:a,className:"row"},1==p.length?c&&r.a.createElement(_,{form_json:c}):t&&r.a.createElement(_,{form_json:t,cancelWarningRequest:function(){return e.cancelWarningRequest()},modalChange:e.modalChange,modalClose:e.modalClose,values:f}),r.a.createElement("div",{className:t||1==p.length&&c?"col-md-8":"col-md-12"},r.a.createElement(o.a,{values:p,selectedFeature:e.selectedFeature})))})):null,m?r.a.createElement("div",{className:"row my-2 mr-1 float-right"}):r.a.createElement("div",{className:"row my-2 mr-1 float-right"},p.length>0&&!p[0].llc_request_id?r.a.createElement("button",{type:"button mr-2 ml-2",onClick:function(){return e.cancelRequest()},className:"btn gp-btn-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-check-square-o"},"Татгалзах")):r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button mr-2 ml-2",onClick:function(){return e.modalChange("revoke","fa fa-exclamation-circle","warning","Цуцлах",r.a.createElement(E,{getDesc:e.getDesc}),!0,"цуцлах",null)},className:"btn btn-danger waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-times"},"Цуцлах")),r.a.createElement("button",{type:"button mr-2 ml-2",onClick:function(){return e.modalChange("dismiss","fa fa-exclamation-circle","warning","Буцаах",r.a.createElement(E,{getDesc:e.getDesc}),!0,"буцаах",null)},className:"btn gp-btn-primary waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-check-square-o"},"Буцаах"))),r.a.createElement("button",{type:"button mr-2 ml-2",onClick:function(){return e.modalChange("approve","fa fa-exclamation-circle","warning","Тохиргоог зөвшөөрөх",r.a.createElement(c.a,{getRefViewStatus:e.getRefViewStatus,values:p,ref_in_direct:e.state.ref_in_direct}),!0,"зөвшөөрөх",null)},className:"btn gp-btn-outline-primary waves-effect waves-light ml-2"},r.a.createElement("i",{className:"fa fa-check"},"Зөвшөөрөх"))),r.a.createElement(i.a,{is_loading:u,text:"Хүсэлтийг шалгаж байна түр хүлээнэ үү..."})))),r.a.createElement(l.a,{modal_status:this.state.modal_status,modal_icon:this.state.modal_icon,icon_color:this.state.icon_color,title:this.state.title,has_button:this.state.has_button,text:this.state.text,modalAction:this.state.modalAction,actionNameDelete:this.state.action_name,modalClose:this.state.modalClose})),r.a.createElement("div",{className:h}))}}])&&m(n.prototype,s),f&&m(n,f),y}(a.Component);function E(e){var t=f(Object(a.useState)(""),2),n=(t[0],t[1]),o=f(Object(a.useState)(!1),2),c=o[0],l=o[1];return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"desc"},"Тайлбар:"),r.a.createElement("textarea",{className:"form-control ".concat(c?"is-invalid":""),id:"desc",onChange:function(t){var a=t.target.value;l(!a),n(a),e.getDesc(t)}}),c&&r.a.createElement("span",{className:"invalid-feedback"},"Тайлбар оруулна уу"))}}).call(this,n(50))},1013:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(53);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={requestReject:function(e,t,n,r){var c=o(o({},Object(a.b)()),{},{body:JSON.stringify({ids:e,feature_id:t,desc:n,action_type:r})});return fetch("".concat(i,"/reject/"),c).then(a.c)},requestApprove:function(e,t,n){var r=o(o({},Object(a.b)()),{},{body:JSON.stringify({ids:e,feature_id:t,ref_in_direct:n})});return fetch("".concat(i,"/approve/"),r).then(a.c)},getChoices:function(){var e=o({},Object(a.a)());return fetch("".concat(i,"/get_choices/"),e).then(a.c)}},i="/gov/api/org-request"},1075:function(e,t,n){var a=n(70),r=n(1076);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},1076:function(e,t,n){(t=n(71)(!1)).push([e.i,".reaquest #map{\n    width: auto;\n    height: calc( 90vh - 85px - 15px);\n}\n\n\n.⚙-toggle-swipe-button {\n    padding: 1px 5px;\n    font-size: 15px;\n    top: 56px;\n    right: 7px;\n    background-color: rgba(0,60,136,0.5);\n    position: absolute;\n    border-radius: 3px;\n    width: 25px;\n    height: 25px;\n}\n.⚙-toggle-swipe-button:active{\n    background-color: rgba(0,60,136,0.7);\n}\n.⚙-toggle-swipe-button:hover{\n    background-color: rgba(0,60,136,0.7);\n}\n",""]),e.exports=t},1077:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(1012),r=n(0),o=n.n(r);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,e);var t,n,c,f=s(p);function p(){return l(this,p),f.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.values,c=t.ref_in_direct;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"col-md-12 d-flex justify-content-between"},o.a.createElement("div",{className:"col-md-4 my-auto"},o.a.createElement("label",null,"View шинэчлэлт")),o.a.createElement("div",{className:"col-md-8 ml-5 mt-3 "},o.a.createElement("div",{className:"custom-control custom-radio  "},o.a.createElement("input",{type:"radio",className:"custom-control-input ",onClick:function(t){e.props.getRefViewStatus("Direct",t)},checked:c,id:"directRef",name:"radio-stacked",required:!0}),o.a.createElement("label",{className:"custom-control-label float-left pt-1",htmlFor:"directRef"},"Шууд шинэчлэх")),o.a.createElement("div",{className:"custom-control custom-radio  mb-3"},o.a.createElement("input",{type:"radio",className:"custom-control-input ",onClick:function(t){e.props.getRefViewStatus("24Hour",t)},id:"24HourRef",name:"radio-stacked",required:!0}),o.a.createElement("label",{className:"custom-control-label float-left pt-1",htmlFor:"24HourRef"},"24 цагийн дотор шинэчлэх")))),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("small",null,"Та ".concat(1==n.length?Object(a.b)(n[0].kind):n.length>1?"сонгосон ".concat(n.length," геометр өгөгдлөө"):null,"\n                        зөвшөөрөхдөө итгэлтэй байна уу?"))))}}])&&i(t.prototype,n),c&&i(t,c),p}(r.Component)},1130:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var a=n(0),r=n.n(a),o=(n(245),n(580)),c=n(304),l=n(303),i=(n(1075),n(130)),u=n(198),s=n(224),f=n(300),p=n(972),m=n(197),d=n(68),h=n(196),y=n(531),b=n(933);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E(e);if(t){var r=E(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,e);var t=_(n);function n(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=e||{},o=(a=t.call(this,{element:document.createElement("div"),target:r.target})).element;o.className="⚙-toggle-swipe-button";var c=document.createElement("a");c.setAttribute("data-toggle","tooltip"),c.setAttribute("data-placement","right"),c.setAttribute("title","Layer swipd"),c.setAttribute("href","#"),o.setAttribute("id","⚙-toggle-swipe-button-id");var l=document.createElement("i");return l.setAttribute("aria-hidden","true"),l.className="fa fa-superpowers text-white",c.appendChild(l),o.addEventListener("click",(function(e){e.preventDefault(),r.swipeButton()})),o.appendChild(c),a}return n}(n(57).a);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=x(e);if(t){var r=x(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(g,e);var t,n,a,v=C(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=v.call(this,e)).state={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857",is_layer_swipe:!1,last_layer:null},t.loadMapData=t.loadMapData.bind(N(t)),t.loadMap=t.loadMap.bind(N(t)),t.swipeButton=t.swipeButton.bind(N(t)),t.layerSwipe=t.layerSwipe.bind(N(t)),t}return t=g,(n=[{key:"componentDidMount",value:function(){this.loadMap(),this.loadMapData()}},{key:"loadMap",value:function(){var e=this,t=new o.a({layers:[new d.a({source:new p.a})],target:"map",view:new c.a({center:[11461613.630815497,5878656.0228370065],zoom:5.041301562246971})});t.addControl(new k({swipeButton:this.swipeButton})),this.map=t;var n=new y.a({hitTolerance:20});t.addInteraction(n),n.on("select",(function(t){return e.props.selectedFeature(t)})),1==this.props.values.length&&t.removeInteraction(n)}},{key:"loadMapData",value:function(){var e=this,t={MultiPolygon:new i.c({stroke:new u.a({color:"green",width:2}),fill:new s.a({color:"rgba(0,255,0,0.3)"})}),Polygon:new i.c({stroke:new u.a({color:"green",width:2}),fill:new s.a({color:"rgba(0,255,0,0.3)"})}),Point:new i.c({image:new f.a({radius:5,fill:new s.a({color:"green"})})}),LineString:new i.c({stroke:new u.a({color:"green",width:2})}),MultiLineString:new i.c({stroke:new u.a({color:"green",width:2})}),MultiPoint:new i.c({image:new f.a({radius:5,fill:new s.a({color:"green"})})})},n={MultiPolygon:new i.c({stroke:new u.a({color:"red",width:2}),fill:new s.a({color:"rgba(255,0,0,0.3)"})}),Polygon:new i.c({stroke:new u.a({color:"red",width:2}),fill:new s.a({color:"rgba(255,0,0,0.3)"})}),Point:new i.c({image:new f.a({radius:5,fill:new s.a({color:"blue"})})}),LineString:new i.c({stroke:new u.a({color:"red",width:2})}),MultiLineString:new i.c({stroke:new u.a({color:"red",width:2})}),MultiPoint:new i.c({image:new f.a({radius:5,fill:new s.a({color:"red"})})})},a=this.props.values,r=0;a.map((function(a,o){var c=a.id,i=a.geo_json;if(i.features){if(i.features[0]&&Object.keys(i.features[0]).length>0){var u=(new l.a).readFeatures(i.features[0],{dataProjection:e.state.dataProjection,featureProjection:e.state.featureProjection});u[0].setProperties({id:c});var s=new m.a({features:u}),f=new h.a({source:s,style:function(e){return t[e.getGeometry().getType()]}});e.map.addLayer(f)}if(i.features[1]&&Object.keys(i.features[1]).length>0){var p=(new l.a).readFeatures(i.features[1],{dataProjection:e.state.dataProjection,featureProjection:e.state.featureProjection}),d=new m.a({features:p}),y=new h.a({source:d,style:function(e){return n[e.getGeometry().getType()]}});r=1,e.map.addLayer(y),e.setState({last_layer:y})}0!=r?e.map.getView().fit(p[0].getGeometry(),{padding:[300,300,300,300]}):e.map.getView().fit(u[0].getGeometry(),{padding:[300,300,300,300]})}}))}},{key:"layerSwipe",value:function(e){var t=this;if(e){var n=this.state.last_layer;(a=document.getElementById("swipe")).value=50,n&&(n.on("prerender",(function(e){var n=e.context,r=t.map.getSize(),o=r[0]*(a.value/100),c=Object(b.a)(e,[o,0]),l=Object(b.a)(e,[r[0],0]),i=Object(b.a)(e,[o,r[1]]),u=Object(b.a)(e,r);n.save(),n.beginPath(),n.moveTo(c[0],c[1]),n.lineTo(i[0],i[1]),n.lineTo(u[0],u[1]),n.lineTo(l[0],l[1]),n.closePath(),n.clip()})),n.on("postrender",(function(e){e.context.restore()})),a.addEventListener("input",(function(){t.map.render()}),!1))}else{var a;(a=document.getElementById("swipe")).value=0}}},{key:"swipeButton",value:function(){this.state.is_layer_swipe?(this.setState({is_layer_swipe:!1}),this.layerSwipe(!1)):(this.setState({is_layer_swipe:!0}),this.layerSwipe(!0))}},{key:"render",value:function(){var e=this.state.is_layer_swipe;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 px-0 reaquest"},r.a.createElement("div",{id:"map"}),r.a.createElement("input",{className:e?"":"d-none",id:"swipe",type:"range",style:{width:"100%"}}))))}}])&&j(t.prototype,n),a&&j(t,a),g}(a.Component)}}]);